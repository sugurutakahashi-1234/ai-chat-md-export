# iOSタグ名の運用方法

Date: 2023-06-26

---

## 👤 User
*2023-06-26 15:01:29*

iOSアプリ開発をしていて、github上でリリースタグを作成したい。アプリバージョンを変えるとアプリ審査があるため、それも考慮して、どういうタグ名で運用していくのがいいか教えて欲しい

---

## 🤖 Assistant
*2023-06-26 15:02:26*

GitHubでのリリースタグを作成するとき、以下のような命名規則を使用することを検討できます。

1. **Semantic Versioning (SemVer)**: これは一般的なソフトウェアバージョニング規則で、`major.minor.patch`の形式で表現されます。たとえば、`1.0.0`や`2.3.4`のような形式です。これは主要なバージョンアップ、新機能の追加、バグ修正など、アップデートの性質に基づいてバージョンを判断します。

2. **日付ベースのバージョニング**: `YYYY.MM.DD` の形式で日付に基づいたバージョンを作成します。これは、特定の日付にリリースされたバージョンを明確に示すのに便利です。

3. **ビルド番号ベースのバージョニング**: 連続的なビルド番号（例：build-001, build-002）を使用します。これは頻繁にビルドをリリースする場合に便利です。

あなたの場合、iOSのアプリケーションではApp Storeの審査がありますから、以下の二つのバージョン情報を組み合わせるのが良いと思います。

- **アプリのバージョン**: これはユーザに公開され、App Storeで表示されるバージョン番号です。これはSemantic Versioningの規則に従うと良いでしょう。主要な変更がある場合はメジャーバージョンを上げ、新機能追加ではマイナーバージョンを上げ、バグ修正ではパッチバージョンを上げます。

- **ビルド番号**: これは内部的なもので、各リリース（または各ビルド）に一意の番号を割り当てます。これは日付ベースのバージョニングやビルド番号ベースのバージョニングを使用すると良いでしょう。これにより、特定のビルドがいつ作成されたのか、または順序を追うことができます。

GitHubのタグ名には、これらの情報を含めることができます。例えば、アプリのバージョンが `1.2.0`で、ビルド番号が`2023.06.26`の場合、タグは `1.2.0-2023.06.26` のようになります。あるいは、ビルド番号が単に増加する整数（例：build-001, build-002）の場合、`1.2.0-build-001` のようになります

---

## 👤 User
*2023-06-26 15:02:39*

Semantic Versioning (SemVer)に基づきたい。
0.1.0-uat-1みたいなタグ名はどうか？

---

## 🤖 Assistant
*2023-06-26 15:03:16*

Semantic Versioning（SemVer）の基本的なフォーマットは`MAJOR.MINOR.PATCH`ですが、プレリリースやビルドメタデータを表すためにハイフンやプラス記号で拡張することができます。

あなたが提案した`0.1.0-uat-1`のフォーマットは、これに従っています。これは、`0.1.0`バージョンの最初のユーザー受け入れテスト（UAT）ビルドを表すと解釈できます。

ただし、これが実際のリリースビルドではなくテストビルドであることを明示的に示すために、`-uat-`の部分を含めることは良い考えです。

ただし、これらのバージョン番号は、開発チーム内で統一された理解と規則があることが重要です。タグ名が何を意味するのか、どのように進化するのか、その規則がチーム内で共有されていることが重要です。

また、タグの使用方法はGitHubやその他のツールとの連携にも影響を及ぼす可能性があります。例えば、自動デプロイメントを設定する場合、特定のタグ形式をトリガーとすることが可能です。そのため、タグの命名規則を決定する際には、ツールの利用状況や自動化の要件も考慮に入れることをお勧めします。

---

## 👤 User
*2023-06-26 15:03:25*

プラスとハイフンのどっちが主流か？アプリのバージョンは0.1.0なんだ

---

## 🤖 Assistant
*2023-06-26 15:04:12*

Semantic Versioning (SemVer)に従う場合、基本的なフォーマットは `MAJOR.MINOR.PATCH` で、その後にプレリリースやビルドメタデータを示すための接尾辞が続きます。

- プレリリースバージョンはハイフン（`-`）で示されます。たとえば、`1.0.0-alpha`のようになります。

- ビルドメタデータはプラス記号（`+`）で示されます。たとえば、`1.0.0+20130313144700`のようになります。

したがって、バージョンが `0.1.0` で、これがテストビルドや特定のビルドメタデータを示すものであれば、適切な接尾辞を使って表現することができます。たとえば、最初のユーザー受け入れテスト（UAT）ビルドである場合、`0.1.0-uat.1` や `0.1.0+uat.1` のようにすることができます。

しかし、プレリリースとビルドメタデータのどちらを使用するべきかは、そのバージョンが本番環境で使用されるか（これはプレリリースではない）、それともまだ開発中またはテスト中であるか（これはプレリリースである）によります。

基本的に、"UAT"のような接尾辞を含むバージョンはプレリリースと見なすことができますので、ハイフンを使用するのが適切でしょう。したがって、`0.1.0-uat.1` のような形式が好ましいと言えます。ただし、これらの規則はあくまでガイドラインであり、あなたのチームやプロジェクトの具体的なニーズによります。重要なのは、規則が一貫して適用され、全ての関係者に理解されていることです。

---

## 👤 User
*2023-06-26 15:04:29*

0.1.0-uat.0 と 0.1.0-uat.1 のどちらがいいか？

---

## 🤖 Assistant
*2023-06-26 15:04:55*

一般的に、バージョニングでは、0以外の最初の数値が最初のリリースまたはイテレーションを示します。したがって、テストビルドを開始する際には `0.1.0-uat.1` を使用することをお勧めします。

なぜなら、`0.1.0-uat.0` はリリース前またはテスト前の状態を示すことが一般的であり、`0.1.0-uat.1` は最初のUAT（ユーザー受け入れテスト）ビルドを示します。それ以降のビルドでは、`0.1.0-uat.2`、`0.1.0-uat.3` と続けることができます。

しかし、これは一般的な規則であり、バージョニング規則はプロジェクトやチームのニーズに合わせて調整することが可能です。重要なのは、使用する規則が明確で一貫していること、そして関係者全員がその意味を理解していることです。

---

## 👤 User
*2023-06-26 15:05:42*

外部テストの場合はどうすればいいか？

---

## 🤖 Assistant
*2023-06-26 15:06:07*

外部テスト（ベータテストなど）の場合でも、SemVer（Semantic Versioning）に基づいたバージョニングが依然として有用です。

テストがUAT（User Acceptance Testing）からベータテストなどの別のフェーズに移行したことを示すために、接尾語を変更することができます。たとえば、最初のベータテストビルドであれば `0.1.0-beta.1` とすることができます。その後のビルドに対しては、`0.1.0-beta.2`、`0.1.0-beta.3` といった形でインクリメントしていきます。

ベータテストが完了し、正式にリリースする準備が整ったら、接尾語を削除して `0.1.0` とすることができます。

これにより、テストのフェーズとビルドの進行状況が明確になります。ただし、ここでも重要なのは、これらのバージョニング規則が全ての関係者に理解され、一貫して適用されていることです。

---

## 👤 User
*2023-06-26 15:06:38*

alphaとbetaはどちらが先に来るか？

---

## 🤖 Assistant
*2023-06-26 15:07:07*

一般的なソフトウェア開発のライフサイクルでは、"alpha"は"beta"よりも先に来ます。

- **Alpha（アルファ）**：このフェーズでは、主要な機能がほとんどまたはすべて実装され、開発者内部での初期テストが行われます。アルファ版は通常、多くのバグや問題を含んでいる可能性があります。そのため、一般的には内部テストのみで、一部のケースでは限定的なユーザーに公開されることもあります。

- **Beta（ベータ）**：アルファフェーズの後に続くこのフェーズでは、ソフトウェアはほぼ完成し、公開テスト（外部ユーザーを対象としたテスト）の段階に入ります。ベータ版では、主要なバグが修正され、利用可能な機能がほぼ完成していますが、まだ未知の問題が存在する可能性があります。

したがって、バージョニングにおいては、`0.1.0-alpha.1` が最初のアルファテストビルドを示し、`0.1.0-beta.1` が最初のベータテストビルドを示すことになります。

---

## 👤 User
*2023-06-26 15:10:45*

基本developブランチでそのタグをつけていこうと思うんだけど、hotfixがあった場合はどうすればいいかな？

---

## 🤖 Assistant
*2023-06-26 15:11:14*

Gitフローを使用する場合、通常は新たな `hotfix` ブランチを作成します。このブランチは通常 `master`（または `main`）または `production` ブランチから分岐し、緊急修正を行った後に、再び `master`（または `main`）と `develop` の両方にマージされます。 

それに伴うバージョンタグは、この修正が行われたバージョンに基づきます。たとえば、現在のライブバージョンが `1.2.3` で、これに対するホットフィックスが必要な場合、修正が完了したら `1.2.4` などの新しいバージョンタグを作成します。

また、具体的な状況に応じてタグに接尾辞を追加することも考えられます。たとえば、緊急修正が開発中の `1.3.0` バージョンに影響する場合、`1.3.0-hotfix.1` のような形式が考えられます。

どの方法を選択するかは、チームの作業フローやプロジェクトのニーズによります。重要なのは、バージョンタグが修正の内容とタイミングを正確に反映し、そのルールが一貫して適用されていることです。

---
