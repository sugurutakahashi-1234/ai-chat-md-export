# Swiftã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¨ç¶™æ‰¿

æ—¥ä»˜: 2023-09-15

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/9/15 16:08:55*

ä»¥ä¸‹ã‚’Qiitaã®è¨˜äº‹ã«ã—ã¦æ¬²ã—ã„

// ä¼ãˆãŸã„ã“ã¨
// - ç¶™æ‰¿å…ƒã® class ã® convenience initializer ã¯ç¶™æ‰¿å…ˆã§ super.init() ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ããªã„
// - ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®è¨­å®šå€¤ã®å„ªå…ˆåº¦ã¯  convenience init &gt; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° 
// - ä»¥ä¸‹ã®å ´åˆã¯ super.init() ã®è¨˜è¿°ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼ˆã¨ã„ã†ã‚ˆã‚Šã¯å‹æ‰‹ã« super.init() ã§å‘¼ã°ã‚Œã¦ã—ã¾ã†ï¼‰
//   - ç¶™æ‰¿å…ƒã® class ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å¼•æ•°ãŒãªã„ã¨ã
//   - ã™ã¹ã¦ã®ç¶™æ‰¿å…ƒã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å¼•æ•°ã‚’è¨­å®šã—ã¦ã„ã‚‹ã¨ã
//   - â€» ãŸã ã—ã€å¼•æ•°ãªã—ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’ç”¨æ„ã—ã¦ã‚‚ã€ä»–ã«ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’è¨­å®šã—ãŸã‚Šã€convenience initializer ã‚’ç”¨æ„ã—ãŸå ´åˆ

// ãã‚‚ãã‚‚ Swift ã¯ class ã®å¤šé‡ç¶™æ‰¿ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ã€ã¤ã¾ã‚Šã€ãªã‚‹ã¹ããƒ—ãƒ­ãƒˆã‚³ãƒ«ã§è¡¨ç¾ã—ã‚ˆã†ã¨ã„ã†ã“ã¨ãªã®ã§ã€å¤šé‡ç¶™æ‰¿ã™ã‚‹å‰ã«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§è§£æ±ºã§ããªã„ã‹ã‚’æ¤œè¨ã—ãŸæ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
// â†’ `super.init()` ãŒå‡ºã¦ããŸæ™‚ç‚¹ã§ã€ãã‚Œã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§æ›¸ãã“ã¨ãŒã§ããªã„ã‹ã‚’è€ƒãˆãŸæ–¹ãŒã‚ˆã•ãã†


// ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã¯ convenience init ã§æ›¸ãç›´ã™ã“ã¨ãŒã§ãã‚‹
// (1) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®å ´åˆ
class DefaultHogeClass {
    var moge: Int
    var fuga: Int

    init(moge: Int = 0, fuga: Int = 0) {
        self.moge = moge
        self.fuga = fuga
    }
}

// ã‚„ã‚ŠãŸã„ã®ã¯ä»¥ä¸‹ã®2ã¤
let defaultHogeClass1: DefaultHogeClass = .init() // moge: 0, fuga: 0
let defaultHogeClass2: DefaultHogeClass = .init(moge: 1, fuga: 2) // moge: 1, fuga: 2

// ä»¥ä¸‹ã¯ã§ãã¦ã‚‚å¬‰ã—ããªã„ HogeClass ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚º
let defaultHogeClass3: DefaultHogeClass = .init(moge: 1) // moge: 1, fuga: 0
let defaultHogeClass4: DefaultHogeClass = .init(fuga: 2) // moge: 0, fuga: 2

// ä¸Šè¨˜ã®ã‚ˆã†ã«ã€æ„å›³ã¨ã¯ç•°ãªã‚‹ HogeClass ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ãŒå­˜åœ¨ã—ã¦ã€äºˆæœŸã›ã¬ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚ºãŒã†ã¾ã‚Œã¦ã—ã¾ã†
// ç‰¹ã«ã€å¤šãã®å¼•æ•°ã‚’ã¨ã‚‹ã‚ˆã†ãª init ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’è¨­å®šã—ã¦ã„ã‚‹ã¨ã€æŠœã‘ã«æ°—ã¥ãã«ãã„


// (2) convenience init ã®å ´åˆ
class ConvenienceHogeClass {
    var moge: Int
    var fuga: Int
    
    init(moge: Int, fuga: Int) {
        self.moge = moge
        self.fuga = fuga
    }
    
    convenience init() {
        self.init(moge: 0, fuga: 0)
    }
}

////// ã‚„ã‚ŠãŸã„ã®ã¯ä»¥ä¸‹ã®2ã¤
//let hogeClass1: ConvenienceHogeClass = .init() // moge: 0, fuga: 0
//let hogeClass2: ConvenienceHogeClass = .init(moge: 1, fuga: 2) // moge: 1, fuga: 2
//
//// ä»¥ä¸‹ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
////let hogeClass3: ConvenienceHogeClass = .init(moge: 1) // âŒ Missing argument for parameter 'fuga' in call
////let hogeClass4: ConvenienceHogeClass = .init(fuga: 2) // âŒ Missing argument for parameter 'fuga' in call


class DoubleInitHogeClass {
    var moge: Int
    var fuga: Int
    
    init(moge: Int, fuga: Int) {
        self.moge = moge
        self.fuga = fuga
    }

    init() {
        self.moge = 0
        self.fuga = 0
    }
}


//// ã‚„ã‚ŠãŸã„ã®ã¯ä»¥ä¸‹ã®2ã¤
let doubleInitHogeClass1: DoubleInitHogeClass = .init() // moge: 0, fuga: 0
let doubleInitHogeClass2: DoubleInitHogeClass = .init(moge: 1, fuga: 2) // moge: 1, fuga: 2

// ã‚ã‚Œã€ã€ã€ã©ã£ã¡ã§ã‚‚ã‚ˆãã­ï¼Ÿ

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
//class SubDoubleInitHogeClass: DoubleInitHogeClass {
//    var piyo: Int
//
//    init(piyo: Int) {
//        self.piyo = piyo
//    } // âŒ 'super.init' isn't called on all paths before returning from initializer
//}

class SubDoubleInitHogeClass1: DoubleInitHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo

        // print("moge: \\(self.moge)") // âŒ 'self' used in property access 'moge' before 'super.init' call
        // print("fuga: \\(self.fuga)") // âŒ 'self' used in property access 'fuga' before 'super.init' call

        super.init(moge: 1, fuga: 2)

        print("moge: \\(self.moge)") // moge: 1
        print("fuga: \\(self.fuga)") // fuga: 2
    }
}

class SubDoubleInitHogeClass2: DoubleInitHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo

        // print("moge: \\(self.moge)") // âŒ 'self' used in property access 'moge' before 'super.init' call
        // print("fuga: \\(self.fuga)") // âŒ 'self' used in property access 'fuga' before 'super.init' call

        super.init()

        print("moge: \\(self.moge)") // moge: 0
        print("fuga: \\(self.fuga)") // fuga: 0
    }
}

// ä»¥ä¸‹ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
//class SubConvenienceHogeClass: ConvenienceHogeClass {
//    var piyo: Int
//
//    init(piyo: Int) {
//        self.piyo = piyo
//    } // âŒ 'super.init' isn't called on all paths before returning from initializer
//}

// ã©ã¡ã‚‰ã¨ã‚‚OK


class SubConvenienceHogeClass1: ConvenienceHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo

        // print("moge: \\(self.moge)") // âŒ 'self' used in property access 'moge' before 'super.init' call
        // print("fuga: \\(self.fuga)") // âŒ 'self' used in property access 'fuga' before 'super.init' call

        super.init(moge: 1, fuga: 2)
        
        print("moge: \\(self.moge)") // moge: 1
        print("fuga: \\(self.fuga)") // fuga: 2
    }
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
//class SubConvenienceHogeClass2: ConvenienceHogeClass {
//    var piyo: Int
//
//    init(piyo: Int) {
//        self.piyo = piyo
//        super.init() // âŒ Must call a designated initializer of the superclass 'ConvenienceHogeClass'
//    }
//}

// ç¶™æ‰¿ã•ã›ã‚‹å ´åˆã¯ convenience initializer å‘¼ã¹ãªã„
// â†’ convenience initializer ã¯ã€ã‚ãã¾ã§ã‚‚ãã® class é™å®šã§ã®ç°¡æ˜“çš„ãªã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§ã‚ã‚‹

// convenience ã§ã¯ãªãã€ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’è¤‡æ•°æŒã¤å ´åˆã¯ã€ãã®ã‚¯ãƒ©ã‚¹ã®ä»•æ§˜ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã“ã¨ã«ãªã‚‹ï¼ˆinitã®åˆæœŸå€¤ã‚’å¤–éƒ¨ã‹ã‚‰æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒè¤‡æ•°ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ï¼‰

// ã“ã‚Œã¯æ€’ã‚‰ãªã‚Œãªã„!!
class SubDefaultHogeClass: DefaultHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo
    }
}

// ãªã‚“ã§ï¼Ÿ

// moge ã¨ fuga ã®ä¸¡æ–¹ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã¨ã£ã¦ã„ãŸã®ã‚’ fuga ã ã‘ã«ã™ã‚‹

class DefaultHogeClass2 {
    var moge: Int
    var fuga: Int

    init(moge: Int, fuga: Int = 0) {
        self.moge = moge
        self.fuga = fuga
    }
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
//class SubDefaultHogeClass2: DefaultHogeClass2 {
//    var piyo: Int
//
//    init(piyo: Int) {
//        self.piyo = piyo
//    } // 'super.init' isn't called on all paths before returning from initializer
//}

// ã©ã†ã‚„ã‚‰ã™ã¹ã¦ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å¼•æ•°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒè¨­å®šã—ã¦ã„ã‚‹å ´åˆã®ã¿ã€ãã® super class ã‚’ç¶™æ‰¿ã—ãŸã¨ãã« super.init ã®çœç•¥ãŒå¯èƒ½ã«ãªã‚‹ï¼ˆã¨ã„ã†ã‚ˆã‚Šã‚‚ã€å‹æ‰‹ã« super.init() ã®å‡¦ç†ã‚’è¡Œã†ã‚‰ã—ã„ï¼‰

class DefaultHogeClass3 {
    var moge: Int
    var fuga: Int

    init(moge: Int, fuga: Int) {
        self.moge = moge
        self.fuga = fuga
    }
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
//class SubDefaultHogeClass3: DefaultHogeClass3 {
//    var piyo: Int
//
//    init(piyo: Int) {
//        self.piyo = piyo
//    } // 'super.init' isn't called on all paths before returning from initializer
//}

class DefaultHogeClass4 {
    var moge: Int = 0
    var fuga: Int = 0
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ï¼
class SubDefaultHogeClass4: DefaultHogeClass4 {
    var piyo: Int

    init(piyo: Int) {
        self.piyo = piyo
    } // 'super.init' isn't called on all paths before returning from initializer
}


class DefaultHogeClass4\_2 {
    var moge: Int
    var fuga: Int
    
    init() {
        moge = 0
        fuga = 0
    }
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ï¼
class SubDefaultHogeClass4\_2: DefaultHogeClass4\_2 {
    var piyo: Int

    init(piyo: Int) {
        self.piyo = piyo
    } // 'super.init' isn't called on all paths before returning from initializer
}


class SubDefaultHogeClass5: DefaultHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo

        // print("moge: \\(self.moge)") // âŒ 'self' used in property access 'moge' before 'super.init' call
        // print("fuga: \\(self.fuga)") // âŒ 'self' used in property access 'fuga' before 'super.init' call

        super.init(moge: 1, fuga: 2)

        print("moge: \\(self.moge)") // moge: 1
        print("fuga: \\(self.fuga)") // fuga: 2
    }
}



class SubDefaultHogeClass6: DefaultHogeClass {
    var piyo: Int
    
    init(piyo: Int) {
        self.piyo = piyo

        // print("moge: \\(self.moge)") // âŒ 'self' used in property access 'moge' before 'super.init' call
        // print("fuga: \\(self.fuga)") // âŒ 'self' used in property access 'fuga' before 'super.init' call

        super.init()

        print("moge: \\(self.moge)") // moge: 0
        print("fuga: \\(self.fuga)") // fuga: 0
    }
}



// (2) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ vs ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° vs convenience init
class ConvenienceHogeClassHogeHoge {
    var moge: Int = 0
    var fuga: Int = 0
    
    init(moge: Int = 1, fuga: Int = 2) {
        self.moge = moge
        self.fuga = fuga
    }
    
    convenience init() {
        self.init(moge: 3, fuga: 4)
    }
}

//
let piyo = ConvenienceHogeClassHogeHoge()
print(piyo.moge) // ã‚³ãƒ³ãƒ“ãƒ‹ã‚¨ãƒ³ã‚¹initãŒå„ªå…ˆã•ã‚Œã‚‹

// å„ªå…ˆåº¦ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° &gt; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è©±ã¯ã“ã¡ã‚‰ã§å®Ÿé¨“
// ã¡ãªã¿ã«å„ªå…ˆåº¦ã¯ convenience init &gt; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° &gt; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤


struct HogeStruct {
    var moge: Int
    var fuga: Int

    init(moge: Int, fuga: Int) {
        self.moge = moge
        self.fuga = fuga
    }
    
//    convenience init() { // âŒ Initializers in structs are not marked with 'convenience'
//        self.init(moge: 0, fuga: 0)
//    }

    init() {
        self.init(moge: 0, fuga: 0)
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/9/15 16:10:04*

## Swiftã«ãŠã‘ã‚‹`super.init()`ã«ã¤ã„ã¦

### 1. `convenience initializer` ã¨ `super.init()`
ç¶™æ‰¿å…ƒã® class ã® convenience initializer ã¯ç¶™æ‰¿å…ˆã§ `super.init()` ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ããªã„ã€‚ã“ã‚Œã¯ã€convenience initializerãŒã€ãã®classé™å®šã§ã®ç°¡æ˜“çš„ãªã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚

### 2. ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®è¨­å®šå€¤ã®å„ªå…ˆåº¦
ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®è¨­å®šå€¤ã®å„ªå…ˆåº¦ã¯ã€`convenience init`ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚ˆã‚Šã‚‚é«˜ã„ã€‚

### 3. `super.init()`ã®çœç•¥
ä»¥ä¸‹ã®å ´åˆã¯ `super.init()` ã®è¨˜è¿°ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

- ç¶™æ‰¿å…ƒã® class ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å¼•æ•°ãŒãªã„ã¨ã
- ã™ã¹ã¦ã®ç¶™æ‰¿å…ƒã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å¼•æ•°ã‚’è¨­å®šã—ã¦ã„ã‚‹ã¨ã

ãŸã ã—ã€å¼•æ•°ãªã—ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’ç”¨æ„ã—ã¦ã‚‚ã€ä»–ã«ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’è¨­å®šã—ãŸã‚Šã€convenience initializer ã‚’ç”¨æ„ã—ãŸå ´åˆã¯ä¾‹å¤–ã§ã™ã€‚

### 4. Swiftã¨å¤šé‡ç¶™æ‰¿
Swiftã¯classã®å¤šé‡ç¶™æ‰¿ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ã€SwiftãŒãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ¨å¥¨ã—ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€`super.init()`ãŒå¿…è¦ã¨ã•ã‚Œã‚‹å ´é¢ã§ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã£ã¦å•é¡Œã‚’è§£æ±ºã§ããªã„ã‹ã‚’æ¤œè¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

### 5. ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° vs convenience init
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¯ã€æ„å›³ã—ãªã„ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã®å‘¼ã³å‡ºã—ã‚’è¨±å®¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«å¤šãã®å¼•æ•°ã‚’æŒã¤initã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’è¨­å®šã—ã¦ã„ã‚‹ã¨ã€æŠœã‘ã‚„ãƒŸã‚¹ã«æ°—ã¥ãã«ãããªã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã¯ã€convenience initã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§è§£æ±ºã§ãã¾ã™ã€‚

### ã¾ã¨ã‚
Swiftã«ãŠã‘ã‚‹ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¯å¤šæ§˜ã§ã‚ã‚Šã€ãã‚Œãã‚Œã®ç‰¹æ€§ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ç¶™æ‰¿æ™‚ã®`super.init()`ã®å‹•ä½œã‚„ã€convenience initializerã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ãªã©ã€Swiftç‰¹æœ‰ã®æŒ¯ã‚‹èˆã„ã‚’çŸ¥ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå®‰å…¨ã§èª­ã¿ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

---
