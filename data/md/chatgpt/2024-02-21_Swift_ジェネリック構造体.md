# Swift ジェネリック構造体

Date: 2024-02-21

---

## 👤 User
*2024-02-22 00:20:10*

Swiftで型パラメーターをしていするようなstructを定義して実行するようなサンプルコードを書いてほしい

---

## 🤖 Assistant
*2024-02-22 00:20:43*

Swiftで型パラメータを使用する`struct`を定義する例として、シンプルな`Box`という構造体を考えます。この`Box`は任意の型の値を一つ保持することができ、その値を取り出す機能を持ちます。型パラメータを使用することで、この`struct`はジェネリックとなり、さまざまな型の値を保持することが可能になります。

以下はそのサンプルコードです：

```swift
// ジェネリックなBox構造体の定義
struct Box<T> {
    var value: T
    
    init(_ value: T) {
        self.value = value
    }
    
    func getValue() -> T {
        return value
    }
}

// 使用例
let intBox = Box<Int>(123)
print(intBox.getValue()) // 123

let stringBox = Box<String>("Hello, Swift!")
print(stringBox.getValue()) // Hello, Swift!

let doubleBox = Box<Double>(3.14)
print(doubleBox.getValue()) // 3.14
```

このコードでは、`Box`構造体を定義し、`T`という型パラメータを使っています。`T`は`Box`が作成される際に決定される型で、`Box`の`value`プロパティの型を指定します。`init`メソッドで`Box`のインスタンスを初期化する際に、任意の型の値を受け取り、`getValue`メソッドでその値を取り出しています。

このようにジェネリックを使用することで、柔軟かつ再利用可能なコードを書くことが可能になります。

---

## 👤 User
*2024-02-22 00:21:09*

func getText()でその型名をかえすようなものを作ってほしい」

---

## 🤖 Assistant
*2024-02-22 00:21:58*

指定された要件に基づいて、`Box`構造体に`func getText() -> String`メソッドを追加し、このメソッドがそのインスタンスが保持する値の型名を返すようにします。Swiftの`type(of:)`関数を使用して、値の型を取得し、それを`String`に変換して返すことができます。

以下は、その要件を満たすサンプルコードです：

```swift
struct Box<T> {
    var value: T
    
    init(_ value: T) {
        self.value = value
    }
    
    func getValue() -> T {
        return value
    }
    
    // 型名を返すメソッド
    func getText() -> String {
        return "\(type(of: value))"
    }
}

// 使用例
let intBox = Box<Int>(123)
print(intBox.getText()) // Int

let stringBox = Box<String>("Hello, Swift!")
print(stringBox.getText()) // String

let doubleBox = Box<Double>(3.14)
print(doubleBox.getText()) // Double
```

このコードでは、`getText`メソッドが`value`プロパティの型を取得し、その型名を文字列として返しています。`type(of:)`関数は引数の実行時の型を返すため、これを使用することでジェネリック構造体が保持する値の型を動的に取得し、文字列で表現することが可能になります。

このようにして、ジェネリック構造体内で値の型名を文字列で返す機能を実装することができます。

---

## 👤 User
*2024-02-22 00:36:54*

valueを使ってほしくない

---
