# Hashableにする方法

日付: 2023-10-24

---

## 👤 ユーザー
*2023/10/24 12:42:45*

public struct SignUpInput {
    public let emailAddress: String
    public let rawPhoneNumber: String
    public let password: String
    
    public init(emailAddress: String, rawPhoneNumber: String, password: String) {
        self.emailAddress = emailAddress
        self.rawPhoneNumber = rawPhoneNumber
        self.password = password
    }
}

@Published var recipientAndSignUpInput: (recipient: String, signUpInput: SignUpInput)?

recipientAndSignUpInput をHashableにしたい。

---

## 🤖 アシスタント
*2023/10/24 12:43:21*

`Hashable`を実装するためには、オブジェクトが一意のハッシュ値を生成できるようにする必要があります。`SignUpInput`は構造体であり、それ自体が`Hashable`にするのは簡単ですが、`recipientAndSignUpInput`はタプルで、Swiftではタプルは`Hashable`を自動的に遵守しません。しかし、カスタムの構造体を作成して、それを`Hashable`にすることができます。

以下は、`recipientAndSignUpInput`を`Hashable`にするための方法です:

1. `RecipientAndSignUpInput`という新しい構造体を作成して、タプルの代わりにそれを使用します。
2. この新しい構造体で`Hashable`プロトコルを実装します。

以下はコードの例です:

```swift
public struct SignUpInput: Hashable {
    public let emailAddress: String
    public let rawPhoneNumber: String
    public let password: String
    
    public init(emailAddress: String, rawPhoneNumber: String, password: String) {
        self.emailAddress = emailAddress
        self.rawPhoneNumber = rawPhoneNumber
        self.password = password
    }
}

// `recipientAndSignUpInput`の代わりに使用する新しい構造体
public struct RecipientAndSignUpInput: Hashable {
    public let recipient: String
    public let signUpInput: SignUpInput

    public init(recipient: String, signUpInput: SignUpInput) {
        self.recipient = recipient
        self.signUpInput = signUpInput
    }

    public func hash(into hasher: inout Hasher) {
        hasher.combine(recipient)
        hasher.combine(signUpInput)
    }
    
    public static func == (lhs: RecipientAndSignUpInput, rhs: RecipientAndSignUpInput) -> Bool {
        return lhs.recipient == rhs.recipient &&
               lhs.signUpInput == rhs.signUpInput
    }
}

// @Published var recipientAndSignUpInput: RecipientAndSignUpInput?
```

ここで、`SignUpInput`構造体と新しい`RecipientAndSignUpInput`構造体の両方が`Hashable`プロトコルを実装します。これにより、これらのオブジェクトをハッシュ可能なコレクション（例えば、`Set`や`Dictionary`のキー）に安全に格納することができます。

また、パスワードのような機密情報をハッシュする場合、セキュリティの観点から慎重に行う必要があります。これは、ハッシュ値が逆操作されて元の情報が露呈するリスクがあるためです。パスワードを直接ハッシュせず、代わりに安全な方法でパスワードのハッシュを保存することを検討してください。

---
