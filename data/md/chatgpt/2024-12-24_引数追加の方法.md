# å¼•æ•°è¿½åŠ ã®æ–¹æ³•

æ—¥ä»˜: 2024-12-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 13:02:22*

UpdateGuildMemberRequestDtoUpdateType ã‚’ã²ãã™ã†ã«ã¨ã£ã¦ã»ã—ã„

Future&lt;String?&gt; \_updateGuildMember({
  required Ref ref,
  required String guildId,
  required String userId,
  required UpdateGuildMemberRequestDtoMemberStatus memberStatus,
}) async {
  final api = await ref.watch(guildApiProvider.future);
  final response = await api.guildControllerUpdateGuildMember(
    UpdateGuildMemberRequestDto(
      updateType: UpdateGuildMemberRequestDtoUpdateType.role,
      memberStatus: memberStatus,
    ),
    guildId: guildId,
    userId: userId,
  );
  debugPrint('Response Body: ${response.data}');
  debugPrint('Response Body.data: ${response.data?.data}');
  return response.data?.data;
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 13:02:30*

`UpdateGuildMemberRequestDtoUpdateType` ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€`_updateGuildMember` ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã« `UpdateGuildMemberRequestDtoUpdateType` ã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ãã®æ›´æ–°å¾Œã®ä¾‹ã§ã™ã€‚

```dart
Future<String?> _updateGuildMember({
  required Ref ref,
  required String guildId,
  required String userId,
  required UpdateGuildMemberRequestDtoUpdateType updateType, // æ–°ã—ã„å¼•æ•°ã‚’è¿½åŠ 
  required UpdateGuildMemberRequestDtoMemberStatus memberStatus,
}) async {
  final api = await ref.watch(guildApiProvider.future);
  final response = await api.guildControllerUpdateGuildMember(
    UpdateGuildMemberRequestDto(
      updateType: updateType, // å¼•æ•°ã‚’ä½¿ç”¨
      memberStatus: memberStatus,
    ),
    guildId: guildId,
    userId: userId,
  );
  debugPrint('Response Body: ${response.data}');
  debugPrint('Response Body.data: ${response.data?.data}');
  return response.data?.data;
}
```

### å¤‰æ›´ç‚¹
1. `updateType` ã‚’å¼•æ•°ã¨ã—ã¦è¿½åŠ ã—ã¾ã—ãŸã€‚
2. `UpdateGuildMemberRequestDto` ã® `updateType` ã«å¼•æ•°ã®å€¤ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€å‘¼ã³å‡ºã—å…ƒã§ `updateType` ã‚’æŒ‡å®šã—ã¦æŸ”è»Ÿã«å‹•ä½œã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 13:17:54*

ã“ã‚Œã®OWNERã¨MEMBERã‚‚ã¤ãã£ã¦ã»ã—ã„

enum UpdateGuildMemberRequestDtoRole {
  @JsonValue('OWNER')
  OWNER,
  @JsonValue('ADMIN')
  ADMIN,
  @JsonValue('MEMBER')
  MEMBER,
}
@riverpod
class GiveAdminNotifier extends \_$GiveAdminNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; approveGuild({
    required String guildId,
    required String userId,
  }) async {
    state = const AsyncValue.loading();
    try {
      final result = await \_updateGuildMemberRole(
        ref: ref,
        guildId: guildId,
        userId: userId,
        role: UpdateGuildMemberRequestDtoRole.ADMIN
      );
      debugPrint('Result : $result');
      state = AsyncValue.data(result);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 13:18:25*

ä»¥ä¸‹ã®ã‚ˆã†ã« `OWNER` ã¨ `MEMBER` ã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã¾ãŸã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã«åˆã‚ã›ã¦å¤‰æ›´ã‚’åŠ ãˆã¾ã—ãŸã€‚`approveGuild` ã¨åŒæ§˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã§ã€æ–°ã—ã„å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

### æ›´æ–°ã‚³ãƒ¼ãƒ‰

```dart
enum UpdateGuildMemberRequestDtoRole {
  @JsonValue('OWNER')
  OWNER,
  @JsonValue('ADMIN')
  ADMIN,
  @JsonValue('MEMBER')
  MEMBER,
}

@riverpod
class GiveAdminNotifier extends _$GiveAdminNotifier {
  @override
  Future<String?> build() async => null;

  Future<void> assignAdmin({
    required String guildId,
    required String userId,
  }) async {
    state = const AsyncValue.loading();
    try {
      final result = await _updateGuildMemberRole(
        ref: ref,
        guildId: guildId,
        userId: userId,
        role: UpdateGuildMemberRequestDtoRole.ADMIN,
      );
      debugPrint('Result : $result');
      state = AsyncValue.data(result);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }

  Future<void> assignOwner({
    required String guildId,
    required String userId,
  }) async {
    state = const AsyncValue.loading();
    try {
      final result = await _updateGuildMemberRole(
        ref: ref,
        guildId: guildId,
        userId: userId,
        role: UpdateGuildMemberRequestDtoRole.OWNER,
      );
      debugPrint('Result : $result');
      state = AsyncValue.data(result);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }

  Future<void> assignMember({
    required String guildId,
    required String userId,
  }) async {
    state = const AsyncValue.loading();
    try {
      final result = await _updateGuildMemberRole(
        ref: ref,
        guildId: guildId,
        userId: userId,
        role: UpdateGuildMemberRequestDtoRole.MEMBER,
      );
      debugPrint('Result : $result');
      state = AsyncValue.data(result);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

Future<String?> _updateGuildMemberRole({
  required Ref ref,
  required String guildId,
  required String userId,
  required UpdateGuildMemberRequestDtoRole role,
}) async {
  final api = await ref.watch(guildApiProvider.future);
  final response = await api.guildControllerUpdateGuildMember(
    UpdateGuildMemberRequestDto(
      updateType: UpdateGuildMemberRequestDtoUpdateType.role,
      memberRole: role, // é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å‰²ã‚Šå½“ã¦
    ),
    guildId: guildId,
    userId: userId,
  );
  debugPrint('Response Body: ${response.data}');
  debugPrint('Response Body.data: ${response.data?.data}');
  return response.data?.data;
}
```

### è¿½åŠ ç‚¹
1. **`assignOwner` ãƒ¡ã‚½ãƒƒãƒ‰**:
   - `role` ã‚’ `UpdateGuildMemberRequestDtoRole.OWNER` ã«è¨­å®šã—ã€æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚ªãƒ¼ãƒŠãƒ¼ã«å¤‰æ›´ã—ã¾ã™ã€‚

2. **`assignMember` ãƒ¡ã‚½ãƒƒãƒ‰**:
   - `role` ã‚’ `UpdateGuildMemberRequestDtoRole.MEMBER` ã«è¨­å®šã—ã€æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ¡ãƒ³ãƒãƒ¼ã«å¤‰æ›´ã—ã¾ã™ã€‚

3. **`_updateGuildMemberRole` ã®å†åˆ©ç”¨**:
   - å½¹å‰²ã‚’æŸ”è»Ÿã«å¤‰æ›´ã™ã‚‹ãŸã‚ã®å…±é€šå‡¦ç†ã‚’æŒã¤ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ `_updateGuildMemberRole` ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§ `OWNER` ã‚„ `MEMBER` ã®å‰²ã‚Šå½“ã¦ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 13:18:53*

ç•°ãªã‚‹@riverpodã§ç®¡ç†ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 13:19:17*

ç•°ãªã‚‹ `@riverpod` ã§å½¹å‰²ï¼ˆ`OWNER`ã€`ADMIN`ã€`MEMBER`ï¼‰ã®ç®¡ç†ã‚’åˆ†é›¢ã™ã‚‹ã«ã¯ã€ãã‚Œãã‚Œå°‚ç”¨ã® `Notifier` ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã®å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç®¡ç†ã§ãã¾ã™ï¼š

### æ›´æ–°å¾Œã®ã‚³ãƒ¼ãƒ‰

#### Enum å®šç¾©
```dart
enum UpdateGuildMemberRequestDtoRole {
  @JsonValue('OWNER')
  OWNER,
  @JsonValue('ADMIN')
  ADMIN,
  @JsonValue('MEMBER')
  MEMBER,
}
```

#### Notifier å®šç¾©

1. **`OwnerNotifier`**
   ```dart
   @riverpod
   class OwnerNotifier extends _$OwnerNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignOwner({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.OWNER,
         );
         debugPrint('Owner Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('Owner Error: $e');
         debugPrint('Owner StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

2. **`AdminNotifier`**
   ```dart
   @riverpod
   class AdminNotifier extends _$AdminNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignAdmin({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.ADMIN,
         );
         debugPrint('Admin Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('Admin Error: $e');
         debugPrint('Admin StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

3. **`MemberNotifier`**
   ```dart
   @riverpod
   class MemberNotifier extends _$MemberNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignMember({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.MEMBER,
         );
         debugPrint('Member Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('Member Error: $e');
         debugPrint('Member StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

#### å…±é€šå‡¦ç†ã® `_updateGuildMemberRole`

```dart
Future<String?> _updateGuildMemberRole({
  required Ref ref,
  required String guildId,
  required String userId,
  required UpdateGuildMemberRequestDtoRole role,
}) async {
  final api = await ref.watch(guildApiProvider.future);
  final response = await api.guildControllerUpdateGuildMember(
    UpdateGuildMemberRequestDto(
      updateType: UpdateGuildMemberRequestDtoUpdateType.role,
      memberRole: role,
    ),
    guildId: guildId,
    userId: userId,
  );
  debugPrint('Response Body: ${response.data}');
  debugPrint('Response Body.data: ${response.data?.data}');
  return response.data?.data;
}
```

### åˆ©ç‚¹
1. **å½¹å‰²ã”ã¨ã®åˆ†é›¢**:
   - å„å½¹å‰²ï¼ˆOWNERã€ADMINã€MEMBERï¼‰ã®çŠ¶æ…‹ã‚’ç‹¬ç«‹ã—ã¦ç®¡ç†ã§ãã¾ã™ã€‚

2. **å½¹å‰²ã«å¿œã˜ãŸãƒ­ã‚¸ãƒƒã‚¯ã®è¿½åŠ **:
   - å¿…è¦ã«å¿œã˜ã¦ã€å„ `Notifier` ã«ç‰¹åŒ–ã—ãŸãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ å¯èƒ½ã§ã™ã€‚

3. **ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“**:
   - `Notifier` ãŒå°ã•ãåˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãã‚Œãã‚Œã®ãƒ†ã‚¹ãƒˆã‚’ç°¡å˜ã«å®Ÿæ–½ã§ãã¾ã™ã€‚

ã“ã‚Œã§ã€`OWNER`ã€`ADMIN`ã€`MEMBER` ã®ç®¡ç†ãŒãã‚Œãã‚Œç‹¬ç«‹ã—ãŸ `Notifier` ã§å®Ÿç¾ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 13:19:29*

æ¥é ­è¾ã«Giveã‚’ã¤ã‘ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 13:20:00*

æ¥é ­è¾ã« `Give` ã‚’ä»˜ã‘ãŸã‚¯ãƒ©ã‚¹åã«å¤‰æ›´ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

### æ›´æ–°å¾Œã®ã‚³ãƒ¼ãƒ‰

#### Enum å®šç¾©
```dart
enum UpdateGuildMemberRequestDtoRole {
  @JsonValue('OWNER')
  OWNER,
  @JsonValue('ADMIN')
  ADMIN,
  @JsonValue('MEMBER')
  MEMBER,
}
```

#### Notifier å®šç¾©

1. **`GiveOwnerNotifier`**
   ```dart
   @riverpod
   class GiveOwnerNotifier extends _$GiveOwnerNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignOwner({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.OWNER,
         );
         debugPrint('GiveOwner Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('GiveOwner Error: $e');
         debugPrint('GiveOwner StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

2. **`GiveAdminNotifier`**
   ```dart
   @riverpod
   class GiveAdminNotifier extends _$GiveAdminNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignAdmin({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.ADMIN,
         );
         debugPrint('GiveAdmin Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('GiveAdmin Error: $e');
         debugPrint('GiveAdmin StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

3. **`GiveMemberNotifier`**
   ```dart
   @riverpod
   class GiveMemberNotifier extends _$GiveMemberNotifier {
     @override
     Future<String?> build() async => null;

     Future<void> assignMember({
       required String guildId,
       required String userId,
     }) async {
       state = const AsyncValue.loading();
       try {
         final result = await _updateGuildMemberRole(
           ref: ref,
           guildId: guildId,
           userId: userId,
           role: UpdateGuildMemberRequestDtoRole.MEMBER,
         );
         debugPrint('GiveMember Result : $result');
         state = AsyncValue.data(result);
       } on Exception catch (e, stackTrace) {
         debugPrint('GiveMember Error: $e');
         debugPrint('GiveMember StackTrace: $stackTrace');
         state = AsyncValue.error(e, stackTrace);
       }
     }
   }
   ```

#### å…±é€šå‡¦ç†ã® `_updateGuildMemberRole`

```dart
Future<String?> _updateGuildMemberRole({
  required Ref ref,
  required String guildId,
  required String userId,
  required UpdateGuildMemberRequestDtoRole role,
}) async {
  final api = await ref.watch(guildApiProvider.future);
  final response = await api.guildControllerUpdateGuildMember(
    UpdateGuildMemberRequestDto(
      updateType: UpdateGuildMemberRequestDtoUpdateType.role,
      memberRole: role,
    ),
    guildId: guildId,
    userId: userId,
  );
  debugPrint('Response Body: ${response.data}');
  debugPrint('Response Body.data: ${response.data?.data}');
  return response.data?.data;
}
```

### åˆ©ç‚¹
- `Give` ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦ã‚‹æ„å›³ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚
- å„ `Notifier` ãŒå½¹å‰²ã”ã¨ã«ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€å½¹å‰²å¤‰æ›´ã®ç®¡ç†ãŒã—ã‚„ã™ã„ã§ã™ã€‚

ã“ã‚Œã§ã€æ¥é ­è¾ã« `Give` ã‚’ä»˜ã‘ãŸçŠ¶æ…‹ã§ã€`OWNER`ã€`ADMIN`ã€`MEMBER` ã®å‰²ã‚Šå½“ã¦ã‚’ç®¡ç†ã§ãã¾ã™ã€‚

---
