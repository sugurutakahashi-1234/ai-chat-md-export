# Flutter 画面遷移ガイド

日付: 2024-12-06

---

## 👤 ユーザー
*2024/12/06 19:19:47*

Flutterでの画面遷移についておしえてほしい。
iOSの画面遷移でsheet、navigation遷移(push遷移) full screen coverについてそれぞれどのように対応しているかを教えてほしい

---

## 🤖 アシスタント
*2024/12/06 19:20:12*

Flutterでの画面遷移は、iOSの画面遷移と似た概念を持ちながらも、独自の方法で実現されています。以下に、iOSの画面遷移方法に対応するFlutterでの実装方法を説明します。

---

### 1. **Sheet 遷移**
iOSの`present`によるモーダル遷移に対応する遷移です。

#### Flutterでの対応方法
Flutterでは、`showModalBottomSheet`を使用します。これにより、下からスライドして表示されるモーダルビューを実現できます。

```dart
showModalBottomSheet(
  context: context,
  builder: (BuildContext context) {
    return Container(
      height: 200,
      child: Center(
        child: Text("モーダルシート"),
      ),
    );
  },
);
```

**特記事項**:
- `isScrollControlled: true`を指定すると、シートの高さを柔軟に調整できます。
- iOSスタイルのモーダルプレゼンテーションをより忠実に再現したい場合は、`ModalBottomSheet`パッケージも検討できます。

---

### 2. **Navigation 遷移 (Push 遷移)**
iOSの`UINavigationController`によるプッシュ遷移に対応します。

#### Flutterでの対応方法
Flutterでは`Navigator`を使用して画面遷移を行います。

```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => NextPage(),
  ),
);
```

- **戻り値を受け取る**: iOSの`completion`のように、`Navigator.pop`で戻り値を受け取ることが可能です。
  
```dart
final result = await Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => NextPage(),
  ),
);
```

---

### 3. **Full Screen Cover**
iOSの`UIModalPresentationStyle.fullScreen`に対応します。

#### Flutterでの対応方法
`Navigator.push`を使用してフルスクリーンの遷移を実現できます。また、`PageRouteBuilder`を使用して、トランジションやスタイルをカスタマイズすることも可能です。

```dart
Navigator.push(
  context,
  MaterialPageRoute(
    fullscreenDialog: true, // これがiOSのフルスクリーンダイアログ風になる
    builder: (context) => FullScreenPage(),
  ),
);
```

カスタムアニメーションを追加したい場合は、以下のようにします。

```dart
Navigator.push(
  context,
  PageRouteBuilder(
    pageBuilder: (context, animation, secondaryAnimation) => FullScreenPage(),
    transitionsBuilder: (context, animation, secondaryAnimation, child) {
      return FadeTransition(
        opacity: animation,
        child: child,
      );
    },
  ),
);
```

---

### 各遷移方法の比較

| **iOS**                     | **Flutter**                                                                                 | **備考**                                    |
|------------------------------|--------------------------------------------------------------------------------------------|---------------------------------------------|
| Sheet (`present`)            | `showModalBottomSheet`                                                                     | `ModalBottomSheet`パッケージもおすすめ       |
| Navigation (`push`)          | `Navigator.push`                                                                           | `Navigator.pop`で戻り値を渡せる              |
| Full Screen Cover (`present`) | `Navigator.push` with `fullscreenDialog: true` or `PageRouteBuilder` for customization    | カスタムトランジションも柔軟に設定可能       |

---

Flutterは、`Navigator`やカスタムトランジションによって、iOSの挙動をほぼ完全に再現できます。また、`Material`や`Cupertino`ウィジェットを選択することで、プラットフォームごとのUIスタイルも調整可能です。

---
