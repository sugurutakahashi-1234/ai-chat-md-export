# ãƒœãƒ¼ãƒ€ãƒ¼è‰²å¤‰æ›´æ–¹æ³•

æ—¥ä»˜: 2025-01-08

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/8 18:41:33*

CarouselSliderã§ç¾åœ¨è¡¨ç¤ºä¸­ã®ã‚‚ã®ã«ã¤ã„ã¦ã€ãƒœãƒ¼ãƒ€ãƒ¼ã®è‰²ã‚’å¤‰ãˆãŸã„ã€‚

import 'package:carousel_slider/carousel_slider.dart';
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/design_token/color_token.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/explorers/get_explorer_info.dart';

class ExplorerListPage extends HookConsumerWidget {
  const ExplorerListPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final explorerState = ref.watch(getExplorerNotifierProvider);

    useEffect(
      () {
        WidgetsBinding.instance.addPostFrameCallback((_) {
          ref.read(getExplorerNotifierProvider.notifier).executeRequest();
        });
        return null;
      },
      [],
    );

    Widget buildExplorerCard(ExplorerDTO explorer) {
      final imageUrl = explorer.explorerImage?.isNotEmpty == true
          ? explorer.explorerImage!
          : null;

      return Card(
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.circular(16),
          side: const BorderSide(color: ColorToken.secondary),
        ),
        color: ColorToken.bg,
        elevation: 4,
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Row(
                children: [
                  ClipRRect(
                    borderRadius: BorderRadius.circular(8),
                    child: imageUrl != null
                        ? Image.network(
                            imageUrl,
                            height: 120,
                            width: 120,
                            fit: BoxFit.cover,
                            errorBuilder: (context, error, stackTrace) {
                              return Container(
                                width: 120,
                                height: 120,
                                color: ColorToken.bgDark,
                                child: const Icon(
                                  Icons.broken_image_outlined,
                                  size: 96,
                                  color: ColorToken.text,
                                ),
                              );
                            },
                          )
                        : Container(
                          width: 120,
                          height: 120,
                          color: ColorToken.bgDark,
                          child: const Icon(
                            Icons.hide_image_outlined,
                            size: 96,
                            color: ColorToken.text,
                          ),
                          ),
                  ),
                  Expanded(
                    child: Column(
                      mainAxisSize: MainAxisSize.min,
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        const Text(
                          'Life',
                          style: TextStyle(
                            fontSize: 14,
                            color: ColorToken.border,
                          ),
                        ),
                        const SizedBox(height: 4),
                        Flexible(
                          child: LinearProgressIndicator(
                            value: (explorer.energy ?? 0) / 100,
                            valueColor: const AlwaysStoppedAnimation&lt;Color&gt;(
                              ColorToken.primary,
                            ),
                            backgroundColor: ColorToken.bgDark,
                            borderRadius: BorderRadius.circular(8),
                          ),
                        ),
                        const SizedBox(height: 12),
                        const Text(
                          'Search range',
                          style: TextStyle(
                            fontSize: 14,
                            color: ColorToken.border,
                          ),
                        ),
                        const SizedBox(height: 4),
                        Text(
                          '${explorer.range ?? 0}km radius',
                          style: const TextStyle(
                            fontSize: 14,
                          ),
                        ),
                        const SizedBox(height: 12),
                        Text(
                          explorer.explorerDescription ?? 'No description',
                          style: const TextStyle(
                            fontSize: 12,
                          ),
                        ),
                      ],
                    ),
                  ),
                ],
              ),
            ],
          ),
        ),
      );
    }

    return Scaffold(
      appBar: AppBar(
        automaticallyImplyLeading: false,
        title: const Text('Select explorer'),
        actions: [
          IconButton(
            onPressed: () =&gt; context.pop(),
            icon: const Icon(Icons.close),
          ),
        ],
      ),
      body: explorerState.when(
        data: (explorers) {
          if ((explorers ?? []).isEmpty) {
            return const Center(child: Text('No explorers available.'));
          }

          return Column(
            children: [
              Expanded(
                child: CarouselSlider.builder(
                  options: CarouselOptions(),
                  itemCount: explorers?.length ?? 0,
                  itemBuilder: (context, index, realIndex) {
                    final explorer = explorers?[index];
                    return Padding(
                      padding: const EdgeInsets.symmetric(horizontal: 8),
                      child:
                          explorer != null ? buildExplorerCard(explorer) : null,
                    );
                  },
                ),
              ),
            ],
          );
        },
        loading: () =&gt; const Center(child: CircularProgressIndicator()),
        error: (error, _) =&gt; Center(child: Text('Error: $error')),
      ),
      bottomNavigationBar: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: ElevatedButton(
            onPressed: () {
              context.pop();
            },
            child: const Text('Start explore'),
          ),
        ),
      ),
    );
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 18:42:00*

`CarouselSlider`ã§ç¾åœ¨è¡¨ç¤ºä¸­ã®é …ç›®ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’å¤‰ãˆã‚‹ã«ã¯ã€ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½è·¡ã—ã€ãã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¯¾å¿œã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã«ç‰¹å®šã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã¯ãã®å®Ÿè£…ä¾‹ã§ã™ï¼š

### æ‰‹é †
1. **ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã®çŠ¶æ…‹ã‚’å®šç¾©**ï¼š
   `useState`ã‚’åˆ©ç”¨ã—ã¦ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç®¡ç†ã—ã¾ã™ã€‚

2. **`CarouselSlider`ã®`onPageChanged`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°**ï¼š
   ãƒšãƒ¼ã‚¸å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã™ã€‚

3. **ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ä¸€è‡´ã™ã‚‹é …ç›®ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’å¤‰æ›´**ï¼š
   æ¡ä»¶ã«åŸºã¥ã„ã¦`BorderSide`ã‚’è¨­å®šã—ã¾ã™ã€‚

ä»¥ä¸‹ã«ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ãŸä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```dart
final currentIndex = useState(0); // ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½è·¡

return Scaffold(
  appBar: AppBar(
    automaticallyImplyLeading: false,
    title: const Text('Select explorer'),
    actions: [
      IconButton(
        onPressed: () => context.pop(),
        icon: const Icon(Icons.close),
      ),
    ],
  ),
  body: explorerState.when(
    data: (explorers) {
      if ((explorers ?? []).isEmpty) {
        return const Center(child: Text('No explorers available.'));
      }

      return Column(
        children: [
          Expanded(
            child: CarouselSlider.builder(
              options: CarouselOptions(
                onPageChanged: (index, reason) {
                  currentIndex.value = index; // ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
                },
              ),
              itemCount: explorers?.length ?? 0,
              itemBuilder: (context, index, realIndex) {
                final explorer = explorers?[index];
                final isSelected = index == currentIndex.value;

                return Padding(
                  padding: const EdgeInsets.symmetric(horizontal: 8),
                  child: Card(
                    shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(16),
                      side: BorderSide(
                        color: isSelected
                            ? ColorToken.primary // é¸æŠä¸­ã®è‰²
                            : ColorToken.secondary, // é€šå¸¸ã®è‰²
                        width: isSelected ? 3 : 1, // ãƒœãƒ¼ãƒ€ãƒ¼ã®å¤ªã•ã‚’å¤‰æ›´
                      ),
                    ),
                    color: ColorToken.bg,
                    elevation: 4,
                    child: explorer != null
                        ? buildExplorerCard(explorer)
                        : const SizedBox.shrink(),
                  ),
                );
              },
            ),
          ),
        ],
      );
    },
    loading: () => const Center(child: CircularProgressIndicator()),
    error: (error, _) => Center(child: Text('Error: $error')),
  ),
  bottomNavigationBar: SafeArea(
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: ElevatedButton(
        onPressed: () {
          context.pop();
        },
        child: const Text('Start explore'),
      ),
    ),
  ),
);
```

### å¤‰æ›´ç‚¹
1. **`useState`ã‚’ä½¿ç”¨**ï¼šç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç®¡ç†ã€‚
2. **`onPageChanged`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¨­å®š**ï¼šã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ãƒšãƒ¼ã‚¸å¤‰æ›´æ™‚ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã€‚
3. **ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã¨å¤ªã•ã‚’æ¡ä»¶åˆ†å²**ï¼šç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹é …ç›®ã«å¿œã˜ã¦`BorderSide`ã‚’å¤‰æ›´ã€‚

ã“ã‚Œã§ã€ç¾åœ¨è¡¨ç¤ºä¸­ã®é …ç›®ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ãŒå¤‰æ›´ã•ã‚Œã€é¸æŠçŠ¶æ…‹ã‚’è¦–è¦šçš„ã«å¼·èª¿ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/8 18:45:35*

ã“ã‚Œã ã¨ã€æ—¢å­˜ã®Widget buildExplorerCard(ExplorerDTO explorer) {ã§ã‚‚ãƒœãƒ¼ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¦ã„ã‚‹ã®ã§ã¡ã‚‡ã†ãµãã—ã¦ã—ã¾ã†ã€‚ã¾ãŸå¤ªã•ã¯å¤‰ãˆãªãã¦ã„ã„ã‚ˆ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 18:46:19*

æ—¢å­˜ã® `buildExplorerCard` ã«ãƒœãƒ¼ãƒ€ãƒ¼ãŒæ—¢ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãƒœãƒ¼ãƒ€ãƒ¼ã‚’é‡è¤‡ã›ãšã«è‰²ã ã‘ã‚’å¤‰æ›´ã™ã‚‹ã‚ˆã†ä¿®æ­£ã—ã¾ã™ã€‚ã“ã®å ´åˆã€`buildExplorerCard` ã‚’å°‘ã—æ”¹é€ ã—ã€è‰²ã‚’å¼•æ•°ã§å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ãŒé©åˆ‡ã§ã™ã€‚

ä»¥ä¸‹ã¯ä¿®æ­£ä¾‹ã§ã™ã€‚

### ä¿®æ­£å†…å®¹

1. **`buildExplorerCard`ã«ãƒœãƒ¼ãƒ€ãƒ¼ã®è‰²ã‚’å—ã‘å–ã‚‹å¼•æ•°ã‚’è¿½åŠ **ï¼š
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’æŒ‡å®šã—ã¤ã¤ã€å‹•çš„ã«å¤‰æ›´å¯èƒ½ã«ã—ã¾ã™ã€‚

2. **ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç¢ºèªã—ã€é¸æŠä¸­ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’æŒ‡å®š**ï¼š
   - `CarouselSlider` ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åŸºã¥ãã€`buildExplorerCard` å‘¼ã³å‡ºã—æ™‚ã«è‰²ã‚’æ¸¡ã—ã¾ã™ã€‚

### ä¿®æ­£ç‰ˆã‚³ãƒ¼ãƒ‰

```dart
Widget buildExplorerCard(ExplorerDTO explorer, Color borderColor) {
  final imageUrl = explorer.explorerImage?.isNotEmpty == true
      ? explorer.explorerImage!
      : null;

  return Card(
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.circular(16),
      side: BorderSide(color: borderColor), // ãƒœãƒ¼ãƒ€ãƒ¼ã®è‰²ã‚’å¼•æ•°ã§å—ã‘å–ã‚‹
    ),
    color: ColorToken.bg,
    elevation: 4,
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Row(
            children: [
              ClipRRect(
                borderRadius: BorderRadius.circular(8),
                child: imageUrl != null
                    ? Image.network(
                        imageUrl,
                        height: 120,
                        width: 120,
                        fit: BoxFit.cover,
                        errorBuilder: (context, error, stackTrace) {
                          return Container(
                            width: 120,
                            height: 120,
                            color: ColorToken.bgDark,
                            child: const Icon(
                              Icons.broken_image_outlined,
                              size: 96,
                              color: ColorToken.text,
                            ),
                          );
                        },
                      )
                    : Container(
                        width: 120,
                        height: 120,
                        color: ColorToken.bgDark,
                        child: const Icon(
                          Icons.hide_image_outlined,
                          size: 96,
                          color: ColorToken.text,
                        ),
                      ),
              ),
              Expanded(
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    const Text(
                      'Life',
                      style: TextStyle(
                        fontSize: 14,
                        color: ColorToken.border,
                      ),
                    ),
                    const SizedBox(height: 4),
                    LinearProgressIndicator(
                      value: (explorer.energy ?? 0) / 100,
                      valueColor: const AlwaysStoppedAnimation<Color>(
                        ColorToken.primary,
                      ),
                      backgroundColor: ColorToken.bgDark,
                    ),
                    const SizedBox(height: 12),
                    const Text(
                      'Search range',
                      style: TextStyle(
                        fontSize: 14,
                        color: ColorToken.border,
                      ),
                    ),
                    const SizedBox(height: 4),
                    Text(
                      '${explorer.range ?? 0}km radius',
                      style: const TextStyle(
                        fontSize: 14,
                      ),
                    ),
                    const SizedBox(height: 12),
                    Text(
                      explorer.explorerDescription ?? 'No description',
                      style: const TextStyle(
                        fontSize: 12,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ],
      ),
    ),
  );
}
```

### `CarouselSlider`ã§ã®ä½¿ç”¨ä¾‹

```dart
final currentIndex = useState(0);

return Scaffold(
  appBar: AppBar(
    automaticallyImplyLeading: false,
    title: const Text('Select explorer'),
    actions: [
      IconButton(
        onPressed: () => context.pop(),
        icon: const Icon(Icons.close),
      ),
    ],
  ),
  body: explorerState.when(
    data: (explorers) {
      if ((explorers ?? []).isEmpty) {
        return const Center(child: Text('No explorers available.'));
      }

      return Column(
        children: [
          Expanded(
            child: CarouselSlider.builder(
              options: CarouselOptions(
                onPageChanged: (index, reason) {
                  currentIndex.value = index; // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
                },
              ),
              itemCount: explorers?.length ?? 0,
              itemBuilder: (context, index, realIndex) {
                final explorer = explorers?[index];
                final borderColor = index == currentIndex.value
                    ? ColorToken.primary // é¸æŠä¸­ã®ã‚«ãƒ¼ãƒ‰ã®è‰²
                    : ColorToken.secondary; // é€šå¸¸ã®è‰²

                return Padding(
                  padding: const EdgeInsets.symmetric(horizontal: 8),
                  child: explorer != null
                      ? buildExplorerCard(explorer, borderColor)
                      : null,
                );
              },
            ),
          ),
        ],
      );
    },
    loading: () => const Center(child: CircularProgressIndicator()),
    error: (error, _) => Center(child: Text('Error: $error')),
  ),
  bottomNavigationBar: SafeArea(
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: ElevatedButton(
        onPressed: () {
          context.pop();
        },
        child: const Text('Start explore'),
      ),
    ),
  ),
);
```

### ä¸»ãªãƒã‚¤ãƒ³ãƒˆ
1. **`buildExplorerCard`ãŒãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’å¼•æ•°ã§å—ã‘å–ã‚‹ã‚ˆã†å¤‰æ›´**ï¼š
   - æ—¢å­˜ã®æ§‹é€ ã‚’æ´»ã‹ã—ã¤ã¤ã€å‹•çš„ã«è‰²ã‚’è¨­å®šã§ãã‚‹ã€‚

2. **ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åŸºã¥ã„ã¦è‰²ã‚’åˆ‡ã‚Šæ›¿ãˆ**ï¼š
   - `currentIndex` ã‚’åŸºã« `ColorToken.primary` ã‚’è¨­å®šã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ç¾åœ¨è¡¨ç¤ºä¸­ã®é …ç›®ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’å¤‰æ›´ã§ãã€ãƒœãƒ¼ãƒ€ãƒ¼ã®å¤ªã•ã¯ãã®ã¾ã¾ç¶­æŒã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/8 19:00:51*

ãã‚Œã‚ˆã‚Šã‹ã¯boolã‚’å¼•æ•°ã«ã—ãŸã»ã†ãŒã„ã„æ°—ãŒã™ã‚‹

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 19:01:50*

ç¢ºã‹ã«ã€`bool` ã‚’å¼•æ•°ã«ã—ã¦ã€Œé¸æŠä¸­ã‹ã©ã†ã‹ã€ã‚’åˆ¤æ–­ã•ã›ã‚‹æ–¹ãŒç°¡æ½”ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã­ã€‚ãã‚Œã«ã‚ˆã‚Šã€`buildExplorerCard` ã®å‘¼ã³å‡ºã—å…ƒã§æ¡ä»¶ã‚’åˆ¤å®šã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ä¿®æ­£ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

### ä¿®æ­£ç‰ˆã‚³ãƒ¼ãƒ‰

#### `buildExplorerCard`ã®ä¿®æ­£
`bool isSelected` ã‚’å¼•æ•°ã«è¿½åŠ ã—ã€é¸æŠä¸­ã‹ã©ã†ã‹ã§ãƒœãƒ¼ãƒ€ãƒ¼ã®è‰²ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```dart
Widget buildExplorerCard(ExplorerDTO explorer, bool isSelected) {
  final imageUrl = explorer.explorerImage?.isNotEmpty == true
      ? explorer.explorerImage!
      : null;

  return Card(
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.circular(16),
      side: BorderSide(
        color: isSelected ? ColorToken.primary : ColorToken.secondary, // é¸æŠçŠ¶æ…‹ã§è‰²ã‚’åˆ‡ã‚Šæ›¿ãˆ
      ),
    ),
    color: ColorToken.bg,
    elevation: 4,
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Row(
            children: [
              ClipRRect(
                borderRadius: BorderRadius.circular(8),
                child: imageUrl != null
                    ? Image.network(
                        imageUrl,
                        height: 120,
                        width: 120,
                        fit: BoxFit.cover,
                        errorBuilder: (context, error, stackTrace) {
                          return Container(
                            width: 120,
                            height: 120,
                            color: ColorToken.bgDark,
                            child: const Icon(
                              Icons.broken_image_outlined,
                              size: 96,
                              color: ColorToken.text,
                            ),
                          );
                        },
                      )
                    : Container(
                        width: 120,
                        height: 120,
                        color: ColorToken.bgDark,
                        child: const Icon(
                          Icons.hide_image_outlined,
                          size: 96,
                          color: ColorToken.text,
                        ),
                      ),
              ),
              Expanded(
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    const Text(
                      'Life',
                      style: TextStyle(
                        fontSize: 14,
                        color: ColorToken.border,
                      ),
                    ),
                    const SizedBox(height: 4),
                    LinearProgressIndicator(
                      value: (explorer.energy ?? 0) / 100,
                      valueColor: const AlwaysStoppedAnimation<Color>(
                        ColorToken.primary,
                      ),
                      backgroundColor: ColorToken.bgDark,
                    ),
                    const SizedBox(height: 12),
                    const Text(
                      'Search range',
                      style: TextStyle(
                        fontSize: 14,
                        color: ColorToken.border,
                      ),
                    ),
                    const SizedBox(height: 4),
                    Text(
                      '${explorer.range ?? 0}km radius',
                      style: const TextStyle(
                        fontSize: 14,
                      ),
                    ),
                    const SizedBox(height: 12),
                    Text(
                      explorer.explorerDescription ?? 'No description',
                      style: const TextStyle(
                        fontSize: 12,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ],
      ),
    ),
  );
}
```

---

#### `CarouselSlider`ã§ã®ä½¿ç”¨ä¾‹
`index == currentIndex.value` ã®çµæœã‚’ `bool` ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚

```dart
final currentIndex = useState(0); // ç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½è·¡

return Scaffold(
  appBar: AppBar(
    automaticallyImplyLeading: false,
    title: const Text('Select explorer'),
    actions: [
      IconButton(
        onPressed: () => context.pop(),
        icon: const Icon(Icons.close),
      ),
    ],
  ),
  body: explorerState.when(
    data: (explorers) {
      if ((explorers ?? []).isEmpty) {
        return const Center(child: Text('No explorers available.'));
      }

      return Column(
        children: [
          Expanded(
            child: CarouselSlider.builder(
              options: CarouselOptions(
                onPageChanged: (index, reason) {
                  currentIndex.value = index; // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
                },
              ),
              itemCount: explorers?.length ?? 0,
              itemBuilder: (context, index, realIndex) {
                final explorer = explorers?[index];
                final isSelected = index == currentIndex.value;

                return Padding(
                  padding: const EdgeInsets.symmetric(horizontal: 8),
                  child: explorer != null
                      ? buildExplorerCard(explorer, isSelected)
                      : null,
                );
              },
            ),
          ),
        ],
      );
    },
    loading: () => const Center(child: CircularProgressIndicator()),
    error: (error, _) => Center(child: Text('Error: $error')),
  ),
  bottomNavigationBar: SafeArea(
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: ElevatedButton(
        onPressed: () {
          context.pop();
        },
        child: const Text('Start explore'),
      ),
    ),
  ),
);
```

---

### ä¿®æ­£ã®ãƒã‚¤ãƒ³ãƒˆ
1. **`bool isSelected`ã‚’æ¸¡ã™ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆ**ï¼š
   - å‘¼ã³å‡ºã—å…ƒã§ã®æ¡ä»¶åˆ†å²ãŒç°¡æ½”ã«ãªã‚‹ã€‚
   - ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã®åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯ãŒ`buildExplorerCard`å†…éƒ¨ã«éš è”½ã•ã‚Œã€å†åˆ©ç”¨æ€§ãŒé«˜ã¾ã‚‹ã€‚

2. **å¤ªã•ã¯å¤‰æ›´ã›ãšã€è‰²ã®ã¿ã‚’å¤‰æ›´**ï¼š
   - ãƒ‡ã‚¶ã‚¤ãƒ³è¦ä»¶ã«å¿ å®Ÿã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ç¾åœ¨è¡¨ç¤ºä¸­ã®é …ç›®ã®ã¿ãŒè¦–è¦šçš„ã«å¼·èª¿ã•ã‚Œã€ã‚³ãƒ¼ãƒ‰ã®è¦‹é€šã—ã‚‚è‰¯ããªã‚Šã¾ã™ã€‚

---
