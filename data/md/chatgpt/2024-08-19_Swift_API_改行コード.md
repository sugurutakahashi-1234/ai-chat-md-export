# Swift API æ”¹è¡Œã‚³ãƒ¼ãƒ‰

æ—¥ä»˜: 2024-08-19

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/8/19 17:17:32*

ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ api Swift æ”¹è¡Œã‚³ãƒ¼ãƒ‰ é€£æº

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/8/19 17:17:42*

ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swiftã®é–“ã§APIé€šä¿¡ã‚’è¡Œã†éš›ã«ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ï¼ˆãƒ©ã‚¤ãƒ³ãƒ–ãƒ¬ãƒ¼ã‚¯ï¼‰ã®å‡¦ç†ã¯é‡è¦ãªè¦ç´ ã®ä¸€ã¤ã§ã™ã€‚ç‰¹ã«ã€APIã§é€å—ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãŒãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã‚„JSONã§ã‚ã‚‹å ´åˆã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒã©ã®ã‚ˆã†ã«æ‰±ã‚ã‚Œã‚‹ã‹ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨ã¯ä¸å¯æ¬ ã§ã™ã€‚

ä»¥ä¸‹ã«ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swiftã§æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«å‡¦ç†ã™ã‚‹ãŸã‚ã®ãƒã‚¤ãƒ³ãƒˆã‚’æŒ™ã’ã¾ã™ã€‚

### 1. æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã®ç¨®é¡
- **LF (Line Feed, `\n`)**: UNIXç³»ï¼ˆmacOSã‚„Linuxï¼‰ã§ä¸€èˆ¬çš„ãªæ”¹è¡Œã‚³ãƒ¼ãƒ‰ã€‚
- **CRLF (Carriage Return + Line Feed, `\r\n`)**: Windowsã§ä¸€èˆ¬çš„ãªæ”¹è¡Œã‚³ãƒ¼ãƒ‰ã€‚
- **CR (Carriage Return, `\r`)**: å¤ã„Mac OSã§ä½¿ç”¨ã•ã‚Œã¦ã„ãŸãŒã€ç¾åœ¨ã¯ã»ã¨ã‚“ã©ä½¿ã‚ã‚Œãªã„ã€‚

### 2. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®è¨­å®š
ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã¯ã€ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¾ã™ï¼š
- ã‚µãƒ¼ãƒãƒ¼ãŒæœŸå¾…ã™ã‚‹æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã®å½¢å¼ã‚’ç¢ºèªã™ã‚‹ã€‚
- ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã¯ã€å—ã‘å–ã£ãŸæ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ã‚µãƒ¼ãƒãƒ¼å´ã§é©åˆ‡ãªå½¢å¼ã«å¤‰æ›ã™ã‚‹ï¼ˆä¾‹ãˆã°ã€`\r\n`ã‚’`\n`ã«çµ±ä¸€ã™ã‚‹ï¼‰ã€‚

### 3. Swiftå´ã®å‡¦ç†
Swiftã§ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã™ã‚‹éš›ã«æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’æ‰±ã†æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š
- **ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†**: Swiftã®`String`ã¯ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ãå‡¦ç†ã—ã¾ã™ãŒã€ç‰¹å®šã®æ”¹è¡Œå½¢å¼ãŒå¿…è¦ãªå ´åˆã¯å¤‰æ›ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

    ```swift
    let originalString = "Hello,\r\nWorld!"
    let convertedString = originalString.replacingOccurrences(of: "\r\n", with: "\n")
    ```

- **JSONãƒ‡ãƒ¼ã‚¿**: æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€JSONãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹éš›ã¯ã€`JSONEncoder`ã‚„`JSONDecoder`ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€ç‰¹åˆ¥ãªè¨­å®šã¯ä¸è¦ã§ã™ã€‚Swiftã®JSONãƒ‘ãƒ¼ã‚µãƒ¼ã¯æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ãã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚

    ```swift
    struct Example: Codable {
        let message: String
    }

    let jsonString = """
    {
        "message": "Hello,\\nWorld!"
    }
    """

    let jsonData = jsonString.data(using: .utf8)!
    let decodedObject = try? JSONDecoder().decode(Example.self, from: jsonData)
    print(decodedObject?.message) // "Hello,\nWorld!"
    ```

### 4. ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swiftã®ä¸¡æ–¹ã§æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒæœŸå¾…é€šã‚Šã«å‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚
- ç‰¹ã«ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã®ã‚„ã‚Šå–ã‚ŠãŒã‚ã‚‹å ´åˆã€ç•°ãªã‚‹æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒæ··åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚’å¾¹åº•ã™ã‚‹ã€‚

### 5. æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã®çµ±ä¸€
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã‚‚Swiftã§ã‚‚ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’çµ±ä¸€ã™ã‚‹æ–¹ãŒã€ãƒ‡ãƒãƒƒã‚°ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå®¹æ˜“ã§ã™ã€‚
- å¿…è¦ã§ã‚ã‚Œã°ã€å—ä¿¡ã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼å´ã¾ãŸã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å¤‰æ›ã—ã¦ã€çµ±ä¸€ã—ãŸæ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒã‚¤ãƒ³ãƒˆã‚’æŠ¼ã•ãˆãªãŒã‚‰ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swifté–“ã®APIé€šä¿¡ã§æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«å‡¦ç†ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/8/19 17:18:12*

\\n ã«çµ±ä¸€ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/8/19 17:18:48*

ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swifté–“ã§ã®APIé€šä¿¡ã«ãŠã„ã¦ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ `\n` ã«çµ±ä¸€ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã§å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚

### 1. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®å‡¦ç†
ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å—ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒç•°ãªã‚‹æ”¹è¡Œã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹ãˆã° `\r\n` ã‚„ `\r`ï¼‰ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã€ãã‚Œã‚‰ã‚’ã™ã¹ã¦ `\n` ã«çµ±ä¸€ã™ã‚‹å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚

**ä¾‹: Node.js/Express ã‚µãƒ¼ãƒãƒ¼ã®å ´åˆ**

```javascript
app.post('/your-endpoint', (req, res) => {
    let data = req.body;

    // æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ \n ã«çµ±ä¸€
    if (typeof data === 'string') {
        data = data.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
    }

    // ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹
    // ...

    res.send({ success: true });
});
```

**ä¾‹: Python/Flask ã‚µãƒ¼ãƒãƒ¼ã®å ´åˆ**

```python
from flask import Flask, request

app = Flask(__name__)

@app.route('/your-endpoint', methods=['POST'])
def handle_request():
    data = request.data.decode('utf-8')

    # æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ \n ã«çµ±ä¸€
    data = data.replace('\r\n', '\n').replace('\r', '\n')

    # ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹
    # ...

    return {'success': True}

if __name__ == '__main__':
    app.run(debug=True)
```

### 2. Swift ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®å‡¦ç†
Swiftå´ã§ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã™ã‚‹å‰ã«ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’ã™ã¹ã¦ `\n` ã«çµ±ä¸€ã—ã¾ã™ã€‚ã¾ãŸã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã‚‚åŒæ§˜ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

**é€ä¿¡å‰ã«æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’çµ±ä¸€**

```swift
let originalString = "Hello,\r\nWorld!\r"
let unifiedString = originalString.replacingOccurrences(of: "\r\n", with: "\n").replacingOccurrences(of: "\r", with: "\n")

// çµ±ä¸€ã—ãŸæ–‡å­—åˆ—ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
var request = URLRequest(url: URL(string: "https://your-api-endpoint.com")!)
request.httpMethod = "POST"
request.httpBody = unifiedString.data(using: .utf8)
```

**å—ä¿¡æ™‚ã«æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’çµ±ä¸€**

```swift
if let responseData = responseData, let responseString = String(data: responseData, encoding: .utf8) {
    let unifiedResponseString = responseString.replacingOccurrences(of: "\r\n", with: "\n").replacingOccurrences(of: "\r", with: "\n")
    
    // çµ±ä¸€ã—ãŸæ–‡å­—åˆ—ã‚’ä½¿ç”¨
    print(unifiedResponseString)
}
```

### 3. ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼
ã“ã‚Œã‚‰ã®å‡¦ç†ã‚’å®Ÿè£…ã—ãŸå¾Œã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆã—ã¦ã€æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã `\n` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
- ç•°ãªã‚‹æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã€ã‚µãƒ¼ãƒãƒ¼å´ã§å‡¦ç†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãŒ `\n` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚
- ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰è¿”ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§æ­£ã—ã `\n` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨Swiftã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã§ã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒ `\n` ã«çµ±ä¸€ã•ã‚Œã€äºˆæœŸã›ã¬æ”¹è¡Œã®ä¸ä¸€è‡´ã«ã‚ˆã‚‹ãƒã‚°ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚

---
