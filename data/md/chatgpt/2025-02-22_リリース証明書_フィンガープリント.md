# リリース証明書 フィンガープリント

日付: 2025-02-22

---

## 👤 ユーザー
*2025/2/22 14:43:18*

{
  "content_type": "image_asset_pointer",
  "asset_pointer": "file-service://file-3RwFykkT4JpSoFNCtGBuT1",
  "size_bytes": 107324,
  "width": 855,
  "height": 838,
  "fovea": null,
  "metadata": {
    "dalle": null,
    "gizmo": null,
    "generation": null,
    "container_pixel_height": null,
    "container_pixel_width": null,
    "emu_omit_glimpse_image": null,
    "emu_patches_override": null,
    "sanitized": true,
    "asset_pointer_link": null,
    "watermarked_asset_pointer": null
  }
}
リリース証明書のフィンガープリントを作成したい。
どうすればいいのか？

---

## 🤖 アシスタント
*2025/2/22 14:43:30*

リリース証明書のフィンガープリントを作成するには、以下の手順を実行してください。

### 1. **キーストアファイルを準備**
   - すでにリリース用の **keystore ファイル** (`your_keystore_name.jks` など) を作成している場合は、そのファイルを使います。
   - まだ作成していない場合は、以下のコマンドで作成できます：
     ```sh
     keytool -genkey -v -keystore your_keystore_name.jks -keyalg RSA -keysize 2048 -validity 10000 -alias your_alias_name
     ```
     - `your_keystore_name.jks` はキーストアのファイル名
     - `your_alias_name` はエイリアス名（任意に設定）

### 2. **フィンガープリントを取得**
   以下のコマンドを実行して、SHA-1 または SHA-256 のフィンガープリントを取得します。

   **SHA-1 フィンガープリント:**
   ```sh
   keytool -list -v -keystore your_keystore_name.jks -alias your_alias_name
   ```
   **SHA-256 フィンガープリント:**
   ```sh
   keytool -list -v -keystore your_keystore_name.jks -alias your_alias_name -storepass your_keystore_password -keypass your_key_password | grep SHA256
   ```

### 3. **パスワード入力**
   - 実行すると、**キーストアのパスワード** を求められるので、設定したパスワードを入力してください。

### 4. **出力結果を確認**
   コマンドを実行すると、以下のような結果が表示されます：
   ```
   Certificate fingerprints:
       SHA1:  AA:BB:CC:DD:EE:FF:GG:HH:II:JJ:KK:LL:MM:NN:OO:PP:QQ:RR:SS:TT
       SHA256:  11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00
   ```
   この **SHA-1 または SHA-256 の値** を API キーの設定に使用できます。

### 5. **Google API コンソールに登録**
   取得したフィンガープリントを **Google Cloud Console** で API キーの制限設定に追加すれば完了です。

以上の手順で、リリース証明書のフィンガープリントを取得できます。

---

## 👤 ユーザー
*2025/2/22 14:45:48*

ちょっとよくわかっていにないのが、リリース証明書のフィンガープリントはアプリをリリースする際のものと同じものを使うのか？
これはGoogleMapsAPIの認証情報として使う予定である

keytool -list -v -keystore your_keystore_name -alias your_alias_name

---

## 🤖 アシスタント
*2025/2/22 14:46:30*

### **リリース証明書のフィンガープリントについて**
リリース証明書のフィンガープリントは、**アプリのリリース時に使用するキーストア（keystore）と同じもの**を使用します。  
Google Maps API の認証情報として利用する場合、**Google Play にアップロードする際に署名するキーストアの SHA-1 フィンガープリント**を設定する必要があります。

---

## **1. なぜリリース証明書のフィンガープリントが必要なのか？**
Google Maps API の認証情報を Android アプリで使う場合、**Google Cloud Console で SHA-1 のフィンガープリントを登録する必要**があります。  
このフィンガープリントが **アプリの署名情報と一致しない場合、API が正常に動作しません**。

---

## **2. どの SHA-1 フィンガープリントを使うべきか？**
Google Maps API を **デバッグ環境** と **リリース環境** で使う場合、それぞれ異なるフィンガープリントを登録する必要があります。

| 環境 | 証明書 | フィンガープリント取得方法 |
|------|-------|--------------------|
| **デバッグ** | `debug.keystore` | デフォルトのデバッグキーの SHA-1 を取得 |
| **リリース** | `your_keystore_name.jks` | アプリを署名する **リリースキーストアの SHA-1** を取得 |

---

## **3. SHA-1 フィンガープリントの取得方法**
### **① デバッグ証明書の SHA-1 を取得**
デバッグ環境で Google Maps API を使う場合は、デフォルトの `debug.keystore` を使用します。

**Mac / Linux:**
```sh
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android
```

**Windows:**
```sh
keytool -list -v -keystore %USERPROFILE%\.android\debug.keystore -alias androiddebugkey -storepass android
```

---

### **② リリース証明書の SHA-1 を取得**
リリース時に使用する **`your_keystore_name.jks`** の SHA-1 を取得する場合、以下のコマンドを実行します。

```sh
keytool -list -v -keystore your_keystore_name.jks -alias your_alias_name
```
- `your_keystore_name.jks` → リリース用のキーストアファイル名
- `your_alias_name` → キーを作成した際のエイリアス名

もしパスワードを入力せずに自動で実行したい場合は、以下のように `-storepass` と `-keypass` を指定することも可能です。
```sh
keytool -list -v -keystore your_keystore_name.jks -alias your_alias_name -storepass your_keystore_password -keypass your_key_password
```

---

## **4. Google Cloud Console に SHA-1 を登録する**
1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. **[認証情報]** → **[API キー]** を開く
3. **[アプリケーションの制限]** → **[Android アプリ]** を選択
4. **SHA-1 のフィンガープリント** を入力し、**アプリのパッケージ名**（例: `com.example.myapp`）を設定
5. **保存**

---

## **5. Google Play アプリ署名を使用している場合**
Google Play にアップロードすると、Google が自動的にアプリを署名します。そのため、**Google Play の署名証明書の SHA-1 を取得して登録する必要**があります。

### **Google Play の署名証明書の SHA-1 を確認する方法**
1. [Google Play Console](https://play.google.com/console/) にアクセス
2. **[アプリ] → [リリース] → [アプリの署名]** を開く
3. **[アプリ署名証明書]** の **SHA-1 フィンガープリント** をコピー
4. **Google Cloud Console** の **API 認証情報** に追加

---

## **6. まとめ**
| 環境 | 使用する SHA-1 フィンガープリント |
|------|------------------------------|
| **デバッグ環境** | `debug.keystore` の SHA-1 |
| **リリース環境** | `your_keystore_name.jks` の SHA-1 |
| **Google Play 署名** | Play Console で表示される SHA-1 |

Google Maps API を **リリース版アプリ** で使うには、**リリース用 keystore の SHA-1** を登録し、さらに **Google Play 署名の SHA-1** も登録するのが安全です。

---

## 👤 ユーザー
*2025/2/22 14:49:57*

your_alias_name は Google Play Console に登録したものと同じで作成しないといけないのか？

---

## 🤖 アシスタント
*2025/2/22 14:50:31*

いいえ、**Google Play Console に登録したエイリアス (`your_alias_name`) と同じ名前で作成する必要はありません**。  
しかし、**リリース時にアプリを署名するキーストア（`.jks`）とそのエイリアスは、一貫して同じものを使用する必要があります**。

---

## **1. `your_alias_name` とは？**
- `your_alias_name` は、**キーストア内の秘密鍵を識別する名前** です。
- `keytool -list -v` コマンドを実行する際に、どの秘密鍵の情報を表示するかを指定するために使います。
- **Google Play Console のエイリアス名と一致する必要はない** ですが、後で混乱しないように統一するのが一般的です。

---

## **2. どのようにエイリアス名を設定するのか？**
リリース用キーストアを新規作成する場合、`your_alias_name` を自由に設定できます。  
例えば、以下のコマンドでリリース用のキーストアを作成するときに `your_alias_name` を決めます。

```sh
keytool -genkey -v -keystore my-release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias my_alias
```
> **ポイント:**  
> - `-keystore my-release-key.jks` → キーストアのファイル名  
> - `-alias my_alias` → エイリアス名（`my_alias` など好きな名前を指定できる）

---

## **3. Google Play Console に登録されているエイリアス名を確認する方法**
もしすでに Google Play Console にアプリを登録しており、Google Play のアプリ署名を有効にしている場合、以下の手順で Google の署名証明書情報を確認できます。

### **Google Play Console でエイリアスを確認**
1. **[Google Play Console](https://play.google.com/console/)** にログイン
2. 該当のアプリを開く
3. **[リリース] → [アプリの署名]** に移動
4. **"アプリ署名証明書"** のセクションで、**SHA-1 フィンガープリント** やエイリアスが表示される

このページで表示される SHA-1 を **Google Cloud Console に登録することで、Google Play 版のアプリでも Google Maps API が動作するようになります**。

---

## **4. Google Play のエイリアスを使わないといけない？**
- **手元の `your_keystore_name.jks` のエイリアス (`your_alias_name`) は自由に決められる**
- **Google Play Console に登録されたエイリアスと一致しなくても問題ない**
- **Google Play がアプリに付与する SHA-1 は `Google Play Console` から取得して Google Cloud Console に登録する必要がある**

---

## **5. まとめ**
| 環境 | 使用する `your_alias_name` | SHA-1 フィンガープリントの取得方法 |
|------|--------------------------|--------------------------------|
| **デバッグ環境** | `androiddebugkey` | `debug.keystore` の SHA-1 を取得 |
| **リリース環境** | **自由に設定可能（例: `my_alias`）** | `your_keystore_name.jks` の SHA-1 を取得 |
| **Google Play 署名** | **Google Play が自動設定するエイリアス** | Play Console で SHA-1 を取得 |

👉 **結論**:  
`your_alias_name` は **Google Play Console のものと一致しなくてもOK**。  
ただし、Google Play 版のアプリで Google Maps API を使うには、**Google Play の署名証明書の SHA-1 も Google Cloud Console に登録する必要がある**。

---

## 👤 ユーザー
*2025/2/22 14:50:52*

リリース証明書のフィンガープリントでデバッグビルドのアプリでGoogleMapを確認することができるのか？

---

## 🤖 アシスタント
*2025/2/22 14:51:22*

**いいえ、リリース証明書のフィンガープリントを登録しても、デバッグビルドのアプリでは Google Maps API は動作しません。**  
デバッグビルドでは、**デバッグ証明書 (`debug.keystore`) の SHA-1 フィンガープリントを Google Cloud Console に登録する必要があります。**

---

## **1. なぜデバッグビルドとリリースビルドで異なる証明書を使うのか？**
Android アプリは、**ビルドの種類ごとに異なる証明書で署名** されます。

| ビルドの種類 | 使用するキーストア | 必要な SHA-1 フィンガープリント |
|-------------|-------------------|------------------------------|
| **デバッグビルド** | `debug.keystore` (Android Studio が自動生成) | `debug.keystore` の SHA-1 |
| **リリースビルド** | `your_keystore_name.jks` (自分で作成) | `your_keystore_name.jks` の SHA-1 |
| **Google Play 署名** | Google Play が付与する証明書 | Play Console の SHA-1 |

---

## **2. デバッグビルドで Google Maps を動作させる方法**
デバッグビルドで Google Maps API を使うには、**デバッグ証明書 (`debug.keystore`) の SHA-1 を取得し、Google Cloud Console に登録** する必要があります。

### **① デバッグ証明書の SHA-1 を取得**
以下のコマンドを実行すると、デバッグ証明書の SHA-1 を取得できます。

#### **Mac / Linux の場合**
```sh
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android
```

#### **Windows の場合**
```sh
keytool -list -v -keystore %USERPROFILE%\.android\debug.keystore -alias androiddebugkey -storepass android
```

このコマンドを実行すると、以下のような SHA-1 フィンガープリントが表示されます：
```
Certificate fingerprints:
    SHA1: AA:BB:CC:DD:EE:FF:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE
```

### **② Google Cloud Console に登録**
1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. **[APIとサービス] → [認証情報]** を開く
3. **APIキー** をクリックし、**アプリケーションの制限** で **Android アプリ** を選択
4. **SHA-1 フィンガープリント** と **アプリのパッケージ名**（例: `com.example.myapp`）を入力
5. **保存**

---

## **3. まとめ**
✅ **リリース証明書の SHA-1 だけではデバッグビルドで Google Maps は動作しない**  
✅ **デバッグビルドでは `debug.keystore` の SHA-1 を登録する必要がある**  
✅ **リリースビルドでは `your_keystore_name.jks` の SHA-1 を登録する必要がある**  
✅ **Google Play で公開する場合は、Play Console の SHA-1 も登録する**  

Google Cloud Console には、デバッグ用・リリース用 **両方の SHA-1** を登録することで、どちらの環境でも Google Maps API を動作させることができます。

---

## 👤 ユーザー
*2025/2/22 14:51:55*

であるならばｍ、同じパッケージ名について、フィンガープリントはデバッグ用と、リリース用の2つを登録するのか？

---

## 🤖 アシスタント
*2025/2/22 14:52:20*

**はい、その通りです。**  
**同じパッケージ名 (`com.example.myapp` など) に対して、デバッグ用とリリース用の 2 つの SHA-1 フィンガープリントを Google Cloud Console に登録する必要があります。**  
さらに、**Google Play の署名証明書の SHA-1 も登録すると、Google Play で配信したアプリでも Google Maps API が動作します。**

---

## **1. Google Cloud Console での登録方法**
Google Maps API をデバッグビルドとリリースビルドの両方で動作させるには、以下の 3 つの SHA-1 フィンガープリントを登録するのが推奨です。

| ビルドの種類 | 使用するキーストア | 必要な SHA-1 フィンガープリント | 取得コマンド |
|-------------|-------------------|------------------------------|-------------|
| **デバッグビルド** | `debug.keystore` (Android Studio が自動生成) | `debug.keystore` の SHA-1 | `keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android` |
| **リリースビルド** | `your_keystore_name.jks` (自分で作成) | `your_keystore_name.jks` の SHA-1 | `keytool -list -v -keystore your_keystore_name.jks -alias your_alias_name` |
| **Google Play 署名** | Google Play が付与する証明書 | Play Console で表示される SHA-1 | Play Console から取得 |

---

## **2. Google Cloud Console への登録手順**
1. **Google Cloud Console にアクセス** → [Google Cloud Console](https://console.cloud.google.com/)
2. **[APIとサービス] → [認証情報]** を開く
3. **既存の API キー** をクリック（または新しい API キーを作成）
4. **[アプリケーションの制限] → [Android アプリ] を選択**
5. **SHA-1 フィンガープリントを追加**
   - デバッグ用の SHA-1
   - リリース用の SHA-1
   - Google Play 署名の SHA-1（Google Play で公開する場合）
6. **アプリのパッケージ名 (`com.example.myapp` など) を入力**
7. **保存**

---

## **3. なぜ 3 つの SHA-1 を登録するのか？**
1. **デバッグビルドの動作確認**  
   → `debug.keystore` の SHA-1 を登録することで、ローカルでデバッグ時に Google Maps API が動作するようになる。

2. **リリースビルドの動作確認**  
   → `your_keystore_name.jks` の SHA-1 を登録することで、**Google Play にアップロードする前のリリースビルド** でも動作確認できる。

3. **Google Play 署名のサポート**  
   → **Google Play に公開したアプリは、Google のサーバーで自動的に署名される**。  
   そのため、**Play Console で確認した SHA-1 も登録しないと、ストア版で Google Maps が動作しない。**

---

## **4. まとめ**
✅ **デバッグビルド (`debug.keystore`) の SHA-1 を登録する**  
✅ **リリースビルド (`your_keystore_name.jks`) の SHA-1 も登録する**  
✅ **Google Play の署名証明書の SHA-1 も登録するとストア版で動作する**  
✅ **全ての SHA-1 を同じパッケージ名 (`com.example.myapp`) に対して Google Cloud Console に登録する**

**→ この設定を行えば、デバッグ・リリース・ストア版のすべての環境で Google Maps API が正しく動作するようになります！**

---
