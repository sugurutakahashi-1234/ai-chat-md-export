# ç·¯åº¦çµŒåº¦ã®å‹

æ—¥ä»˜: 2025-01-08

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/8 16:36:00*

flutter ã§ç·¯åº¦çµŒåº¦ã‚’æ‰±ã†

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 16:36:36*

Flutterã§ç·¯åº¦çµŒåº¦ã‚’æ‰±ã†ã«ã¯ã€ä¸»ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¹ãƒ†ãƒƒãƒ—ã§å®Ÿè£…ã§ãã¾ã™ã€‚ç·¯åº¦çµŒåº¦ã¯åœ°å›³ã‚¢ãƒ—ãƒªã‚„ä½ç½®æƒ…å ±ã«é–¢é€£ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚

### 1. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
Flutterã§ä½ç½®æƒ…å ±ã‚„åœ°å›³ã‚’æ‰±ã†éš›ã«ã€ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå½¹ç«‹ã¡ã¾ã™ï¼š

- **[geolocator](https://pub.dev/packages/geolocator)**: ãƒ‡ãƒã‚¤ã‚¹ã®ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹ã€‚
- **[google_maps_flutter](https://pub.dev/packages/google_maps_flutter)**: Google Mapsã‚’è¡¨ç¤ºã™ã‚‹ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
flutter pub add geolocator
flutter pub add google_maps_flutter
```

### 2. ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®è¨­å®š
ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨±å¯ãŒå¿…è¦ã§ã™ã€‚

#### Androidã®å ´åˆ
`android/app/src/main/AndroidManifest.xml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
```

#### iOSã®å ´åˆ
`ios/Runner/Info.plist`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>ã‚¢ãƒ—ãƒªãŒä½ç½®æƒ…å ±ã‚’ä½¿ç”¨ã™ã‚‹ç†ç”±ã‚’èª¬æ˜ã—ã¾ã™ã€‚</string>
<key>NSLocationAlwaysUsageDescription</key>
<string>ã‚¢ãƒ—ãƒªãŒä½ç½®æƒ…å ±ã‚’ä½¿ç”¨ã™ã‚‹ç†ç”±ã‚’èª¬æ˜ã—ã¾ã™ã€‚</string>
```

### 3. ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹ä¾‹
`geolocator`ã‚’ä½¿ã£ã¦ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:geolocator/geolocator.dart';

class LocationExample extends StatelessWidget {
  Future<Position> _determinePosition() async {
    bool serviceEnabled;
    LocationPermission permission;

    // ä½ç½®æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹ãŒæœ‰åŠ¹ã‹ç¢ºèª
    serviceEnabled = await Geolocator.isLocationServiceEnabled();
    if (!serviceEnabled) {
      // ç„¡åŠ¹ã®å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æœ‰åŠ¹åŒ–ã‚’ä¿ƒã™
      return Future.error('ä½ç½®æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹ãŒç„¡åŠ¹ã§ã™ã€‚');
    }

    // ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®ç¢ºèª
    permission = await Geolocator.checkPermission();
    if (permission == LocationPermission.denied) {
      permission = await Geolocator.requestPermission();
      if (permission == LocationPermission.denied) {
        return Future.error('ä½ç½®æƒ…å ±ã®æ¨©é™ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚');
      }
    }

    if (permission == LocationPermission.deniedForever) {
      // æ°¸ä¹…ã«æ‹’å¦ã•ã‚ŒãŸå ´åˆã¯ã€æ¨©é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã§ããªã„
      return Future.error('ä½ç½®æƒ…å ±ã®æ¨©é™ãŒæ°¸ä¹…ã«æ‹’å¦ã•ã‚Œã¦ã„ã¾ã™ã€‚');
    }

    // ç¾åœ¨åœ°ã‚’å–å¾—
    return await Geolocator.getCurrentPosition();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹'),
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            try {
              Position position = await _determinePosition();
              print('ç·¯åº¦: ${position.latitude}, çµŒåº¦: ${position.longitude}');
            } catch (e) {
              print(e);
            }
          },
          child: Text('ç¾åœ¨åœ°ã‚’å–å¾—'),
        ),
      ),
    );
  }
}
```

### 4. Google Mapsã«ç·¯åº¦çµŒåº¦ã‚’è¡¨ç¤º
Google Mapsã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€`google_maps_flutter`ã‚’ä½¿ã„ã¾ã™ã€‚

#### åŸºæœ¬çš„ãªåœ°å›³ã®è¡¨ç¤º
```dart
import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';

class GoogleMapExample extends StatefulWidget {
  @override
  _GoogleMapExampleState createState() => _GoogleMapExampleState();
}

class _GoogleMapExampleState extends State<GoogleMapExample> {
  late GoogleMapController mapController;

  final LatLng _center = LatLng(35.6895, 139.6917); // æ±äº¬ã®ç·¯åº¦çµŒåº¦

  void _onMapCreated(GoogleMapController controller) {
    mapController = controller;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Google Maps'),
      ),
      body: GoogleMap(
        onMapCreated: _onMapCreated,
        initialCameraPosition: CameraPosition(
          target: _center,
          zoom: 11.0,
        ),
      ),
    );
  }
}
```

#### ç¾åœ¨åœ°ã‚’åœ°å›³ã«è¡¨ç¤º
ç¾åœ¨åœ°ã‚’å–å¾—ã—ã¦Google Mapsä¸Šã«ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

---

ä»¥ä¸Šã§Flutterã§ç·¯åº¦çµŒåº¦ã‚’æ‰±ã†åŸºæœ¬çš„ãªæ–¹æ³•ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚ç‰¹å®šã®ãƒ‹ãƒ¼ã‚ºã«å¿œã˜ã¦ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…è¦ã«ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 16:36:58*

ç·¯åº¦çµŒåº¦ã‚’è¡¨ã™ãŸã‚ã®ç°¡å˜ãªå‹ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

---

### 1. **`LatLng` (Google Mapsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ)**
[google_maps_flutter](https://pub.dev/packages/google_maps_flutter)ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€`LatLng`å‹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒæœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ç·¯åº¦ãƒ»çµŒåº¦ã‚’æ‰±ã†ã®ã«ä¾¿åˆ©ã§ã™ã€‚

```dart
import 'package:google_maps_flutter/google_maps_flutter.dart';

LatLng location = LatLng(35.6895, 139.6917); // æ±äº¬ã®ç·¯åº¦çµŒåº¦
print('ç·¯åº¦: ${location.latitude}, çµŒåº¦: ${location.longitude}');
```

---

### 2. **`Position` (geolocatorã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ)**
[geolocator](https://pub.dev/packages/geolocator)ã‚’ä½¿ç”¨ã—ã¦ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹å ´åˆã€`Position`å‹ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã‚‚ç·¯åº¦ãƒ»çµŒåº¦ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿å‹ã§ã™ã€‚

```dart
import 'package:geolocator/geolocator.dart';

Future<void> example() async {
  Position position = await Geolocator.getCurrentPosition();
  print('ç·¯åº¦: ${position.latitude}, çµŒåº¦: ${position.longitude}');
}
```

---

### 3. **ç‹¬è‡ªã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ãƒ¼ã‚¿å‹**
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã›ãšç‹¬è‡ªã®å‹ã‚’å®šç¾©ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«`LatLng`ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚

```dart
class LatLng {
  final double latitude;
  final double longitude;

  const LatLng(this.latitude, this.longitude);

  @override
  String toString() => 'ç·¯åº¦: $latitude, çµŒåº¦: $longitude';
}

// ä½¿ç”¨ä¾‹
LatLng location = LatLng(35.6895, 139.6917);
print(location); // ç·¯åº¦: 35.6895, çµŒåº¦: 139.6917
```

---

### 4. **`Map<String, double>` (ã‚·ãƒ³ãƒ—ãƒ«ãªé€£æƒ³é…åˆ—)**
ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã„ãŸããªã„å ´åˆã€ã‚·ãƒ³ãƒ—ãƒ«ãªé€£æƒ³é…åˆ—ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚

```dart
Map<String, double> location = {'latitude': 35.6895, 'longitude': 139.6917};
print('ç·¯åº¦: ${location['latitude']}, çµŒåº¦: ${location['longitude']}');
```

ãŸã ã—ã€ã“ã®æ–¹æ³•ã¯å‹å®‰å…¨æ€§ãŒä½ãã€èª¤ã£ãŸã‚­ãƒ¼ã‚„å€¤ã‚’æ‰±ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ãŸã‚ã€æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚

---

### 5. **`Tuple` (ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†å ´åˆ)**
[tuple](https://pub.dev/packages/tuple)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç°¡å˜ã«ãƒšã‚¢å‹ã‚’ä½œæˆã§ãã¾ã™ã€‚

```dart
import 'package:tuple/tuple.dart';

Tuple2<double, double> location = Tuple2(35.6895, 139.6917);
print('ç·¯åº¦: ${location.item1}, çµŒåº¦: ${location.item2}');
```

---

### ãŠã™ã™ã‚ã®é¸æŠè‚¢
1. **Google Mapsã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ**: `LatLng`
2. **ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹å ´åˆ**: `Position`
3. **ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ãŒå¿…è¦ãªå ´åˆ**: ç‹¬è‡ªã®`LatLng`ã‚¯ãƒ©ã‚¹

ç”¨é€”ã«å¿œã˜ã¦é¸ã‚“ã§ãã ã•ã„ï¼

---
