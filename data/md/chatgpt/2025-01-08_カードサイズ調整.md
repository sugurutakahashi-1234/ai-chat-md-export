# ã‚«ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºèª¿æ•´

æ—¥ä»˜: 2025-01-08

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/8 18:04:07*

Card ã®ã‚µã‚¤ã‚ºã‚’ä¸­ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§åˆã‚ã›ãŸã„

import 'package:carousel_slider/carousel_slider.dart';
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/design_token/color_token.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/explorers/get_explorer_info.dart';

class ExplorerListPage extends HookConsumerWidget {
  const ExplorerListPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final explorerState = ref.watch(getExplorerNotifierProvider);

    useEffect(
      () {
        WidgetsBinding.instance.addPostFrameCallback((_) {
          ref.read(getExplorerNotifierProvider.notifier).executeRequest();
        });
        return null;
      },
      [],
    );

    Widget buildExplorerCard(ExplorerDTO explorer) {
      final imageUrl = explorer.explorerImage?.isNotEmpty == true
          ? explorer.explorerImage!
          : null;

      return Card(
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.circular(16),
          side: const BorderSide(color: ColorToken.secondary),
        ),
        color: ColorToken.bg,
        elevation: 4,
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Row(
                children: [
                  ClipRRect(
                    borderRadius: BorderRadius.circular(8),
                    child: imageUrl != null
                        ? Image.network(
                            imageUrl,
                            height: 120,
                            width: 120,
                            fit: BoxFit.cover,
                            errorBuilder: (context, error, stackTrace) {
                              return const Icon(
                                Icons.broken_image_outlined,
                                size: 120,
                                color: ColorToken.text,
                              );
                            },
                          )
                        : const Icon(
                            Icons.hide_image_outlined,
                            size: 120,
                            color: ColorToken.text,
                          ),
                  ),
                  const SizedBox(width: 16),
                  Expanded(
                    child: Column(
                      mainAxisSize: MainAxisSize.min,
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        const Text(
                          'Life',
                          style: TextStyle(
                            fontSize: 14,
                          ),
                        ),
                        const SizedBox(height: 4),
                        Flexible(
                          child: LinearProgressIndicator(
                            value: (explorer.energy ?? 0) / 100,
                            color: ColorToken.primary,
                            backgroundColor: ColorToken.bg,
                            borderRadius: BorderRadius.circular(2),
                          ),
                        ),
                        const SizedBox(height: 12),
                        const Text(
                          'Search range',
                          style: TextStyle(
                            fontSize: 14,
                            color: ColorToken.border,
                          ),
                        ),
                        const SizedBox(height: 4),
                        Text(
                          '${explorer.range ?? 0}km radius',
                          style: const TextStyle(
                            fontSize: 14,
                          ),
                        ),
                        const SizedBox(height: 12),
                        Text(
                          explorer.explorerDescription ?? 'No description',
                          style: const TextStyle(
                            fontSize: 12,
                          ),
                        ),
                      ],
                    ),
                  ),
                ],
              ),
            ],
          ),
        ),
      );
    }

    return Scaffold(
      appBar: AppBar(
        automaticallyImplyLeading: false,
        title: const Text('Select explorer'),
        actions: [
          IconButton(
            onPressed: () =&gt; context.pop(),
            icon: const Icon(Icons.close),
          ),
        ],
      ),
      body: explorerState.when(
        data: (explorers) {
          if ((explorers ?? []).isEmpty) {
            return const Center(child: Text('No explorers available.'));
          }

          return Column(
            children: [
              Expanded(
                child: CarouselSlider(
                  options: CarouselOptions(),
                  items: (explorers ?? []).map(buildExplorerCard).toList(),
                ),
              ),
            ],
          );
        },
        loading: () =&gt; const Center(child: CircularProgressIndicator()),
        error: (error, _) =&gt; Center(child: Text('Error: $error')),
      ),
      bottomNavigationBar: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: ElevatedButton(
            onPressed: () {
              context.pop();
            },
            child: const Text('Start explore'),
          ),
        ),
      ),
    );
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/8 18:04:34*

`Card` ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚µã‚¤ã‚ºã‚’ä¸­ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åˆã‚ã›ãŸã„å ´åˆã€ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

1. **Cardã®è¦ªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒColumnã‚„Rowå†…ã«ã‚ã‚‹å ´åˆ**  
   ãã®è¦ªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«é©åˆ‡ãªåˆ¶ç´„ï¼ˆ`MainAxisSize.min`ãªã©ï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚

2. **`Card`ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè‡ªä½“ãŒã‚µã‚¤ã‚ºã‚’æŒãŸãªã„ã‚ˆã†ã«ã™ã‚‹**  
   `Expanded`ã‚„`Flexible`ã®ã‚ˆã†ãªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ç›´æ¥`Card`ã®è¦ªã«ã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

3. **æ˜ç¤ºçš„ãªã‚µã‚¤ã‚ºæŒ‡å®šã‚’ã—ãªã„**  
   ã‚µã‚¤ã‚ºã‚’å›ºå®šã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆ`height`ã‚„`width`ï¼‰ã‚’å¿…è¦ã«å¿œã˜ã¦å‰Šé™¤ã—ã¾ã™ã€‚

ä¿®æ­£ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ï¼š

### ä¿®æ­£ç‰ˆã‚³ãƒ¼ãƒ‰
```dart
Widget buildExplorerCard(ExplorerDTO explorer) {
  final imageUrl = explorer.explorerImage?.isNotEmpty == true
      ? explorer.explorerImage!
      : null;

  return Card(
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.circular(16),
      side: const BorderSide(color: ColorToken.secondary),
    ),
    color: ColorToken.bg,
    elevation: 4,
    child: Padding(
      padding: const EdgeInsets.all(16),
      child: IntrinsicHeight( // ã“ã‚Œã‚’è¿½åŠ ã—ã¦ã‚µã‚¤ã‚ºã‚’ä¸­ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åˆã‚ã›ã‚‹
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                ClipRRect(
                  borderRadius: BorderRadius.circular(8),
                  child: imageUrl != null
                      ? Image.network(
                          imageUrl,
                          height: 120,
                          width: 120,
                          fit: BoxFit.cover,
                          errorBuilder: (context, error, stackTrace) {
                            return const Icon(
                              Icons.broken_image_outlined,
                              size: 120,
                              color: ColorToken.text,
                            );
                          },
                        )
                      : const Icon(
                          Icons.hide_image_outlined,
                          size: 120,
                          color: ColorToken.text,
                        ),
                ),
                const SizedBox(width: 16),
                Expanded(
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      const Text(
                        'Life',
                        style: TextStyle(fontSize: 14),
                      ),
                      const SizedBox(height: 4),
                      LinearProgressIndicator(
                        value: (explorer.energy ?? 0) / 100,
                        color: ColorToken.primary,
                        backgroundColor: ColorToken.bg,
                      ),
                      const SizedBox(height: 12),
                      const Text(
                        'Search range',
                        style: TextStyle(
                          fontSize: 14,
                          color: ColorToken.border,
                        ),
                      ),
                      const SizedBox(height: 4),
                      Text(
                        '${explorer.range ?? 0}km radius',
                        style: const TextStyle(fontSize: 14),
                      ),
                      const SizedBox(height: 12),
                      Text(
                        explorer.explorerDescription ?? 'No description',
                        style: const TextStyle(fontSize: 12),
                      ),
                    ],
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    ),
  );
}
```

### ä¿®æ­£ç‚¹
1. **`IntrinsicHeight`**:  
   `Card`ã®ä¸­ã«`IntrinsicHeight`ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ã€ã‚«ãƒ¼ãƒ‰ãŒä¸­èº«ã«åˆã‚ã›ãŸã‚µã‚¤ã‚ºã«ãªã‚Šã¾ã™ã€‚ãŸã ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å°‘ã—å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

2. **ä½™åˆ†ãª`Flexible`ã‚’å‰Šé™¤**:  
   `Flexible`ã¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ä¸è¦ã ã£ãŸãŸã‚å‰Šé™¤ã—ã¾ã—ãŸã€‚

3. **æ˜ç¤ºçš„ãªé«˜ã•æŒ‡å®šã®ç¢ºèª**:  
   å¿…è¦ã«å¿œã˜ã¦ä»–ã®éƒ¨åˆ†ã§ã‚‚ã‚µã‚¤ã‚ºæŒ‡å®šã‚’è¦‹ç›´ã—ã€`Row`ã‚„`Column`ã§é©åˆ‡ãªã‚µã‚¤ã‚ºãŒè¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ã“ã®ä¿®æ­£ã§`Card`ã®ã‚µã‚¤ã‚ºãŒå†…å®¹ã«å¿œã˜ã¦å¤‰åŒ–ã—ã€ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªè¦‹ãŸç›®ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚

---
