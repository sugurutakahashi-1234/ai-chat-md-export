# iOSでS3へのCSVアップロード

日付: 2023-05-08

---

## 👤 ユーザー
*2023/5/8 16:03:39*

https://github.com/aws-amplify/aws-sdk-ios 使い方これで、S3へのcsvアップロードってどうやるの？

---

## 🤖 アシスタント
*2023/5/8 16:03:47*

AWS SDK for iOSを使用してS3へのCSVアップロードを行うには、以下の手順を実行する必要があります。

1. AWS SDK for iOSをインストールします。
   このリンクからAWS SDK for iOSをダウンロードして、プロジェクトに統合します。
   https://aws.amazon.com/jp/sdk-for-ios/

2. Amazon S3のクライアントを初期化します。
   AWS SDK for iOSを使用して、Amazon S3クライアントを初期化します。
   以下のコードスニペットを参考にしてください。

   ```swift
   import AWSS3

   let credentialsProvider = AWSCognitoCredentialsProvider(regionType: .USEast1, identityPoolId: "YOUR_IDENTITY_POOL_ID")
   let configuration = AWSServiceConfiguration(region: .USEast1, credentialsProvider: credentialsProvider)
   AWSServiceManager.default().defaultServiceConfiguration = configuration

   let s3 = AWSS3.default()
   ```

3. CSVファイルを読み込みます。
   CSVファイルを読み込み、データを変数に保存します。
   以下のコードスニペットを参考にしてください。

   ```swift
   let fileURL = URL(fileURLWithPath: "path/to/csv/file.csv")
   var csvData = Data()

   do {
       csvData = try Data(contentsOf: fileURL)
   } catch {
       print("Error loading CSV file: \(error.localizedDescription)")
       return
   }
   ```

4. S3にCSVファイルをアップロードします。
   AWSS3TransferUtilityを使用して、CSVファイルをS3にアップロードします。
   以下のコードスニペットを参考にしてください。

   ```swift
   let expression = AWSS3TransferUtilityUploadExpression()
   expression.progressBlock = { (task, progress) in
       // アップロードの進捗状況を追跡するためのコールバック
   }

   let transferUtility = AWSS3TransferUtility.default()

   transferUtility.uploadData(csvData, bucket: "YOUR_S3_BUCKET_NAME", key: "path/to/destination/file.csv", contentType: "text/csv", expression: expression) { (task, error) in
       if let error = error {
           print("Error uploading CSV file: \(error.localizedDescription)")
           return
       }

       // アップロードが成功した場合の処理
   }
   ```

以上が、AWS SDK for iOSを使用してS3にCSVファイルをアップロードするための手順です。必要に応じて、各ステップのコードスニペットをプロジェクトに統合して、必要な変更を加えてください。

---
