# Flutter å†™çœŸæ’®å½±

æ—¥ä»˜: 2024-12-13

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:14:27*

flutterã§å†™çœŸæ’®å½±ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:14:51*

Flutterã§å†™çœŸæ’®å½±ã‚’è¡Œã†å ´åˆã€`image_picker`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚ä»¥ä¸‹ã«ã€`image_picker`ã‚’ä½¿ç”¨ã—ã¦å†™çœŸã‚’æ’®å½±ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

### 1. ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 
`pubspec.yaml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š
```yaml
dependencies:
  image_picker: ^0.x.x  # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„
```

ãã®å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š
```bash
flutter pub get
```

---

### 2. ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®è¨­å®š
**iOSã®å ´åˆ**  
`ios/Runner/Info.plist` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š
```xml
<key>NSCameraUsageDescription</key>
<string>ã‚«ãƒ¡ãƒ©ã‚’ä½¿ç”¨ã—ã¾ã™</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™</string>
```

**Androidã®å ´åˆ**  
`android/app/src/main/AndroidManifest.xml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š
```xml
<uses-permission android:name="android.permission.CAMERA" />
```

---

### 3. å®Ÿè£…ä¾‹
ä»¥ä¸‹ã¯ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å†™çœŸã‚’æ’®å½±ã—ã€ç”»é¢ã«è¡¨ç¤ºã™ã‚‹ä¾‹ã§ã™ã€‚

#### ã‚³ãƒ¼ãƒ‰ä¾‹
```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:io';

class CameraExample extends HookConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final imageFile = useState<File?>(null);

    Future<void> _pickImage() async {
      final picker = ImagePicker();
      final pickedFile = await picker.pickImage(source: ImageSource.camera);
      if (pickedFile != null) {
        imageFile.value = File(pickedFile.path);
      }
    }

    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            if (imageFile.value != null)
              Image.file(imageFile.value!),
            const SizedBox(height: 16),
            ElevatedButton(
              onPressed: _pickImage,
              child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### ãƒã‚¤ãƒ³ãƒˆ
1. **`ImageSource.camera`** ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã§ãã¾ã™ã€‚
2. æ’®å½±å¾Œã®ç”»åƒã¯ `PickedFile` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å–å¾—ã§ãã€ãã®å¾Œ `File` ã«å¤‰æ›ã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚

---

### æ³¨æ„ç‚¹
- iOSã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
- Androidã§ã¯ã€ã‚«ãƒ¡ãƒ©ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’æ­£ã—ãè¨­å®šã—ã¦ã„ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:20:22*

å†™çœŸã‚’æ’®ã£ãŸã‚‰go_routerã§pushã—ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:21:07*

Flutterã®`go_router`ã‚’ä½¿ç”¨ã—ã¦ã€å†™çœŸã‚’æ’®ã£ãŸå¾Œã«æ¬¡ã®ç”»é¢ã«é·ç§»ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã§å®Ÿè£…ã§ãã¾ã™ã€‚

---

### 1. `go_router`ã®ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 

`pubspec.yaml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š
```yaml
dependencies:
  go_router: ^6.x.x  # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„
```

ãã®å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š
```bash
flutter pub get
```

---

### 2. ç”»é¢é·ç§»ã®è¨­å®š

ä»¥ä¸‹ã®ã‚ˆã†ã«`GoRouter`ã‚’è¨­å®šã—ã¾ã™ã€‚å†™çœŸæ’®å½±ç”»é¢ï¼ˆ`CameraPage`ï¼‰ã¨å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚

#### ä¾‹
```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'dart:io';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        initialLocation: '/',
        routes: [
          GoRoute(
            path: '/',
            builder: (context, state) => const CameraPage(),
          ),
          GoRoute(
            path: '/display',
            builder: (context, state) {
              final photoPath = state.extra as String; // å†™çœŸã®ãƒ‘ã‚¹ã‚’å—ã‘å–ã‚‹
              return DisplayPhotoPage(photoPath: photoPath);
            },
          ),
        ],
      ),
    );
  }
}
```

---

### 3. ã‚«ãƒ¡ãƒ©ç”»é¢ï¼ˆ`CameraPage`ï¼‰

`image_picker`ã‚’ä½¿ã£ã¦å†™çœŸã‚’æ’®å½±ã—ã€`GoRouter`ã‚’ä½¿ã£ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:io';

class CameraPage extends StatelessWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      final photoPath = pickedFile.path;

      // å†™çœŸã®ãƒ‘ã‚¹ã‚’æ¬¡ã®ç”»é¢ã«æ¸¡ã—ã¦é·ç§»
      context.push('/display', extra: photoPath);
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

### 4. å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰

æ’®å½±ã—ãŸå†™çœŸã‚’è¡¨ç¤ºã™ã‚‹ç”»é¢ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'dart:io';

class DisplayPhotoPage extends StatelessWidget {
  final String photoPath;

  const DisplayPhotoPage({super.key, required this.photoPath});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸè¡¨ç¤º')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Image.file(File(photoPath)),
            const SizedBox(height: 16),
            ElevatedButton(
              onPressed: () {
                // æˆ»ã‚‹
                context.pop();
              },
              child: const Text('æˆ»ã‚‹'),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### 5. å‹•ä½œãƒ•ãƒ­ãƒ¼

1. ã‚¢ãƒ—ãƒªèµ·å‹• â†’ `CameraPage` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚
2. `å†™çœŸã‚’æ’®ã‚‹`ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã™ã‚‹ã€‚
3. å†™çœŸã‚’æ’®å½±ã™ã‚‹ã¨æ¬¡ã®ç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰ã«é·ç§»ã—ã€å†™çœŸãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚
4. `æˆ»ã‚‹`ãƒœã‚¿ãƒ³ã§å‰ã®ç”»é¢ã«æˆ»ã‚‹ã€‚

---

### æ³¨æ„ç‚¹

- **iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã¯ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“**ã€‚å®Ÿæ©Ÿã§ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚
- `photoPath` ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãªã®ã§ã€ç”»é¢é·ç§»æ™‚ã«ã“ã‚Œã‚’ `extra` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æ¸¡ã—ã¾ã™ã€‚

ã“ã‚Œã§å†™çœŸã‚’æ’®å½±ã—ã¦ç”»é¢é·ç§»ã™ã‚‹æ©Ÿèƒ½ãŒå®Ÿè£…ã§ãã¾ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:39:21*

riverpodã‚„hooksã‚’ä½¿ã£ã¦ãªã‚‹ã¹ãå¼•æ•°ã‚’æ¸¡ã—ãŸããªã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:40:10*

`Riverpod`ã¨`Flutter Hooks`ã‚’ä½¿ç”¨ã—ã¦ã€ç”»é¢é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã•ãšã«çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª`StateProvider`ã‚„`StateNotifierProvider`ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€å†™çœŸã‚’æ’®å½±ã—ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã€çŠ¶æ…‹ã‚’`Riverpod`ã§ç®¡ç†ã™ã‚‹ä¾‹ã§ã™ã€‚

---

### å…¨ä½“ã®æµã‚Œ
1. **`StateProvider`ã§çŠ¶æ…‹ã‚’ç®¡ç†**: æ’®å½±ã—ãŸå†™çœŸã®ãƒ‘ã‚¹ã‚’`StateProvider`ã§ç®¡ç†ã—ã¾ã™ã€‚
2. **`go_router`ã§ç”»é¢é·ç§»**: é·ç§»æ™‚ã«å¼•æ•°ã‚’æ¸¡ã•ãšã€çŠ¶æ…‹ã‚’å‚ç…§ã—ã¾ã™ã€‚
3. **`Flutter Hooks`ã§çŠ¶æ…‹ã‚’ç°¡å˜ã«åˆ©ç”¨**: `useProvider`ã‚’ä½¿ã£ã¦çŠ¶æ…‹ã‚’å–å¾—ã—ã¾ã™ã€‚

---

### å®Ÿè£…ä¾‹

#### 1. `StateProvider`ã‚’å®šç¾©
ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«`StateProvider`ã‚’ä½œæˆã—ã¾ã™ã€‚

```dart
import 'package:flutter_riverpod/flutter_riverpod.dart';

// æ’®å½±ã—ãŸå†™çœŸã®ãƒ‘ã‚¹ã‚’ä¿å­˜ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
final photoPathProvider = StateProvider<String?>((ref) => null);
```

---

#### 2. ãƒ«ãƒ¼ã‚¿ãƒ¼è¨­å®š
`go_router`ã‚’è¨­å®šã—ã¾ã™ã€‚å¼•æ•°ã‚’æ¸¡ã•ãšã«çŠ¶æ…‹ã‚’å‚ç…§ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

void main() {
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        initialLocation: '/',
        routes: [
          GoRoute(
            path: '/',
            builder: (context, state) => const CameraPage(),
          ),
          GoRoute(
            path: '/display',
            builder: (context, state) => const DisplayPhotoPage(),
          ),
        ],
      ),
    );
  }
}
```

---

#### 3. ã‚«ãƒ¡ãƒ©ç”»é¢ï¼ˆ`CameraPage`ï¼‰

ã“ã“ã§å†™çœŸã‚’æ’®å½±ã—ã€`photoPathProvider`ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ç”»é¢é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:image_picker/image_picker.dart';

class CameraPage extends HookConsumerWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      // çŠ¶æ…‹ã«å†™çœŸã®ãƒ‘ã‚¹ã‚’ä¿å­˜
      ref.read(photoPathProvider.notifier).state = pickedFile.path;

      // æ¬¡ã®ç”»é¢ã«é·ç§»
      context.push('/display');
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

#### 4. å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰

ã“ã“ã§ã¯ã€`photoPathProvider`ã‹ã‚‰å†™çœŸã®ãƒ‘ã‚¹ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';

class DisplayPhotoPage extends HookConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // å†™çœŸã®ãƒ‘ã‚¹ã‚’å–å¾—
    final photoPath = ref.watch(photoPathProvider);

    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸè¡¨ç¤º')),
      body: Center(
        child: photoPath != null
            ? Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Image.file(File(photoPath)),
                  const SizedBox(height: 16),
                  ElevatedButton(
                    onPressed: () {
                      // æˆ»ã‚‹
                      context.pop();
                    },
                    child: const Text('æˆ»ã‚‹'),
                  ),
                ],
              )
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

1. **`StateProvider`ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰**  
   ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ã†ã“ã¨ã§ã€å¼•æ•°ã‚’æ¸¡ã•ãšã«ã©ã®ç”»é¢ã‹ã‚‰ã§ã‚‚çŠ¶æ…‹ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

2. **`Flutter Hooks`ã®ä½¿ç”¨**  
   `HookConsumerWidget`ã‚’ä½¿ã†ã“ã¨ã§ã€ç°¡æ½”ã«çŠ¶æ…‹ã‚’å–å¾—ãƒ»æ›´æ–°ã§ãã¾ã™ã€‚

3. **`go_router`ã®å¼•æ•°çœç•¥**  
   çŠ¶æ…‹ã¯`Riverpod`ã§ç®¡ç†ã—ã¦ã„ã‚‹ãŸã‚ã€é·ç§»æ™‚ã«å¼•æ•°ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

---

### æ³¨æ„ç‚¹

- **çŠ¶æ…‹ã®ãƒªã‚»ãƒƒãƒˆ**  
  å¿…è¦ã«å¿œã˜ã¦ã€ç”»é¢é·ç§»å¾Œã‚„æˆ»ã‚‹éš›ã«`photoPathProvider`ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
  
- **ã‚¹ã‚³ãƒ¼ãƒ—ã®ç®¡ç†**  
  è¤‡é›‘ãªã‚¢ãƒ—ãƒªã§ã¯ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é©åˆ‡ã«åˆ†ã‘ã‚‹ã¨ç®¡ç†ãŒæ¥½ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãªã‚‰ã€å¼•æ•°ã‚’æ¸¡ã•ãšã«ã‚·ãƒ³ãƒ—ãƒ«ã«ç”»é¢é–“ã®ãƒ‡ãƒ¼ã‚¿å…±æœ‰ãŒã§ãã¾ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:42:29*

riverpod anotetionã‚’ä½¿ã£ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:43:18*

`Riverpod`ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã¨ã€ã‚³ãƒ¼ãƒ‰ãŒã‚ˆã‚Šç°¡æ½”ã‹ã¤å‹å®‰å…¨ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã§ã¯ã€`riverpod_annotation`ã‚’ä½¿ã£ãŸå®Ÿè£…æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

### å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 

`pubspec.yaml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_riverpod: ^2.0.0

dev_dependencies:
  build_runner: ^2.3.3
  riverpod_annotation: ^2.0.0
```

ãã®å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

```bash
flutter pub get
```

---

### ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸå®Ÿè£…ä¾‹

#### 1. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å®šç¾©

ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦å†™çœŸã®ãƒ‘ã‚¹ã‚’ç®¡ç†ã™ã‚‹`StateProvider`ã‚’ä½œæˆã—ã¾ã™ã€‚

`photo_provider.dart` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```dart
import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'photo_provider.g.dart';

// å†™çœŸã®ãƒ‘ã‚¹ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
@riverpod
class PhotoPath extends _$PhotoPath {
  @override
  String? build() => null;

  // å†™çœŸã®ãƒ‘ã‚¹ã‚’æ›´æ–°ã™ã‚‹
  void setPhotoPath(String path) => state = path;

  // å†™çœŸã®ãƒ‘ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
  void clearPhotoPath() => state = null;
}
```

ã“ã®å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ï¼š

```bash
flutter pub run build_runner build
```

ã“ã‚Œã«ã‚ˆã‚Šã€`photo_provider.g.dart`ãŒç”Ÿæˆã•ã‚Œã€`photoPathProvider`ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

#### 2. ãƒ«ãƒ¼ã‚¿ãƒ¼è¨­å®š

`go_router`ã‚’ä½¿ã£ã¦ã€çŠ¶æ…‹ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã•ãšã«ç”»é¢ã‚’é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'photo_provider.dart';

void main() {
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        initialLocation: '/',
        routes: [
          GoRoute(
            path: '/',
            builder: (context, state) => const CameraPage(),
          ),
          GoRoute(
            path: '/display',
            builder: (context, state) => const DisplayPhotoPage(),
          ),
        ],
      ),
    );
  }
}
```

---

#### 3. ã‚«ãƒ¡ãƒ©ç”»é¢ï¼ˆ`CameraPage`ï¼‰

å†™çœŸã‚’æ’®å½±ã—ã€`photoPathProvider`ã‚’æ›´æ–°ã—ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'photo_provider.dart';

class CameraPage extends ConsumerWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      // ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æ›´æ–°
      ref.read(photoPathProvider.notifier).setPhotoPath(pickedFile.path);

      // æ¬¡ã®ç”»é¢ã«é·ç§»
      context.push('/display');
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

#### 4. å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰

ä¿å­˜ã•ã‚ŒãŸå†™çœŸã®ãƒ‘ã‚¹ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';
import 'photo_provider.dart';

class DisplayPhotoPage extends ConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰å†™çœŸã®ãƒ‘ã‚¹ã‚’å–å¾—
    final photoPath = ref.watch(photoPathProvider);

    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸè¡¨ç¤º')),
      body: Center(
        child: photoPath != null
            ? Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Image.file(File(photoPath)),
                  const SizedBox(height: 16),
                  ElevatedButton(
                    onPressed: () {
                      // çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦æˆ»ã‚‹
                      ref.read(photoPathProvider.notifier).clearPhotoPath();
                      context.pop();
                    },
                    child: const Text('æˆ»ã‚‹'),
                  ),
                ],
              )
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ç°¡æ½”ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å®šç¾©**  
   ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã§ã€ä½™åˆ†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãšã«çŠ¶æ…‹ç®¡ç†ãŒã§ãã¾ã™ã€‚

2. **å¼•æ•°ã‚’æ¸¡ã•ãšçŠ¶æ…‹ã‚’å…±æœ‰**  
   çŠ¶æ…‹ã‚’`Riverpod`ã§ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€`go_router`ã®`extra`ã‚’ä½¿ã‚ãšã«ç”»é¢é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã§ãã¾ã™ã€‚

3. **çŠ¶æ…‹ã®ãƒªã‚»ãƒƒãƒˆ**  
   é·ç§»æ™‚ã«å¿…è¦ã«å¿œã˜ã¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã§ãã¾ã™ã€‚

---

### æ³¨æ„ç‚¹

- **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**  
  `build_runner`ã‚’å®Ÿè¡Œã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  
- **ãƒªã‚»ãƒƒãƒˆã‚¿ã‚¤ãƒŸãƒ³ã‚°**  
  çŠ¶æ…‹ã®ã‚¯ãƒªã‚¢ãŒå¿…è¦ãªå ´åˆã¯ã€æˆ»ã‚‹éš›ã‚„ç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾Œã«è¡Œã†ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã“ã‚Œã§ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸç°¡æ½”ã‹ã¤åŠ¹ç‡çš„ãªå®Ÿè£…ãŒå¯èƒ½ã§ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:44:14*

ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°åã«ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:44:46*

ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°åã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãŒã‚ˆã‚Šç°¡æ½”ã§èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ã€ã‚ˆã‚ŠçŸ­ã„åå‰ã‚’ä½¿ç”¨ã—ãŸå®Ÿè£…ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

---

### ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ

1. **é–¢æ•°åã‚’ç°¡æ½”ã«**  
   - `setPhotoPath` â†’ `setPath`
   - `clearPhotoPath` â†’ `clear`

---

### ä¿®æ­£ç‰ˆã®ã‚³ãƒ¼ãƒ‰ä¾‹

#### 1. ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å®šç¾©

`photo_provider.dart`:

```dart
import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'photo_provider.g.dart';

@riverpod
class PhotoPath extends _$PhotoPath {
  @override
  String? build() => null;

  void setPath(String path) => state = path;

  void clear() => state = null;
}
```

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š
```bash
flutter pub run build_runner build
```

---

#### 2. ã‚«ãƒ¡ãƒ©ç”»é¢ï¼ˆ`CameraPage`ï¼‰

ç°¡æ½”ãªé–¢æ•°åã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'photo_provider.dart';

class CameraPage extends ConsumerWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      ref.read(photoPathProvider.notifier).setPath(pickedFile.path);
      context.push('/display');
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

#### 3. å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰

`clear`é–¢æ•°ã‚’åˆ©ç”¨ã—ã¦çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';
import 'photo_provider.dart';

class DisplayPhotoPage extends ConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final photoPath = ref.watch(photoPathProvider);

    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸè¡¨ç¤º')),
      body: Center(
        child: photoPath != null
            ? Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Image.file(File(photoPath)),
                  const SizedBox(height: 16),
                  ElevatedButton(
                    onPressed: () {
                      ref.read(photoPathProvider.notifier).clear();
                      context.pop();
                    },
                    child: const Text('æˆ»ã‚‹'),
                  ),
                ],
              )
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### ç°¡æ½”ã«ãªã£ãŸé–¢æ•°å

| å…ƒã®åå‰          | ä¿®æ­£ç‰ˆ      |
|-------------------|-------------|
| `setPhotoPath`    | `setPath`   |
| `clearPhotoPath`  | `clear`     |

---

### ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãƒ¡ãƒªãƒƒãƒˆ

- **å¯èª­æ€§å‘ä¸Š**: é–¢æ•°åãŒçŸ­ããªã‚Šã€ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚
- **ä¸€è²«æ€§**: çŸ­ã„åå‰ãŒä¸€è²«ã—ã¦ä½¿ã‚ã‚Œã‚‹ã“ã¨ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½•ã‚’ã™ã‚‹ã®ã‹å³åº§ã«ç†è§£ã§ãã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã§ãã¾ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:46:08*

æˆ»ã‚‹ãƒœã‚¿ãƒ³ã¯Appãƒãƒ¼ã«å…¥ã‚ŒãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:46:26*

æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’`AppBar`ã«é…ç½®ã™ã‚‹å ´åˆã€`AppBar`ã®`leading`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ã€æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’`AppBar`ã«è¿½åŠ ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ä¾‹ã§ã™ã€‚

---

### ä¿®æ­£ç‰ˆã®ã‚³ãƒ¼ãƒ‰ä¾‹

#### å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`DisplayPhotoPage`ï¼‰

`AppBar`ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';
import 'photo_provider.dart';

class DisplayPhotoPage extends ConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final photoPath = ref.watch(photoPathProvider);

    return Scaffold(
      appBar: AppBar(
        title: const Text('å†™çœŸè¡¨ç¤º'),
        leading: IconButton(
          icon: const Icon(Icons.arrow_back),
          onPressed: () {
            // çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å‰ã®ç”»é¢ã«æˆ»ã‚‹
            ref.read(photoPathProvider.notifier).clear();
            context.pop();
          },
        ),
      ),
      body: Center(
        child: photoPath != null
            ? Image.file(File(photoPath))
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ

1. **`AppBar`ã®`leading`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨**  
   - `leading`ã«ã‚«ã‚¹ã‚¿ãƒ æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã™ã‚‹ã“ã¨ã§ã€æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’`AppBar`ã«è¿½åŠ ã€‚
   - ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®ã‚„å‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã€‚

2. **çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆã¨é·ç§»ã®çµ±åˆ**  
   - æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸéš›ã«`photoPathProvider`ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€`context.pop()`ã§å‰ã®ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚

---

### å…¨ä½“ã®æµã‚Œ

1. **ã‚«ãƒ¡ãƒ©ç”»é¢**ã§å†™çœŸã‚’æ’®å½±ã—ã€`photoPathProvider`ã‚’æ›´æ–°ã€‚
2. **å†™çœŸè¡¨ç¤ºç”»é¢**ã§`AppBar`ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã€‚
3. æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€`photoPathProvider`ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã€ã‚«ãƒ¡ãƒ©ç”»é¢ã«æˆ»ã‚‹ã€‚

ã“ã‚Œã§`AppBar`å†…ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ãŒå®Œæˆã—ã¾ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/14 06:46:51*

ä¸€æ—¦å…¨éƒ¨ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/14 06:47:35*

ä»¥ä¸‹ã«ã€ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ãŸå®Œå…¨ãªå®Ÿè£…ä¾‹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

---

### 1. `photo_provider.dart`
å†™çœŸã®ãƒ‘ã‚¹ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚

```dart
import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'photo_provider.g.dart';

@riverpod
class PhotoPath extends _$PhotoPath {
  @override
  String? build() => null;

  void setPath(String path) => state = path;

  void clear() => state = null;
}
```

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash
flutter pub run build_runner build
```

---

### 2. ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªï¼ˆ`main.dart`ï¼‰

`go_router`ã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'photo_provider.dart';
import 'camera_page.dart';
import 'display_photo_page.dart';

void main() {
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        initialLocation: '/',
        routes: [
          GoRoute(
            path: '/',
            builder: (context, state) => const CameraPage(),
          ),
          GoRoute(
            path: '/display',
            builder: (context, state) => const DisplayPhotoPage(),
          ),
        ],
      ),
    );
  }
}
```

---

### 3. ã‚«ãƒ¡ãƒ©ç”»é¢ï¼ˆ`camera_page.dart`ï¼‰

å†™çœŸã‚’æ’®å½±ã—ã€`photoPathProvider`ã‚’æ›´æ–°ã—ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'photo_provider.dart';

class CameraPage extends ConsumerWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      ref.read(photoPathProvider.notifier).setPath(pickedFile.path);
      context.push('/display');
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

### 4. å†™çœŸè¡¨ç¤ºç”»é¢ï¼ˆ`display_photo_page.dart`ï¼‰

æ’®å½±ã—ãŸå†™çœŸã‚’è¡¨ç¤ºã—ã€`AppBar`å†…ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';
import 'photo_provider.dart';

class DisplayPhotoPage extends ConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final photoPath = ref.watch(photoPathProvider);

    return Scaffold(
      appBar: AppBar(
        title: const Text('å†™çœŸè¡¨ç¤º'),
        leading: IconButton(
          icon: const Icon(Icons.arrow_back),
          onPressed: () {
            ref.read(photoPathProvider.notifier).clear();
            context.pop();
          },
        ),
      ),
      body: Center(
        child: photoPath != null
            ? Image.file(File(photoPath))
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§çŠ¶æ…‹ç®¡ç†**  
   å†™çœŸã®ãƒ‘ã‚¹ã¯`photoPathProvider`ã§ç®¡ç†ã—ã€ã©ã®ç”»é¢ã§ã‚‚ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

2. **`AppBar`ã®æˆ»ã‚‹ãƒœã‚¿ãƒ³**  
   `AppBar`ã®`leading`ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’é…ç½®ã—ã€æˆ»ã‚‹éš›ã«`photoPathProvider`ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚

3. **`go_router`ã§ç”»é¢é·ç§»**  
   å¼•æ•°ã‚’æ¸¡ã•ãšã«çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€é·ç§»ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚

---

### å‹•ä½œãƒ•ãƒ­ãƒ¼

1. ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹ã¨ã€`CameraPage`ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
2. ã€Œå†™çœŸã‚’æ’®ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ã€å†™çœŸã‚’æ’®å½±ã—ã¾ã™ã€‚
3. æ’®å½±å¾Œã€è‡ªå‹•çš„ã«`DisplayPhotoPage`ã«é·ç§»ã—ã€æ’®å½±ã—ãŸå†™çœŸã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
4. `AppBar`ã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€`CameraPage`ã«æˆ»ã‚Šã€å†™çœŸã®ãƒ‘ã‚¹ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã§å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆã§ã™ã€‚è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/16 13:07:55*

ã¡ã‚‡ã£ã¨å¤‰ãˆã¦ã¿ãŸ

import 'package:flutter/material.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'shoot_photo_path.g.dart';

@riverpod
class ShootPhotoPathNotifier extends _$ShootPhotoPathNotifier {
  @override
  String? build() =&gt; null;

  void updatePath(String path) {
    debugPrint(path);
    state = path;
  }

  void clear() =&gt; state = null;
}

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:image_picker/image_picker.dart';
import 'package:snpit_guild_app/presentation/providers/shoot_photo_path.dart';

class CameraPage extends ConsumerWidget {
  const CameraPage({super.key});

  Future&lt;void&gt; _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      ref
          .read(shootPhotoPathNotifierProvider.notifier)
          .updatePath(pickedFile.path);

      if (context.mounted) {
        await context.push('/display');
      }
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () =&gt; _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/16 13:08:37*

ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ç‚¹ã‚’ç¢ºèªã—ã¾ã—ãŸï¼è‰¯ã„æ–¹å‘ã«é€²ã‚“ã§ã„ã¾ã™ã­ã€‚ã€Œ`debugPrint`ã€ã‚’è¿½åŠ ã—ã¦ãƒ‡ãƒãƒƒã‚°ç”¨ã«ãƒ‘ã‚¹ã‚’å‡ºåŠ›ã™ã‚‹å·¥å¤«ã‚„ã€`context.mounted`ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æœ‰åŠ¹æ€§ã‚’ç¢ºèªã—ã¦ã„ã‚‹ç‚¹ãŒç‰¹ã«è‰¯ã„ã§ã™ã€‚ã“ã®æµã‚Œã«åˆã‚ã›ã¦ã€`DisplayPhotoPage`ã¨å…¨ä½“ã®æ§‹æˆã‚’çµ±åˆã—ãŸå®Œå…¨ãªã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

---

### 1. `shoot_photo_path.dart`
çŠ¶æ…‹ç®¡ç†ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'shoot_photo_path.g.dart';

@riverpod
class ShootPhotoPathNotifier extends _$ShootPhotoPathNotifier {
  @override
  String? build() => null;

  void updatePath(String path) {
    debugPrint('Updated path: $path');
    state = path;
  }

  void clear() => state = null;
}
```

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è‡ªå‹•ç”Ÿæˆï¼š

```bash
flutter pub run build_runner build
```

---

### 2. `main.dart`
`go_router`ã‚’è¨­å®šã—ã€ç”»é¢é·ç§»ã‚’ç®¡ç†ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'camera_page.dart';
import 'display_photo_page.dart';

void main() {
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        initialLocation: '/',
        routes: [
          GoRoute(
            path: '/',
            builder: (context, state) => const CameraPage(),
          ),
          GoRoute(
            path: '/display',
            builder: (context, state) => const DisplayPhotoPage(),
          ),
        ],
      ),
    );
  }
}
```

---

### 3. `camera_page.dart`
å†™çœŸã‚’æ’®å½±ã—ã¦æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:image_picker/image_picker.dart';
import 'shoot_photo_path.dart';

class CameraPage extends ConsumerWidget {
  const CameraPage({super.key});

  Future<void> _takePhoto(BuildContext context, WidgetRef ref) async {
    final picker = ImagePicker();
    final pickedFile = await picker.pickImage(source: ImageSource.camera);

    if (pickedFile != null) {
      ref
          .read(shootPhotoPathNotifierProvider.notifier)
          .updatePath(pickedFile.path);

      if (context.mounted) {
        await context.push('/display');
      }
    }
  }

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('å†™çœŸæ’®å½±')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => _takePhoto(context, ref),
          child: const Text('å†™çœŸã‚’æ’®ã‚‹'),
        ),
      ),
    );
  }
}
```

---

### 4. `display_photo_page.dart`
å†™çœŸã‚’è¡¨ç¤ºã—ã€æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’`AppBar`ã«é…ç½®ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'dart:io';
import 'shoot_photo_path.dart';

class DisplayPhotoPage extends ConsumerWidget {
  const DisplayPhotoPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final photoPath = ref.watch(shootPhotoPathNotifierProvider);

    return Scaffold(
      appBar: AppBar(
        title: const Text('å†™çœŸè¡¨ç¤º'),
        leading: IconButton(
          icon: const Icon(Icons.arrow_back),
          onPressed: () {
            ref.read(shootPhotoPathNotifierProvider.notifier).clear();
            context.pop();
          },
        ),
      ),
      body: Center(
        child: photoPath != null
            ? Image.file(File(photoPath))
            : const Text('å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“'),
      ),
    );
  }
}
```

---

### å¤‰æ›´å¾Œã®å‹•ä½œãƒ•ãƒ­ãƒ¼

1. ã‚¢ãƒ—ãƒªèµ·å‹•å¾Œã€`CameraPage`ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
2. ã€Œå†™çœŸã‚’æ’®ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ã€å†™çœŸã‚’æ’®å½±ã—ã¾ã™ã€‚
3. å†™çœŸãŒæ’®å½±ã•ã‚Œã‚‹ã¨`shootPhotoPathNotifierProvider`ã«ãƒ‘ã‚¹ãŒä¿å­˜ã•ã‚Œã€`DisplayPhotoPage`ã«é·ç§»ã—ã¾ã™ã€‚
4. `DisplayPhotoPage`ã®`AppBar`å†…ã«é…ç½®ã•ã‚ŒãŸæˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã€ã‚«ãƒ¡ãƒ©ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚

---

### ã‚³ãƒ¼ãƒ‰ã®æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã®`debugPrint`**  
   ãƒ‘ã‚¹ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

2. **`context.mounted`ã®æ´»ç”¨**  
   éåŒæœŸå‡¦ç†ä¸­ã«`BuildContext`ãŒç ´æ£„ã•ã‚Œã‚‹å¯èƒ½æ€§ã‚’é˜²ãã€å®‰å®šã—ãŸç”»é¢é·ç§»ã‚’å®Ÿç¾ã€‚

3. **ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­è¨ˆ**  
   æ›´æ–°ç”¨ã®`updatePath`ã¨ãƒªã‚»ãƒƒãƒˆç”¨ã®`clear`ã®ã¿ã§ã€ç°¡æ½”ãªAPIã‚’æä¾›ã€‚

---

ã“ã‚Œã§ã•ã‚‰ã«èª­ã¿ã‚„ã™ãä½¿ã„ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆã—ã¾ã—ãŸï¼å•é¡ŒãŒã‚ã‚Œã°ã•ã‚‰ã«èª¿æ•´ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/16 13:08:44*

ã€Œå†™çœŸã‚’æ’®ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã‚’

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/16 13:08:46*

ã€Œå†™çœŸã‚’æ’®ã‚‹ã€ãƒœã‚¿ãƒ³ã®æŠ¼ä¸‹ã‚’æ”¹å–„ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã§ãã¾ã™ï¼š

---

### æ”¹å–„ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒœã‚¿ãƒ³ã‚’ä¸­å¤®ã«å¤§ããè¡¨ç¤º**  
   è¦–è¦šçš„ã«ç›®ç«‹ãŸã›ã‚‹ãŸã‚ã€ãƒœã‚¿ãƒ³ã‚’å¤§ããã—ã¾ã™ã€‚
   
2. **ãƒœã‚¿ãƒ³

---
