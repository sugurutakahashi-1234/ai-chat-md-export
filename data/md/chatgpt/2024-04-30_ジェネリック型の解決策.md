# ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®è§£æ±ºç­–

æ—¥ä»˜: 2024-04-30

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/4/30 19:34:56*

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã€

@MainActor @ViewBuilder
    var testCaseListView: some View {
        TestCaseListView&lt;self.testCaseType&gt;()
    }
ã®ç®‡æ‰€ã§Adjacent operators are in non-associative precedence group 'ComparisonPrecedence'ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚

    @MainActor @ViewBuilder
    var testCaseListView: some View {
        TestCaseListView&lt;LicenseListViewTestCase&gt;()
    }ã§ã‚ã‚Œã°ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã€‚

ãªãœã‹ï¼Ÿ


public enum DebugShortcutViewType {
    case deviceInfo
    case onboarding
    case licenseList
    case licenseDetail
    case taskList
}

// MARK: - Extension DebugShortcutViewType

/// for ForEach
extension DebugShortcutViewType: CaseIterable, Identifiable {
    public var id: String {
        "\\(self)"
    }
}

public extension DebugShortcutViewType {
    var name: String {
        switch self {
        case .deviceInfo:
            String(localized: "ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±", bundle: .module)
        case .onboarding:
            String(localized: "ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°", bundle: .module)
        case .licenseList:
            String(localized: "ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ä¸€è¦§", bundle: .module)
        case .licenseDetail:
            String(localized: "ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è©³ç´°", bundle: .module)
        case .taskList:
            String(localized: "ã‚¿ã‚¹ã‚¯ä¸€è¦§", bundle: .module)
        }
    }
    
    var image: some View {
        switch self {
        case .deviceInfo:
            SFSymbols.iphoneGen3.image
        case .onboarding:
            SFSymbols.book.image
        case .licenseList:
            SFSymbols.licenseplate.image
        case .licenseDetail:
            SFSymbols.licenseplateFill.image
        case .taskList:
            SFSymbols.pencilAndListClipboard.image
        }
    }
    
    var label: some View {
        Label(
            title: { Text(name) },
            icon: { self.image }
        )
    }

    var testCaseType: any ViewTestCaseProvider.Type {
        switch self {
        case .deviceInfo:
            LicenseListViewTestCase.self
        case .onboarding:
            LicenseListViewTestCase.self
        case .licenseList:
            LicenseListViewTestCase.self
        case .licenseDetail:
            LicenseListViewTestCase.self
        case .taskList:
            LicenseListViewTestCase.self
        }
    }
    
    @MainActor @ViewBuilder
    var testCaseListView: some View {
        TestCaseListView&lt;self.testCaseType&gt;()
    }
}

public enum LicenseListViewTestCase: ViewTestCaseProvider {
    case normal
    case empty
    
    @MainActor @ViewBuilder
    public var testCaseView: some View {
        switch self {
        case .normal:
            LicenseListView(dependency: AppRootDIContainerDependencyMock.placeholder)
        case .empty:
            LicenseListView(dependency: AppRootDIContainerDependencyMock.empty)
        }
    }
}

public protocol ViewTestCaseProvider: Identifiable, CaseIterable, Hashable {
    associatedtype T: View
    
    @MainActor @ViewBuilder
    var testCaseView: T { get }
}

public extension ViewTestCaseProvider {
    var id: String {
        name
    }
    
    var name: String {
        "\\(self)"
    }
}

struct TestCaseListView&lt;ViewTestCase: ViewTestCaseProvider&gt;: View {
    var body: some View {
        List {
            Section("") {
                ForEach(Array(ViewTestCase.allCases)) { testCase in
                    NavigationLink {
                        testCase.testCaseView
                    } label: {
                        Text("\\(testCase)")
                    }
                }
            }
        }
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/4/30 19:35:25*

ã“ã®å•é¡Œã¯ã€Swiftã®ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã¨ãƒ¡ã‚¿ã‚¿ã‚¤ãƒ—(`Type`)ã®å–ã‚Šæ‰±ã„ã«é–¢é€£ã—ã¦ã„ã¾ã™ã€‚`TestCaseListView&lt;self.testCaseType&gt;()`ã«ãŠã„ã¦ã€`self.testCaseType`ã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦`DebugShortcutViewType`ã®å„ã‚±ãƒ¼ã‚¹ã«ç´ã¥ãå‹ï¼ˆä¾‹ï¼š`LicenseListViewTestCase.self`ï¼‰ã‚’è¿”ã—ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã«ã¯å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

`self.testCaseType`ã¯ã€å®Ÿè¡Œæ™‚ã«æ±ºå®šã•ã‚Œã‚‹å€¤ã§ã™ãŒã€`TestCaseListView&lt;self.testCaseType&gt;()`ã®ã‚ˆã†ã«ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹å ´åˆã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å…·ä½“çš„ãªå‹ãŒå¿…è¦ã§ã™ã€‚ã¤ã¾ã‚Šã€`self.testCaseType`ãŒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦å‹•çš„ã«æ±ºå®šã•ã‚Œã‚‹ãŸã‚ã€ãã®æ™‚ç‚¹ã§å…·ä½“çš„ãªå‹ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã£ã¦çŸ¥ã‚‰ã‚Œã¦ã„ãªã„ãŸã‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

å…·ä½“çš„ãªå‹ã‚’ç›´æ¥æŒ‡å®šã—ãŸå ´åˆã€ä¾‹ãˆã°`TestCaseListView&lt;LicenseListViewTestCase&gt;()`ã®ã‚ˆã†ã«æ›¸ãã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯`LicenseListViewTestCase`ãŒ`ViewTestCaseProvider`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æº€ãŸã—ã¦ã„ã‚‹å…·ä½“çš„ãªå‹ã§ã‚ã‚‹ã¨èªè­˜ã§ãã‚‹ãŸã‚ã€ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€å®Ÿè¡Œæ™‚ã«å‹•çš„ã«ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’æ‰±ã†ã®ã§ã¯ãªãã€å„ã‚±ãƒ¼ã‚¹ã§å…·ä½“çš„ãªå‹ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹ã‹ã€ã¾ãŸã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’ä½¿ã‚ãªã„è¨­è¨ˆã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€`ViewTestCaseProvider`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã€å‹å®‰å…¨ã‚’ä¿ã¡ã¤ã¤å‹•çš„ãªãƒ“ãƒ¥ãƒ¼ç”ŸæˆãŒå¯èƒ½ãªè¨­è¨ˆã‚’æ¤œè¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚‚ã†ä¸€ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã¯ã€`testCaseType`ã‚’è¿”ã™ã®ã§ã¯ãªãã€ç›´æ¥`testCaseListView`ã‚’æä¾›ã™ã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã¾ãŸã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å„ã‚±ãƒ¼ã‚¹ã«å®šç¾©ã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ã“ã®æ–¹æ³•ã§ã¯ã€ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã®å•é¡Œã‚’å›é¿ã—ã¤ã¤ã€å„ã‚±ãƒ¼ã‚¹ã«å¿œã˜ãŸãƒ“ãƒ¥ãƒ¼ã‚’å‹•çš„ã«ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/4/30 19:35:42*

2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§å…·ä½“çš„ãªå®Ÿè£…ã‚’ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/4/30 19:36:22*

ã“ã¡ã‚‰ã§ã¯ã€Swiftã«ãŠã‘ã‚‹ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®å‹•çš„ãªæ‰±ã„ã«é–¢ã™ã‚‹å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å…·ä½“çš„ãªå®Ÿè£…ä¾‹ã¨ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1: ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹

`DebugShortcutViewType` ã®å„ã‚±ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã€ç›´æ¥é©åˆ‡ãªãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆã™ã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„ã‚±ãƒ¼ã‚¹ã§ã©ã®ã‚ˆã†ãªãƒ“ãƒ¥ãƒ¼ãŒå¿…è¦ã‹ã‚’æ˜ç¢ºã«å®šç¾©ã§ãã€ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹•çš„ãªæ‰±ã„ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```swift
public extension DebugShortcutViewType {
    @MainActor @ViewBuilder
    var testCaseListView: some View {
        switch self {
        case .deviceInfo, .onboarding, .licenseList, .licenseDetail, .taskList:
            TestCaseListView<LicenseListViewTestCase>()
        }
    }
}

struct TestCaseListView<ViewTestCase: ViewTestCaseProvider>: View {
    var body: some View {
        List {
            Section("") {
                ForEach(Array(ViewTestCase.allCases)) { testCase in
                    NavigationLink {
                        testCase.testCaseView
                    } label: {
                        Text("\(testCase)")
                    }
                }
            }
        }
    }
}
```

ã“ã®ä¾‹ã§ã¯ã€ã™ã¹ã¦ã®ã‚±ãƒ¼ã‚¹ã§`LicenseListViewTestCase`ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€å¿…è¦ã«å¿œã˜ã¦å„ã‚±ãƒ¼ã‚¹ã§ç•°ãªã‚‹`ViewTestCaseProvider`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã§ãã¾ã™ã€‚

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ2: ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ã‚’æ´»ç”¨ã™ã‚‹

ãƒ—ãƒ­ãƒˆã‚³ãƒ«`ViewTestCaseProvider`ã‚’åˆ©ç”¨ã—ã¦ã€å‹•çš„ã«ãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å…·ä½“çš„ãªã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’æ˜ç¤ºã™ã‚‹å¿…è¦ãŒãªãã€ã‚ˆã‚ŠæŸ”è»Ÿã«ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã§ãã¾ã™ã€‚

```swift
public protocol ViewTestCaseListViewProvider {
    var testCaseListView: AnyView { get }
}

public extension DebugShortcutViewType: ViewTestCaseListViewProvider {
    var testCaseListView: AnyView {
        switch self {
        case .deviceInfo, .onboarding, .licenseList, .licenseDetail, .taskList:
            AnyView(TestCaseListView<LicenseListViewTestCase>())
        }
    }
}

struct TestCaseListView<ViewTestCase: ViewTestCaseProvider>: View {
    var body: some View {
        List {
            Section("") {
                ForEach(Array(ViewTestCase.allCases)) { testCase in
                    NavigationLink {
                        testCase.testCaseView
                    } label: {
                        Text("\(testCase)")
                    }
                }
            }
        }
    }
}
```

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€`AnyView`ã‚’ä½¿ç”¨ã—ã¦å…·ä½“çš„ãªãƒ“ãƒ¥ãƒ¼å‹ã‚’æŠ½è±¡åŒ–ã—ã€`DebugShortcutViewType`ãŒ`ViewTestCaseListViewProvider`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æº€ãŸã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„ã‚±ãƒ¼ã‚¹ã”ã¨ã«ç•°ãªã‚‹`ViewTestCaseProvider`ã‚’è¿”ã™ã‚ˆã†ã«æ‹¡å¼µã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

ã©ã¡ã‚‰ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã€ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®å‹•çš„ãªæŒ‡å®šã«é–¢é€£ã™ã‚‹å•é¡Œã‚’è§£æ±ºã—ã€ã‚ˆã‚Šå®‰å…¨ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã—ã¾ã™ã€‚é©ç”¨ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã‚„æ—¢å­˜ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---
