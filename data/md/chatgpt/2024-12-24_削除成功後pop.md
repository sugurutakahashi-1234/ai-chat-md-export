# å‰Šé™¤æˆåŠŸå¾Œpop

æ—¥ä»˜: 2024-12-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 15:16:25*

å‰Šé™¤ã«æˆåŠŸã—ãŸã‚‰popã—ã¦ã»ã—ã„ã€‚
final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);ã®ä½ç½®ã¯ã“ã“ã§ã‚ã£ã¦ã„ã‚‹ã®ã‹ï¼Ÿ

import 'package:flutter/material.dart';
import 'package:go\_router/go\_router.dart';
import 'package:hooks\_riverpod/hooks\_riverpod.dart';
import 'package:snpit\_guild\_app/presentation/providers/api\_client/guilds/delete\_guild.dart';

class GuildEditPage extends HookConsumerWidget {
  const GuildEditPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    ref.listen&lt;AsyncValue&lt;String?&gt;&gt;(
      deleteGuildNotifierProvider,
      (previous, next) {
        next.when(
          data: (data) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Guild deleted successfully: $data')),
            );
          },
          error: (e, stackTrace) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Error deleting guild: $e')),
            );
          },
          loading: () {
            ScaffoldMessenger.of(context).showSnackBar(
              const SnackBar(content: Text('Deleting guild...')),
            );
          },
        );
      },
    );

    final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);

    return Scaffold(
      appBar: AppBar(title: const Text('Guild Edit')),
      body: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: SingleChildScrollView(
          child: Column(
            children: \[
              ElevatedButton(
                onPressed: () async {
                  final guildId = 'your-guild-id'; // å‰Šé™¤å¯¾è±¡ã®ã‚®ãƒ«ãƒ‰IDã‚’æŒ‡å®š
                  final result = await showDialog&lt;bool&gt;(
                    context: context,
                    builder: (context) =&gt; AlertDialog(
                      title: const Text('Delete Guild'),
                      content: const Text(
                        'Are you sure you want to delete this guild?',
                      ),
                      actions: \[
                        TextButton(
                          onPressed: () =&gt; context.pop(false),
                          child: const Text('Cancel'),
                        ),
                        TextButton(
                          onPressed: () =&gt; context.pop(true),
                          child: const Text('Delete'),
                        ),
                      \],
                    ),
                  );

                  if (result == true) {
                    // å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ
                    await deleteGuildNotifier.executeRequest(guildId);
                  }
                },
                child: const Text('Delete Guild'),
              ),
            \],
          ),
        ),
      ),
    );
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 15:16:39*

`final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);` ã®ä½ç½®ã¯æ­£ã—ã„ã§ã™ã€‚ãŸã ã—ã€å‰Šé™¤ã«æˆåŠŸã—ãŸã‚‰ `context.pop()` ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€`ref.listen` å†…ã§å‰Šé™¤æˆåŠŸæ™‚ã®å‡¦ç†ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã¨ã€å‰Šé™¤æˆåŠŸæ™‚ã« `pop` ãŒå‘¼ã³å‡ºã•ã‚Œã€å‰ã®ç”»é¢ã«æˆ»ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

### ä¿®æ­£ç‰ˆ

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/guilds/delete_guild.dart';

class GuildEditPage extends HookConsumerWidget {
  const GuildEditPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    ref.listen<AsyncValue<String?>>(
      deleteGuildNotifierProvider,
      (previous, next) {
        next.when(
          data: (data) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Guild deleted successfully: $data')),
            );
            // å‰Šé™¤æˆåŠŸæ™‚ã«popã™ã‚‹
            context.pop();
          },
          error: (e, stackTrace) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Error deleting guild: $e')),
            );
          },
          loading: () {
            ScaffoldMessenger.of(context).showSnackBar(
              const SnackBar(content: Text('Deleting guild...')),
            );
          },
        );
      },
    );

    final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);

    return Scaffold(
      appBar: AppBar(title: const Text('Guild Edit')),
      body: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: SingleChildScrollView(
          child: Column(
            children: [
              ElevatedButton(
                onPressed: () async {
                  final guildId = 'your-guild-id'; // å‰Šé™¤å¯¾è±¡ã®ã‚®ãƒ«ãƒ‰IDã‚’æŒ‡å®š
                  final result = await showDialog<bool>(
                    context: context,
                    builder: (context) => AlertDialog(
                      title: const Text('Delete Guild'),
                      content: const Text(
                        'Are you sure you want to delete this guild?',
                      ),
                      actions: [
                        TextButton(
                          onPressed: () => context.pop(false),
                          child: const Text('Cancel'),
                        ),
                        TextButton(
                          onPressed: () => context.pop(true),
                          child: const Text('Delete'),
                        ),
                      ],
                    ),
                  );

                  if (result == true) {
                    // å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ
                    await deleteGuildNotifier.executeRequest(guildId);
                  }
                },
                child: const Text('Delete Guild'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

### ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ
1. **`ref.listen` å†…ã§ `context.pop()` ã‚’å‘¼ã³å‡ºã—**  
   å‰Šé™¤æˆåŠŸæ™‚ã« `context.pop()` ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ã€ç¾åœ¨ã®ç”»é¢ã‚’é–‰ã˜ã¾ã™ã€‚

2. **`deleteGuildNotifier` ã®ä½ç½®ã‚’ç¶­æŒ**  
   `ref.watch` ã®ä½ç½®ã¯å¤‰æ›´ã—ã¦ã„ã¾ã›ã‚“ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè¡Œã«ã¯é©åˆ‡ãªä½ç½®ã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€å‰Šé™¤æˆåŠŸæ™‚ã«ã‚¹ãƒŠãƒƒã‚¯ãƒãƒ¼ã‚’è¡¨ç¤ºã—ãŸå¾Œã«å‰ã®ç”»é¢ã«æˆ»ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 15:17:25*

deleteGuildNotifier ã¯ onPressed æ™‚ã«å®£è¨€ã™ã‚‹ã®ã¨ã©ã¡ã‚‰ãŒã„ã„ã®ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 15:17:44*

`deleteGuildNotifier` ã‚’ **`onPressed` æ™‚ã«å®£è¨€ã™ã‚‹**ã®ã¨ã€**`Widget build` å†…ã§å®£è¨€ã™ã‚‹**ã®ã¯ãã‚Œãã‚Œåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ãªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚„ç”¨é€”ã«å¿œã˜ãŸé¸æŠè‚¢ã‚’è€ƒãˆã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

### **1. `Widget build` å†…ã§å®£è¨€ã™ã‚‹å ´åˆ (ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰)**

```dart
final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);
```

#### **ãƒ¡ãƒªãƒƒãƒˆ**
- **å†åˆ©ç”¨æ€§**: `deleteGuildNotifier` ãŒ `build` ãƒ¡ã‚½ãƒƒãƒ‰å…¨ä½“ã§ä½¿ãˆã‚‹ãŸã‚ã€ä»–ã®ãƒœã‚¿ãƒ³ã‚„å‡¦ç†ã§ã‚‚åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å†åˆ©ç”¨ã§ãã¾ã™ã€‚
- **ã‚³ãƒ¼ãƒ‰ã®èª­ã¿ã‚„ã™ã•**: `deleteGuildNotifier` ãŒä¸Šéƒ¨ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä»–ã®é–‹ç™ºè€…ãŒã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã¨ãã«ã€ã“ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãŒã“ã®ãƒšãƒ¼ã‚¸å…¨ä½“ã§åˆ©ç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ç†è§£ã—ã‚„ã™ã„ã§ã™ã€‚
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: `ref.watch` ã¯ãƒªãƒ“ãƒ«ãƒ‰ã”ã¨ã«ãƒ—ãƒ­ãƒã‚¤ãƒ€ã®çŠ¶æ…‹ã‚’é©åˆ‡ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€å†—é•·ãªå®£è¨€ã‚’é¿ã‘ã‚‰ã‚Œã¾ã™ã€‚

#### **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**
- **ã‚¹ã‚³ãƒ¼ãƒ—ãŒåºƒã„**: å®Ÿéš›ã«åˆ©ç”¨ã•ã‚Œã‚‹ã®ã¯ `onPressed` æ™‚ã®ã¿ã§ã‚ã‚‹å ´åˆã€`build` å†…ã§ã®å®£è¨€ã¯å°‘ã—éå‰°ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---

### **2. `onPressed` å†…ã§å®£è¨€ã™ã‚‹å ´åˆ**

```dart
onPressed: () async {
  final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);
  await deleteGuildNotifier.executeRequest(guildId);
},
```

#### **ãƒ¡ãƒªãƒƒãƒˆ**
- **ã‚¹ã‚³ãƒ¼ãƒ—ã®é™å®š**: `deleteGuildNotifier` ã®åˆ©ç”¨ç¯„å›²ãŒç‹­ã¾ã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã¾ã™ï¼ˆã“ã®ãƒœã‚¿ãƒ³ã§ã—ã‹ä½¿ã‚ãªã„ã¨ã‚ã‹ã‚‹ï¼‰ã€‚
- **åŠ¹ç‡çš„ãªç®¡ç†**: `onPressed` ã®ä¸­ã§ã®ã¿ä½¿ã‚ã‚Œã‚‹ãŸã‚ã€æ„å›³çš„ã«ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

#### **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**
- **é‡è¤‡ã®å¯èƒ½æ€§**: ä»–ã®å ´æ‰€ã§åŒã˜ `deleteGuildNotifier` ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€æ¯å›å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- **ãƒ†ã‚¹ãƒˆæ€§ã®ä½ä¸‹**: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§å®£è¨€ã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆæ™‚ã«ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã—ã¥ã‚‰ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

---

### **ã©ã¡ã‚‰ã‚’é¸ã¶ã¹ãã‹ï¼Ÿ**
- **ã‚·ãƒ³ãƒ—ãƒ«ãªã‚±ãƒ¼ã‚¹**:  
  ãƒœã‚¿ãƒ³ãŒ1ã¤ã—ã‹ãªãã€`deleteGuildNotifier` ãŒä»–ã®å ´æ‰€ã§å†åˆ©ç”¨ã•ã‚Œãªã„å ´åˆã¯ã€`onPressed` å†…ã§å®£è¨€ã™ã‚‹ã®ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚

- **è¤‡æ•°ç®‡æ‰€ã§åˆ©ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆ**:  
  ä»–ã®ãƒœã‚¿ãƒ³ã‚„å‡¦ç†ã§åŒã˜ `deleteGuildNotifier` ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€`build` å†…ã§å®£è¨€ã™ã‚‹æ–¹ãŒè‰¯ã„ã§ã™ã€‚

---

### **æ¨å¥¨**
ä»Šå›ã¯ `deleteGuildNotifier` ã‚’ **ã“ã®ãƒœã‚¿ãƒ³ã ã‘ã§ä½¿ç”¨ã™ã‚‹** å¯èƒ½æ€§ãŒé«˜ã„ãŸã‚ã€`onPressed` å†…ã§å®£è¨€ã™ã‚‹æ–¹ãŒã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒæ˜ç¢ºã§è‰¯ã„é¸æŠã§ã™ã€‚

ä¿®æ­£ä¾‹:

```dart
onPressed: () async {
  final guildId = 'your-guild-id'; // å‰Šé™¤å¯¾è±¡ã®ã‚®ãƒ«ãƒ‰IDã‚’æŒ‡å®š
  final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);
  final result = await showDialog<bool>(
    context: context,
    builder: (context) => AlertDialog(
      title: const Text('Delete Guild'),
      content: const Text(
        'Are you sure you want to delete this guild?',
      ),
      actions: [
        TextButton(
          onPressed: () => context.pop(false),
          child: const Text('Cancel'),
        ),
        TextButton(
          onPressed: () => context.pop(true),
          child: const Text('Delete'),
        ),
      ],
    ),
  );

  if (result == true) {
    await deleteGuildNotifier.executeRequest(guildId);
  }
},
```

---

### **ã¾ã¨ã‚**
- å†åˆ©ç”¨æ€§ã‚„ãƒ†ã‚¹ãƒˆæ€§ã‚’è€ƒæ…®ã™ã‚‹ãªã‚‰ **`build` å†…ã§å®£è¨€**ã€‚
- å˜ç´”ãªã‚¹ã‚³ãƒ¼ãƒ—ã§æ¸ˆã‚€ãªã‚‰ **`onPressed` å†…ã§å®£è¨€**ã€‚

---
