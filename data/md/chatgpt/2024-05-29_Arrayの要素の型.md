# Arrayã®è¦ç´ ã®å‹

Date: 2024-05-29

---

## ğŸ‘¤ User
*2024-05-29 11:36:07*

\(type(of: subObjects)) ã®ã¨ãã« Array&lt;Any&gt; ã¨ãªã£ã¦ã—ã¾ã†ã€‚

---

## ğŸ¤– Assistant
*2024-05-29 11:36:17*

`type(of:)` é–¢æ•°ã‚’ä½¿ã†ã¨ãã« `Array<Any>` ã¨ãªã£ã¦ã—ã¾ã†å ´åˆã€ãã‚Œã¯ Swift ãŒé…åˆ—ã®è¦ç´ ã®å…·ä½“çš„ãªå‹æƒ…å ±ã‚’å¤±ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚å…·ä½“çš„ãªå‹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã¯ã€é…åˆ—ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã®å‹ã‚’èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ä¾‹ã§ã€é…åˆ—ã®è¦ç´ ã®å‹ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
let subObjects: [Any] = [1, "string", 3.14]

// é…åˆ—å…¨ä½“ã®å‹ã‚’å–å¾—ã™ã‚‹ã¨ Array<Any> ã«ãªã‚‹
print(type(of: subObjects)) // Array<Any>

// å„è¦ç´ ã®å‹ã‚’å€‹åˆ¥ã«å–å¾—ã™ã‚‹
for element in subObjects {
    print(type(of: element))
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`subObjects` é…åˆ—ã®å„è¦ç´ ã®å‹ã‚’å€‹åˆ¥ã«å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚ãã‚Œãã‚Œã®è¦ç´ ã®å‹ãŒç•°ãªã‚‹å ´åˆã€ãã‚Œãã‚Œã®å‹ãŒæ­£ã—ãå‡ºåŠ›ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã‚‚ã— `subObjects` é…åˆ—ãŒç‰¹å®šã®å‹ã‚’æŒã¤ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹å ´åˆã€å‹ã‚’å…·ä½“çš„ã«æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

```swift
let subObjects: [String] = ["one", "two", "three"]

print(type(of: subObjects)) // Array<String>

// é…åˆ—å…¨ä½“ã®å‹ãŒã‚ã‹ã‚‹
if let firstElement = subObjects.first {
    print(type(of: firstElement)) // String
}
```

ã“ã®å ´åˆã€`subObjects` é…åˆ—ãŒ `Array<String>` å‹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã—ã€å„è¦ç´ ã®å‹ã‚‚ `String` ã§ã‚ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚

ç‰¹å®šã®ã‚¯ãƒ©ã‚¹ã‚„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã®å ´åˆã‚‚åŒæ§˜ã§ã™ï¼š

```swift
class MyClass {}
let subObjects: [MyClass] = [MyClass(), MyClass()]

print(type(of: subObjects)) // Array<MyClass>

if let firstElement = subObjects.first {
    print(type(of: firstElement)) // MyClass
}
```

ã“ã®ã‚ˆã†ã«ã—ã¦ã€é…åˆ—ã®å…·ä½“çš„ãªå‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ User
*2024-05-29 11:37:51*

ä»¥ä¸‹ã® Text("\(type(of: subObjects))") ã‚’å…·ä½“çš„ãªå‹åã‚’å–å¾—ã—ãŸã„ã‚“ã 

import SwiftUI

struct PropertyView: View {
    var objects: [Any] = []
    
    init(objects: [Any]) {
        self.objects = objects
    }

    public var body: some View {
        List {
            ForEach(Array(objects.enumerated()), id: \.offset) { index, object in
                DisclosureGroup {
                    propertyView(object: object)
                } label: {
                    HStack {
                        Text("\(type(of: object))")
                        Spacer()
                        Text("\(type(of: object))[\(index)]")
                    }
                }
            }
        }
    }
    
    func propertyView(object: Any) -&gt; some View {
        AnyView(ForEach(Array(Mirror(reflecting: object).children.enumerated()), id: \.offset) { index, child in
            if let label = child.label {
                let childMirror = Mirror(reflecting: child.value)
                if childMirror.displayStyle == .struct || childMirror.displayStyle == .class {
                    DisclosureGroup {
                        propertyView(object: child.value)
                    } label: {
                        Text(label)
                    }
                } else if let subObjects = child.value as? [Any] {
                    DisclosureGroup {
                        ForEach(Array(subObjects.enumerated()), id: \.offset) { subIndex, subObject in
                            propertyView(object: subObject)
                        }
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text("\(type(of: subObjects))")
                        }
                    }
                } else {
                    Button {
                        UIPasteboard.general.string = "\(child.value)"
                        print("\(child.value)")
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text("\(child.value)")
                        }
                    }
                }
            }
        })
    }
}

struct Address {
    var city: [String]
    var postalCode: [Int]
}

struct Person {
    var name: String
    var age: Int
    var isEmployed: Bool
    var address: [Address]
}

#Preview {
    NavigationStack {
        PropertyView(objects: [
            Person(name: "John Doe", age: 30, isEmployed: true, address: [
                Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode:[10001, 10002]),
            ]),
            Person(name: "John Doe", age: 30, isEmployed: true, address: [
                Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
            ])
        ])
    }
}

---

## ğŸ¤– Assistant
*2024-05-29 11:38:07*

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€å…·ä½“çš„ãªå‹åã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€`type(of:)` ã‚’ä½¿ç”¨ã—ã¦å¾—ã‚‰ã‚ŒãŸå‹åã‚’ `Text` ãƒ“ãƒ¥ãƒ¼ã«è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€å‹åã‚’ã‚ˆã‚Šè©³ç´°ã«å–å¾—ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

```swift
import SwiftUI

struct PropertyView: View {
    var objects: [Any] = []
    
    init(objects: [Any]) {
        self.objects = objects
    }

    public var body: some View {
        List {
            ForEach(Array(objects.enumerated()), id: \.offset) { index, object in
                DisclosureGroup {
                    propertyView(object: object)
                } label: {
                    HStack {
                        Text(typeName(of: object))
                        Spacer()
                        Text("\(typeName(of: object))[\(index)]")
                    }
                }
            }
        }
    }
    
    func typeName(of object: Any) -> String {
        return String(describing: type(of: object))
    }

    func propertyView(object: Any) -> some View {
        AnyView(ForEach(Array(Mirror(reflecting: object).children.enumerated()), id: \.offset) { index, child in
            if let label = child.label {
                let childMirror = Mirror(reflecting: child.value)
                if childMirror.displayStyle == .struct || childMirror.displayStyle == .class {
                    DisclosureGroup {
                        propertyView(object: child.value)
                    } label: {
                        Text(label)
                    }
                } else if let subObjects = child.value as? [Any] {
                    DisclosureGroup {
                        ForEach(Array(subObjects.enumerated()), id: \.offset) { subIndex, subObject in
                            propertyView(object: subObject)
                        }
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text(typeName(of: subObjects))
                        }
                    }
                } else {
                    Button {
                        UIPasteboard.general.string = "\(child.value)"
                        print("\(child.value)")
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text("\(child.value)")
                        }
                    }
                }
            }
        })
    }
}

struct Address {
    var city: [String]
    var postalCode: [Int]
}

struct Person {
    var name: String
    var age: Int
    var isEmployed: Bool
    var address: [Address]
}

struct PropertyView_Previews: PreviewProvider {
    static var previews: some View {
        NavigationStack {
            PropertyView(objects: [
                Person(name: "John Doe", age: 30, isEmployed: true, address: [
                    Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                    Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                ]),
                Person(name: "Jane Doe", age: 25, isEmployed: false, address: [
                    Address(city: ["San Francisco", "å¤§é˜ª"], postalCode: [94105, 550001]),
                    Address(city: ["San Francisco", "å¤§é˜ª"], postalCode: [94105, 550001]),
                ])
            ])
        }
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`typeName(of:)` é–¢æ•°ã‚’å®šç¾©ã—ã¦ã€å‹ã®åå‰ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒªã‚¹ãƒˆã®å„è¦ç´ ã®å‹åã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚æ›´æ–°ã•ã‚Œã¦ãŠã‚Šã€`PropertyView` ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã—ã¾ã™ã€‚æ–°ã—ã„ `typeName(of:)` é–¢æ•°ã‚’ä½¿ã£ã¦ã€ã‚ˆã‚Šè©³ç´°ãªå‹åã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ‘¤ User
*2024-05-29 11:39:13*

å¤‰ã‚ã‚‰ãªã‹ã£ãŸ

---

## ğŸ¤– Assistant
*2024-05-29 11:39:35*

å…·ä½“çš„ãªå‹åã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€é…åˆ—ã®è¦ç´ ã®å‹æƒ…å ±ã‚’ã‚ˆã‚Šè©³ç´°ã«æ‰±ã†ãŸã‚ã®æ–¹æ³•ã‚’å†åº¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`Mirror` ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’å–å¾—ã—ã€ãã‚Œã‚’ `Text` ã«è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

```swift
import SwiftUI

struct PropertyView: View {
    var objects: [Any] = []
    
    init(objects: [Any]) {
        self.objects = objects
    }

    public var body: some View {
        List {
            ForEach(Array(objects.enumerated()), id: \.offset) { index, object in
                DisclosureGroup {
                    propertyView(object: object)
                } label: {
                    HStack {
                        Text(typeName(of: object))
                        Spacer()
                        Text("\(typeName(of: object))[\(index)]")
                    }
                }
            }
        }
    }
    
    func typeName(of object: Any) -> String {
        let mirror = Mirror(reflecting: object)
        return "\(mirror.subjectType)"
    }

    func propertyView(object: Any) -> some View {
        AnyView(ForEach(Array(Mirror(reflecting: object).children.enumerated()), id: \.offset) { index, child in
            if let label = child.label {
                let childMirror = Mirror(reflecting: child.value)
                if childMirror.displayStyle == .struct || childMirror.displayStyle == .class {
                    DisclosureGroup {
                        propertyView(object: child.value)
                    } label: {
                        Text(label)
                    }
                } else if let subObjects = child.value as? [Any] {
                    DisclosureGroup {
                        ForEach(Array(subObjects.enumerated()), id: \.offset) { subIndex, subObject in
                            propertyView(object: subObject)
                        }
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text("\(typeName(of: subObjects))")
                        }
                    }
                } else {
                    Button {
                        UIPasteboard.general.string = "\(child.value)"
                        print("\(child.value)")
                    } label: {
                        HStack {
                            Text(label)
                            Spacer()
                            Text("\(child.value)")
                        }
                    }
                }
            }
        })
    }
}

struct Address {
    var city: [String]
    var postalCode: [Int]
}

struct Person {
    var name: String
    var age: Int
    var isEmployed: Bool
    var address: [Address]
}

struct PropertyView_Previews: PreviewProvider {
    static var previews: some View {
        NavigationStack {
            PropertyView(objects: [
                Person(name: "John Doe", age: 30, isEmployed: true, address: [
                    Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                    Address(city: ["New York", "ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼"], postalCode: [10001, 10002]),
                ]),
                Person(name: "Jane Doe", age: 25, isEmployed: false, address: [
                    Address(city: ["San Francisco", "å¤§é˜ª"], postalCode: [94105, 550001]),
                    Address(city: ["San Francisco", "å¤§é˜ª"], postalCode: [94105, 550001]),
                ])
            ])
        }
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ `typeName(of:)` é–¢æ•°ã‚’ä¿®æ­£ã—ã€`Mirror` ã‚’ä½¿ã£ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹åã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å…·ä½“çš„ãªå‹åãŒ `Text` ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---
