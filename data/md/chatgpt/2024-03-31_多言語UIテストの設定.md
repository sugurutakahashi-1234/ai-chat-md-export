# 多言語UIテストの設定

日付: 2024-03-31

---

## 👤 ユーザー
*2024/03/31 18:32:47*

xcodeのtestplanで複数言語のテストを設定して、UIテストをおこなったのだけれども、期待値の設定で言語が違う場合はどう設定する場いいかわかる？

---

## 🤖 アシスタント
*2024/03/31 18:33:33*

XcodeのTest Planで複数言語のUIテストを行う場合、期待値の設定で言語が異なる場合の対処方法についての質問ですね。XcodeのTest Planでは、異なるロケールや言語設定でのテストを容易に実行できるように設計されていますが、期待値が言語に依存する場合、いくつかの方法で対応することができます。

### 1. XCTestのLocalization Testing機能を利用する
XcodeのXCTestフレームワークは、ローカライズされた文字列を扱うためのサポートを提供しています。テスト内で、アプリがサポートする各言語について期待値を定義し、実行中の言語設定に基づいて適切な期待値を選択することができます。

```swift
let localizedString = NSLocalizedString("key", comment: "Comment")
XCTAssertEqual(element.label, localizedString)
```

ここで、`"key"`はローカライズファイル内の特定の文字列のキーを指します。テストは現在の言語設定に基づいて適切なローカライズファイルから値を取得します。

### 2. Test PlanのConfigurationsを利用する
Test Plan内で異なる言語設定ごとに異なるConfigurationを設定できます。それぞれのConfigurationにおいて、環境変数や引数を介してアプリに期待値に関する情報を渡すことができます。例えば、英語と日本語のテストでは異なる環境変数を設定し、テスト内でこれらの値に基づいて期待するテキストを変更することができます。

### 3. UIテストでの動的期待値の設定
UIテスト内で言語ごとに異なる期待値を動的に設定する方法もあります。これは、テストが実行される前に現在のロケールや言語設定をチェックし、それに応じて期待値を調整することで実現できます。これにより、一連のテストを異なる言語で効率的に実行できます。

### 結論
XcodeのTest PlanとXCTestフレームワークを利用すれば、複数言語のサポートにおけるUIテストを効率的に実行できます。ローカライズされた文字列を扱う際は、適切なローカライズファイルから期待値を動的に取得するか、Test Planの設定を利用してテストごとに期待値を調整することが重要です。このアプローチにより、異なるロケールや言語設定でのアプリの動作を確認することができます。

---
