# CachedNetworkImageのキャッシュ機能

Date: 2025-01-22

---

## 👤 User
*2025-01-22 20:29:20*

CachedNetworkImage は url をキャッシュするスタイルなの？

---

## 🤖 Assistant
*2025-01-22 20:29:44*

はい、`CachedNetworkImage` は基本的に **URL に基づいてキャッシュ** を行います。具体的には、指定された URL の画像をダウンロードし、それをデバイスのローカルストレージに保存します。次回同じ URL が指定された場合、ダウンロードをスキップしてローカルキャッシュから画像をロードします。

### 主な動作
1. **初回ロード時**: 指定された URL の画像をダウンロードし、ローカルに保存します。
2. **再利用時**: 
   - 同じ URL の画像がすでにキャッシュに存在する場合は、それを直接ロードします。
   - キャッシュが有効期限切れの場合、再ダウンロードします。

### キャッシュ戦略
- **URL ベースのキャッシュ**: 
  URL がキャッシュのキーとして使用されます。そのため、URL にクエリパラメータ（例: `?version=1`）が異なる場合でも、別の画像として認識されます。

- **キャッシュの管理**:
  - キャッシュサイズの設定
  - キャッシュの期限設定
  - 古いキャッシュの自動削除（キャッシュがいっぱいの場合）

### 注意点
- URL が変わると別の画像として扱われます。例えば、同じ画像でも URL にタイムスタンプやバージョン情報が含まれる場合、それぞれ別途キャッシュされる可能性があります。
- ローカルキャッシュに保存されるので、オフライン状態でもキャッシュされた画像は表示できます。

### 利用シナリオ
- 画像を頻繁にダウンロードする必要がある場合にネットワーク負荷を軽減。
- ユーザーエクスペリエンスを向上させるために、画像のロード時間を短縮。

もし `CachedNetworkImage` のキャッシュスタイルや挙動についてカスタマイズしたい場合、キャッシュキーを変更したり、独自のキャッシュディレクトリを指定したりすることも可能です。

---
