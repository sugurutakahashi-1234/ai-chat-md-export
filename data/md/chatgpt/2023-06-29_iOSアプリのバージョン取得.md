# iOSアプリのバージョン取得

日付: 2023-06-29

---

## 👤 ユーザー
*2023/6/29 12:51:40*

SwiftでのiOSアプリ、ビルドバージョンとアプリバージョンの取り方と、その例をおしえてほしい。、

---

## 🤖 アシスタント
*2023/6/29 12:52:13*

SwiftでiOSアプリのビルドバージョンとアプリバージョンを取得する方法は、以下の通りです。

```swift
if let version = Bundle.main.infoDictionary?["CFBundleShortVersionString"] as? String {
    print(version)
}

if let build = Bundle.main.infoDictionary?["CFBundleVersion"] as? String {
    print(build)
}
```

これらのコードは、アプリのメタデータを含む `infoDictionary` を利用しています。

- `CFBundleShortVersionString` キーは、パブリックに公開されるアプリのバージョン番号（`1.0.0`, `1.0.1`, `1.1.0`など）を参照します。この番号はアプリストアに表示されるもので、ユーザーが参照する情報です。
- `CFBundleVersion` キーは、ビルドの一意の識別子を参照します。これは内部的に利用する情報で、通常は開発やテスト中に使われ、各ビルドを区別するために使います。

これらの情報は、プロジェクトの設定で変更可能で、一般的には新機能のリリースや重要なバグフィックスのたびにバージョンを上げ、ビルド番号は各ビルドのたびに上げることが多いです。

---

## 👤 ユーザー
*2023/6/29 12:54:43*

テストフライトやアプリでストア配信されたアプリについて、アプリバージョンとビルドバージョンの組み合わせが一緒ならソースコードは一緒だといえるか？

---

## 🤖 アシスタント
*2023/6/29 12:55:10*

アプリバージョンとビルドバージョンの組み合わせが一致する場合でも、ソースコードが完全に一致するとは限りません。アプリバージョンとビルドバージョンは、一般的にアプリのリリースバージョンを追跡するためのツールであり、開発者が手動で更新します。これらの値が一致していても、開発者が間違って同じバージョンとビルド番号を異なるコードでビルドした場合、異なるソースコードを持つ同一バージョンのアプリが存在する可能性があります。

一般的に、バージョンとビルド番号はコードの新しいリリースまたは変更を表すものであり、異なるバージョンのアプリは通常、異なるソースコードによって生成されます。しかし、それは「常に」とは限らず、それらの値が手動で制御されるため、必ずしも完全な一貫性があるわけではありません。

したがって、2つのアプリが完全に同じソースコードから生成されたことを確認する最良の方法は、ソースコード自体をチェックするか、開発プロセスでバージョンとビルド番号の一貫性を強く強調することです。

---

## 👤 ユーザー
*2023/6/29 12:55:34*

ソースコードが同じであることを確認するにはなにをみればいいか？

---

## 🤖 アシスタント
*2023/6/29 12:56:19*

ソースコードが同じであることを確認するためには、以下の手段が一般的に利用されます：

1. **直接比較:** 一番直接的な方法は、2つのソースコードのセットを直接比較することです。ただし、これは両方のソースコードが利用可能で、且つ読解できる場合に限られます。

2. **バージョン管理システム:** ソースコードがバージョン管理システム（Gitなど）によって管理されている場合、特定のコミットハッシュやタグをチェックすることで、ソースコードが同じであることを確認することが可能です。

3. **ビルドプロセスの文書化と再現性:** ソースコードからビルドされたアプリケーションが同じであることを確認するためには、ビルドプロセスが文書化され、一貫性と再現性が保証されていることが重要です。これには、同じバージョンの依存ライブラリ、同じビルドツールと設定、そして同じビルド手順が含まれます。

4. **ハッシュ値の比較:** ある特定のソースコードが同じであることを確認する方法としては、ソースコード全体または特定の部分のハッシュ値を比較することも考えられます。しかし、これは完全な一致が必要であり、最小の変更でもハッシュは大きく変わるため、実用性には限りがあります。

これらの手段により、ソースコードが同じであることを確認することが可能ですが、それぞれの手段が適用可能な状況や、それらの信頼性は異なります。そのため、どの手段を選択するかは、具体的な要件や利用可能な情報によるところが大きいです。

---

## 👤 ユーザー
*2023/6/29 12:56:42*

ビルドバージョンは自動的にインクリメントされるので、アプリバージョンとビルドバージョンの組み合わせが一致するならソースコードが一致すると言えるかな

---

## 🤖 アシスタント
*2023/6/29 12:57:11*

一般的に、アプリバージョンとビルドバージョンの組み合わせが一致する場合、同じソースコードからビルドされた可能性は高いです。しかし、絶対的な確証とはならないことを理解しておくことが重要です。開発プロセスによっては、ビルド番号が自動的にインクリメントされるとはいえ、開発者が間違えて同じバージョンとビルド番号を使って異なるコードをビルドする可能性もゼロではありません。

さらに、同じソースコードでもビルド環境（利用されるライブラリのバージョン、コンパイラのバージョン、ビルド設定など）が異なると、結果として生成されるアプリの動作が異なる場合があることも覚えておくと良いでしょう。

そのため、確実に同じソースコードからビルドされたことを確認したい場合には、バージョン管理システム（Gitなど）で追跡されている特定のコミットやタグを確認する、ソースコード自体を直接比較するなどの方法を利用するほうが良いでしょう。

---
