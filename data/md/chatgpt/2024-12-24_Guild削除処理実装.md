# Guildå‰Šé™¤å‡¦ç†å®Ÿè£…

æ—¥ä»˜: 2024-12-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 15:12:15*

onãƒ—ãƒ¬ã‚¹ã§å‰Šé™¤å‡¦ç†ã‚’å…¥ã‚Œã¦æ¬²ã—ã„

import 'package:flutter/foundation.dart';
import 'package:riverpod\_annotation/riverpod\_annotation.dart';

import 'package:snpit\_guild\_app/presentation/providers/api\_client/guild\_api\_provider.dart';

part 'delete\_guild.g.dart';

@riverpod
class DeleteGuildNotifier extends \_$DeleteGuildNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; executeRequest(String guildId) async {
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerDeleteGuild(guildId: guildId);
      debugPrint('Response Body: ${response.data}');
      state = AsyncValue.data(response.data?.data);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

import 'package:flutter/material.dart';
import 'package:hooks\_riverpod/hooks\_riverpod.dart';

class GuildEditPage extends HookConsumerWidget {
  const GuildEditPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('Guild Edit')),
      body: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: SingleChildScrollView(
          child: Column(
            children: \[
              ElevatedButton(
                onPressed: () {
                  // Add your delete logic here
                },
                child: const Text('Delete Guild'),
              ),
            \],
          ),
        ),
      ),
    );
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 15:12:33*

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’åŸºã«ã€`DeleteGuildNotifier` ã‚’ä½¿ç”¨ã—ã¦å‰Šé™¤å‡¦ç†ã‚’ `onPressed` å†…ã«è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã«å‰Šé™¤å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/presentation/providers/delete_guild/delete_guild.dart';

class GuildEditPage extends HookConsumerWidget {
  const GuildEditPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);

    return Scaffold(
      appBar: AppBar(title: const Text('Guild Edit')),
      body: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: SingleChildScrollView(
          child: Column(
            children: [
              ElevatedButton(
                onPressed: () async {
                  final guildId = 'your-guild-id'; // å‰Šé™¤å¯¾è±¡ã®ã‚®ãƒ«ãƒ‰IDã‚’æŒ‡å®š
                  final result = await showDialog<bool>(
                    context: context,
                    builder: (context) => AlertDialog(
                      title: const Text('Delete Guild'),
                      content: const Text('Are you sure you want to delete this guild?'),
                      actions: [
                        TextButton(
                          onPressed: () => Navigator.of(context).pop(false),
                          child: const Text('Cancel'),
                        ),
                        TextButton(
                          onPressed: () => Navigator.of(context).pop(true),
                          child: const Text('Delete'),
                        ),
                      ],
                    ),
                  );

                  if (result == true) {
                    // å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ
                    await deleteGuildNotifier.executeRequest(guildId);
                    final state = ref.read(deleteGuildNotifierProvider);
                    state.when(
                      data: (data) {
                        ScaffoldMessenger.of(context).showSnackBar(
                          SnackBar(content: Text('Guild deleted successfully: $data')),
                        );
                      },
                      error: (e, stackTrace) {
                        ScaffoldMessenger.of(context).showSnackBar(
                          SnackBar(content: Text('Error deleting guild: $e')),
                        );
                      },
                      loading: () {
                        ScaffoldMessenger.of(context).showSnackBar(
                          const SnackBar(content: Text('Deleting guild...')),
                        );
                      },
                    );
                  }
                },
                child: const Text('Delete Guild'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

### ä¸»ãªå¤‰æ›´ç‚¹
1. **ã‚®ãƒ«ãƒ‰IDã®æŒ‡å®š**: `guildId` ã‚’ä»®ã« `'your-guild-id'` ã¨ã—ã¦è¨­å®šã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«ã¯é©åˆ‡ãªå€¤ã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚
2. **ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«ã‚ˆã‚‹ç¢ºèª**: å‰Šé™¤å‰ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
3. **å‰Šé™¤å‡¦ç†ã®å‘¼ã³å‡ºã—**: `DeleteGuildNotifier` ã® `executeRequest` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦å‰Šé™¤ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
4. **å‰Šé™¤æˆåŠŸ/å¤±æ•—æ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: æˆåŠŸæ™‚ã‚„ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã« `SnackBar` ã§é€šçŸ¥ã—ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€å‰Šé™¤å‡¦ç†ãŒé©åˆ‡ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 15:13:09*

ref.listen&lt;AsyncValue&lt;String?&gt;&gt;( ã§ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 15:13:31*

`ref.listen<AsyncValue<String?>>` ã‚’ä½¿ç”¨ã—ã¦ã€å‰Šé™¤å‡¦ç†ã®çŠ¶æ…‹å¤‰åŒ–ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‰Šé™¤å‡¦ç†ã®æˆåŠŸã‚„å¤±æ•—ã‚’ `SnackBar` ã§é€šçŸ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/presentation/providers/delete_guild/delete_guild.dart';

class GuildEditPage extends HookConsumerWidget {
  const GuildEditPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // çŠ¶æ…‹ã®å¤‰æ›´ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    ref.listen<AsyncValue<String?>>(
      deleteGuildNotifierProvider,
      (previous, next) {
        next.when(
          data: (data) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Guild deleted successfully: $data')),
            );
          },
          error: (e, stackTrace) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text('Error deleting guild: $e')),
            );
          },
          loading: () {
            ScaffoldMessenger.of(context).showSnackBar(
              const SnackBar(content: Text('Deleting guild...')),
            );
          },
        );
      },
    );

    final deleteGuildNotifier = ref.watch(deleteGuildNotifierProvider.notifier);

    return Scaffold(
      appBar: AppBar(title: const Text('Guild Edit')),
      body: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: SingleChildScrollView(
          child: Column(
            children: [
              ElevatedButton(
                onPressed: () async {
                  final guildId = 'your-guild-id'; // å‰Šé™¤å¯¾è±¡ã®ã‚®ãƒ«ãƒ‰IDã‚’æŒ‡å®š
                  final result = await showDialog<bool>(
                    context: context,
                    builder: (context) => AlertDialog(
                      title: const Text('Delete Guild'),
                      content: const Text('Are you sure you want to delete this guild?'),
                      actions: [
                        TextButton(
                          onPressed: () => Navigator.of(context).pop(false),
                          child: const Text('Cancel'),
                        ),
                        TextButton(
                          onPressed: () => Navigator.of(context).pop(true),
                          child: const Text('Delete'),
                        ),
                      ],
                    ),
                  );

                  if (result == true) {
                    // å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ
                    await deleteGuildNotifier.executeRequest(guildId);
                  }
                },
                child: const Text('Delete Guild'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

### ä¸»ãªå¤‰æ›´ç‚¹
1. **`ref.listen` ã‚’ä½¿ç”¨**:
   - `deleteGuildNotifierProvider` ã®çŠ¶æ…‹å¤‰åŒ–ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã€æˆåŠŸã€å¤±æ•—ã€ãƒ­ãƒ¼ãƒ‰ä¸­ã®çŠ¶æ…‹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚
   - çŠ¶æ…‹ãŒå¤‰åŒ–ã™ã‚‹ãŸã³ã«é©åˆ‡ãª `SnackBar` ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

2. **UI ã®ç°¡æ½”åŒ–**:
   - å‰Šé™¤ãƒœã‚¿ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰ã‚ã‚‰ãšã€ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹ã“ã¨ã§ã€`onPressed` ã®ä¸­ã§çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

### åˆ©ç‚¹
- `ref.listen` ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€éåŒæœŸã®çŠ¶æ…‹å¤‰åŒ–ã‚’æ˜ç¢ºã«åˆ†é›¢ã—ã€UI ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç°¡æ½”ã«ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚
- å†—é•·ãªçŠ¶æ…‹ç®¡ç†ãŒä¸è¦ã«ãªã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯èª­æ€§ã¨ä¿å®ˆæ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

ã“ã‚Œã§å‰Šé™¤å‡¦ç†ã®çµæœã‚’ç°¡å˜ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼

---
