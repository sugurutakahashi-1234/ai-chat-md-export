# Xcode16でプレビュー追加

日付: 2024-06-20

---

## 👤 ユーザー
*2024/06/20 16:08:17*

それぞれのプレビューをXcode16で実装してほしい、


struct WaveformView: View {
    let volumeLevels: [Double]

    init(volumeLevels: [Double], isRandomized: Bool = false) {
        if isRandomized {
            self.volumeLevels = volumeLevels.shuffled()
        } else {
            self.volumeLevels = volumeLevels
        }
    }

    var body: some View {
        GeometryReader { geometry in
            // バーの間隔がバー幅の 1/2 にするように計算
            let totalWidth = geometry.size.width
            let rectangleWidth = totalWidth / (CGFloat(volumeLevels.count) + CGFloat(volumeLevels.count - 1) / 2)
            let spacing = rectangleWidth / 2

            HStack(spacing: spacing) {
                ForEach(0..&lt;volumeLevels.count, id: \.self) { index in
                    VStack {
                        Spacer()
                        Rectangle()
                            .fill(Color.accentColor)
                            .frame(width: rectangleWidth, height: volumeLevels[index] * 100)
                            .cornerRadius(8)
                        Spacer()
                    }
                }
            }
            .frame(height: 100)
        }
    }
}

struct CircleVolumeView: View {
    let length: Double

    init(volumeLevel: Double) {
        length = volumeLevel * 100
    }

    var body: some View {
        Circle()
            .fill(Color.accentColor)
            .frame(width: length, height: length)
    }
}

---

## 🤖 アシスタント
*2024/06/20 16:08:36*

それぞれのプレビューをXcode16で実装するために、`WaveformView`と`CircleVolumeView`にプレビューを追加します。以下は、その実装例です。

```swift
import SwiftUI

struct WaveformView: View {
    let volumeLevels: [Double]

    init(volumeLevels: [Double], isRandomized: Bool = false) {
        if isRandomized {
            self.volumeLevels = volumeLevels.shuffled()
        } else {
            self.volumeLevels = volumeLevels
        }
    }

    var body: some View {
        GeometryReader { geometry in
            // バーの間隔がバー幅の 1/2 にするように計算
            let totalWidth = geometry.size.width
            let rectangleWidth = totalWidth / (CGFloat(volumeLevels.count) + CGFloat(volumeLevels.count - 1) / 2)
            let spacing = rectangleWidth / 2

            HStack(spacing: spacing) {
                ForEach(0..<volumeLevels.count, id: \.self) { index in
                    VStack {
                        Spacer()
                        Rectangle()
                            .fill(Color.accentColor)
                            .frame(width: rectangleWidth, height: volumeLevels[index] * 100)
                            .cornerRadius(8)
                        Spacer()
                    }
                }
            }
            .frame(height: 100)
        }
    }
}

struct WaveformView_Previews: PreviewProvider {
    static var previews: some View {
        WaveformView(volumeLevels: [0.2, 0.4, 0.6, 0.8, 1.0])
            .previewLayout(.sizeThatFits)
            .padding()
            .previewDisplayName("Standard Waveform View")

        WaveformView(volumeLevels: [0.2, 0.4, 0.6, 0.8, 1.0], isRandomized: true)
            .previewLayout(.sizeThatFits)
            .padding()
            .previewDisplayName("Randomized Waveform View")
    }
}

struct CircleVolumeView: View {
    let length: Double

    init(volumeLevel: Double) {
        length = volumeLevel * 100
    }

    var body: some View {
        Circle()
            .fill(Color.accentColor)
            .frame(width: length, height: length)
    }
}

struct CircleVolumeView_Previews: PreviewProvider {
    static var previews: some View {
        CircleVolumeView(volumeLevel: 0.5)
            .previewLayout(.sizeThatFits)
            .padding()
            .previewDisplayName("Circle Volume View")
    }
}
```

このコードは、`WaveformView`と`CircleVolumeView`のプレビューを追加し、標準のボリュームレベルとランダム化されたボリュームレベルを使った異なるバリエーションを表示します。これにより、Xcode16でそれぞれのビューを確認しやすくなります。

---

## 👤 ユーザー
*2024/06/20 16:09:30*

#Preview でやってほしい

---

## 🤖 アシスタント
*2024/06/20 16:09:49*

#Previewを使用してプレビューを実装するには、以下のコードをご利用ください。

```swift
import SwiftUI

struct WaveformView: View {
    let volumeLevels: [Double]

    init(volumeLevels: [Double], isRandomized: Bool = false) {
        if isRandomized {
            self.volumeLevels = volumeLevels.shuffled()
        } else {
            self.volumeLevels = volumeLevels
        }
    }

    var body: some View {
        GeometryReader { geometry in
            // バーの間隔がバー幅の 1/2 にするように計算
            let totalWidth = geometry.size.width
            let rectangleWidth = totalWidth / (CGFloat(volumeLevels.count) + CGFloat(volumeLevels.count - 1) / 2)
            let spacing = rectangleWidth / 2

            HStack(spacing: spacing) {
                ForEach(0..<volumeLevels.count, id: \.self) { index in
                    VStack {
                        Spacer()
                        Rectangle()
                            .fill(Color.accentColor)
                            .frame(width: rectangleWidth, height: volumeLevels[index] * 100)
                            .cornerRadius(8)
                        Spacer()
                    }
                }
            }
            .frame(height: 100)
        }
    }
}

#Preview {
    WaveformView(volumeLevels: [0.2, 0.4, 0.6, 0.8, 1.0])
        .previewLayout(.sizeThatFits)
        .padding()
        .previewDisplayName("Standard Waveform View")
}

#Preview {
    WaveformView(volumeLevels: [0.2, 0.4, 0.6, 0.8, 1.0], isRandomized: true)
        .previewLayout(.sizeThatFits)
        .padding()
        .previewDisplayName("Randomized Waveform View")
}

struct CircleVolumeView: View {
    let length: Double

    init(volumeLevel: Double) {
        length = volumeLevel * 100
    }

    var body: some View {
        Circle()
            .fill(Color.accentColor)
            .frame(width: length, height: length)
    }
}

#Preview {
    CircleVolumeView(volumeLevel: 0.5)
        .previewLayout(.sizeThatFits)
        .padding()
        .previewDisplayName("Circle Volume View")
}
```

このコードは、それぞれのビューに対して`#Preview`を使用してプレビューを設定しています。`WaveformView`は標準バージョンとランダム化されたバージョンをプレビューし、`CircleVolumeView`は特定のボリュームレベルでプレビューしています。これにより、Xcode 16で簡単にプレビューを確認することができます。

---
