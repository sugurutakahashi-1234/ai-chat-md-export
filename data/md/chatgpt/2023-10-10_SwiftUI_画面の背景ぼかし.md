# SwiftUI 画面の背景ぼかし

日付: 2023-10-10

---

## 👤 ユーザー
*2023/10/11 01:14:59*

SwiftUIである画面でZStackでViewを重ねようと思うんだけど、裏のViewをグレーっぽくぼかししたんだけどどうすればいい

---

## 🤖 アシスタント
*2023/10/11 01:15:40*

SwiftUI で背景の `View` をグレーにぼかす場合、`ZStack` を使用して背景の `View` の上にぼかし効果を重ねることができます。具体的には、`.blur()` 修飾子を使用してぼかし効果を適用し、`.background()` 修飾子を使用して背景色を設定します。

以下はその方法の一例です。

```swift
struct BlurredBackgroundView: View {
    var body: some View {
        ZStack {
            // 背景としてのコンテンツ
            Text("背景のテキスト")
                .font(.largeTitle)
            
            // グレーにぼかす効果
            Rectangle()
                .fill(Color.gray.opacity(0.5))
                .blur(radius: 5)
                .blendMode(.overlay)
            
            // 前景としてのコンテンツ
            Text("前景のテキスト")
                .font(.largeTitle)
                .foregroundColor(.white)
        }
    }
}

struct BlurredBackgroundView_Previews: PreviewProvider {
    static var previews: some View {
        BlurredBackgroundView()
    }
}
```

上の例では、`ZStack` を使用して3つの `View` を重ねています。最初の `Text` が背景のコンテンツ、次の `Rectangle` がグレーのぼかし効果、最後の `Text` が前景のコンテンツとして表示されます。

この方法を使って、SwiftUI の他のコンポーネントやカスタムの `View` と組み合わせることで、さまざまな背景ぼかし効果を実現できます。

---

## 👤 ユーザー
*2023/10/11 01:16:23*

.blendMode(.overlay) とは？

---

## 🤖 アシスタント
*2023/10/11 01:17:09*

`.blendMode(.overlay)` は、SwiftUI の `View` にブレンドモードを適用する修飾子です。ブレンドモードは、重ねた2つのレイヤーの色の組み合わせ方を制御します。

`overlay` とは、具体的なブレンドモードの一つで、基本的には以下のような動作をします：

- 基本となる色（下のレイヤー）が50%のグレーを超える場合、結果は明るくなります。
- 基本となる色（下のレイヤー）が50%のグレー未満の場合、結果は暗くなります。
- 50% グレーの場合、色は変わりません。

この動作により、`overlay` モードは、元の画像のハイライトとシャドウを保持しつつ、中間のトーンを強調または減少させる効果を持っています。

具体的な使用例を考えると、グレーのレイヤーを背景の上に重ねて `.blendMode(.overlay)` を適用すると、背景の中間のトーンが強調され、明るい部分と暗い部分がよりはっきりとする効果が生まれます。

ただ、`.blur()` と `.blendMode(.overlay)` を組み合わせるという初めの例では、意図としてはぼかし効果を主として想定していましたので、`.blendMode(.overlay)` の部分は必要に応じて追加または省略することができます。

---

## 👤 ユーザー
*2023/10/11 01:17:23*

.blendMode(.overlay)を使わずにじっそうしてほしい

---

## 🤖 アシスタント
*2023/10/11 01:17:51*

了解しました。`.blendMode(.overlay)` を使用しない方法で、背景をグレーでぼかす方法を示します。

以下の例では、`ZStack` を使って背景と前景を重ね、背景のみをグレーでぼかします。

```swift
struct BlurredBackgroundView: View {
    var body: some View {
        ZStack {
            // 背景としてのコンテンツ
            Text("背景のテキスト")
                .font(.largeTitle)
            
            // グレーにぼかす効果
            Rectangle()
                .fill(Color.black.opacity(0.5)) // グレー色を半透明に
                .blur(radius: 5)
            
            // 前景としてのコンテンツ
            Text("前景のテキスト")
                .font(.largeTitle)
                .foregroundColor(.white)
        }
    }
}

struct BlurredBackgroundView_Previews: PreviewProvider {
    static var previews: some View {
        BlurredBackgroundView()
    }
}
```

この方法で、背景のテキストにグレーの半透明なぼかし効果を適用しつつ、前景のテキストをその上に表示しています。

---

## 👤 ユーザー
*2023/10/11 01:18:10*

Rectangle()って必要なの？

---

## 🤖 アシスタント
*2023/10/11 01:18:39*

`Rectangle()` はこの場合、全画面をカバーする形で半透明なグレーのぼかし効果を適用するために使っています。しかし、直接背景の `View` にぼかし効果を適用したいのであれば、`Rectangle()` は必須ではありません。

以下のように、直接背景の `View` にぼかしと背景色の修飾子を適用することもできます。

```swift
struct BlurredBackgroundView: View {
    var body: some View {
        ZStack {
            // 背景としてのコンテンツに直接ぼかし効果を適用
            Text("背景のテキスト")
                .font(.largeTitle)
                .background(Color.black.opacity(0.5)) // 半透明のグレー背景
                .blur(radius: 5)
            
            // 前景としてのコンテンツ
            Text("前景のテキスト")
                .font(.largeTitle)
                .foregroundColor(.white)
        }
    }
}

struct BlurredBackgroundView_Previews: PreviewProvider {
    static var previews: some View {
        BlurredBackgroundView()
    }
}
```

この例では、背景の `Text` に直接 `.background()` と `.blur()` の修飾子を適用しています。

---
