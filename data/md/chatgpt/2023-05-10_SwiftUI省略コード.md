# SwiftUIçœç•¥ã‚³ãƒ¼ãƒ‰

æ—¥ä»˜: 2023-05-10

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 14:35:28*

Siwftã§ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã‚‚ã£ã¨çœç•¥ã—ã¦æ›¸ã‘ãªã„ã®ï¼Ÿ

Button(action: {
                        Task {
                            await loginPresenter.createUser()
                        }
                    }) {
                        Text("Register")
                            .padding()
                    }
                    .background(Color.blue)
                    .foregroundColor(.white)
                    .cornerRadius(8)

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 14:35:46*

ã¯ã„ã€SwiftUIã§ã¯çœç•¥ã—ã¦ã‚‚è‰¯ã„éƒ¨åˆ†ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```swift
Button {
    Task { await loginPresenter.createUser() }
} label: {
    Text("Register")
        .padding()
        .background(Color.blue)
        .foregroundColor(.white)
        .cornerRadius(8)
}
```

ã“ã®ä¾‹ã§ã¯ã€`action` ã¨ `label` ã‚’çœç•¥ã—ã¦ã€ã‚ˆã‚Šç°¡æ½”ãªæ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€`Task` ã®å®Ÿè£…ã«é–¢ã—ã¦ã‚‚ã€`{}` ã‚’ä½¿ã£ã¦çŸ­ç¸®å½¢ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«çœç•¥ã—ã¦æ›¸ãã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãŒã‚¹ãƒƒã‚­ãƒªã¨è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 14:36:06*

ä»¥ä¸‹ã‚‚ãŠé¡˜ã„
                    Button(action: {
                        Task {
                            await loginPresenter.signIn()
                        }
                    }) {
                        Text("Login")
                            .padding()
                    }
                    .background(Color.green)
                    .foregroundColor(.white)
                    .cornerRadius(8)

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 14:36:20*

ã‚‚ã¡ã‚ã‚“ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«çœç•¥å½¢ã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```swift
Button {
    Task { await loginPresenter.signIn() }
} label: {
    Text("Login")
        .padding()
        .background(Color.green)
        .foregroundColor(.white)
        .cornerRadius(8)
}
```

ã“ã®ä¾‹ã§ã‚‚ã€`action` ã¨ `label` ã‚’çœç•¥ã—ã¦ã€ã‚ˆã‚Šç°¡æ½”ãªæ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€`Task` ã®å®Ÿè£…ã«é–¢ã—ã¦ã‚‚ã€`{}` ã‚’ä½¿ã£ã¦çŸ­ç¸®å½¢ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«çœç•¥ã—ã¦æ›¸ãã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãŒã‚¹ãƒƒã‚­ãƒªã¨è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 15:17:34*

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¸¦ã®scrollViewã«å¯¾å¿œã•ã›ã¦ã»ã—ã„

public struct LoginView: View {
    @StateObject private var loginPresenter = LoginPresenter()

    public init() {}

    public var body: some View {
        if #available(iOS 16.0, *) {
            NavigationStack {
                VStack {
                    TextField("Email", text: $loginPresenter.email)
                        .padding()
                        .autocapitalization(.none)
                        .disableAutocorrection(true)

                    SecureField("Password", text: $loginPresenter.password)
                        .padding()
                        .autocapitalization(.none)
                        .disableAutocorrection(true)

                    Text("Welcome, \(loginPresenter.idToken)")
                        .padding()

                    Button {
                        Task { await loginPresenter.createUser() }
                    } label: {
                        Text("Register")
                            .padding()
                            .background(Color.blue)
                            .foregroundColor(.white)
                            .cornerRadius(8)
                    }

                    Button {
                        Task { await loginPresenter.signIn() }
                    } label: {
                        Text("Login")
                            .padding()
                            .background(Color.green)
                            .foregroundColor(.white)
                            .cornerRadius(8)
                    }
                }
                .padding()
                .alert(isPresented: $loginPresenter.showAlert) {
                    Alert(title: Text("Error"), message: Text(loginPresenter.alertMessage), dismissButton: .default(Text("OK")))
                }
            }
        } else {
            EmptyView()
        }
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 15:18:16*

ç¸¦æ–¹å‘ã®ScrollViewã«å¯¾å¿œã•ã›ã‚‹ã«ã¯ã€`VStack` ã‚’ `ScrollView` ã§å›²ã‚“ã§ã‚ã’ã¾ã™ã€‚ä»¥ä¸‹ã«ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
public struct LoginView: View {
    @StateObject private var loginPresenter = LoginPresenter()

    public init() {}

    public var body: some View {
        if #available(iOS 16.0, *) {
            NavigationStack {
                ScrollView(.vertical, showsIndicators: false) {
                    VStack {
                        TextField("Email", text: $loginPresenter.email)
                            .padding()
                            .autocapitalization(.none)
                            .disableAutocorrection(true)

                        SecureField("Password", text: $loginPresenter.password)
                            .padding()
                            .autocapitalization(.none)
                            .disableAutocorrection(true)

                        Text("Welcome, \(loginPresenter.idToken)")
                            .padding()

                        Button {
                            Task { await loginPresenter.createUser() }
                        } label: {
                            Text("Register")
                                .padding()
                                .background(Color.blue)
                                .foregroundColor(.white)
                                .cornerRadius(8)
                        }

                        Button {
                            Task { await loginPresenter.signIn() }
                        } label: {
                            Text("Login")
                                .padding()
                                .background(Color.green)
                                .foregroundColor(.white)
                                .cornerRadius(8)
                        }
                    }
                    .padding()
                }
                .alert(isPresented: $loginPresenter.showAlert) {
                    Alert(title: Text("Error"), message: Text(loginPresenter.alertMessage), dismissButton: .default(Text("OK")))
                }
            }
        } else {
            EmptyView()
        }
    }
}
```

`ScrollView` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ã€ç¸¦æ–¹å‘ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã« `.vertical` ã‚’æŒ‡å®šã—ã¾ã—ãŸã€‚`showsIndicators` ã‚’ `false` ã«è¨­å®šã—ã¦ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’éè¡¨ç¤ºã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç”»é¢ã®å†…å®¹ãŒç¸¦æ–¹å‘ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 15:32:52*

SwiftUIã§Firebaseã®ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆçŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹åˆ¶å¾¡ã‚’ã„ã‚ŒãŸã„ã‚“ã ã‘ã©ãŠã—ãˆã¦ã»ã—ã„ã€‚FireabseAuthã®å…¥ã‚Œæ–¹ã¯ã—ã£ã¦ã„ã‚‹ã‹ã‚‰ãã“ã¯çœç•¥ã—ã¦ã»ã—ã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 15:33:53*

SwiftUIã§Firebaseã®ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆçŠ¶æ…‹ã‚’ç›£è¦–ã™ã‚‹ã«ã¯ã€`Auth.auth().addStateDidChangeListener` ã‚’ä½¿ã£ã¦ãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®šã—ã€`@EnvironmentObject` ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãšã€`AuthState` ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€`ObservableObject` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã•ã›ã¾ã™ã€‚

```swift
import SwiftUI
import FirebaseAuth

class AuthState: ObservableObject {
    @Published var user: User?

    private var handle: AuthStateDidChangeListenerHandle?

    init() {
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

ã“ã®ã‚¯ãƒ©ã‚¹ã¯ã€Firebaseã®ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆçŠ¶æ…‹ã‚’ç›£è¦–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’`@Published`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£`user`ã«æ ¼ç´ã—ã¾ã™ã€‚`addStateDidChangeListener` ã§ãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®šã—ã€çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸéš›ã«ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ãŒå‘¼ã°ã‚Œã¾ã™ã€‚ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£å†…ã§ `self?.user` ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã§ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç›£è¦–ã—ã¾ã™ã€‚ã¾ãŸã€`deinit`ã§ãƒªã‚¹ãƒŠãƒ¼ã‚’è§£é™¤ã—ã¾ã™ã€‚

æ¬¡ã«ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹ `@main` ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã« `AuthState` ã‚’`EnvironmentObject`ã¨ã—ã¦æ³¨å…¥ã—ã¾ã™ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var authState = AuthState()

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
        }
    }
}
```

ã“ã‚Œã§ã€`@EnvironmentObject` ã‚’ä½¿ã£ã¦ `AuthState` ã‚’ã©ã®ãƒ“ãƒ¥ãƒ¼ã§ã‚‚å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«å¿œã˜ã¦è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã§ãã¾ã™ã€‚

```swift
import SwiftUI

struct ContentView: View {
    @EnvironmentObject var authState: AuthState

    var body: some View {
        if let user = authState.user {
            Text("Logged in as \(user.displayName ?? user.email ?? "unknown")")
        } else {
            Text("Not logged in")
        }
    }
}
```

ã“ã®ã‚ˆã†ã«ã€`@EnvironmentObject` ã‚’ä½¿ã£ã¦ `AuthState` ã‚’æ³¨å…¥ã—ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç›£è¦–ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 15:37:04*

@main ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã« AuthState ã‚’EnvironmentObjectã¨ã—ã¦æ³¨å…¥ã™ã‚‹ã¨ãã¯ã€YourAppName ã«@StateObject private var authState  ã¨ã—ã¦å¤‰æ•°ã«ä¿æŒã™ã‚‹å¿…è¦ã£ã¦ã‚ã‚‹ã‚“ã ã£ã‘ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 15:37:35*

ãŠã£ã—ã‚ƒã‚‹é€šã‚Šã€`@StateObject` ã§ `authState` ã‚’ä¿æŒã™ã‚‹ã“ã¨ã¯å¿…è¦ã§ã™ã€‚ãã®ç†ç”±ã¯ã€`@StateObject` ãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ä¸€è‡´ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ç®¡ç†ã™ã‚‹å½¹å‰²ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œä¸­ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç ´æ£„ã•ã‚Œã‚‹ã“ã¨ãŒãªãã€å…¨ä½“ã§ä¸€è²«ã—ãŸçŠ¶æ…‹ã‚’ä¿æŒã§ãã¾ã™ã€‚

`@StateObject` ã‚’ä½¿ã‚ãšã« `@EnvironmentObject` ã§ç›´æ¥æ³¨å…¥ã™ã‚‹ã¨ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç ´æ£„ã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒä¸æ˜ç¢ºã«ãªã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±æœ‰ã™ã‚‹çŠ¶æ…‹ã®ç®¡ç†ãŒå›°é›£ã«ãªã‚Šã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `@StateObject` ã‚’ä½¿ã£ã¦ `AuthState` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã€ãã®å¾Œ `@EnvironmentObject` ã‚’ä½¿ã£ã¦æ³¨å…¥ã™ã‚‹ã®ãŒé©åˆ‡ã§ã™ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var authState = AuthState()

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
        }
    }
}
```

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 15:38:55*

ã‚ã¨ã€FirebaseAuth ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ•™ãˆã¦ã€async await ã§

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 15:39:42*

FirebaseAuthã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã™ã‚‹ã«ã¯ã€`Auth` ã‚¯ãƒ©ã‚¹ã® `signOut` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚ãŸã ã—ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç¾çŠ¶`async`/`await`ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚ã§ã™ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«`async`é–¢æ•°ã«ãƒ©ãƒƒãƒ—ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãšã€`async`é–¢æ•°ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚

```swift
import FirebaseAuth

func signOutAsync() async throws {
    try await withCheckedThrowingContinuation { continuation in
        do {
            try Auth.auth().signOut()
            continuation.resume(returning: ())
        } catch {
            continuation.resume(throwing: error)
        }
    }
}
```

ã“ã‚Œã§ã€`async`/`await`æ§‹æ–‡ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã“ã¨ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚

```swift
import SwiftUI

struct ContentView: View {
    @EnvironmentObject var authState: AuthState

    var body: some View {
        if let user = authState.user {
            VStack {
                Text("Logged in as \(user.displayName ?? user.email ?? "unknown")")

                Button {
                    Task {
                        do {
                            try await signOutAsync()
                        } catch {
                            print("Error signing out: \(error)")
                        }
                    }
                } label: {
                    Text("Logout")
                }
            }
        } else {
            Text("Not logged in")
        }
    }
}
```

ã“ã®ä¾‹ã§ã¯ã€`signOutAsync` é–¢æ•°ã‚’ `Task` ã§å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 16:25:35*

ãƒ­ã‚°ã‚¤ãƒ³ã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®çŠ¶æ…‹ã®å¤‰åŒ–ã‚’æ„Ÿã˜ãŸã‚‰ãƒˆãƒ¼ã‚¹ãƒˆã¨ã‹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¼ãˆãŸã„ã‚“ã ã‘ã©ã©ã†æ›¸ã‘ã°ã„ã„ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 16:29:03*

ãƒ­ã‚°ã‚¤ãƒ³ã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®çŠ¶æ…‹å¤‰åŒ–ã‚’ãƒˆãƒ¼ã‚¹ãƒˆã§è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ã¾ãšç‹¬è‡ªã®`Toast`ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã€è¡¨ç¤ºå†…å®¹ã‚„è¡¨ç¤ºçŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®`ToastManager`ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚æ¬¡ã«ã€`AuthState`ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦ã€ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

1. ã¾ãšã€`Toast`ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

```swift
import SwiftUI

struct Toast: View {
    let message: String

    var body: some View {
        Text(message)
            .padding()
            .background(Color.black.opacity(0.7))
            .foregroundColor(.white)
            .cornerRadius(8)
    }
}
```

2. æ¬¡ã«ã€è¡¨ç¤ºå†…å®¹ã‚„è¡¨ç¤ºçŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®`ToastManager`ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

```swift
import Combine
import SwiftUI

class ToastManager: ObservableObject {
    @Published var isShowing: Bool = false
    @Published var message: String = ""

    func show(message: String, duration: TimeInterval = 2) {
        self.message = message
        isShowing = true

        DispatchQueue.main.asyncAfter(deadline: .now() + duration) {
            self.isShowing = false
        }
    }
}
```

3. ãã®å¾Œã€`AuthState`ã§ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®çŠ¶æ…‹å¤‰åŒ–ã‚’ç›£è¦–ã—ã€ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```swift
class AuthState: ObservableObject {
    @Published var user: User?
    @Published var toastManager = ToastManager()

    private var handle: AuthStateDidChangeListenerHandle?

    init() {
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            if let previousUser = self?.user, let newUser = user, previousUser != newUser {
                self?.toastManager.show(message: "Logged in as \(newUser.email ?? "unknown")")
            } else if self?.user != nil, user == nil {
                self?.toastManager.show(message: "Logged out")
            }
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

4. æœ€å¾Œã«ã€`ContentView`ã§`ToastManager`ã®çŠ¶æ…‹ã‚’ç›£è¦–ã—ã€ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

```swift
struct ContentView: View {
    @EnvironmentObject var authState: AuthState

    var body: some View {
        ZStack {
            if let user = authState.user {
                Text("Logged in as \(user.displayName ?? user.email ?? "unknown")")
            } else {
                Text("Not logged in")
            }

            if authState.toastManager.isShowing {
                Toast(message: authState.toastManager.message)
                    .transition(.opacity.animation(.easeInOut(duration: 0.2)))
            }
        }
        .animation(.default, value: authState.toastManager.isShowing)
    }
}
```

ã“ã®å®Ÿè£…ã§ã¯ã€`AuthState`ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚`AuthState`ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã€`ToastManager`ã®`show(message:duration:)`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã€ãƒˆãƒ¼ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚`Toast`ãƒ“ãƒ¥

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 16:29:23*

ToastManager ã¯ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã—ã¦ç®¡ç†ã—ãŸã‚“ã ã‘ã©ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿä»Šã¯ã€AuthStateã§@Published var toastManager = ToastManager() ã§ä¿æŒã—ã¦ã„ã‚‹ã®ãŒæ°—ã«ãªã£ã¦ã„ã¾ã™ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 16:32:02*

ã‚¢ãƒ—ãƒªå…¨ä½“ã§`ToastManager`ã‚’å…±æœ‰ã—ã¦ç®¡ç†ã™ã‚‹ã«ã¯ã€`ToastManager`ã‚’`@StateObject`ã¨ã—ã¦`@main`ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã«å®šç¾©ã—ã€`@EnvironmentObject`ã‚’ä½¿ã£ã¦æ³¨å…¥ã—ã¾ã™ã€‚

1. ã¾ãšã€`@main` ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã« `ToastManager` ã‚’`@StateObject`ã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var authState = AuthState()
    @StateObject private var toastManager = ToastManager()

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
                .environmentObject(toastManager)
        }
    }
}
```

2. æ¬¡ã«ã€`AuthState`ã®`toastManager`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤ã—ã€ä»£ã‚ã‚Šã«`@EnvironmentObject`ã‚’ä½¿ã£ã¦`ToastManager`ã‚’å‚ç…§ã—ã¾ã™ã€‚

```swift
import FirebaseAuth

class AuthState: ObservableObject {
    @Published var user: User?
    @EnvironmentObject var toastManager: ToastManager

    private var handle: AuthStateDidChangeListenerHandle?

    init() {
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            if let previousUser = self?.user, let newUser = user, previousUser != newUser {
                self?.toastManager.show(message: "Logged in as \(newUser.email ?? "unknown")")
            } else if self?.user != nil, user == nil {
                self?.toastManager.show(message: "Logged out")
            }
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

3. æœ€å¾Œã«ã€`ContentView`ã§`ToastManager`ã®çŠ¶æ…‹ã‚’ç›£è¦–ã—ã€ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

```swift
struct ContentView: View {
    @EnvironmentObject var authState: AuthState
    @EnvironmentObject var toastManager: ToastManager

    var body: some View {
        ZStack {
            if let user = authState.user {
                Text("Logged in as \(user.displayName ?? user.email ?? "unknown")")
            } else {
                Text("Not logged in")
            }

            if toastManager.isShowing {
                Toast(message: toastManager.message)
                    .transition(.opacity.animation(.easeInOut(duration: 0.2)))
            }
        }
        .animation(.default, value: toastManager.isShowing)
    }
}
```

ã“ã‚Œã§ã€`ToastManager`ãŒã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã•ã‚Œã€`@EnvironmentObject`ã‚’ä½¿ã£ã¦å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 16:58:12*

AuthState ã¯ ObservableObject ãŒé©å¿œã•ã‚Œã¦ã„ã‚‹ã‘ã©ã€ãã®ä¸­ã§ EnvironmentObject ã£ã¦ä½¿ãˆã‚‹ã‚“ã§ã—ãŸã£ã‘ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:00:09*

ã™ã¿ã¾ã›ã‚“ã€ã”æŒ‡æ‘˜ã®é€šã‚Šã€`ObservableObject`ã®ä¸­ã§`EnvironmentObject`ã‚’ä½¿ã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚`AuthState`ã®ä¸­ã§`ToastManager`ã‚’å‚ç…§ã™ã‚‹ä»£ã‚ã‚Šã«ã€ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«`ToastManager`ã®`show(message:duration:)`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚

1. `AuthState`ã‹ã‚‰`@EnvironmentObject`ã‚’å‰Šé™¤ã—ã€ãƒ­ã‚°ã‚¤ãƒ³ã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«`ToastManager`ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

```swift
import FirebaseAuth

class AuthState: ObservableObject {
    @Published var user: User?

    private var handle: AuthStateDidChangeListenerHandle?

    init(toastManager: ToastManager) {
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            if let previousUser = self?.user, let newUser = user, previousUser != newUser {
                toastManager.show(message: "Logged in as \(newUser.email ?? "unknown")")
            } else if self?.user != nil, user == nil {
                toastManager.show(message: "Logged out")
            }
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

2. `@main`ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã§`AuthState`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã€`ToastManager`ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var authState: AuthState
    @StateObject private var toastManager = ToastManager()

    init() {
        let toastManager = ToastManager()
        let authState = AuthState(toastManager: toastManager)
        _authState = StateObject(wrappedValue: authState)
        _toastManager = StateObject(wrappedValue: toastManager)
    }

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
                .environmentObject(toastManager)
        }
    }
}
```

ã“ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€`AuthState`å†…ã§`ToastManager`ã‚’å‚ç…§ã§ãã€ãƒ­ã‚°ã‚¤ãƒ³ã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:03:35*

YourAppName ã® init ãªã‚“ã‹é•å’Œæ„ŸãŒã‚ã‚‹ã‘ã©ã“ã‚Œã§å¤§ä¸ˆå¤«ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:04:27*

ãŠã£ã—ã‚ƒã‚‹é€šã‚Šã€`YourAppName`ã®`init()`ã®å®Ÿè£…ã«é•å’Œæ„ŸãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚`AuthState`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã«`ToastManager`ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var toastManager = ToastManager()
    @StateObject private var authState: AuthState

    init() {
        let toastManager = ToastManager()
        let authState = AuthState(toastManager: toastManager)
        _authState = StateObject(wrappedValue: authState)
        _toastManager = StateObject(wrappedValue: toastManager)
    }

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
                .environmentObject(toastManager)
        }
    }
}
```

ã“ã‚Œã§ã€`YourAppName`ã®`init()`ãŒã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã€`AuthState`ã¨`ToastManager`ãŒæ­£ã—ãåˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:15:40*

@StateObject private var toastManager = ToastManager() ã§ã®åˆæœŸåŒ–å®£è¨€ã£ã¦ã„ã‚‹ã®ï¼Ÿã¡ã‚‡ã†ãµãã—ã¦ã„ãªã„ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:16:31*

ã”æŒ‡æ‘˜ã®é€šã‚Šã€é‡è¤‡ã—ã¦ã„ã¾ã™ã€‚å¤±ç¤¼ã—ã¾ã—ãŸã€‚`@StateObject`ã®åˆæœŸåŒ–ã¯ä¸€åº¦ã ã‘è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var toastManager = ToastManager()
    @StateObject private var authState: AuthState

    init() {
        let authState = AuthState(toastManager: toastManager)
        _authState = StateObject(wrappedValue: authState)
    }

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(authState)
                .environmentObject(toastManager)
        }
    }
}
```

ã“ã®ä¿®æ­£ã«ã‚ˆã‚Šã€`ToastManager`ã¯`@StateObject`ã§ä¸€åº¦ã ã‘åˆæœŸåŒ–ã•ã‚Œã€`AuthState`ã«æ¸¡ã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:18:00*

ContentView() å´ã®å®Ÿè£…ã§ ContentViewModelã‚’ä½œæˆã—ã¦ã€ãã“ã§ToastManagerã§ã®å€¤ã‚’å¤‰æ›´ã—ãŸã„ã‚“ã ã‘ã©

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:20:12*

ContentView ã§ä½¿ç”¨ã™ã‚‹ `ContentViewModel` ã‚’ä½œæˆã—ã€ãã®ä¸­ã§ `ToastManager` ã‚’æ“ä½œã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

1. `ContentViewModel` ã‚’ä½œæˆã—ã€`ToastManager` ã‚’ `@EnvironmentObject` ã¨ã—ã¦å‚ç…§ã—ã¾ã™ã€‚

```swift
import SwiftUI
import FirebaseAuth

class ContentViewModel: ObservableObject {
    @Published var user: User?
    @EnvironmentObject var toastManager: ToastManager

    private var handle: AuthStateDidChangeListenerHandle?

    init() {
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            if let previousUser = self?.user, let newUser = user, previousUser != newUser {
                self?.toastManager.show(message: "Logged in as \(newUser.email ?? "unknown")")
            } else if self?.user != nil, user == nil {
                self?.toastManager.show(message: "Logged out")
            }
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

2. `ContentView` ã§ `ContentViewModel` ã‚’ `@StateObject` ã¨ã—ã¦å®šç¾©ã—ã€`ToastManager` ã‚’ `@EnvironmentObject` ã¨ã—ã¦å‚ç…§ã—ã¾ã™ã€‚

```swift
struct ContentView: View {
    @StateObject private var contentViewModel = ContentViewModel()
    @EnvironmentObject var toastManager: ToastManager

    var body: some View {
        ZStack {
            if let user = contentViewModel.user {
                Text("Logged in as \(user.displayName ?? user.email ?? "unknown")")
            } else {
                Text("Not logged in")
            }

            if toastManager.isShowing {
                Toast(message: toastManager.message)
                    .transition(.opacity.animation(.easeInOut(duration: 0.2)))
            }
        }
        .animation(.default, value: toastManager.isShowing)
    }
}
```

3. `YourAppName` ã§ `ContentViewModel` ã‚’ `@StateObject` ã¨ã—ã¦å®šç¾©ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€`AuthState` ã‚’å‰Šé™¤ã—ã€ä»£ã‚ã‚Šã« `ContentViewModel` ã‚’ä½¿ã„ã¾ã™ã€‚

```swift
import SwiftUI

@main
struct YourAppName: App {
    @StateObject private var toastManager = ToastManager()

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(toastManager)
        }
    }
}
```

ã“ã‚Œã§ã€`ContentViewModel` ã§ Firebase ã®ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®çŠ¶æ…‹ã‚’ç›£è¦–ã—ã€`ToastManager` ã§ã®å€¤ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:20:30*

class ContentViewModel: ObservableObject ã§ã€€EnvironmentObject ä½¿ãˆãªã„æ°—ãŒã—ã¾ã™

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:22:10*

ãŠã£ã—ã‚ƒã‚‹é€šã‚Šã€`ObservableObject`ã®ä¸­ã§`EnvironmentObject`ã‚’ä½¿ã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€`ToastManager`ã‚’`ContentViewModel`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

1. `ContentViewModel`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§`ToastManager`ã‚’å—ã‘å–ã‚Šã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ä¿æŒã—ã¾ã™ã€‚

```swift
import SwiftUI
import FirebaseAuth

class ContentViewModel: ObservableObject {
    @Published var user: User?
    private let toastManager: ToastManager

    private var handle: AuthStateDidChangeListenerHandle?

    init(toastManager: ToastManager) {
        self.toastManager = toastManager
        handle = Auth.auth().addStateDidChangeListener { [weak self] auth, user in
            if let previousUser = self?.user, let newUser = user, previousUser != newUser {
                self?.toastManager.show(message: "Logged in as \(newUser.email ?? "unknown")")
            } else if self?.user != nil, user == nil {
                self?.toastManager.show(message: "Logged out")
            }
            self?.user = user
        }
    }

    deinit {
        if let handle = handle {
            Auth.auth().removeStateDidChangeListener(handle)
        }
    }
}
```

2. `ContentView`ã§`ContentViewModel`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã€`toastManager`ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚

```swift
struct ContentView: View {
    @StateObject private var contentViewModel: ContentViewModel
    @EnvironmentObject var toastManager: ToastManager

    init() {
        let contentViewModel = ContentViewModel(toastManager: toastManager)
        _contentViewModel = StateObject(wrappedValue: contentViewModel)
    }

    var body: some View {
        // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿°
    }
}
```

ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€`ContentViewModel`ã§`ToastManager`ã‚’æ­£ã—ãå‚ç…§ã—ã€ãƒ­ã‚°ã‚¤ãƒ³ã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:24:35*

ã‚ã‚ŠãŒã¨ã†ã€ãŸã¨ãˆã°ã€ãƒ†ã‚¹ãƒˆæ™‚ã«ã¯AuthStateã‚„ToastManagerã‚’ãƒ¢ãƒƒã‚¯ã¨ã—ã¦ä½¿ã„ãŸã„ã‚“ã ã‘ã©ã€ã©ã†ã™ã‚Œã°ã„ã„ã®ã‹ãª

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:27:13*

ãƒ†ã‚¹ãƒˆæ™‚ã«`AuthState`ã‚„`ToastManager`ã‚’ãƒ¢ãƒƒã‚¯ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã£ã¦ä¾å­˜æ€§ã‚’æŠ½è±¡åŒ–ã—ã€ãƒ†ã‚¹ãƒˆæ™‚ã«ãƒ¢ãƒƒã‚¯å®Ÿè£…ã‚’æ³¨å…¥ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

1. `AuthStateProtocol`ã¨`ToastManagerProtocol`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚

```swift
protocol AuthStateProtocol: ObservableObject {
    var user: User? { get }
}

protocol ToastManagerProtocol: ObservableObject {
    func show(message: String, duration: TimeInterval)
}
```

2. `AuthState`ã¨`ToastManager`ãŒã“ã‚Œã‚‰ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```swift
class AuthState: ObservableObject, AuthStateProtocol {
    // æ—¢å­˜ã®å®Ÿè£…ã‚’ç¶­æŒ
}

class ToastManager: ObservableObject, ToastManagerProtocol {
    // æ—¢å­˜ã®å®Ÿè£…ã‚’ç¶­æŒ
}
```

3. `ContentViewModel`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```swift
class ContentViewModel: ObservableObject {
    @Published var user: User?
    private let authState: AuthStateProtocol
    private let toastManager: ToastManagerProtocol

    init(authState: AuthStateProtocol, toastManager: ToastManagerProtocol) {
        self.authState = authState
        self.toastManager = toastManager
        // ä»¥é™ã®å®Ÿè£…
    }
}
```

4. `ContentView`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã§`ContentViewModel`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿè£…ã‚’æ¸¡ã—ã¾ã™ã€‚

```swift
struct ContentView: View {
    @StateObject private var contentViewModel: ContentViewModel

    init(authState: AuthStateProtocol, toastManager: ToastManagerProtocol) {
        let contentViewModel = ContentViewModel(authState: authState, toastManager: toastManager)
        _contentViewModel = StateObject(wrappedValue: contentViewModel)
    }

    // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿°
}
```

5. `YourAppName`ã§`ContentView`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã€å®Ÿè£…ã‚’æ¸¡ã—ã¾ã™ã€‚

```swift
@main
struct YourAppName: App {
    @StateObject private var authState = AuthState()
    @StateObject private var toastManager = ToastManager()

    var body: some Scene {
        WindowGroup {
            ContentView(authState: authState, toastManager: toastManager)
        }
    }
}
```

ã“ã‚Œã§ã€ãƒ†ã‚¹ãƒˆæ™‚ã«`AuthState`ã‚„`ToastManager`ã®ãƒ¢ãƒƒã‚¯å®Ÿè£…ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ¢ãƒƒã‚¯å®Ÿè£…ã¯ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ãƒ†ã‚¹ãƒˆç”¨ã®æŒ¯ã‚‹èˆã„ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ãã®å¾Œã€ãƒ†ã‚¹ãƒˆæ™‚ã«`ContentView`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã€ãƒ¢ãƒƒã‚¯å®Ÿè£…ã‚’æ¸¡ã™ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/10 17:28:12*

ToastManager ã¯ @EnvironmentObject ã¨ã—ã¦ä»–ã®ç”»é¢ã§ã‚‚ä½¿ã„ãŸã„ã‚“ã ã‘ã©ã€ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/10 17:29:23*

ã™ã§ã«`ToastManager`ã‚’`@EnvironmentObject`ã¨ã—ã¦ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã‚‹ã®ã§ã€ä»–ã®ç”»é¢ã§ã‚‚`ToastManager`ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ä»–ã®ç”»é¢ã§`ToastManager`ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€`@EnvironmentObject`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ã£ã¦å‚ç…§ã—ã¾ã™ã€‚

ä¾‹ã¨ã—ã¦ã€æ–°ã—ã„`AnotherView`ã‚’ä½œæˆã—ã€`ToastManager`ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
struct AnotherView: View {
    @EnvironmentObject var toastManager: ToastManager

    var body: some View {
        VStack {
            Button(action: {
                toastManager.show(message: "Hello from AnotherView!")
            }) {
                Text("Show toast")
                    .padding()
                    .background(Color.blue)
                    .foregroundColor(.white)
                    .cornerRadius(8)
            }
        }
    }
}
```

ã“ã®`AnotherView`ã¯ã€`ToastManager`ã‚’`@EnvironmentObject`ã¨ã—ã¦ä½¿ç”¨ã—ã¦ãŠã‚Šã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã“ã¨ã§ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

ä»–ã®ç”»é¢ã§ã‚‚`ToastManager`ã‚’ä½¿ã„ãŸã„å ´åˆã€åŒæ§˜ã«`@EnvironmentObject`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ã£ã¦`ToastManager`ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€`ToastManager`ã‚’`@EnvironmentObject`ã¨ã—ã¦æ³¨å…¥ã—ãŸ`YourAppName`ã‹ã‚‰é·ç§»ã—ãŸãƒ“ãƒ¥ãƒ¼ã§ã®ã¿åˆ©ç”¨ã§ãã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

---
