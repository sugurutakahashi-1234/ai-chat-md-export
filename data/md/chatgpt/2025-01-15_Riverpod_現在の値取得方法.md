# Riverpod ç¾åœ¨ã®å€¤å–å¾—æ–¹æ³•

æ—¥ä»˜: 2025-01-15

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/15 18:40:16*

ã“ã‚Œã‹ã‚‰ç¾åœ¨ã®å€¤ã‚’å–ã‚Šå‡ºã™ã¨ãã¯ã©ã†ã™ã‚Œã°ã„ã„ã®

@Riverpod(keepAlive: true)
class WeaveTargetSpotId extends _$WeaveTargetSpotId {
  @override
  String? build() =&gt; null;

  void update(String id) {
    debugPrint('WeavedSpotId: $id');
    state = id;
  }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/15 18:40:42*

ç¾åœ¨ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€`ref.watch` ã¾ãŸã¯ `ref.read` ã‚’åˆ©ç”¨ã—ã¦ `WeaveTargetSpotId` ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®çŠ¶æ…‹ã‚’å–å¾—ã§ãã¾ã™ã€‚

### ç¾åœ¨ã®å€¤ã‚’å–å¾—ã™ã‚‹æ–¹æ³•
`Riverpod` ã§ã¯ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

#### 1. **`ref.watch` ã‚’ä½¿ã† (ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«å€¤ã‚’ç›£è¦–)**
`ref.watch` ã‚’ä½¿ã†ã¨ã€å€¤ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«è‡ªå‹•çš„ã«ãƒªãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã€‚

```dart
final currentSpotId = ref.watch(weaveTargetSpotIdProvider);
```

#### 2. **`ref.read` ã‚’ä½¿ã† (å€¤ã‚’1å›ã ã‘å–å¾—)**
`ref.read` ã‚’ä½¿ã†ã¨ã€ç¾åœ¨ã®å€¤ã‚’ä¸€åº¦ã ã‘å–å¾—ã—ã¾ã™ã€‚å€¤ã®å¤‰æ›´ã‚’ç›£è¦–ã—ãªã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚

```dart
final currentSpotId = ref.read(weaveTargetSpotIdProvider);
```

### `WeaveTargetSpotId` ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åã‚’ `weaveTargetSpotIdProvider` ã¨ä»®å®šã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```dart
@Riverpod(keepAlive: true)
class WeaveTargetSpotId extends _$WeaveTargetSpotId {
  @override
  String? build() => null;

  void update(String id) {
    debugPrint('WeavedSpotId: $id');
    state = id;
  }
}
```

### å€¤ã®å–å¾—ä¾‹

#### ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå†…ã§ã®åˆ©ç”¨ä¾‹

```dart
@override
Widget build(BuildContext context, WidgetRef ref) {
  final currentSpotId = ref.watch(weaveTargetSpotIdProvider);

  return Text(currentSpotId ?? 'No ID selected');
}
```

#### éåŒæœŸå‡¦ç†ã‚„ã‚¤ãƒ™ãƒ³ãƒˆå†…ã§ã®åˆ©ç”¨ä¾‹
ä¾‹ãˆã°ã€ãƒœã‚¿ãƒ³ã® `onPressed` å†…ã§ç¾åœ¨ã®å€¤ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ `ref.read` ã‚’ä½¿ã„ã¾ã™ã€‚

```dart
ElevatedButton(
  onPressed: () {
    final currentSpotId = ref.read(weaveTargetSpotIdProvider);
    print('Current Spot ID: $currentSpotId');
  },
  child: Text('Print Current ID'),
);
```

### è£œè¶³
- `ref.watch` ã¯ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå€¤ã®ç›£è¦–ã«ä½¿ã„ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ãƒ“ãƒ«ãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ä½¿ç”¨ã—ã¾ã™ã€‚
- `ref.read` ã¯ä¸€åº¦ã ã‘å€¤ã‚’å–å¾—ã™ã‚‹éš›ã«ä½¿ã„ã¾ã™ã€‚éåŒæœŸå‡¦ç†ã‚„ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã§ä½¿ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

ä»¥ä¸Šã‚’ä½¿ãˆã°ã€ç¾åœ¨ã®å€¤ã‚’ç°¡å˜ã«å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ï¼

---
