# 配列の追加と更新

日付: 2024-10-03

---

## 👤 ユーザー
*2024/10/3 19:34:37*

Swiftで単純に配列の後ろに追加したい

extension Array where Element: Identifiable {
    func addOrUpdate(newElements: [Element]) -&gt; [Element] {
        var combined = self
        newElements.forEach { newItem in
            if let index = combined.firstIndex(where: { $0.id == newItem.id }) {
                combined[index] = newItem
            } else {
                combined.append(newItem)
            }
        }
        return combined
    }

---

## 🤖 アシスタント
*2024/10/3 19:34:46*

User prefers not to add a new element when updating an existing element in the array based on its id.

---

## 🔧 ツール
*2024/10/3 19:34:46*

Model set context updated.

---

## 🤖 アシスタント
*2024/10/3 19:34:46*

Your current implementation already does what you're aiming for by either updating an element if it exists or appending it if not. However, if you want a function that only updates without appending any new elements, you can modify it like this:

```swift
extension Array where Element: Identifiable {
    func updateIfExists(newElements: [Element]) -> [Element] {
        var updated = self
        newElements.forEach { newItem in
            if let index = updated.firstIndex(where: { $0.id == newItem.id }) {
                updated[index] = newItem
            }
        }
        return updated
    }
}
```

This will only update the existing elements without adding any new ones to the array.

---
