# SwiftUI ボタンアクション

Date: 2023-07-05

---

## 👤 User
*2023-07-05 11:58:15*

SwiftUIのボタンパーツに action: @escaping () -&gt; Void をいかにもいれたいです。

struct SkipButtonView: View {
    @Binding var resultType: MissionVideoWatchResultType?

    var body: some View {
        Button {
            resultType = .didSkip
        } label: {
            HStack(spacing: 4) {
                Text(CoreStrings.EmomilMission.WatchVideo.bored)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                    .typographyStyle(.button3)
                SFSymbols.faceDashed.image
                    .renderingMode(.template)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
            }
            .padding(.horizontal, 16)
            .padding(.vertical, 12)
            .background(CoreAssets.Color.Neutral.white.swiftUIColor)
            .cornerRadius(30)
        }
    }
}

---

## 🤖 Assistant
*2023-07-05 11:58:43*

以下のように、`SkipButtonView` structに新たなプロパティ`action: () -> Void`を追加し、ボタンのクリック時に呼ばれる処理を任意のものに変更できます。

```swift
struct SkipButtonView: View {
    @Binding var resultType: MissionVideoWatchResultType?
    var action: () -> Void // 追加したアクション

    var body: some View {
        Button {
            action() // ボタンがクリックされたときにこのアクションを呼び出す
        } label: {
            HStack(spacing: 4) {
                Text(CoreStrings.EmomilMission.WatchVideo.bored)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                    .typographyStyle(.button3)
                SFSymbols.faceDashed.image
                    .renderingMode(.template)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
            }
            .padding(.horizontal, 16)
            .padding(.vertical, 12)
            .background(CoreAssets.Color.Neutral.white.swiftUIColor)
            .cornerRadius(30)
        }
    }
}
```

この変更により、あなたは `SkipButtonView` を以下のように使用できます：

```swift
SkipButtonView(resultType: .yourBinding) {
    // ここにボタンがクリックされたときの処理を記述します
}
```

この機能を使用することで、ボタンの動作をより柔軟に制御できます。

---

## 👤 User
*2023-07-05 12:33:59*

こんな感じで実装したんだけどタップできなかった。修正すべきところを教えた欲しい

 // 飽きたボタン
                Button {
                    presenter.tiredButtonTapped()
                } label: {
                    HStack(spacing: 4) {
                        Text(CoreStrings.EmomilMission.WatchVideo.bored)
                            .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                            .typographyStyle(.button3)
                        SFSymbols.faceDashed.image
                            .renderingMode(.template)
                            .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                    }
                    .padding(.horizontal, 16)
                    .padding(.vertical, 12)
                    .background(CoreAssets.Color.Neutral.white.swiftUIColor)
                    .cornerRadius(30)
                }
                .padding(.trailing, presenter.movie.orientation == .portrait ? 28 : 36)
                .padding(.bottom, presenter.movie.orientation == .portrait ? 36 : 28)
                .isHidden(!presenter.shouldShowTiredButton, remove: true)

---

## 🤖 Assistant
*2023-07-05 12:34:33*

上記のコードでは`Button`が`isHidden`によって非表示にされている可能性があります。 `isHidden`が`true`になると、そのViewは表示されません。したがって、もし`presenter.shouldShowTiredButton`が`false`に設定されていると、そのボタンはタップできないようになります。

この問題を解決するためには、まず`presenter.shouldShowTiredButton`が適切なタイミングで`true`に設定されていることを確認してください。ボタンが表示されているときには`presenter.shouldShowTiredButton`が`true`であるべきです。

また、`remove: true`オプションが設定されているため、`isHidden`が`true`に設定されているときにはボタンがView階層から完全に削除されます。これがボタンがタップできない原因である可能性もあります。このオプションを取り除くか、`false`に設定してボタンがView階層から削除されないようにすると、問題が解決するかもしれません。ただし、この変更がアプリの他の部分に影響を及ぼす可能性もあるので注意が必要です。

具体的な原因を特定するためには、さらに多くのコンテキストや情報が必要です。具体的にどのような挙動を期待していて、それがどのように満たされていないのか、またはエラーメッセージなどがあれば、それを共有してください。

---
