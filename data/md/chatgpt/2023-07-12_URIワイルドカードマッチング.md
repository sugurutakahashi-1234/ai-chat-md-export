# URIワイルドカードマッチング

日付: 2023-07-12

---

## 👤 ユーザー
*2023/07/12 14:15:07*

Swift でURI ワイルドカードをつかって一致しているかどうかを判定する処理を書きたい

---

## 🤖 アシスタント
*2023/07/12 14:15:39*

SwiftでURIをワイルドカードを使用してマッチングする処理を行うには、正規表現を使用します。Swiftの正規表現はNSRegularExpressionを使用して扱います。

以下は、正規表現を使用してURIのワイルドカードマッチングを行うサンプルコードです。この例では、'https://*.example.com/*' という形式のURLをマッチングします。

```swift
import Foundation

func isMatch(url: String, pattern: String) -> Bool {
    // ワイルドカードを正規表現に変換
    let regexPattern = pattern
        .replacingOccurrences(of: ".", with: "\\.")
        .replacingOccurrences(of: "*", with: ".*")

    // NSRegularExpressionを作成
    guard let regex = try? NSRegularExpression(pattern: regexPattern) else {
        return false
    }

    // URLとマッチング
    let range = NSRange(location: 0, length: url.utf16.count)
    let match = regex.firstMatch(in: url, options: [], range: range)

    // マッチしたらtrue、しなければfalseを返す
    return match != nil
}

// 使用例
let url = "https://www.example.com/test"
let pattern = "https://*.example.com/*"

if isMatch(url: url, pattern: pattern) {
    print("Matched")
} else {
    print("Not Matched")
}
```

上記のコードは、URL文字列とパターンを引数に取り、パターンがワイルドカードとして機能するようにパターンを正規表現に変換します。次に、変換した正規表現を使用してURLがパターンにマッチするかどうかを判定します。マッチした場合は`true`を、マッチしない場合は`false`を返します。

---
