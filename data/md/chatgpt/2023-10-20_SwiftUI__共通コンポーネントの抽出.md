# SwiftUI: 共通コンポーネントの抽出

Date: 2023-10-20

---

## 👤 User
*2023-10-21 01:59:33*

このHStack の繰り返しを共通化して綺麗にして欲しい

VStack(alignment: .leading) {
                    HStack {
                        SFSymbols.checkmarkCircleFill.image
                            .resizable()
                            .frame(width: 16, height: 16)
                            .foregroundColor(presenter.passwordValidationStatus.isValidLength ? CoreAssets.Color.PrimaryBackgroundNoGradation.primaryBackgroundNoGradation100.swiftUIColor : CoreAssets.Color.Neutral.neutral40.swiftUIColor)
                        
                        Text("8〜16文字")
                            .typographyStyle(.caption1)
                    }
                    
                    HStack {
                        SFSymbols.checkmarkCircleFill.image
                            .resizable()
                            .frame(width: 16, height: 16)
                            .foregroundColor(presenter.passwordValidationStatus.containsUppercase ? CoreAssets.Color.PrimaryBackgroundNoGradation.primaryBackgroundNoGradation100.swiftUIColor : CoreAssets.Color.Neutral.neutral40.swiftUIColor)
                        
                        Text("1つ以上の英大文字")
                            .typographyStyle(.caption1)
                    }
                    
                    HStack {
                        SFSymbols.checkmarkCircleFill.image
                            .resizable()
                            .frame(width: 16, height: 16)
                            .foregroundColor(presenter.passwordValidationStatus.containsLowercase ? CoreAssets.Color.PrimaryBackgroundNoGradation.primaryBackgroundNoGradation100.swiftUIColor : CoreAssets.Color.Neutral.neutral40.swiftUIColor)
                        
                        Text("1つ以上の英子文字")
                            .typographyStyle(.caption1)
                    }
                    
                    HStack {
                        SFSymbols.checkmarkCircleFill.image
                            .resizable()
                            .frame(width: 16, height: 16)
                            .foregroundColor(presenter.passwordValidationStatus.containsNumber ? CoreAssets.Color.PrimaryBackgroundNoGradation.primaryBackgroundNoGradation100.swiftUIColor : CoreAssets.Color.Neutral.neutral40.swiftUIColor)
                        
                        Text("1つ以上の半角数字")
                            .typographyStyle(.caption1)
                    }
                }
                .padding(.horizontal, 8)

---

## 🤖 Assistant
*2023-10-21 01:59:58*

コードの共通部分を一つのコンポーネントに抽出することで、SwiftUIでのUIコードを綺麗に保つことができます。この例では、`HStack`とその中身が繰り返されているため、これをカスタムViewとして切り出すことができます。

まず、新しいSwiftUI Viewを定義します。このViewは、条件に応じて色を変更するイメージとテキストを受け取ります。

```swift
struct ValidationRow: View {
    let isValid: Bool
    let text: String
    
    var body: some View {
        HStack {
            SFSymbols.checkmarkCircleFill.image
                .resizable()
                .frame(width: 16, height: 16)
                .foregroundColor(isValid ? CoreAssets.Color.PrimaryBackgroundNoGradation.primaryBackgroundNoGradation100.swiftUIColor : CoreAssets.Color.Neutral.neutral40.swiftUIColor)
            
            Text(text)
                .typographyStyle(.caption1)
        }
    }
}
```

次に、元の`VStack`内でこの`ValidationRow`を使用します。

```swift
VStack(alignment: .leading) {
    ValidationRow(isValid: presenter.passwordValidationStatus.isValidLength, text: "8〜16文字")
    ValidationRow(isValid: presenter.passwordValidationStatus.containsUppercase, text: "1つ以上の英大文字")
    ValidationRow(isValid: presenter.passwordValidationStatus.containsLowercase, text: "1つ以上の英子文字")
    ValidationRow(isValid: presenter.passwordValidationStatus.containsNumber, text: "1つ以上の半角数字")
}
.padding(.horizontal, 8)
```

この方法で、繰り返しのコードが大幅に削減され、将来的に条件やテキストが変更されたときに、それぞれの`ValidationRow`の使用箇所を個別に更新するだけで済むようになります。また、コードがより読みやすく、保守しやすくなります。

---
