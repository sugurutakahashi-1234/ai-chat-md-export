# ボトムシート遷移方法

日付: 2024-12-10

---

## 👤 ユーザー
*2024/12/10 17:07:13*

flutter ボトムシートを立ち上げてpush遷移させたい

---

## 🤖 アシスタント
*2024/12/10 17:07:56*

Flutterでボトムシートを立ち上げた後に、そのボトムシート内から画面遷移（`push`）を行うには、以下の手順を使用できます。

### 実装例

#### 1. ボトムシートを表示する
ボトムシートは`showModalBottomSheet`を使用して表示します。

#### 2. `Navigator.push`で新しい画面に遷移する
`showModalBottomSheet`の中でボタンやタップイベントを設定し、`Navigator.push`を呼び出します。

以下に具体的なコード例を示します。

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: HomePage(),
    );
  }
}

class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Bottom Sheet Example'),
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            showModalBottomSheet(
              context: context,
              isScrollControlled: true, // フルスクリーンの場合はtrueに設定
              builder: (BuildContext context) {
                return BottomSheetContent();
              },
            );
          },
          child: const Text('Show Bottom Sheet'),
        ),
      ),
    );
  }
}

class BottomSheetContent extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Container(
      height: 300, // ボトムシートの高さを調整
      padding: const EdgeInsets.all(16.0),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          const Text(
            'Bottom Sheet',
            style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 20),
          ElevatedButton(
            onPressed: () {
              Navigator.pop(context); // ボトムシートを閉じる
              Navigator.push(
                context,
                MaterialPageRoute(
                  builder: (context) => const NewPage(),
                ),
              );
            },
            child: const Text('Navigate to New Page'),
          ),
        ],
      ),
    );
  }
}

class NewPage extends StatelessWidget {
  const NewPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('New Page'),
      ),
      body: const Center(
        child: Text('This is the new page'),
      ),
    );
  }
}
```

---

### コードの説明
1. **`showModalBottomSheet`**:
   - ボトムシートを表示する関数。
   - `builder`で表示するウィジェットを指定。
   - `isScrollControlled`を`true`にするとフルスクリーンのボトムシートを作成可能。

2. **`Navigator.pop`**:
   - ボトムシートを閉じる。

3. **`Navigator.push`**:
   - ボトムシートを閉じた後、新しい画面に遷移。

---

### 注意点
- **フルスクリーンボトムシート**: フルスクリーンの場合、`isScrollControlled: true`を設定してウィジェットの高さを動的に設定します。
- **ボトムシート内での遷移**: 必要に応じて、ボトムシートを閉じずに遷移することも可能です。この場合、`Navigator.push`を直接呼び出します。

必要に応じてカスタマイズしてください！

---

## 👤 ユーザー
*2024/12/10 17:08:20*

go\_routerを使うとどうなる？

---

## 🤖 アシスタント
*2024/12/10 17:09:04*

`go_router`を使用してボトムシートから画面遷移を行う場合、`GoRouter`の仕組みを活用することで、ルーティングをシンプルかつ柔軟に管理できます。

以下は具体的な例です。

---

## 実装例

### 構成概要
1. `GoRouter`を使ったルーティングを設定する。
2. ボトムシートから`context.go()`または`context.push()`で画面遷移を行う。

### 完全なコード例

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: _router,
    );
  }
}

/// GoRouterの設定
final GoRouter _router = GoRouter(
  initialLocation: '/',
  routes: [
    GoRoute(
      path: '/',
      builder: (context, state) => const HomePage(),
    ),
    GoRoute(
      path: '/new-page',
      builder: (context, state) => const NewPage(),
    ),
  ],
);

/// ホームページ
class HomePage extends StatelessWidget {
  const HomePage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('GoRouter Bottom Sheet Example'),
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            showModalBottomSheet(
              context: context,
              isScrollControlled: true,
              builder: (BuildContext context) {
                return const BottomSheetContent();
              },
            );
          },
          child: const Text('Show Bottom Sheet'),
        ),
      ),
    );
  }
}

/// ボトムシートの中身
class BottomSheetContent extends StatelessWidget {
  const BottomSheetContent({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 300,
      padding: const EdgeInsets.all(16.0),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          const Text(
            'Bottom Sheet',
            style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 20),
          ElevatedButton(
            onPressed: () {
              Navigator.pop(context); // ボトムシートを閉じる
              context.go('/new-page'); // GoRouterで画面遷移
            },
            child: const Text('Navigate to New Page'),
          ),
        ],
      ),
    );
  }
}

/// 新しいページ
class NewPage extends StatelessWidget {
  const NewPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('New Page'),
      ),
      body: const Center(
        child: Text('This is the new page'),
      ),
    );
  }
}
```

---

## コードの説明

### 1. `GoRouter`のセットアップ
- `GoRouter`のインスタンスを作成し、ルートを定義します。
  ```dart
  final GoRouter _router = GoRouter(
    initialLocation: '/',
    routes: [
      GoRoute(
        path: '/',
        builder: (context, state) => const HomePage(),
      ),
      GoRoute(
        path: '/new-page',
        builder: (context, state) => const NewPage(),
      ),
    ],
  );
  ```

### 2. ルーティングの利用
- ボトムシート内で`context.go()`を使用して指定したパス（`/

---
