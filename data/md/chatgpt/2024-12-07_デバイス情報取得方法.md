# デバイス情報取得方法

日付: 2024-12-07

---

## 👤 ユーザー
*2024/12/08 00:40:21*

flutterでデバイス情報を簡単に取得する方法。デバッグ画面から表示させたいんだ。

---

## 🤖 アシスタント
*2024/12/08 00:40:44*

Flutterでデバイス情報を取得してデバッグ画面に表示するには、`device_info_plus` パッケージを使用するのが簡単です。このパッケージを使えば、AndroidやiOSのデバイス情報を簡単に取得できます。以下の手順で実装できます。

### 手順

1. **パッケージをインストールする**

   `pubspec.yaml` に `device_info_plus` パッケージを追加します。

   ```yaml
   dependencies:
     device_info_plus: ^10.0.0 # 最新バージョンを確認してください
   ```

   その後、以下のコマンドを実行してインストールします。

   ```bash
   flutter pub get
   ```

2. **デバイス情報を取得する**

   以下のように、デバイス情報を取得するコードを実装します。

   ```dart
   import 'package:device_info_plus/device_info_plus.dart';
   import 'package:flutter/material.dart';

   class DebugScreen extends StatelessWidget {
     @override
     Widget build(BuildContext context) {
       return Scaffold(
         appBar: AppBar(
           title: Text('デバイス情報'),
         ),
         body: FutureBuilder<Map<String, dynamic>>(
           future: getDeviceInfo(),
           builder: (context, snapshot) {
             if (snapshot.connectionState == ConnectionState.waiting) {
               return Center(child: CircularProgressIndicator());
             } else if (snapshot.hasError) {
               return Center(child: Text('エラーが発生しました: ${snapshot.error}'));
             } else {
               final deviceInfo = snapshot.data!;
               return ListView(
                 children: deviceInfo.entries
                     .map((entry) => ListTile(
                           title: Text(entry.key),
                           subtitle: Text(entry.value.toString()),
                         ))
                     .toList(),
               );
             }
           },
         ),
       );
     }

     Future<Map<String, dynamic>> getDeviceInfo() async {
       final deviceInfoPlugin = DeviceInfoPlugin();
       Map<String, dynamic> deviceData = {};

       try {
         if (Theme.of(context).platform == TargetPlatform.iOS) {
           final iosInfo = await deviceInfoPlugin.iosInfo;
           deviceData = {
             'モデル': iosInfo.utsname.machine ?? '不明',
             'システム名': iosInfo.systemName ?? '不明',
             'システムバージョン': iosInfo.systemVersion ?? '不明',
             'デバイス名': iosInfo.name ?? '不明',
           };
         } else if (Theme.of(context).platform == TargetPlatform.android) {
           final androidInfo = await deviceInfoPlugin.androidInfo;
           deviceData = {
             'ブランド': androidInfo.brand,
             'モデル': androidInfo.model,
             'Androidバージョン': androidInfo.version.release,
             'APIレベル': androidInfo.version.sdkInt,
           };
         }
       } catch (e) {
         deviceData = {'エラー': e.toString()};
       }

       return deviceData;
     }
   }
   ```

3. **デバッグ画面をアプリに追加する**

   上記の `DebugScreen` をナビゲーションに追加するか、特定の条件下で表示させます。

   ```dart
   MaterialApp(
     home: DebugScreen(),
   );
   ```

### ポイント

- **`device_info_plus`** を使うことで、AndroidとiOSの情報を統一的に扱えます。
- 必要に応じて取得した情報をフィルタリングやフォーマットして表示できます。
- デバッグ画面に加えて、`FloatingActionButton` などで動的にアクセスする方法もおすすめです。

もしデバイス情報をさらにカスタマイズしたい場合や、追加で確認したい情報があれば教えてください！

---
