# AI駆動ワークフロー設計

日付: 2025-05-31

---

## 👤 ユーザー
*2025/05/31 10:29:03*

今AIと一緒にコーディングすることを実施していてワークフローだったりの考察をしているがこういう作業も全部AIに丸投げできるようになるのか

キャリアとしてどういうエンジニアリング技術をこれから身につけた方がいいか模索しているんだ

以下メモです

'''
ローカルでチェックリストを作らせてから作業させるようなワークフローを作成したい。

.claude/ に作成したい

最初に建てた計画を忘れることが多い
チェックリストを内部でもつ
チェックリスト用のディレクトリだけ用意しておく
チェックリストはgitignoreに置いておくので削除は不要
チェックリストは最終的にissueに貼り付ける



issueにはなるべく漏れなく記述したい
issueを定期的に見直してissueの本文を更新しながら作業を進めて欲しい

issue起票
ブランチ移動
調査ステップを行なってナレッジにドキュメントを残す
調査を元にissueの本文を修正する
issueのチェックリストを元に作業を開始する
チェックリストをこなす度にissueの本文を確認しながらチェックリストを埋めていく
作業が全て完了したら最後に実際の実装についてのadrを新規作成 or 更新する
コミットしてpushしてPRを新規作成 or 更新する

ワークフローの分割や統合やマネジメントを検討する

分割で行うべきユースケースで切り出したい
切り出したユースケースをまとめて実行するようなワークフローも作ってうまく作業を進めたい

実装例に最小構成プロジェクト実装した場合のサンプルも提示させるようにしてほしい

やはりテンプレートは分割させたい
これはClaudeに確認させた方がいい

テンプレートを更新するときは同じ種類のテンプレートを更新すべきか見直させてほしい
'''

---

## 🤖 アシスタント
*2025/05/31 10:29:30*

## 1. どこまで “丸投げ” できるか ― 2025 年時点の現実値

| フェーズ | 既に自動化可能 | 現状は半自動 (要レビュー) | まだ人間必須 |
|---|---|---|---|
| **問題定義・要件分解** | Copilot Workspace / Claude Code が自然言語→チェックリストを生成 | 要件の曖昧さ解消・優先順位付け | ビジネス判断・利害調整 |
| **実装プラン作成** | AI が PR/Issue を解析し「作業計画ファイル」を出力 citeturn0search4 | 計画の粒度調整 | 技術的トレードオフ決定 |
| **コード実装・テスト** | Copilot、Cursor Auto-Apply などが骨格やテストを生成 citeturn0search6 | ローカルで高速に直しながら人がテストを追加 | 複雑な設計・パフォーマンス最適化 |
| **CI/CD & レビュー** | Devin のような “エージェント” がビルド＆デプロイまで走破 citeturn0search1 | セキュリティ／UX 観点のレビュー | 設計審査・リリース判定 |
| **ナレッジ蓄積** | AI が ADR / 変更履歴を自動生成 | ドキュメント構成の整合性確認 | 長期的アーキのビジョン管理 |

&gt; **結論**  
&gt; 「反復単調な工程」は **ほぼ AI が肩代わり** できる段階です。ただし  
&gt; 1. **境界線の引き方（何を AI に委ねるか）**  
&gt; 2. **AI が出力した artefact の検証フレーム**  
&gt; を整えられるエンジニアの市場価値がむしろ高まっています。GitHub CEO の Dohmke も「創造的作業に集中する時代」と強調しています。citeturn0news40


---

## 2. `.claude/` ベースの **“チェックリスト駆動” ワークフロー** ひな形

```
.
├─ .claude/
│   ├─ templates/
│   │   ├─ checklist.md      # AI が埋める雛形
│   │   ├─ issue.md
│   │   └─ adr.md
│   ├─ rules.toml            # Claude Code ルール
│   └─ cli.ts                # gh & Claude Code を呼び出すスクリプト
├─ .github/
│   └─ workflows/
│       └─ sync_issue.yml
└─ src/ ...
```

### 主要ファイル

&lt;details&gt;
&lt;summary&gt;.claude/templates/checklist.md&lt;/summary&gt;

```md
<!-- 🔄 AUTO-GENERATED: 書き換え禁止  -->
## Checklist
- [ ] 要件／ゴール確認
- [ ] 既存コード調査
- [ ] 実装
- [ ] テスト
- [ ] ドキュメント & ADR 更新
```
&lt;/details&gt;

&lt;details&gt;
&lt;summary&gt;.claude/cli.ts（抜粋）&lt;/summary&gt;

```ts
import { execSync } from "node:child_process"
const issue = process.argv[2]          // Issue 番号
execSync(`gh issue view ${issue} -R $REPO -F json > /tmp/issue.json`)
execSync(`claude plan --from /tmp/issue.json --template .claude/templates/checklist.md \
  --out .claude/checklists/${issue}.md`)
execSync(`gh issue edit ${issue} -R $REPO -F .claude/checklists/${issue}.md`)
```
&lt;/details&gt;

### GitHub Actions (`sync_issue.yml`)

```yaml
on:
  push:
    paths: [".claude/checklists/**.md"]

jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: gh issue edit ${{ github.ref_name }} -F $(git diff --name-only ${{ github.sha }} | head -n1)
```

この流れで

1. **`gh issue create`** → **チェックリスト生成**  
2. ブランチ作成 & 調査 → **issue 本文上書き**  
3. チェックが埋まるたび `git add .claude/checklists/**` → push  
4. アクションが **Issue 本文を再同期**  
5. 完了後 **ADR 雛形** を AI に生成させコミット

--- 

## 3. テンプレート管理ベストプラクティス

| 目的 | 推奨レイアウト | 運用 |
|---|---|---|
| **Issue / PR / ADR** | `.claude/templates/{issue,pr,adr}.md` | **同種ごとに 1 ファイル**&lt;br&gt;更新履歴は Git 管理 |
| **チェックリスト** | `.claude/templates/checklist.md` | AI がタスクごとに複製して編集 |
| **ルール** (Cursor / Claude Code 等) | `.claude/rules.toml` | エディタ毎に分割可、ただし **単一ソースで生成** |

*テンプレートを更新したら*  
`claude lint-templates` → AI が差分検査→ 修正案 PR というガードレールを追加すると安全。

--- 

## 4. **キャリア視点**：身につけると強い 5 つの技術領域

| 分野 | 具体的スキル/ツール | なぜ効くか |
|---|---|---|
| **Agentic Coding** | Claude Code, Copilot Workspace, Devin API citeturn0search4turn0search1 | “タスク指示 → 自走実装” の **設計者** になれる |
| **LLM オーケストレーション** | LangChain, Semantic Kernel, OpenAI Function Calling | チャット→ツール呼び出し→検証の**パイプライン設計** |
| **DevOps & IaC 自動化** | GitHub Actions, Pulumi/Terraform, OpenFeature | AI が書いたコードを **安全にデプロイ** する仕組み |
| **セキュリティ／ガバナンス** | SBOM, AI code-review linters, 依存性スキャン | “AI が混入させた脆弱性” を検出できる人材は希少 |
| **ドメイン駆動設計 & 高速プロトタイピング** | Clean Architecture + CodeGen (OpenAPI → Client) | AI と協働するほど **仕様‐実装の同期** が重要 |

---

## 5. スモールスタート用 **最小構成サンプルリポジトリ**

```bash
pnpm create next-app ai-checklist-demo
cd ai-checklist-demo
pnpm add -D gh claude-code
mkdir -p .claude/{templates,checklists}
# → 上記テンプレートを配置
```

1. `gh issue create --title "ログイン API のリトライ実装"`  
2. `pnpm claude plan 1`  
3. `git switch -c feat/retry-login` … 作業  
4. `pnpm claude sync 1` → Issue 更新  
5. `pnpm claude adr "Retry Strategy"` → `docs/adr/XXXX-retry.md` 生成  
6. PR 作成 (`gh pr create -f`) → Copilot が自動レビュー

“テンプレ分割 → 再利用 → AI で増補” という **パターンを一度体験** すると、以降のプロジェクトで横展開しやすくなります。

---

### 次の一歩

1. **この雛形を fork** → `.claude/cli.ts` を TypeScript で拡充  
2. **LLM キー**（Claude/ OpenAI）を GitHub Secrets に設置  
3. 小さな Issue を立ててワークフローを回し、 **ボトルネックを洗い出す**  
   - テンプレート粒度  
   - チェックリスト項目の過不足  
   - Issue ↔︎ ADR 連携の抜け漏れ
4. 見つかった **改善点を AI にリファクタ依頼** → 自動 PR

これをスプリント単位で繰り返すことで、  
“**AI に何を任せ、どこを人が裁量するか**” の勘所が磨かれ、  
エンジニアとしての市場価値も着実にアップしていきます。

---
