# SwiftUI ãƒ¡ãƒ¼ãƒ«ãƒ­ã‚°ã‚¤ãƒ³

æ—¥ä»˜: 2023-06-01

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/1 15:23:39*

SwiftUIã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã‚ˆã†ãªç”»é¢ã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’åŒã˜structã«å«ã‚ã¦ã€validation ã‚’è¡Œã†ã‚ˆã†ãªå‡¦ç†ã‚’ã„ã‚ŒãŸã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/1 15:24:22*

ãã‚Œã«ã¤ã„ã¦ã¯SwiftUIã¨Combineã‚’ä½¿ã£ã¦ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

ã¾ãšã¯ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®structã¨ãã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ViewModelã‚’ä½œæˆã—ã¾ã™ï¼š

```swift
import Combine

struct UserInput {
    var email = ""
    var password = ""
}

class LoginViewModel: ObservableObject {
    @Published var userInput = UserInput()
    @Published var isValid = false

    private var cancellables = Set<AnyCancellable>()

    init() {
        isFormValidPublisher
            .receive(on: RunLoop.main)
            .assign(to: \.isValid, on: self)
            .store(in: &cancellables)
    }

    private var isFormValidPublisher: AnyPublisher<Bool, Never> {
        Publishers.CombineLatest($userInput.email, $userInput.password)
            .map { email, password in
                self.isValidEmail(email) && self.isValidPassword(password)
            }
            .eraseToAnyPublisher()
    }

    private func isValidEmail(_ email: String) -> Bool {
        // Add your own email validation logic here
        return email.count > 5
    }

    private func isValidPassword(_ password: String) -> Bool {
        // Add your own password validation logic here
        return password.count > 5
    }
}
```

æ¬¡ã«ã€ã“ã®ViewModelã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’ä½œã‚Šã¾ã™ï¼š

```swift
import SwiftUI

struct LoginView: View {
    @StateObject private var viewModel = LoginViewModel()

    var body: some View {
        VStack {
            TextField("Email", text: $viewModel.userInput.email)
                .autocapitalization(.none)
                .keyboardType(.emailAddress)

            SecureField("Password", text: $viewModel.userInput.password)

            Button(action: {
                // Handle login action here
            }) {
                Text("Log In")
            }
            .disabled(!viewModel.isValid)
        }
        .padding()
    }
}
```

ã“ã®ä¾‹ã§ã¯ã€`TextField`ã¨`SecureField`ã‚’ä½¿ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘ä»˜ã‘ã€ãã®å€¤ã‚’ViewModelã«bindã—ã¦ã„ã¾ã™ã€‚ViewModelã®ä¸­ã«ã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãƒ•ã‚©ãƒ¼ãƒ ãŒæœ‰åŠ¹ãªå ´åˆã«ã®ã¿"Log In"ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã¯é©å®œèª¿æ•´ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/1 15:25:51*

email ã¨ password ã‚’ãŸã ã®Stringã«ã™ã‚‹ã®ã§ã¯ãªãã¦ã€Email å‹ã¨ Password å‹ã«ã—ã¦ã€ãã“ã«isValid ã‚’ç”Ÿã‚„ã™ã®ã¯ã©ã†ãªã®ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/1 15:26:28*

ãã‚Œã¯éå¸¸ã«è‰¯ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã™ã€‚å‹å®‰å…¨ã«ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®é–“é•ã„ã‚’æ—©æœŸã«é˜²ãã€æ˜ç¢ºãªæ„å›³ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«`Email`ã¨`Password`å‹ã‚’å°å…¥ã—ã€ãã‚Œãã‚Œã«`isValid`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å«ã‚ãŸä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Combine

struct Email {
    var value: String = ""
    
    var isValid: Bool {
        // Add your own email validation logic here
        return value.count > 5
    }
}

struct Password {
    var value: String = ""
    
    var isValid: Bool {
        // Add your own password validation logic here
        return value.count > 5
    }
}

struct UserInput {
    var email = Email()
    var password = Password()
}

class LoginViewModel: ObservableObject {
    @Published var userInput = UserInput()
    
    var isValid: Bool {
        userInput.email.isValid && userInput.password.isValid
    }
}
```

ãã—ã¦ã€UIå´ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™ï¼š

```swift
import SwiftUI

struct LoginView: View {
    @StateObject private var viewModel = LoginViewModel()

    var body: some View {
        VStack {
            TextField("Email", text: $viewModel.userInput.email.value)
                .autocapitalization(.none)
                .keyboardType(.emailAddress)

            SecureField("Password", text: $viewModel.userInput.password.value)

            Button(action: {
                // Handle login action here
            }) {
                Text("Log In")
            }
            .disabled(!viewModel.isValid)
        }
        .padding()
    }
}
```

ã“ã“ã§ã€`Email`ã¨`Password`å‹ãŒè‡ªèº«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã€ãã‚Œãã‚Œã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒæ˜ç¢ºã«åˆ†é›¢ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯ã‚³ãƒ¼ãƒ‰ã®èª­ã¿ã‚„ã™ã•ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

ãŸã ã—ã€`Email`ã¨`Password`å‹ãŒè‡ªå·±ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ã¨ã„ã†äº‹å®Ÿã¯ã€ãã‚Œã‚‰ã®å‹ãŒUIã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸¡æ–¹ã«é–¢ä¸ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã“ã‚ŒãŒè¨±å®¹ã§ãã‚‹ã‹ã©ã†ã‹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨è¨­è¨ˆç›®æ¨™ã«ã‚ˆã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/1 15:27:25*

UserInput ã§ã¯ãªãã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã«å‘½åã‚’å¤‰ãˆã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/1 15:27:53*

äº†è§£ã—ã¾ã—ãŸã€‚ãã‚Œã«å¿œã˜ã¦`UserInput`ã‚’`LoginForm`ã«å¤‰æ›´ã—ã€ãã‚Œãã‚Œã®ã‚³ãƒ¼ãƒ‰ã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ï¼š

```swift
import Combine

struct Email {
    var value: String = ""
    
    var isValid: Bool {
        // Add your own email validation logic here
        return value.count > 5
    }
}

struct Password {
    var value: String = ""
    
    var isValid: Bool {
        // Add your own password validation logic here
        return value.count > 5
    }
}

struct LoginForm {
    var email = Email()
    var password = Password()
}

class LoginViewModel: ObservableObject {
    @Published var loginForm = LoginForm()
    
    var isValid: Bool {
        loginForm.email.isValid && loginForm.password.isValid
    }
}
```

ãã—ã¦ã€UIå´ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™ï¼š

```swift
import SwiftUI

struct LoginView: View {
    @StateObject private var viewModel = LoginViewModel()

    var body: some View {
        VStack {
            TextField("Email", text: $viewModel.loginForm.email.value)
                .autocapitalization(.none)
                .keyboardType(.emailAddress)

            SecureField("Password", text: $viewModel.loginForm.password.value)

            Button(action: {
                // Handle login action here
            }) {
                Text("Log In")
            }
            .disabled(!viewModel.isValid)
        }
        .padding()
    }
}
```

ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€`LoginForm`ã¨ã„ã†åå‰ã¯ã‚ˆã‚Šæ˜ç¢ºã«ã“ã®æ§‹é€ ä½“ãŒãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

---
