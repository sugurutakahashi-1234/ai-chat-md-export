# dart-dio vs dart-dio-next

Date: 2024-12-06

---

## ğŸ‘¤ User
*2024-12-06 18:52:54*

open api gen ã§ dart-dio ã¨ dart-dio-next ã®é•ã„

---

## ğŸ¤– Assistant
*2024-12-06 18:53:06*

`openapi-generator`ã§ç”Ÿæˆã™ã‚‹éš›ã®`dart-dio`ã¨`dart-dio-next`ã®é•ã„ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

---

### 1. **`dart-dio`**
- **ç‰¹å¾´**
  - å¤ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚
  - `openapi-generator`ã§Dartã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®åˆæœŸã‚µãƒãƒ¼ãƒˆã¨ã—ã¦æä¾›ã•ã‚Œã¾ã—ãŸã€‚
  - ä¸»ã«Dioãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ãŸAPIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å®Ÿè£…ãŒè¡Œã‚ã‚Œã¾ã™ãŒã€æœ€æ–°ã®Dartã‚„Dioã®æ©Ÿèƒ½ã‚’ååˆ†ã«æ´»ç”¨ã—ã¦ã„ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
  - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é »åº¦ãŒä½ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

- **åˆ©ç‚¹**
  - ã‚·ãƒ³ãƒ—ãƒ«ã§è»½é‡ã€‚
  - æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã€‚

- **èª²é¡Œ**
  - æ–°ã—ã„Dioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚
  - å‹å®‰å…¨æ€§ã‚„ã‚³ãƒ¼ãƒ‰ã®æ‹¡å¼µæ€§ã«æ¬ ã‘ã‚‹å ´åˆãŒã‚ã‚‹ã€‚
  - æ–°ã—ã„Dartã‚„Flutterã®é–‹ç™ºãƒˆãƒ¬ãƒ³ãƒ‰ã«æ²¿ã£ã¦ã„ãªã„ã€‚

---

### 2. **`dart-dio-next`**
- **ç‰¹å¾´**
  - Dart/Dioã®æœ€æ–°ã®æ©Ÿèƒ½ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚
  - å‹å®‰å…¨æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã€Dartã®null safetyï¼ˆNNBDï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã€‚
  - ã‚ˆã‚Šãƒ¢ãƒ€ãƒ³ãªã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã§ç”Ÿæˆã•ã‚Œã€ä¿å®ˆæ€§ãŒé«˜ã„ã€‚
  - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ãŠã‚Šã€ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚‚å¯¾å¿œã—ã‚„ã™ã„ã€‚

- **åˆ©ç‚¹**
  - å‹å®‰å…¨ã§ãƒ¢ãƒ€ãƒ³ãªã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚
  - Null safetyã«å®Œå…¨å¯¾å¿œã€‚
  - æ–°ã—ã„Dioã®æ©Ÿèƒ½ã‚’æ´»ç”¨ã€‚
  - ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ‹¡å¼µãŒå®¹æ˜“ã€‚

- **èª²é¡Œ**
  - æ–°ã—ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãªã®ã§ã€å¤ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ„ã¿è¾¼ã‚€éš›ã«äº’æ›æ€§ã®å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

---

### é¸ã³æ–¹
- **æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: `dart-dio-next`ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ãƒ¢ãƒ€ãƒ³ãªDarté–‹ç™ºã«é©ã—ã¦ãŠã‚Šã€ä»Šå¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“ã§ã™ã€‚
- **æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**:
  - ã™ã§ã«`dart-dio`ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€ãã®ã¾ã¾`dart-dio`ã‚’ä½¿ã†æ–¹ãŒå®‰å…¨ã€‚
  - å°†æ¥çš„ã«`dart-dio-next`ã«ç§»è¡Œã™ã‚‹è¨ˆç”»ãŒã‚ã‚Œã°ã€ãã®æ¤œè¨ã‚’å§‹ã‚ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚

---

### ã‚³ãƒãƒ³ãƒ‰ä¾‹

- **`dart-dio`ã®ç”Ÿæˆ**:
  ```bash
  openapi-generator-cli generate -g dart-dio -i api.yaml -o output-directory
  ```

- **`dart-dio-next`ã®ç”Ÿæˆ**:
  ```bash
  openapi-generator-cli generate -g dart-dio-next -i api.yaml -o output-directory
  ```

---

### ã¾ã¨ã‚
`dart-dio-next`ã¯ã€ãƒ¢ãƒ€ãƒ³ã§å‹å®‰å…¨æ€§ãŒé«˜ãã€æ–°ã—ã„Dartãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©ã§ã™ã€‚ä¸€æ–¹ã€`dart-dio`ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¶™ç¶šã«é©ã—ã¦ã„ã¾ã™ã€‚æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã‚‹å ´åˆã‚„é•·æœŸçš„ãªä¿å®ˆæ€§ã‚’è€ƒãˆã‚‹å ´åˆã¯ã€`dart-dio-next`ã‚’é¸ã¶ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

---

## ğŸ‘¤ User
*2024-12-06 18:57:09*

flutter pub run build_runner build --delete-conflicting-outputs ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦è¡Œã„ãŸã„

---

## ğŸ¤– Assistant
*2024-12-06 18:57:40*

`flutter pub run build_runner build --delete-conflicting-outputs` ã‚³ãƒãƒ³ãƒ‰ã§ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘ã‚’å¯¾è±¡ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã€`build_runner`è‡ªä½“ã«ã¯ç›´æ¥çš„ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯ç”¨æ„ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãŸã ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§ç›®çš„ã‚’é”æˆã§ãã¾ã™ã€‚

---

### æ–¹æ³• 1: ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆå¯¾è±¡ã‚’åˆ¶é™ã™ã‚‹ï¼ˆ`build.yaml` ã‚’ä½¿ã†ï¼‰

`build.yaml`ã‚’ä½¿ã£ã¦ç”Ÿæˆå¯¾è±¡ã‚’åˆ¶é™ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`build.yaml`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼ˆã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ç·¨é›†ï¼‰ã€‚
2. ä»¥ä¸‹ã®ã‚ˆã†ã«å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¾ã™ã€‚

   ```yaml
   targets:
     $default:
       sources:
         include:
           - lib/specific_directory/**
   ```

   - `lib/specific_directory/**` ã®éƒ¨åˆ†ã‚’å¯¾è±¡ã¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

3. `flutter pub run build_runner build --delete-conflicting-outputs` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

---

### æ–¹æ³• 2: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå˜ä½ã§ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’è¡Œã†

ç”Ÿæˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®çµã‚Šè¾¼ã¿ã«`--build-filter`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚

```bash
flutter pub run build_runner build --delete-conflicting-outputs --build-filter="lib/specific_directory/**"
```

- `--build-filter` ã¯ã€æŒ‡å®šã—ãŸãƒ‘ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¸€è‡´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ãƒ“ãƒ«ãƒ‰å¯¾è±¡ã«ã—ã¾ã™ã€‚
- `lib/specific_directory/**` ã®éƒ¨åˆ†ã‚’å¯¾è±¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

---

### æ–¹æ³• 3: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç‰¹å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘ã‚’ãƒ“ãƒ«ãƒ‰

1. å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
2. ä»¥ä¸‹ã¯ä¾‹ã§ã™ï¼ˆ`build_specific.sh`ï¼‰ã€‚

   ```bash
   #!/bin/bash
   TARGET_DIR="lib/specific_directory/**"
   flutter pub run build_runner build --delete-conflicting-outputs --build-filter="$TARGET_DIR"
   ```

3. å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸ã—ã¾ã™ã€‚

   ```bash
   chmod +x build_specific.sh
   ```

4. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   ./build_specific.sh
   ```

---

### æ–¹æ³• 4: è‡ªå‹•ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’æ‰‹å‹•ã§å‰Šé™¤

ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç”Ÿæˆç‰©ã ã‘å‰Šé™¤ã—ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å†ç”Ÿæˆã—ã¾ã™ã€‚

1. å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
2. é€šå¸¸ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

---

### æ³¨æ„ç‚¹
- **ä¾å­˜é–¢ä¿‚**: `build_runner`ã¯ä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ã—ã¦å‹•ä½œã™ã‚‹ãŸã‚ã€ä»–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé–“æ¥çš„ã«å½±éŸ¿ã‚’å—ã‘ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãŸã‚ã€åºƒç¯„å›²ãªå¤‰æ›´ã‚’é¿ã‘ã‚‹éš›ã«ã¯`--build-filter`ã‚’ä½¿ã†æ–¹æ³•ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚
- **ã‚¹ãƒ”ãƒ¼ãƒ‰**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã§ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ User
*2024-12-06 18:57:52*

makefileã‚’ä½¿ã£ã¦ã“ã†ã„ã†ã“ã¨ã¯ã§ãã‚‹ã®ã‹ï¼Ÿ

# OpenAPI ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
.PHONY: openapi-gen
openapi-gen:
	openapi-generator validate -i ./schema/openapi.yaml
	openapi-generator generate -i ./schema/openapi.yaml -g dart-dio -o ./generated/openapi
	cd generated/openapi
	fvm flutter pub run build_runner build --delete-conflicting-outputs

---

## ğŸ¤– Assistant
*2024-12-06 18:58:15*

`Makefile`ã‚’ä½¿ã£ã¦ã€ã“ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã—ã€è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚ãŸã ã—ã€æœ€å¾Œã®`cd generated/openapi`ã§ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´ã¯ã‚¹ã‚³ãƒ¼ãƒ—ãŒä¸€æ™‚çš„ã§ã€Makefileå†…ã§ã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã«å½±éŸ¿ã‚’åŠã¼ã—ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ­£ã—ãå®Ÿè¡Œã™ã‚‹ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚

ä»¥ä¸‹ã«æ”¹å–„ç‰ˆã®`Makefile`ã‚’ç¤ºã—ã¾ã™ï¼š

```makefile
# OpenAPI ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
.PHONY: openapi-gen
openapi-gen:
	openapi-generator validate -i ./schema/openapi.yaml
	openapi-generator generate -i ./schema/openapi.yaml -g dart-dio -o ./generated/openapi
	cd generated/openapi && fvm flutter pub run build_runner build --delete-conflicting-outputs
```

### è§£èª¬

1. **`cd`ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åˆ¶å¾¡**:
   - `cd generated/openapi &&` ã‚’ä½¿ã†ã“ã¨ã§ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§`fvm flutter pub run`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

2. **`.PHONY` ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**:
   - `openapi-gen`ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªãã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹ãŸã‚ã€`.PHONY`ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€MakefileãŒã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¨åŒã˜åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ãŸå ´åˆã§ã‚‚å‡¦ç†ã‚’æ­£ã—ãå®Ÿè¡Œã—ã¾ã™ã€‚

3. **ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢**:
   - å„ã‚¹ãƒ†ãƒƒãƒ—ã¯Makefileã®ãƒ«ãƒ¼ãƒ«å†…ã§ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¾ãŸã¯æ”¹è¡Œã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™ã€‚
   - `&&` ã‚’ä½¿ã†ã“ã¨ã§ã€å‰ã®ã‚³ãƒãƒ³ãƒ‰ãŒæˆåŠŸã—ãŸå ´åˆã«ã®ã¿æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

---

### Makefileå®Ÿè¡Œä¾‹

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§`openapi-gen`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š

```bash
make openapi-gen
```

---

### æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
ã‚‚ã—ä»–ã«ã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´ãŒå¿…è¦ãªå ´åˆã‚„ã‚³ãƒãƒ³ãƒ‰ã®ç®¡ç†ãŒè¤‡é›‘ã«ãªã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªå·¥å¤«ã‚’è¿½åŠ ã§ãã¾ã™ï¼š

1. **å¤‰æ•°ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæŒ‡å®š**:
   ```makefile
   GENERATED_DIR = ./generated/openapi

   .PHONY: openapi-gen
   openapi-gen:
   	openapi-generator validate -i ./schema/openapi.yaml
   	openapi-generator generate -i ./schema/openapi.yaml -g dart-dio -o $(GENERATED_DIR)
   	cd $(GENERATED_DIR) && fvm flutter pub run build_runner build --delete-conflicting-outputs
   ```

2. **ã‚µãƒ–ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’åˆ©ç”¨**:
   ã‚¿ã‚¹ã‚¯ã‚’åˆ†å‰²ã—ã¦å€‹åˆ¥ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
   ```makefile
   GENERATED_DIR = ./generated/openapi

   .PHONY: openapi-validate openapi-generate openapi-build
   openapi-validate:
   	openapi-generator validate -i ./schema/openapi.yaml

   openapi-generate:
   	openapi-generator generate -i ./schema/openapi.yaml -g dart-dio -o $(GENERATED_DIR)

   openapi-build:
   	cd $(GENERATED_DIR) && fvm flutter pub run build_runner build --delete-conflicting-outputs

   openapi-gen: openapi-validate openapi-generate openapi-build
   ```

---

ã“ã®æ–¹æ³•ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¿ã‚¹ã‚¯ã‚’ç°¡æ½”ã‹ã¤å†åˆ©ç”¨å¯èƒ½ãªå½¢ã§ç®¡ç†ã§ãã¾ã™ã€‚

---
