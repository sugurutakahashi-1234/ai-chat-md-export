# æ’é‡ã—ãŸenumé…åˆ—

æ—¥ä»˜: 2023-08-18

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:43:27*

Swiftã§é€£æƒ³å€¤ã‚’æŒã¤enumã®é…åˆ—ã‚’ã‚‚ã£ã¦ã„ã‚‹ã¨ã™ã‚‹ã€‚
ã“ã®é…åˆ—ã¯åŒã˜caseã®é…åˆ—ã‚’è¤‡æ•°å—ã‘å…¥ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ãŒã€ãã®é‡è¤‡ã‚’æ’é™¤ã—ãŸé…åˆ—ã‚’å–å¾—ã—ãŸã„å ´åˆã¯ã©ã†ã™ã‚Œã°ã„ã„ã‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:44:11*

Swiftã®`enum`ã‚’ç”¨ã„ã¦é€£æƒ³å€¤ã‚’æŒã¤å ´åˆã€ãã®é€£æƒ³å€¤ã«åŸºã¥ã„ã¦enumã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸€æ„ã«ã™ã‚‹ã“ã¨ã¯ã€ç›´æ¥çš„ãªæ–¹æ³•ã§ã¯é›£ã—ã„ã§ã™ã€‚ã—ã‹ã—ã€ã‚«ã‚¹ã‚¿ãƒ ã®æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€é€£æƒ³å€¤ã«åŸºã¥ã„ã¦é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®ä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```swift
enum ItemType: Equatable {
    case book(title: String, author: String)
    case music(title: String, artist: String)

    static func == (lhs: ItemType, rhs: ItemType) -> Bool {
        switch (lhs, rhs) {
        case let (.book(lhsTitle, lhsAuthor), .book(rhsTitle, rhsAuthor)):
            return lhsTitle == rhsTitle && lhsAuthor == rhsAuthor
        case let (.music(lhsTitle, lhsArtist), .music(rhsTitle, rhsArtist)):
            return lhsTitle == rhsTitle && lhsArtist == rhsArtist
        default:
            return false
        }
    }
}

let items: [ItemType] = [
    .book(title: "1984", author: "George Orwell"),
    .music(title: "Imagine", artist: "John Lennon"),
    .book(title: "1984", author: "George Orwell")
]

let uniqueItems = Array(Set(items))
print(uniqueItems)
```

ã“ã“ã§ã€`ItemType` enumã¯`Equatable`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é€£æƒ³å€¤ã‚’åŸºã«ç­‰ä¾¡æ€§ã‚’åˆ¤å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãã—ã¦ã€`Set`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€é…åˆ—ã®ä¸­ã‹ã‚‰é‡è¤‡ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ’é™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã ã—ã€æ³¨æ„ç‚¹ã¨ã—ã¦ã€ã“ã®æ–¹æ³•ã§`uniqueItems`ã‚’å–å¾—ã—ãŸå ´åˆã€å…ƒã®é…åˆ—ã®é †åºãŒä¿æŒã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚é †åºã‚’ä¿æŒã—ãªãŒã‚‰é‡è¤‡ã‚’æ’é™¤ã—ãŸã„å ´åˆã€ã‚ˆã‚Šè¤‡é›‘ãªæ–¹æ³•ã‚’ã¨ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:44:19*

é †ç•ªã‚’ç¶­æŒã—ãŸã„ã®ã§Setã¯ä½¿ã£ã¦æ¬²ã—ããªã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:44:41*

é †åºã‚’ç¶­æŒã—ãŸã¾ã¾é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ã«ã¯ã€æ‰‹å‹•ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã¯ãã®ãŸã‚ã®æ–¹æ³•ã‚’ç¤ºã™ä¾‹ã§ã™ï¼š

```swift
enum ItemType: Equatable {
    case book(title: String, author: String)
    case music(title: String, artist: String)

    static func == (lhs: ItemType, rhs: ItemType) -> Bool {
        switch (lhs, rhs) {
        case let (.book(lhsTitle, lhsAuthor), .book(rhsTitle, rhsAuthor)):
            return lhsTitle == rhsTitle && lhsAuthor == rhsAuthor
        case let (.music(lhsTitle, lhsArtist), .music(rhsTitle, rhsArtist)):
            return lhsTitle == rhsTitle && lhsArtist == rhsArtist
        default:
            return false
        }
    }
}

let items: [ItemType] = [
    .book(title: "1984", author: "George Orwell"),
    .music(title: "Imagine", artist: "John Lennon"),
    .book(title: "1984", author: "George Orwell")
]

var uniqueItems: [ItemType] = []
for item in items {
    if !uniqueItems.contains(item) {
        uniqueItems.append(item)
    }
}

print(uniqueItems)
```

ã“ã®æ–¹æ³•ã§ã€`items`é…åˆ—ã®ä¸­ã‹ã‚‰é‡è¤‡ã‚’æ’é™¤ã—ã€`uniqueItems`é…åˆ—ã«é †åºã‚’ä¿æŒã—ãŸã¾ã¾ä¿å­˜ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:44:56*

foræ–‡ã¯ã‚ã¾ã‚Šä½¿ã„ãŸããªã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:45:24*

äº†è§£ã—ã¾ã—ãŸã€‚`reduce(into:_:)`ã‚’ä½¿ã£ã¦é–¢æ•°å‹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§é †åºã‚’ç¶­æŒã—ãŸã¾ã¾é‡è¤‡ã‚’æ’é™¤ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
enum ItemType: Equatable {
    case book(title: String, author: String)
    case music(title: String, artist: String)

    static func == (lhs: ItemType, rhs: ItemType) -> Bool {
        switch (lhs, rhs) {
        case let (.book(lhsTitle, lhsAuthor), .book(rhsTitle, rhsAuthor)):
            return lhsTitle == rhsTitle && lhsAuthor == rhsAuthor
        case let (.music(lhsTitle, lhsArtist), .music(rhsTitle, rhsArtist)):
            return lhsTitle == rhsTitle && lhsArtist == rhsArtist
        default:
            return false
        }
    }
}

let items: [ItemType] = [
    .book(title: "1984", author: "George Orwell"),
    .music(title: "Imagine", artist: "John Lennon"),
    .book(title: "1984", author: "George Orwell")
]

let uniqueItems = items.reduce(into: [ItemType]()) { (result, item) in
    if !result.contains(item) {
        result.append(item)
    }
}

print(uniqueItems)
```

ã“ã®æ–¹æ³•ã§ã¯ã€`reduce(into:_:)`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦`items`é…åˆ—ã‚’ä¸€åº¦ã ã‘ãƒˆãƒ©ãƒãƒ¼ã‚¹ã—ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€æ–°ã—ã„é…åˆ—`result`ã‚’ä½œæˆã—ã€ãã‚Œã‚’æ›´æ–°ã—ã¦ã„ãå½¢ã§å‹•ä½œã—ã¾ã™ã€‚ã“ã®æ–¹æ³•ã§ã€`for`ãƒ«ãƒ¼ãƒ—ã‚’é¿ã‘ã€ã‚ˆã‚Šå®£è¨€çš„ãªæ–¹æ³•ã§åŒã˜çµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:45:45*

Equatable ã‚’ã¤ã‘ãŸããªã„å ´åˆã¯ã©ã†ã™ã‚Œã°ã„ã„ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:46:19*

`Equatable` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ¡ç”¨ã—ãªã„å ´åˆã§ã‚‚ã€ã‚«ã‚¹ã‚¿ãƒ ã®æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ã£ã¦é‡è¤‡ã‚’æ’é™¤ã§ãã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€é«˜éšé–¢æ•°ã‚’æ´»ç”¨ã—ã¦é…åˆ—ã®è¦ç´ ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é‡è¤‡ã—ãªã„ã‚‚ã®ã ã‘ã‚’æ–°ã—ã„é…åˆ—ã«è¿½åŠ ã™ã‚‹æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ä»¥ä¸‹ã«ãã®ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
enum ItemType {
    case book(title: String, author: String)
    case music(title: String, artist: String)

    func isEqual(to other: ItemType) -> Bool {
        switch (self, other) {
        case let (.book(title1, author1), .book(title2, author2)):
            return title1 == title2 && author1 == author2
        case let (.music(title1, artist1), .music(title2, artist2)):
            return title1 == title2 && artist1 == artist2
        default:
            return false
        }
    }
}

let items: [ItemType] = [
    .book(title: "1984", author: "George Orwell"),
    .music(title: "Imagine", artist: "John Lennon"),
    .book(title: "1984", author: "George Orwell")
]

let uniqueItems = items.reduce(into: [ItemType]()) { (result, item) in
    if !result.contains(where: { $0.isEqual(to: item) }) {
        result.append(item)
    }
}

print(uniqueItems)
```

ã“ã“ã§`isEqual(to:)`ã¨ã„ã†ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚½ãƒƒãƒ‰ã‚’`ItemType`ã«è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯`Equatable`ã®ä»£ã‚ã‚Šã«ã€enumã®é€£æƒ³å€¤ã®æ¯”è¼ƒã‚’è¡Œã„ã¾ã™ã€‚

ãã—ã¦ã€`reduce(into:_:)`ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§`contains(where:)`ã‚’ä½¿ã„ã€æ—¢å­˜ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒé‡è¤‡ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ã‚‚ã—é‡è¤‡ã—ã¦ã„ãªã‘ã‚Œã°ã€æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’çµæœã®é…åˆ—ã«è¿½åŠ ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:47:59*

ä»¥ä¸‹ã§caseãŒåŒã˜ãªã‚‰trueã‚’è¿”ã™é–¢æ•°ã‚’æ›¸ã„ã¦æ¬²ã—ã„

public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isEqualMeasurementType() -&gt; Bool {
        
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:48:29*

`MeasurementType` enumã®å„ã‚±ãƒ¼ã‚¹ãŒä»–ã®`MeasurementType`ã®ã‚±ãƒ¼ã‚¹ã¨åŒã˜ã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚ãã®ãŸã‚ã€é–¢æ•°ã¯2ã¤ã®`MeasurementType`ã®é–“ã§ã®æ¯”è¼ƒã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€é€£æƒ³å€¤ã¯ç„¡è¦–ã—ã€enumã®ã‚±ãƒ¼ã‚¹ã®ã¿ã‚’æ¯”è¼ƒã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€`isEqualMeasurementType(to:)`é–¢æ•°ã‚’è¿½åŠ ã—ã¦ãã®å‹•ä½œã‚’å®Ÿè£…ã—ãŸã‚‚ã®ã§ã™ï¼š

```swift
public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isEqualMeasurementType(to other: MeasurementType) -> Bool {
        switch (self, other) {
        case (.video, .video),
             (.website, .website),
             (.questionnaire, .questionnaire),
             (.interview, .interview):
            return true
        default:
            return false
        }
    }
}
```

ä½¿ç”¨æ–¹æ³•ï¼š

```swift
let type1 = MeasurementType.video(measurement: nil)
let type2 = MeasurementType.video(measurement: VideoMeasurement())
let type3 = MeasurementType.website(measurement: nil)

print(type1.isEqualMeasurementType(to: type2))  // true
print(type1.isEqualMeasurementType(to: type3))  // false
```

ã“ã®é–¢æ•°ã¯ã€2ã¤ã®`MeasurementType`ãŒåŒã˜ã‚±ãƒ¼ã‚¹ã‚’æŒã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚é€£æƒ³å€¤ã¯æ¯”è¼ƒã«ã¯é–¢ä¸ã—ã¾ã›ã‚“ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:48:59*

ã“ã‚Œã‚’ä½¿ã£ã¦ã€uniqueMeasurementTypesã‚’è¨˜è¿°ã—ã¦ã»ã—ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:49:36*

äº†è§£ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã¯`uniqueMeasurementTypes`ã‚’è¨ˆç®—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

ã¾ãšã€`MeasurementType` enumã§æä¾›ã•ã‚Œã‚‹`isEqualMeasurementType(to:)`é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€é…åˆ—å†…ã®`MeasurementType`ã®é …ç›®ãŒä»–ã®é …ç›®ã¨åŒã˜ã‚±ãƒ¼ã‚¹ã‚’æŒã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

ãã—ã¦ã€`reduce(into:_:)`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€æ–°ã—ã„é…åˆ—ã«é‡è¤‡ã—ãªã„`MeasurementType`ã®é …ç›®ã®ã¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```swift
// æ—¢å­˜ã®MeasurementTypeã®å®šç¾©
public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isEqualMeasurementType(to other: MeasurementType) -> Bool {
        switch (self, other) {
        case (.video, .video),
             (.website, .website),
             (.questionnaire, .questionnaire),
             (.interview, .interview):
            return true
        default:
            return false
        }
    }
}

// é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯
let measurementTypes: [MeasurementType] = [
    .video(measurement: nil),
    .website(measurement: nil),
    .video(measurement: nil),  // é‡è¤‡ã—ã¦ã„ã‚‹
    .questionnaire(measurement: nil)
]

let uniqueMeasurementTypes = measurementTypes.reduce(into: [MeasurementType]()) { (result, type) in
    if !result.contains(where: { $0.isEqualMeasurementType(to: type) }) {
        result.append(type)
    }
}

print(uniqueMeasurementTypes)
```

ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã§ã¯ã€`measurementTypes`é…åˆ—ã®å„é …ç›®ã‚’ç¢ºèªã—ã€`result`ã¨ã„ã†æ–°ã—ã„é…åˆ—ã«è¿½åŠ ã•ã‚Œã‚‹å‰ã«ã€ãã®é …ç›®ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’`isEqualMeasurementType(to:)`é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚ã“ã®æ–¹æ³•ã§ã€é‡è¤‡ã™ã‚‹`MeasurementType`ã®é …ç›®ãŒ`uniqueMeasurementTypes`ã«è¿½åŠ ã•ã‚Œãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:50:11*

isEqualMeasurementType(to other: MeasurementType) ã®é–¢æ•°åã®å€™è£œã‚’è€ƒãˆã¦ã»ã—ã„ã€‚otherã¯ä¸€èˆ¬çš„ãªã®ã‹ã‚‚æ°—ã«ãªã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:50:36*

é–¢æ•°ã®åå‰ã¯ã€é–¢æ•°ã®ç›®çš„ã‚„æŒ¯ã‚‹èˆã„ã‚’æ˜ç¢ºã«ä¼ãˆã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚`isEqualMeasurementType(to:)` ã¯ååˆ†ã«æ˜ç¢ºã§ã‚ã‚‹ä¸€æ–¹ã€ã‚ˆã‚Šç°¡æ½”ã¾ãŸã¯ç•°ãªã‚‹åå‰ã‚’è€ƒæ…®ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã¯ã„ãã¤ã‹ã®ææ¡ˆã§ã™ï¼š

1. `isSameType(as:)`
2. `matchesType(with:)`
3. `hasSameType(as:)`
4. `typeEquals(\_:)`
5. `isEqualToType(\_:)`
6. `correspondsTo(\_: )`
7. `isOfType(\_: )`

`other` ã‚’å¼•æ•°åã¨ã—ã¦ä½¿ã†ã“ã¨ã¯ä¸€èˆ¬çš„ã§ã™ãŒã€é–¢æ•°ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ã¦ã‚‚ã£ã¨å…·ä½“çš„ãªåå‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€`otherType` ã¾ãŸã¯ `comparisonType` ã¨ã„ã£ãŸåå‰ã‚’ä½¿ã†ã“ã¨ã§ã€å¼•æ•°ã®æ„å‘³ã‚’ã‚‚ã†å°‘ã—æ˜ç¢ºã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

æœ€çµ‚çš„ãªé¸æŠã¯ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä»–ã®éƒ¨åˆ†ã‚„ãƒãƒ¼ãƒ ã®å‘½åæ…£ç¿’ã€ãŠã‚ˆã³é–¢æ•°ã®ç›®çš„ã‚„ä½¿ç”¨æ³•ã«å¿œã˜ã¦è¡Œã†ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 10:51:49*

isSameType(as:) ãŒã„ã„ã€‚æ›¸ãç›´ã—ã¦æ¬²ã—ã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 10:52:13*

äº†è§£ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã«ã€`isSameType(as:)` ã¨ã„ã†é–¢æ•°åã‚’ä½¿ã£ã¦`MeasurementType` enumã¨é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†è¨˜è¿°ã—ã¾ã™ã€‚

```swift
// æ—¢å­˜ã®MeasurementTypeã®å®šç¾©
public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isSameType(as other: MeasurementType) -> Bool {
        switch (self, other) {
        case (.video, .video),
             (.website, .website),
             (.questionnaire, .questionnaire),
             (.interview, .interview):
            return true
        default:
            return false
        }
    }
}

// é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯
let measurementTypes: [MeasurementType] = [
    .video(measurement: nil),
    .website(measurement: nil),
    .video(measurement: nil),  // é‡è¤‡ã—ã¦ã„ã‚‹
    .questionnaire(measurement: nil)
]

let uniqueMeasurementTypes = measurementTypes.reduce(into: [MeasurementType]()) { (result, type) in
    if !result.contains(where: { $0.isSameType(as: type) }) {
        result.append(type)
    }
}

print(uniqueMeasurementTypes)
```

é–¢æ•°åã‚’`isSameType(as:)`ã«å¤‰æ›´ã—ã€é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã®éƒ¨åˆ†ã‚‚ãã‚Œã«åˆã‚ã›ã¦æ›´æ–°ã—ã¾ã—ãŸã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 11:01:53*

ã“ã†ã„ã†ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ãªã£ã¦ã„ã¦ã€Researchã®extensionã§uniqueMeasurementTypesã‚’è¿½åŠ ã™ã‚‹ã‚ˆã†ã«ã—ãŸã‚“ã ã€‚

public struct Research: Identifiable {
    public let measurements: \[Measurement\]
}

public struct Measurement: Identifiable {
    public typealias ID = String
    
    public let id: Measurement.ID
    public let order: Int
    public let type: MeasurementType

    public init(id: Measurement.ID, order: Int, type: MeasurementType) {
        self.id = id
        self.order = order
        self.type = type
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 11:02:20*

ã‚ã‹ã‚Šã¾ã—ãŸã€‚`Research` ã® `extension` ã« `uniqueMeasurementTypes` ã‚’è¿½åŠ ã™ã‚‹å ´åˆã®ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

ã¾ãšã€`MeasurementType` ã« `isSameType(as:)` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```swift
public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isSameType(as other: MeasurementType) -> Bool {
        switch (self, other) {
        case (.video, .video),
             (.website, .website),
             (.questionnaire, .questionnaire),
             (.interview, .interview):
            return true
        default:
            return false
        }
    }
}
```

ãã—ã¦ã€`Research` ã® `extension` ã§ `uniqueMeasurementTypes` ã‚’è¨ˆç®—ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```swift
extension Research {
    public var uniqueMeasurementTypes: [MeasurementType] {
        return measurements.reduce(into: [MeasurementType]()) { (result, measurement) in
            let type = measurement.type
            if !result.contains(where: { $0.isSameType(as: type) }) {
                result.append(type)
            }
        }
    }
}
```

ã“ã‚Œã§ã€`Research` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ç›´æ¥ `uniqueMeasurementTypes` ã‚’å‘¼ã³å‡ºã—ã¦ã€ãã®ç ”ç©¶ã«é–¢é€£ã™ã‚‹ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ¸¬å®šã‚¿ã‚¤ãƒ—ã®é…åˆ—ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 11:02:51*

contains ã®å¦å®šç³»ã‚’ä½¿ã„ãŸããªã„ã‚“ã ã€‚ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 11:03:09*

`contains` ã®å¦å®šç³»ã‚’ä½¿ç”¨ã—ãªã„æ–¹æ³•ã¨ã—ã¦ã€`first(where:)` ã‚„ `firstIndex(where:)` ãªã©ã‚’ä½¿ç”¨ã—ã¦è©²å½“ã™ã‚‹è¦ç´ ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚‚ã—è©²å½“ã™ã‚‹è¦ç´ ãŒãªã„å ´åˆã¯ã€`nil` ãŒè¿”ã•ã‚Œã‚‹ã®ã§ã€ãã®çµæœã‚’å…ƒã«æ¡ä»¶åˆ¤æ–­ã‚’è¡Œã„ã¾ã™ã€‚

ä»¥ä¸‹ã«ã€`contains` ã‚’ä½¿ç”¨ã—ãªã„æ–¹æ³•ã§ `uniqueMeasurementTypes` ã‚’è¨ˆç®—ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
extension Research {
    public var uniqueMeasurementTypes: [MeasurementType] {
        return measurements.reduce(into: [MeasurementType]()) { (result, measurement) in
            let type = measurement.type
            if result.first(where: { $0.isSameType(as: type) }) == nil {
                result.append(type)
            }
        }
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`first(where:)` ãŒ `nil` ã‚’è¿”ã™å ´åˆï¼ˆã¤ã¾ã‚Šã€åŒã˜ã‚¿ã‚¤ãƒ—ã® `MeasurementType` ãŒã¾ã  `result` é…åˆ—ã«å­˜åœ¨ã—ãªã„å ´åˆï¼‰ã€æ–°ã—ã„ã‚¿ã‚¤ãƒ—ã‚’ `result` é…åˆ—ã«è¿½åŠ ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 11:06:21*

var isVideoOrWebsite : Bool ã¨

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 11:06:49*

äº†è§£ã—ã¾ã—ãŸã€‚`MeasurementType` enumã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ `video` ã¾ãŸã¯ `website` ã®å ´åˆã« `true` ã‚’è¿”ã™ã€`isVideoOrWebsite` ã¨ã„ã†è¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ãŸã„ã¨ã®ã“ã¨ã§ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã« `MeasurementType` enumã«ã“ã®è¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã§ãã¾ã™ï¼š

```swift
public enum MeasurementType {
    case video(measurement: VideoMeasurement?)
    case website(measurement: WebsiteMeasurement?)
    case questionnaire(measurement: QuestionnaireMeasurement?)
    case interview(measurement: InterviewMeasurement?)
    
    public func isSameType(as other: MeasurementType) -> Bool {
        switch (self, other) {
        case (.video, .video),
             (.website, .website),
             (.questionnaire, .questionnaire),
             (.interview, .interview):
            return true
        default:
            return false
        }
    }

    public var isVideoOrWebsite: Bool {
        switch self {
        case .video, .website:
            return true
        default:
            return false
        }
    }
}
```

ã“ã® `isVideoOrWebsite` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã†ã¨ã€`MeasurementType` enumã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ `video` ã¾ãŸã¯ `website` ã®å ´åˆã«ç°¡å˜ã«ç¢ºèªã§ãã¾ã™ï¼š

```swift
let type = MeasurementType.video(measurement: nil)
print(type.isVideoOrWebsite)  // true
```

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 11:07:32*

Researchã®extensionã§Videoã¾ãŸã¯Websiteã‚’å«ã‚“ã§ã„ã‚‹ã‹ã©ã†ã‹ã®BoolãŒã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 11:07:50*

äº†è§£ã—ã¾ã—ãŸã€‚`Research`ã®`extension`ã«`containsVideoOrWebsite`ã¨ã„ã†è¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€`Research`å†…ã®`measurements`é…åˆ—ã«`video`ã¾ãŸã¯`website`ã‚¿ã‚¤ãƒ—ã®`Measurement`ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«`true`ã‚’è¿”ã—ã¾ã™ã€‚

ä»¥ä¸‹ãŒãã®å®Ÿè£…ã§ã™ï¼š

```swift
extension Research {
    public var containsVideoOrWebsite: Bool {
        return measurements.contains { $0.type.isVideoOrWebsite }
    }
}
```

ã“ã‚Œã§ã€`Research`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰`containsVideoOrWebsite`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç›´æ¥å‘¼ã³å‡ºã—ã¦ã€ãã‚ŒãŒ`video`ã¾ãŸã¯`website`ã‚¿ã‚¤ãƒ—ã®`Measurement`ã‚’å«ã‚€ã‹ã©ã†ã‹ã‚’ç°¡å˜ã«ç¢ºèªã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/8/18 11:08:22*

isVideoOrWebsiteã‚’ä½¿ã‚ãªã„ã§è¨˜è¿°ã—ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/8/18 11:08:33*

äº†è§£ã—ã¾ã—ãŸã€‚`isVideoOrWebsite` ã‚’ä½¿ç”¨ã›ãšã« `containsVideoOrWebsite` ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

```swift
extension Research {
    public var containsVideoOrWebsite: Bool {
        return measurements.contains { measurement in
            switch measurement.type {
            case .video, .website:
                return true
            default:
                return false
            }
        }
    }
}
```

ã“ã®æ–¹æ³•ã§ã¯ã€`contains` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€`measurements` é…åˆ—ã®å„ `Measurement` ã® `type` ãŒ `video` ã¾ãŸã¯ `website` ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç›´æ¥ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚

---
