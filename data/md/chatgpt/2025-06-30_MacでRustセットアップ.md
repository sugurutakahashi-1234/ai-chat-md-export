# MacでRustセットアップ

日付: 2025-06-30

---

## 👤 ユーザー
*2025/06/30 17:31:56*

macでrustのセットアップする方法
これからも継続的にいい感じにバージョンとか管理していきたいが、ここまでリッチじゃなくていい、シンプルなやつがいい。

---

## 🤖 アシスタント
*2025/06/30 17:31:57*

### Macで“これだけ”Rustセットアップ

&gt; **ポイント**  
&gt; - **公式ツールは `rustup`** ――最小限・標準・軽量  
&gt; - Homebrew でも公式スクリプトでもOK  
&gt; - **プロジェクトごとに自動でバージョン切替**できるので管理は実質放置

---

## 1. 前提ツール

```bash
# Xcode Command Line Tools (clang 等が入る)
xcode-select --install
```

---

## 2. インストール方法を選ぶ

| 方法 | コマンド | メリット | 補足 |
|------|----------|----------|------|
| Homebrew | `brew install rustup-init`&lt;br&gt;`rustup-init -y` | brew で一元管理したい人向け | `$HOME/.cargo` などにツールチェーンが入る点は同じ |
| 公式スクリプト | `curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh` | 公式ドキュメント通り。brew なしでも使える | `-y` を付けると対話をスキップ |

どちらも内部で **`rustup` と `cargo` が入る**ので実質同じ環境になります。

---

## 3. パス設定（自動で済むはずだが念のため）

```bash
echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.zprofile
source ~/.zprofile
```

---

## 4. 動作確認

```bash
rustc --version   # コンパイラ
cargo --version   # パッケージマネージャ
rustup show       # 有効中ツールチェーン確認
```

---

## 5. バージョン管理 ― rustup の基本技

| やりたいこと | コマンドと概要 |
|--------------|---------------|
| 最新 stable へ更新 | `rustup update stable` |
| β版 (beta) を一時的に使う | `rustup install beta`&lt;br&gt;`rustup default beta` |
| プロジェクト専用のバージョン固定 | プロジェクト直下に `rust-toolchain.toml` を置く例↓&lt;br&gt;`[toolchain]\nchannel = "1.78.0"`&lt;br&gt;→ `cd` すると自動で切替 |
| 使わなくなったツールチェーン削除 | `rustup toolchain uninstall <version>` |
| コンポーネント追加（例: rustfmt, clippy） | `rustup component add rustfmt clippy` |

&gt; **Tips**:  
&gt; `cargo install cargo-update` → `cargo install-update -a` で cargo 製 CLI の一括更新も楽。

---

## 6. よく使う開発ツール（軽めだけ厳選）

```bash
cargo install cargo-edit    # cargo add / rm / upgrade
cargo install cargo-watch   # コード変更で自動ビルド実行
cargo install cargo-nextest # 高速テストランナー
```

---

## 7. アンインストールも1コマンド

```bash
rustup self uninstall
```

---

## 8. rustup 以外の選択肢は？

| マネージャ | 向き／不向き |
|-------------|-------------|
| **mise** (旧 asdf-rs) | すでに Node, Go なども mise で管理している人向け。Rust単体なら rustup の方が軽い |
| **Homebrew のみ** | `brew install rust` でも入るが **複数バージョン管理不可** なので将来困りがち |
| **Nix** | 環境再現性◎だがセットアップが重い・学習コスト高 |

---

## まとめ

1. **`rustup` 一択でほぼ困らない**  
2. Homebrew でも公式スクリプトでも好みで導入  
3. `rust-toolchain.toml` で“置くだけバージョン固定”  
4. 更新は `rustup update` ― 手間ゼロ

これで **シンプル＆継続的に** Rust のバージョン管理ができます。  
ほかに知りたいツールや VS Code 拡張などあれば気軽にどうぞ！

---

## 👤 ユーザー
*2025/06/30 17:35:09*

brew install rustup-initrustup-init -y て本当にあっている？

---

## 🤖 アシスタント
*2025/06/30 17:35:20*

コマンドが 2 つくっ付いてしまっています。正しくは **区切って**実行します。  
現在の Homebrew ではパッケージ名が **`rustup`**（以前は `rustup-init`）なので、つぎのどちらかが確実です：

```bash
# 1. インストール
brew install rustup        # 旧 brew install rustup-init

# 2. rustup 初期化（対話をスキップする場合）
rustup-init -y
```

または 1 行で書くなら：

```bash
brew install rustup && rustup-init -y
```

&gt; Homebrew の formula ページでも「Formerly known as: rustup-init」と案内されています citeturn0search1

---

### なぜ 2 段階なのか
- **`brew install rustup`** … `rustup-init` という実行ファイル（インストーラ）を入れるだけ  
- **`rustup-init`** … 実際に `$HOME/.rustup` と `$HOME/.cargo` を作り、ツールチェーン（stable など）を取得する

この 2 段階を区切らないと初期化が走らないので注意してください。

---
