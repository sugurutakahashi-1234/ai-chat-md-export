# Flutter ç”»åƒé¸æŠã‚¢ãƒ—ãƒª

æ—¥ä»˜: 2024-12-17

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/17 09:12:35*

flutterã§iOSã¨Androidã§ãƒ‡ãƒã‚¤ã‚¹ã®ä¸­ã®ç”»åƒã‹ã‚‰ä¸€ã¤ã‚’é¸æŠã—ã¦ç”»é¢ã«è¡¨ç¤ºã™ã‚‹ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/17 09:13:20*

Flutterã§ã€iOSã¨Androidã®ä¸¡æ–¹ã§å‹•ä½œã™ã‚‹ç”»åƒé¸æŠã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’è¸ã‚€ã¨ç°¡å˜ã§ã™ã€‚`image_picker`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ãƒ‡ãƒã‚¤ã‚¹å†…ã®ç”»åƒã‚’é¸æŠã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

---

### 1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ**
```bash
flutter create image_picker_example
cd image_picker_example
```

---

### 2. **å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
`pubspec.yaml` ã«ä»¥ä¸‹ã®ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```yaml
dependencies:
  flutter:
    sdk: flutter
  image_picker: ^0.8.8+7 # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦æ›´æ–°ã—ã¦ãã ã•ã„
```

ãã®å¾Œã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š
```bash
flutter pub get
```

---

### 3. **ç”»åƒé¸æŠãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…**
`lib/main.dart` ã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ï¼š

```dart
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:io';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Image Picker Example',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: const ImagePickerScreen(),
    );
  }
}

class ImagePickerScreen extends StatefulWidget {
  const ImagePickerScreen({super.key});

  @override
  _ImagePickerScreenState createState() => _ImagePickerScreenState();
}

class _ImagePickerScreenState extends State<ImagePickerScreen> {
  File? _selectedImage;
  final ImagePicker _picker = ImagePicker();

  Future<void> _pickImage() async {
    final XFile? pickedFile = await _picker.pickImage(source: ImageSource.gallery);

    if (pickedFile != null) {
      setState(() {
        _selectedImage = File(pickedFile.path);
      });
    } else {
      // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸå ´åˆã®å‡¦ç†
      debugPrint('ç”»åƒé¸æŠãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ç”»åƒé¸æŠ')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            _selectedImage != null
                ? Image.file(_selectedImage!, height: 300)
                : const Text('ç”»åƒãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“'),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: _pickImage,
              child: const Text('ç”»åƒã‚’é¸æŠ'),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### 4. **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã”ã¨ã®è¨­å®š**
#### iOS
`ios/Runner/Info.plist` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```xml
<key>NSPhotoLibraryUsageDescription</key>
<string>ã‚¢ãƒ—ãƒªã§ç”»åƒã‚’é¸æŠã™ã‚‹ãŸã‚ã«ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã§ã™ã€‚</string>
```

#### Android
`android/app/src/main/AndroidManifest.xml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```xml
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CAMERA"/>
```

---

### 5. **ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ**
iOSã¾ãŸã¯Androidãƒ‡ãƒã‚¤ã‚¹ã§ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash
flutter run
```

---

### å®Ÿè¡Œçµæœ
- ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã™ã‚‹ã¨ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
- ã€Œç”»åƒã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ãƒ‡ãƒã‚¤ã‚¹å†…ã®ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒé–‹ãã¾ã™ã€‚
- é¸æŠã—ãŸç”»åƒãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

---

### å¿…è¦ã«å¿œã˜ãŸæ‹¡å¼µ
- **ã‚«ãƒ¡ãƒ©ã‹ã‚‰ç”»åƒã‚’æ’®å½±ã—ãŸã„å ´åˆ**ï¼š
  ```dart
  final XFile? pickedFile = await _picker.pickImage(source: ImageSource.camera);
  ```
  ã«å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚«ãƒ¡ãƒ©ã‹ã‚‰ç”»åƒã‚’å–å¾—ã§ãã¾ã™ã€‚
  
- **ç”»åƒã®ã‚µã‚¤ã‚ºã‚„å½¢å¼ã‚’åˆ¶å¾¡**ï¼š
  `pickImage` ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã€å“è³ªã‚„è§£åƒåº¦ã‚’åˆ¶é™ã§ãã¾ã™ï¼š
  ```dart
  await _picker.pickImage(
    source: ImageSource.gallery,
    maxWidth: 600,
    imageQuality: 80,
  );
  ``` 

ã“ã‚Œã§ã€åŸºæœ¬çš„ãªç”»åƒé¸æŠã‚¢ãƒ—ãƒªã¯å®Œæˆã§ã™ï¼

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/17 09:13:48*

statefullã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã¯ãªãhooksã‚’ä½¿ã£ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/17 09:14:20*

`flutter_hooks` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã€çŠ¶æ…‹ç®¡ç†ã‚’ãƒ•ãƒƒã‚¯ã«ç½®ãæ›ãˆãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚`flutter_hooks`ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã«ãªã‚Šã€å†åˆ©ç”¨å¯èƒ½ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã®ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚

---

### 1. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¿½åŠ **
ã¾ãšã€`pubspec.yaml` ã«ä»¥ä¸‹ã®ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_hooks: ^0.18.6  # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„
  image_picker: ^0.8.8+7 # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„
```

ãã®å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¾ã™ï¼š
```bash
flutter pub get
```

---

### 2. **`flutter_hooks` ã‚’ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰**

ä»¥ä¸‹ã¯ã€`flutter_hooks`ã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ä¾‹ã§ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:io';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Image Picker with Hooks',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: const ImagePickerScreen(),
    );
  }
}

class ImagePickerScreen extends HookWidget {
  const ImagePickerScreen({super.key});

  @override
  Widget build(BuildContext context) {
    // ãƒ•ãƒƒã‚¯ã§çŠ¶æ…‹ã‚’ç®¡ç†
    final selectedImage = useState<File?>(null);
    final picker = useMemoized(() => ImagePicker());

    Future<void> pickImage() async {
      final XFile? pickedFile = await picker.pickImage(source: ImageSource.gallery);

      if (pickedFile != null) {
        selectedImage.value = File(pickedFile.path);
      } else {
        debugPrint('ç”»åƒé¸æŠãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ');
      }
    }

    return Scaffold(
      appBar: AppBar(title: const Text('ç”»åƒé¸æŠ')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            selectedImage.value != null
                ? Image.file(selectedImage.value!, height: 300)
                : const Text('ç”»åƒãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“'),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: pickImage,
              child: const Text('ç”»åƒã‚’é¸æŠ'),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### 3. **èª¬æ˜**
#### ãƒ•ãƒƒã‚¯ã‚’ä½¿ã£ãŸãƒã‚¤ãƒ³ãƒˆï¼š
1. **çŠ¶æ…‹ç®¡ç† (`useState`)**:
   - `selectedImage`ã‚’`useState`ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€StatefulWidgetã‚’ä½¿ç”¨ã›ãšã«çŠ¶æ…‹ã‚’ç°¡å˜ã«æ‰±ãˆã¾ã™ã€‚

   ```dart
   final selectedImage = useState<File?>(null);
   ```

2. **ImagePickerã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/17 09:14:24*

statefullã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã¯ãªãhooksã‚’ä½¿ã£ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/17 09:14:38*

ä»¥ä¸‹ã¯ã€`flutter_hooks`ã‚’ä½¿ã£ãŸå®Œå…¨ãªå®Ÿè£…ä¾‹ã§ã™ã€‚StatefulWidgetã‚’ä½¿ã‚ãšã«ãƒ•ãƒƒã‚¯ã§çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

---

### å®Œå…¨ãªã‚³ãƒ¼ãƒ‰ä¾‹

```dart
import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:io';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Image Picker with Hooks',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: const ImagePickerScreen(),
    );
  }
}

class ImagePickerScreen extends HookWidget {
  const ImagePickerScreen({super.key});

  @override
  Widget build(BuildContext context) {
    // ãƒ•ãƒƒã‚¯ã§çŠ¶æ…‹ã‚’ç®¡ç†
    final selectedImage = useState&lt;File?&gt;(null); // é¸æŠã—ãŸç”»åƒã®çŠ¶æ…‹
    final picker = useMemoized(() =&gt; ImagePicker()); // ImagePickerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥

    // ç”»åƒã‚’é¸æŠã™ã‚‹éåŒæœŸé–¢æ•°
    Future&lt;void&gt; pickImage() async {
      final XFile? pickedFile = await picker.pickImage(source: ImageSource.gallery);
      if (pickedFile != null) {
        selectedImage.value = File(p

---
