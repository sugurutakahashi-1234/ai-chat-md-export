# ボタン横伸ばす

日付: 2024-07-19

---

## 👤 ユーザー
*2024/07/19 14:00:26*

ボタンを横いっぱいに伸ばしたい

public struct PhoneNumberInputView&lt;Dependency: RootDIContainerDependency&gt;: View {
    private let dependency: Dependency
    @StateObject private var presenter: PhoneNumberInputPresenter&lt;Dependency&gt;
    @FocusState private var isFocused: Bool

    public init(dependency: Dependency) {
        self.dependency = dependency
        _presenter = .init(wrappedValue: PhoneNumberInputPresenter(dependency: dependency))
    }

    public var body: some View {
        VStack {
            HStack {
                Text("電話番号")
                Spacer()
            }
            .padding(.vertical)

            TextField("09012345678", text: $presenter.rawPhoneNumber)
                .keyboardType(.numberPad)
                .textFieldStyle(.roundedBorder)
                .focused($isFocused)

            Text("有効な電話番号ではないようです。正しい電話番号を入力してください。")
                .isHidden(!presenter.showInvalidMessage)
                .foregroundStyle(.red)

            Button {
                presenter.onTapNext()
            } label: {
                Text("次へ")
            }
            .buttonStyle(.borderedProminent)
            .disabled(!presenter.isValidPhoneNumber)

            Spacer()
        }
        .padding()
        .navigationTitle("電話番号入力")
        .navigationDestination(isPresented: $presenter.showConfirmationCodeInput, destination: {
            ConfirmationCodeInputView(dependency: dependency)
        })
        .task {
            await presenter.onAppear()
        }
        .onAppear {
            isFocused = true
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}

---

## 🤖 アシスタント
*2024/07/19 14:00:36*

ボタンを横いっぱいに伸ばすためには、`Button`を`HStack`内に配置し、`Spacer`で左右に余白を取ることでボタンが横いっぱいに伸びるようにすることができます。以下のように修正してください。

```swift
public struct PhoneNumberInputView<Dependency: RootDIContainerDependency>: View {
    private let dependency: Dependency
    @StateObject private var presenter: PhoneNumberInputPresenter<Dependency>
    @FocusState private var isFocused: Bool

    public init(dependency: Dependency) {
        self.dependency = dependency
        _presenter = .init(wrappedValue: PhoneNumberInputPresenter(dependency: dependency))
    }

    public var body: some View {
        VStack {
            HStack {
                Text("電話番号")
                Spacer()
            }
            .padding(.vertical)

            TextField("09012345678", text: $presenter.rawPhoneNumber)
                .keyboardType(.numberPad)
                .textFieldStyle(.roundedBorder)
                .focused($isFocused)

            Text("有効な電話番号ではないようです。正しい電話番号を入力してください。")
                .isHidden(!presenter.showInvalidMessage)
                .foregroundStyle(.red)

            HStack {
                Spacer()
                Button {
                    presenter.onTapNext()
                } label: {
                    Text("次へ")
                }
                .buttonStyle(.borderedProminent)
                .disabled(!presenter.isValidPhoneNumber)
                Spacer()
            }
            .padding(.top, 10)

            Spacer()
        }
        .padding()
        .navigationTitle("電話番号入力")
        .navigationDestination(isPresented: $presenter.showConfirmationCodeInput, destination: {
            ConfirmationCodeInputView(dependency: dependency)
        })
        .task {
            await presenter.onAppear()
        }
        .onAppear {
            isFocused = true
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}
```

この修正により、ボタンが横いっぱいに広がり、ボタンの左右に均等に余白ができます。また、`padding(.top, 10)`を追加して、ボタンと上のテキストフィールドとの間に適度なスペースを取るようにしています。

---

## 👤 ユーザー
*2024/07/19 14:02:53*

presenter.showInvalidMessage であれば TextField の枠線を赤くしたい

---

## 🤖 アシスタント
*2024/07/19 14:03:03*

`TextField`の枠線を赤くするには、`Overlay`を使用してカスタムスタイルを適用できます。`presenter.showInvalidMessage`に基づいて条件付きで枠線の色を変更するために、以下のように修正してください。

```swift
public struct PhoneNumberInputView<Dependency: RootDIContainerDependency>: View {
    private let dependency: Dependency
    @StateObject private var presenter: PhoneNumberInputPresenter<Dependency>
    @FocusState private var isFocused: Bool

    public init(dependency: Dependency) {
        self.dependency = dependency
        _presenter = .init(wrappedValue: PhoneNumberInputPresenter(dependency: dependency))
    }

    public var body: some View {
        VStack {
            HStack {
                Text("電話番号")
                Spacer()
            }
            .padding(.vertical)

            ZStack {
                TextField("09012345678", text: $presenter.rawPhoneNumber)
                    .keyboardType(.numberPad)
                    .textFieldStyle(.roundedBorder)
                    .focused($isFocused)
                    .padding()
                    .overlay(
                        RoundedRectangle(cornerRadius: 8)
                            .stroke(presenter.showInvalidMessage ? Color.red : Color.gray, lineWidth: 1)
                    )
            }

            Text("有効な電話番号ではないようです。正しい電話番号を入力してください。")
                .isHidden(!presenter.showInvalidMessage)
                .foregroundStyle(.red)

            HStack {
                Spacer()
                Button {
                    presenter.onTapNext()
                } label: {
                    Text("次へ")
                }
                .buttonStyle(.borderedProminent)
                .disabled(!presenter.isValidPhoneNumber)
                Spacer()
            }
            .padding(.top, 10)

            Spacer()
        }
        .padding()
        .navigationTitle("電話番号入力")
        .navigationDestination(isPresented: $presenter.showConfirmationCodeInput, destination: {
            ConfirmationCodeInputView(dependency: dependency)
        })
        .task {
            await presenter.onAppear()
        }
        .onAppear {
            isFocused = true
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}
```

この修正では、`TextField`を`ZStack`内に配置し、`TextField`に`overlay`を適用して枠線の色を変更しています。`presenter.showInvalidMessage`が`true`の場合は赤色に、そうでない場合は灰色の枠線が表示されます。

---

## 👤 ユーザー
*2024/07/19 14:03:53*

TextField 自体をアンダーバーにしてそれを赤くしたい

---

## 🤖 アシスタント
*2024/07/19 14:04:03*

`TextField`自体をアンダーバーにして、それを赤くするには、`overlay`を使ってカスタムスタイルを適用できます。以下のコードでは、`TextField`の下に赤いアンダーバーを表示する方法を示しています。

```swift
public struct PhoneNumberInputView<Dependency: RootDIContainerDependency>: View {
    private let dependency: Dependency
    @StateObject private var presenter: PhoneNumberInputPresenter<Dependency>
    @FocusState private var isFocused: Bool

    public init(dependency: Dependency) {
        self.dependency = dependency
        _presenter = .init(wrappedValue: PhoneNumberInputPresenter(dependency: dependency))
    }

    public var body: some View {
        VStack {
            HStack {
                Text("電話番号")
                Spacer()
            }
            .padding(.vertical)

            TextField("09012345678", text: $presenter.rawPhoneNumber)
                .keyboardType(.numberPad)
                .focused($isFocused)
                .padding(.bottom, 5)
                .overlay(
                    VStack {
                        Spacer()
                        Rectangle()
                            .frame(height: 2)
                            .foregroundColor(presenter.showInvalidMessage ? .red : .gray)
                    }
                )

            Text("有効な電話番号ではないようです。正しい電話番号を入力してください。")
                .isHidden(!presenter.showInvalidMessage)
                .foregroundColor(.red)
                .padding(.top, 5)

            HStack {
                Spacer()
                Button {
                    presenter.onTapNext()
                } label: {
                    Text("次へ")
                }
                .buttonStyle(.borderedProminent)
                .disabled(!presenter.isValidPhoneNumber)
                Spacer()
            }
            .padding(.top, 10)

            Spacer()
        }
        .padding()
        .navigationTitle("電話番号入力")
        .navigationDestination(isPresented: $presenter.showConfirmationCodeInput, destination: {
            ConfirmationCodeInputView(dependency: dependency)
        })
        .task {
            await presenter.onAppear()
        }
        .onAppear {
            isFocused = true
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}
```

このコードでは、`TextField`に`overlay`を使用してアンダーバーを追加し、`presenter.showInvalidMessage`の状態に応じて色を変更しています。アンダーバーは`Rectangle`を使って実装され、高さを`2`に設定しています。

---

## 👤 ユーザー
*2024/07/19 14:04:22*

つねにアンダーバーを表示させておいて、それを赤くしたいんだ

---

## 🤖 アシスタント
*2024/07/19 14:04:33*

常にアンダーバーを表示させ、それを必要に応じて赤くするためには、`TextField`の下に常に表示されるアンダーバーを追加し、その色を`presenter.showInvalidMessage`の状態に応じて変更するようにします。以下のコードをご覧ください。

```swift
public struct PhoneNumberInputView<Dependency: RootDIContainerDependency>: View {
    private let dependency: Dependency
    @StateObject private var presenter: PhoneNumberInputPresenter<Dependency>
    @FocusState private var isFocused: Bool

    public init(dependency: Dependency) {
        self.dependency = dependency
        _presenter = .init(wrappedValue: PhoneNumberInputPresenter(dependency: dependency))
    }

    public var body: some View {
        VStack {
            HStack {
                Text("電話番号")
                Spacer()
            }
            .padding(.vertical)

            VStack(spacing: 0) {
                TextField("09012345678", text: $presenter.rawPhoneNumber)
                    .keyboardType(.numberPad)
                    .focused($isFocused)
                    .padding(.bottom, 5)
                
                Rectangle()
                    .frame(height: 2)
                    .foregroundColor(presenter.showInvalidMessage ? .red : .gray)
            }

            Text("有効な電話番号ではないようです。正しい電話番号を入力してください。")
                .isHidden(!presenter.showInvalidMessage)
                .foregroundColor(.red)
                .padding(.top, 5)

            HStack {
                Spacer()
                Button {
                    presenter.onTapNext()
                } label: {
                    Text("次へ")
                }
                .buttonStyle(.borderedProminent)
                .disabled(!presenter.isValidPhoneNumber)
                Spacer()
            }
            .padding(.top, 10)

            Spacer()
        }
        .padding()
        .navigationTitle("電話番号入力")
        .navigationDestination(isPresented: $presenter.showConfirmationCodeInput, destination: {
            ConfirmationCodeInputView(dependency: dependency)
        })
        .task {
            await presenter.onAppear()
        }
        .onAppear {
            isFocused = true
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}
```

この修正では、`TextField`を`VStack`に入れ、その下に常に表示されるアンダーバーとして`Rectangle`を配置しています。アンダーバーの色は、`presenter.showInvalidMessage`が`true`の場合は赤色、そうでない場合は灰色に設定されています。

---
