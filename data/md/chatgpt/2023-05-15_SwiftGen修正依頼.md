# SwiftGen修正依頼

日付: 2023-05-15

---

## 👤 ユーザー
*2023/5/15 12:18:58*

SwiftGenの書き方がまちがっているっぽいので直して欲しい

input_dir: Resource
output_dir: Generated/
strings:
  inputs:
    - Localization/ja.lproj
  outputs:
    - templateName: structured-swift5
      output: CoreStrings.swift
      params:
        publicAccess: true
        bundle: MyBundleToken.bundle

xcassets:
  - inputs:
      - Color.xcassets
      - Image.xcassets
    outputs:
      - templateName: swift5
        output: CoreAssets.swift
        params:
          forceProvidesNamespaces: true
          publicAccess: true
          bundle: MyBundleToken.bundle
          enumName: CoreAssets
files:
  inputs:
      - Json/
  outputs:
    templateName: structured-swift5
    output: Files.swift
    params:
        publicAccess: true
        bundle: MyBundleToken.bundle

---

## 🤖 アシスタント
*2023/5/15 12:19:36*

SwiftGen の設定ファイルは、YAML 形式で記述する必要があります。以下の設定ファイルが、正しい書き方になります。

```
input_dir: Resources
output_dir: Generated/

strings:
  inputs:
    - Localization/ja.lproj
  outputs:
    - templateName: structured-swift5
      output: CoreStrings.swift
      params:
        publicAccess: true
        bundle: MyBundleToken.bundle

xcassets:
  inputs:
    - Color.xcassets
    - Image.xcassets
  outputs:
    - templateName: swift5
      output: CoreAssets.swift
      params:
        forceProvidesNamespaces: true
        publicAccess: true
        bundle: MyBundleToken.bundle
        enumName: CoreAssets

files:
  inputs:
    - Json/
  outputs:
    - templateName: structured-swift5
      output: Files.swift
      params:
        publicAccess: true
        bundle: MyBundleToken.bundle
```

この設定ファイルでは、`input_dir` と `output_dir` のパスが修正され、`strings`、`xcassets`、および `files` セクションが正しく記述されています。これで、SwiftGen が正しく動作するはずです。

---

## 👤 ユーザー
*2023/5/15 12:20:00*

forceProvidesNamespaces: true とはなんですか？

---

## 🤖 アシスタント
*2023/5/15 12:21:09*

`forceProvidesNamespaces: true` は、SwiftGen の設定ファイル内で、`xcassets` セクションのパラメータに指定されるオプションです。このオプションが `true` に設定されている場合、生成されるアセットの Swift コードは、名前空間（ネストされた構造）を強制的に提供します。

通常、アセットカタログ内にフォルダが存在する場合のみ、名前空間が提供されます。しかし、`forceProvidesNamespaces` が `true` に設定されている場合、アセットカタログ内のすべてのアセットに対して名前空間が強制的に適用されます。

例えば、次のようなアセットカタログの構造があるとします。

```
Color.xcassets
  └── Background
      └── primary.colorset
Image.xcassets
  └── Icons
      └── home.imageset
```

`forceProvidesNamespaces: true` の場合、生成される Swift コードは以下のようになります。

```swift
enum CoreAssets {
  enum Background {
    static let primary = UIColor(named: "Background/primary")!
  }
  enum Icons {
    static let home = UIImage(named: "Icons/home")!
  }
}
```

このように、アセットカタログ内のアセットに対して名前空間が強制的に適用されるため、コード内でアセットを使用する際に、より明確でわかりやすい形で参照できるようになります。

---

## 👤 ユーザー
*2023/5/15 12:21:19*

falseだとどうなるの？

---

## 🤖 アシスタント
*2023/5/15 12:22:01*

`forceProvidesNamespaces: false` の場合、SwiftGenはアセットカタログ内のフォルダ構造に基づいて名前空間を提供します。つまり、フォルダが存在しないアセットには名前空間が適用されません。

例えば、同じアセットカタログ構造を使用して、`forceProvidesNamespaces: false` の場合、生成される Swift コードは以下のようになります。

```swift
enum CoreAssets {
  static let primaryBackground = UIColor(named: "Background/primary")!
  static let homeIcon = UIImage(named: "Icons/home")!
}
```

この場合、名前空間がネストされていないため、アセットへのアクセスが直接的になります。ただし、名前空間を使用しない場合、アセット名の衝突のリスクが高まることに注意してください。`forceProvidesNamespaces: false` を使用する場合は、アセット名を一意に保つことが重要です。

---

## 👤 ユーザー
*2023/5/15 12:22:18*

enumName: CoreAssets を指定することでどうなるの？

---

## 🤖 アシスタント
*2023/5/15 12:23:12*

`enumName: CoreAssets` を指定することで、生成される Swift コードにおいて、アセットを格納するトップレベルの enum の名前が `CoreAssets` になります。これにより、アプリケーション内でアセットにアクセスする際に、`CoreAssets` という名前を使用してアセットにアクセスできます。

たとえば、`enumName: CoreAssets` を指定した場合、生成される Swift コードは以下のようになります。

```swift
enum CoreAssets {
  // ここにアセットの定義が続く
}
```

そして、アプリケーション内でアセットにアクセスする際に、以下のように `CoreAssets` 名前空間を使用してアセットにアクセスできます。

```swift
let backgroundColor = CoreAssets.Background.primary
let homeIconImage = CoreAssets.Icons.home
```

この方法で、アプリケーション内のアセットを簡単に参照でき、コードの可読性と保守性が向上します。また、特定の enum 名を指定することで、他の enum や構造体との名前の衝突を防ぐことができます。

---

## 👤 ユーザー
*2023/5/15 12:23:14*

enumName を指定しないとどうなるの？

---

## 🤖 アシスタント
*2023/5/15 12:24:11*

`enumName` を指定しない場合、SwiftGenはデフォルトの名前を使用して、生成される Swift コードにおいて、アセットを格納するトップレベルの enum の名前を作成します。デフォルトの名前は、"Asset" となります。

たとえば、`enumName` を指定しなかった場合、生成される Swift コードは以下のようになります。

```swift
enum Asset {
  // ここにアセットの定義が続く
}
```

そして、アプリケーション内でアセットにアクセスする際に、以下のように `Asset` 名前空間を使用してアセットにアクセスできます。

```swift
let backgroundColor = Asset.Background.primary
let homeIconImage = Asset.Icons.home
```

ただし、デフォルトの名前を使用する場合、他の enum や構造体との名前の衝突が発生する可能性があります。そのため、アプリケーション内で一意の名前を持つことが望ましい場合は、`enumName` を指定して独自の名前を使用することがおすすめです。

---
