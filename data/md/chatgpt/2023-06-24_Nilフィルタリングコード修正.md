# Nilフィルタリングコード修正

Date: 2023-06-24

---

## 👤 User
*2023-06-24 15:10:43*

compactmapで修正して欲しい

answers: answers.map { .init(question_id: $0.questionId, value: $0.value ?? "") }

---

## 🤖 Assistant
*2023-06-24 15:10:50*

Swiftの`compactMap`を使用して、nilの場合に要素をフィルタリングすることが可能です。以下に修正したコードを示します：

```swift
answers: answers.compactMap { answer in 
    guard let value = answer.value else { return nil }
    return .init(question_id: answer.questionId, value: value) 
}
```
このコードは、各`answer`に対して`value`が存在する場合のみ新しい要素を返します。`value`が`nil`である`answer`はフィルタリングされます。

---
