# SwiftUI SPMでAmplify設定

Date: 2023-06-02

---

## 👤 User
*2023-06-03 00:43:44*

SwiftUI で　SPM で AWS Amplify 入れたらXcode のbuildschemeにAmplifyの項目がいっぱいでてきたが、それによってプロジェクトが重くなっている気がする。対処法保を教えて欲しい

---

## 🤖 Assistant
*2023-06-03 00:44:35*

Swift Package Manager (SPM) によって AWS Amplify をプロジェクトに追加すると、確かに多くの Amplify 関連の build schemes が Xcode に表示されることがあります。これは Amplify の各モジュール（Auth, API, Storage など）に対応する scheme が生成されるためです。

これがプロジェクトのビルド時間やパフォーマンスに影響を及ぼすかどうかは一概には言えませんが、ビルド時間が長くなっていると感じるなら、いくつかの対処法を試すことができます：

1. **ビルド設定を確認する：** もし Debug ビルド設定で最適化を有効にしている場合、これはビルド時間を大幅に増加させる可能性があります。Debug ビルド設定での最適化は通常、必要ありません。

2. **不要なビルドスキームを無効化する：** Xcode では、必要ないビルドスキームを無効化することが可能です。これは「Product」メニューの「Scheme」-&gt;「Edit Scheme」から可能です。ただし、これにより Amplify の特定の機能に影響が出る可能性があるため、必要な機能のスキームだけを選択することが重要です。

3. **ビルドキャッシュをクリアする：** Xcode のビルドキャッシュが膨大になると、ビルド時間が長くなる可能性があります。定期的にキャッシュをクリアすることで、これを改善することができます。キャッシュをクリアするには、Xcode を閉じてから「Derived Data」フォルダを削除します。このフォルダは通常、以下のパスにあります： `~/Library/Developer/Xcode/DerivedData`

それでもビルド時間が長い場合、プロファイラを使用して具体的な原因を特定すると良いでしょう。また、不要なライブラリをプロジェクトから削除する、あるいは、プロジェクトの構造を見直すことも検討すると良いでしょう。

---

## 👤 User
*2023-06-03 00:48:03*

不要なビルドスキームを無効化する： Xcode では、必要ないビルドスキームを無効化することが可能です。これは「Product」メニューの「Scheme」-&gt;「Edit Scheme」から可能です。ただし、これにより Amplify の特定の機能に影響が出る可能性があるため、必要な機能のスキームだけを選択することが重要です。

Amplify のスキーマをビルドする必要はないのだけれどもどうして、選択肢がでてくるの？

---

## 🤖 Assistant
*2023-06-03 00:48:45*

AWS Amplifyは、複数の機能モジュールを備えた大規模なフレームワークです。そのため、全ての機能を利用するわけではないにもかかわらず、それぞれの機能モジュールのビルドスキームがXcodeに表示されることがあります。

Swift Package Manager (SPM) を使って Amplify をインストールすると、フレームワーク全体がダウンロードされ、それぞれのモジュールのスキームが自動的に作成されます。これは、一部の開発者が Amplify の特定のモジュールを個別にビルドしたり、テストしたりするために必要な機能です。

しかし、あなたのように特定のモジュールだけを使用している場合、多くのビルドスキームが表示されると混乱を招くことがあります。また、これらのスキームが全て必要なわけではありません。

あなたの主な目的がアプリのビルドスキームのリストをスッキリさせることであれば、Amplify の各モジュールのビルドスキームを手動で無効化することができます。Xcode の「Product」メニューから「Scheme」-&gt;「Manage Schemes」を選択し、不要なスキームのチェックボックスをオフにします。

ただし、これはあくまで一時的な解決策であり、Amplify を更新したり、再度インストールしたりすると、再度すべてのスキームが表示される可能性があります。ですので、必要なスキームだけを保持し、それ以外のスキームは無視するという手法をとることも一つの方法です。

---
