# 分岐するビルドとターゲット

日付: 2023-05-30

---

## 👤 ユーザー
*2023/5/31 0:17:09*

Swiftのアプリで簡易的に、releaseビルド debug ビルド そしてどのアプリターゲットかによって分岐する処理を書きたい場合はどうすればいい？

---

## 🤖 アシスタント
*2023/5/31 0:18:13*

Swiftでアプリを作成しているときに、ReleaseビルドとDebugビルド、それぞれのアプリターゲットによって異なる動作をさせたい場合、コンパイラディレクティブを使用してコードを制御することができます。

以下に例を示します：

```swift
#if DEBUG
    print("デバッグビルド")
#else
    print("リリースビルド")
#endif

#if canImport(SomeModule)
    print("特定のターゲット")
#else
    print("他のターゲット")
#endif
```

上記のコードでは、`DEBUG`と`canImport(SomeModule)`をコンパイラフラグとして使用しています。これらのフラグはビルド設定で設定できます。

以下の手順で設定できます：

1. Xcodeでプロジェクトを開きます。
2. 左側のナビゲーターで「プロジェクト名」をクリックします。
3. 「Build Settings」をクリックします。
4. 検索ボックスに「Swift Compiler - Custom Flags」と入力します。
5. 「Debug」フィールドには `-D DEBUG`を、`Release`フィールドには `-D RELEASE`を入力します。

これでビルド設定に応じて`DEBUG`または`RELEASE`フラグが設定されます。

同様に、特定のターゲットに対してフラグを設定したい場合は、そのターゲットのビルド設定でカスタムフラグを設定できます。

特定のフレームワークやモジュールが特定のターゲットで利用可能かどうかをチェックするには `canImport(SomeModule)` を使用します。これは、そのモジュールがそのターゲットでインポート可能な場合に `true` を返します。これを使用して、特定のターゲットでのみ実行されるコードを書くことができます。

---

## 👤 ユーザー
*2023/5/31 0:21:35*

SomeModule の確認をしたい

---

## 🤖 アシスタント
*2023/5/31 0:21:59*

Swiftの `canImport(_:)` コンパイラディレクティブは特定のモジュールが利用可能かどうかを確認します。もし特定のターゲットで特定のモジュール（ここでは `SomeModule`）が利用可能かどうかを確認したい場合、以下のようなコードを使用できます：

```swift
#if canImport(SomeModule)
    import SomeModule
    // SomeModuleを使用するコード
#else
    // SomeModuleが利用できない場合の代替処理
#endif
```

これは `SomeModule` がインポート可能な場合にそのモジュールをインポートし、`SomeModule` を使用するコードを実行します。もし `SomeModule` がインポートできない場合は、その代わりの処理が実行されます。

---
