# リップルエフェクトを防ぐ方法

Date: 2023-09-20

---

## 👤 User
*2023-09-21 00:49:08*

SwiftUI でlistの行だけではなくてその行の内部のボタンだけリップルのようなインタラクションをつける方法

---

## 🤖 Assistant
*2023-09-21 00:50:57*

SwiftUI には Android のようなリップルエフェクトを直接サポートする機能は含まれていませんが、似たようなインタラクションを作成するためのカスタムビューを作ることができます。

以下は、`Button` にタップ時のリップルエフェクトを追加するサンプルです:

```swift
import SwiftUI

struct RippleButton: View {
    @State private var isPressed = false
    @State private var rippleScale: CGFloat = 0.0

    var action: () -> Void
    var label: () -> Text

    var body: some View {
        Button(action: {
            withAnimation {
                isPressed.toggle()
            }
            action()
        }) {
            ZStack {
                label()
                if isPressed {
                    Circle()
                        .foregroundColor(Color.gray.opacity(0.3))
                        .scaleEffect(rippleScale)
                        .onAppear {
                            withAnimation(Animation.easeOut(duration: 0.3)) {
                                rippleScale = 2.5
                            }
                        }
                        .onDisappear {
                            rippleScale = 0.0
                        }
                }
            }
        }
        .onLongPressGesture(pressing: { pressing in
            withAnimation {
                isPressed = pressing
            }
        }, perform: {})
    }
}

struct ContentView: View {
    var body: some View {
        List {
            ForEach(0..<10) { item in
                HStack {
                    Text("Row \(item)")
                    Spacer()
                    RippleButton(action: {
                        print("Button \(item) tapped!")
                    }) {
                        Text("Tap Me!")
                    }
                }
            }
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

この例では、ボタンがタップされたときや長押しされたときにリップルエフェクトをシミュレートします。`RippleButton` はカスタムビューとして実装されているので、任意のテキストラベルとアクションを指定して使用することができます。

この方法を使用すれば、List の中の特定のボタンだけにリップルエフェクトを追加することができます。

---

## 👤 User
*2023-09-21 00:53:16*

リップまでしなくていんだ
普通にボタンを配置するとlist全体がタップされたようなアニメーションになるのが嫌なんだ

---

## 🤖 Assistant
*2023-09-21 00:54:12*

了解しました。List 内のボタンをタップしたときに、List の行全体のアニメーションを防ぎたい場合、ボタンの `buttonStyle` を `PlainButtonStyle()` に設定することで、その問題を回避できます。

例:

```swift
import SwiftUI

struct ContentView: View {
    var body: some View {
        List {
            ForEach(0..<10) { item in
                HStack {
                    Text("Row \(item)")
                    Spacer()
                    Button(action: {
                        print("Button \(item) tapped!")
                    }) {
                        Text("Tap Me!")
                    }
                    .buttonStyle(PlainButtonStyle())
                }
            }
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードでは、List の各行に `HStack` があり、その中に `Text` と `Button` が含まれています。ボタンに `PlainButtonStyle()` を適用することで、ボタンをタップしたときの行全体のアニメーションを回避できます。

---
