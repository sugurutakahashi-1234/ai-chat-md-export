# 検知とアプリへの戻帰

日付: 2023-09-26

---

## 👤 ユーザー
*2023/9/26 23:46:00*

SwiftUIでアプリから戻ってきたことを検知する

---

## 🤖 アシスタント
*2023/9/26 23:46:12*

SwiftUIアプリで画面から戻ってきたことを検知するには、`onAppear` モディファイアを使用することができます。このモディファイアは、ビューが表示されるときに実行されるクロージャを提供します。このクロージャ内で必要な処理を実行し、画面から戻ってきたことを検知できます。

以下に、`onAppear` モディファイアの使用例を示します:

```swift
import SwiftUI

struct ContentView: View {
    @State private var isReturned = false

    var body: some View {
        NavigationView {
            Text("This is the main view")
                .navigationBarTitle("Main View", displayMode: .inline)
                .onAppear {
                    // 画面が表示されたときに実行される処理
                    if isReturned {
                        // 画面から戻ってきたことを検知した場合の処理をここに記述
                        print("Returned from another view")
                    }
                    // 初回表示ではないため、isReturnedをtrueに設定
                    isReturned = true
                }
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

この例では、`onAppear` モディファイア内で `isReturned` の状態を確認し、画面が初めて表示されるのか、画面から戻ってきたのかを判断しています。画面から戻ってきたときに必要な処理をクロージャ内に記述します。

注意点として、この方法は画面が一度初めて表示された後に戻ってきたことを検知するためのもので、複数の画面を移動する場合に有用です。戻ってきたことを検知するために状態変数 (`isReturned` など) を使用しています。

---
