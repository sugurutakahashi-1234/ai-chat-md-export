# OpenAPIãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ–¹æ³•

æ—¥ä»˜: 2025-01-16

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/16 13:31:35*

npm openapi-generatorã€€ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/16 13:31:50*

`openapi-generator-cli` ã‚’ä½¿ã£ã¦ OpenAPI ã®ã‚¹ã‚­ãƒ¼ãƒã‚„ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚`openapi-generator-cli` ã¯ OpenAPI ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒè‡ªä½“ã®æ¤œè¨¼ã‚„ç”Ÿæˆç‰©ã®ç¢ºèªã«ã‚‚æ´»ç”¨ã§ãã¾ã™ã€‚

---

### 1. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
ã¾ãšã¯ `openapi-generator-cli` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
npm install @openapitools/openapi-generator-cli -g
```

ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆ:

```bash
npm install @openapitools/openapi-generator-cli --save-dev
```

---

### 2. **OpenAPI ã‚¹ã‚­ãƒ¼ãƒã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**

OpenAPI ãƒ•ã‚¡ã‚¤ãƒ« (`openapi.yaml` ã‚„ `openapi.json`) ãŒæ­£ã—ã„ã‹ã©ã†ã‹ã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
openapi-generator-cli validate -i path/to/openapi.yaml
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
- `-i`: å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã€‚
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚„è­¦å‘ŠãŒã‚ã‚Œã°å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

ä¾‹:

```bash
openapi-generator-cli validate -i ./api/openapi.yaml
```

---

### 3. **ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®ç¢ºèª**
OpenAPI ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ãŒæ„å›³é€šã‚Šã‹ã‚’æ¤œè¨¼ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãŸå¾Œã«å®Ÿè¡Œç’°å¢ƒã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

#### ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ:
ä¾‹ãˆã°ã€TypeScript ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
openapi-generator-cli generate -g typescript-fetch -i ./api/openapi.yaml -o ./generated-api
```

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:
1. ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®å‹ã‚„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€é©åˆ‡ã«å‘¼ã³å‡ºã›ã‚‹ã‹ç¢ºèªã€‚
2. TypeScript ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å‹ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã‹ `tsc` ã‚’å®Ÿè¡Œã—ã¦æ¤œè¨¼ã€‚

```bash
npx tsc --noEmit
```

---

### 4. **CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®åˆ©ç”¨**
`openapi-generator-cli` ã‚’ä½¿ã£ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€GitHub Actions ãªã©ã® CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«çµ„ã¿è¾¼ã‚€ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

#### GitHub Actions ã®ä¾‹:

```yaml
name: Validate OpenAPI

on:
  push:
    branches:
      - main

jobs:
  validate-openapi:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install OpenAPI Generator CLI
        run: npm install -g @openapitools/openapi-generator-cli

      - name: Validate OpenAPI schema
        run: openapi-generator-cli validate -i ./api/openapi.yaml
```

---

### 5. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ npm ã«ç™»éŒ²**
`package.json` ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ç™»éŒ²ã—ã¦ç°¡å˜ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```json
{
  "scripts": {
    "validate-openapi": "openapi-generator-cli validate -i ./api/openapi.yaml",
    "generate-client": "openapi-generator-cli generate -g typescript-fetch -i ./api/openapi.yaml -o ./generated-api"
  }
}
```

#### å®Ÿè¡Œæ–¹æ³•:

```bash
npm run validate-openapi
npm run generate-client
```

---

ã“ã‚Œã‚‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€OpenAPI ã‚¹ã‚­ãƒ¼ãƒã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã®ç¢ºèªã‚’åŠ¹ç‡åŒ–ã§ãã¾ã™ã€‚ç‰¹ã« CI/CD ã«çµ„ã¿è¾¼ã‚€ã“ã¨ã§ã€é–‹ç™ºãƒ•ãƒ­ãƒ¼ã®ä¸­ã§å¸¸ã«ã‚¹ã‚­ãƒ¼ãƒã‚„ã‚³ãƒ¼ãƒ‰ã®æ­£ç¢ºæ€§ã‚’ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/1/16 13:33:54*

npm ã§ -g ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã®ç¢ºèªã¨å‰Šé™¤æ–¹æ³•

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/1/16 13:34:11*

npm ã§ `-g` ãƒ•ãƒ©ã‚°ã‚’ä½¿ã£ã¦ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¢ºèªã—ãŸã‚Šå‰Šé™¤ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

---

### **1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç¢ºèª**
ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¢ºèªã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
npm list -g --depth=0
```

#### å®Ÿè¡Œä¾‹:
```bash
$ npm list -g --depth=0
/usr/local/lib
â”œâ”€â”€ @openapitools/openapi-generator-cli@2.5.2
â”œâ”€â”€ npm@9.8.1
â””â”€â”€ yarn@1.22.19
```

- `--depth=0` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã€ä¾å­˜é–¢ä¿‚ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚

---

### **2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèª**
ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ã•ã‚‰ã«è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
npm info <ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å>
```

#### å®Ÿè¡Œä¾‹:
```bash
npm info @openapitools/openapi-generator-cli
```

---

### **3. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‰Šé™¤**
ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
npm uninstall -g <ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å>
```

#### å®Ÿè¡Œä¾‹:
```bash
npm uninstall -g @openapitools/openapi-generator-cli
```

---

### **4. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã®ç¢ºèª**
ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
npm root -g
```

#### å®Ÿè¡Œä¾‹:
```bash
$ npm root -g
/usr/local/lib/node_modules
```

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã€‚

---

### **5. npm ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢**
å‰Šé™¤å¾Œã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
npm cache clean --force
```

---

### **ã¾ã¨ã‚**

1. **ç¢ºèª**: `npm list -g --depth=0`
2. **å‰Šé™¤**: `npm uninstall -g <ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å>`
3. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆç¢ºèª**: `npm root -g`
4. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤**: `npm cache clean --force`

ã“ã‚Œã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç®¡ç†ã‚’åŠ¹ç‡çš„ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

---
