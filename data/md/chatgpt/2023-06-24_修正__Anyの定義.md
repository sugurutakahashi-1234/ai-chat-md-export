# 修正: Anyの定義

日付: 2023-06-24

---

## 👤 ユーザー
*2023/6/24 15:03:12*

このproto定義の間違っているところを教えて欲しい

interaction.proto: "Any" is not defined.

syntax = "proto3";

import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";

message Interaction {
  google.protobuf.Timestamp timestamp = 1;
  string event\_type = 2;
  map&lt;string, Any&gt; parameters = 3;
}

message PageViewEvent {
  string url = 1;
  string title = 2;
  string referrer = 3;
}

message ClickEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}

message ScrollEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}

---

## 🤖 アシスタント
*2023/6/24 15:03:27*

`Any` の定義を使う際に、パッケージの名前も含める必要があります。したがって、`map<string, Any> parameters = 3;` を `map<string, google.protobuf.Any> parameters = 3;` に修正すべきです。

以下に修正後のコードを示します:

```proto
syntax = "proto3";

import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";

message Interaction {
  google.protobuf.Timestamp timestamp = 1;
  string event_type = 2;
  map<string, google.protobuf.Any> parameters = 3;
}

message PageViewEvent {
  string url = 1;
  string title = 2;
  string referrer = 3;
}

message ClickEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}

message ScrollEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}
```

こうすれば、`Any` が適切に定義され、protobufが正常に動作するはずです。

---
