# CICD ãƒ†ã‚¹ãƒˆåˆ†é›¢æ–¹æ³•

æ—¥ä»˜: 2025-06-19

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/06/19 11:59:16*

CICDä¸Šã§ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ–ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã»ã—ããªã„ã€‚ ã¤ã¾ã‚Šæ™®é€šã®ãƒ†ã‚¹ãƒˆã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ–ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’åˆ†ã‘ãŸã„ã€‚ ä»Šã¯æ™®é€šã®ãƒ†ã‚¹ãƒˆã‚’ã‚„ã‚‹ã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ–ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã‚‚åŒæ™‚ã«è¡Œã‚ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ã€‚ ãã‚Œã‚’ã©ã†ã‚„ã£ãŸã‚‰åˆ†é›¢ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹è€ƒãˆã¦ã»ã—ã„ã€‚ 

  "scripts": {
    "// ğŸš€ é–‹ç™ºãƒ»å®Ÿè¡Œ": "",
    "dev": "vite",
    "dev:mock:server": "prism mock ../api-client/openapi.yaml -h 0.0.0.0 -p 4010",
    "dev:mock:web": "VITE_USE_PRISM_MOCK=true VITE_APP_ENV=local vite",
    "start": "vite preview",
    "// ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰ãƒ»å“è³ªç®¡ç†": "",
    "build": "vite build",
    "typecheck": "tsc -p . --noEmit",
    "lint": "biome check .",
    "lint:fix": "biome check . --write",
    "test": "vitest --run && echo '\nâœ… Tests passed!' || (echo '\nğŸŒ€ Tests failed!' && exit 1)",
    "test:watch": "vitest",
    "// âœ… çµ±åˆæ¤œè¨¼": "",
    "preverify": "pnpm lint:fix",
    "verify": "pnpm lint && pnpm build && pnpm typecheck && pnpm test",
    "// ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—": "",
    "clean": "rm -rf dist *.tsbuildinfo",
    "// ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ": "",
    "dev:storybook": "storybook dev -p 6006",
    "build:storybook": "storybook build",
    "test:storybook": "vitest --project=storybook && echo '\nâœ… Tests passed!' || (echo '\nğŸŒ€ Tests failed!' && exit 1)"
  },


/// &lt;reference types="vitest/config" /&gt;

import path from "node:path";
import { fileURLToPath } from "node:url";
import { storybookTest } from "@storybook/addon-vitest/vitest-plugin";
import tailwindcss from "@tailwindcss/vite";
import react from "@vitejs/plugin-react";
import { defineConfig } from "vitest/config";

const dirname =
  typeof __dirname !== "undefined"
    ? __dirname
    : path.dirname(fileURLToPath(import.meta.url));

// More info at: https://storybook.js.org/docs/next/writing-tests/integrations/vitest-addon
export default defineConfig({
  plugins: [react(), tailwindcss()],
  test: {
    globals: true,
    environment: "jsdom",
    css: true,
    // CSSã®å‡¦ç†ã‚’æœ‰åŠ¹åŒ–
    coverage: {
      provider: "v8",
      reporter: ["text", "json", "html"],
      exclude: ["**/*.config.*", "**/src/generated/**", "**/src/test/**"],
    },
    projects: [
      {
        extends: true,
        plugins: [
          // The plugin will run tests for the stories defined in your Storybook config
          // See options at: https://storybook.js.org/docs/next/writing-tests/integrations/vitest-addon#storybooktest
          storybookTest({
            configDir: path.join(dirname, ".storybook"),
          }),
        ],
        test: {
          name: "storybook",
          browser: {
            enabled: true,
            headless: true,
            provider: "playwright",
            instances: [
              {
                browser: "chromium",
              },
            ],
          },
          setupFiles: [".storybook/vitest.setup.ts"],
        },
      },
    ],
  },
});

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/06/19 11:59:17*

æ™®é€šã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¨ Storybook ã® UI ãƒ†ã‚¹ãƒˆãŒ **ã„ã£ã—ã‚‡ã«èµ°ã£ã¦ã—ã¾ã†åŸå› ** ã¯ã€  
`vitest.config.ts` ã« **Storybook ç”¨ã® project** ã‚’å«ã‚ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚  
Vitest ã¯ `vitest run` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ *ã™ã¹ã¦ã® project* ã‚’ã¾ã¨ã‚ã¦å®Ÿè¡Œã™ã‚‹ä»•æ§˜ãªã®ã§ã€CLI ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ãªã„é™ã‚Š Storybook å´ã¾ã§å«ã¾ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

---

## åˆ†é›¢ã™ã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. Storybook ç”¨ã® Vitest è¨­å®šã‚’ **åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«** ã«åˆ†ã‘ã‚‹

1. **å…±é€šè¨­å®š** ã‚’ `vitest.config.base.ts` ã¨ã—ã¦æŠ½å‡º  
2. é€šå¸¸ãƒ†ã‚¹ãƒˆç”¨ã® `vitest.config.ts` ã¯ base ã ã‘ã‚’èª­ã¿è¾¼ã‚€  
3. Storybook å°‚ç”¨ã® `vitest.config.storybook.ts` ã§  
   `@storybook/addon-vitest/vitest-plugin` ã‚’çµ„ã¿è¾¼ã‚€

```ts
// vitest.config.base.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
  plugins: [react(), tailwindcss()],
  test: {
    globals: true,
    environment: 'jsdom',
    css: true,
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        '**/*.config.*',
        '**/src/generated/**',
        '**/src/test/**',
      ],
    },
  },
});
```

```ts
// vitest.config.ts  â”€â”€ ğŸ” ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨
import { mergeConfig } from 'vitest/config';
import base from './vitest.config.base';

export default mergeConfig(base, {
  // è¿½åŠ è¨­å®šãŒä½•ã‚‚ãªã‘ã‚Œã°ãã®ã¾ã¾
});
```

```ts
// vitest.config.storybook.ts â”€â”€ ğŸ“š Storybook ãƒ†ã‚¹ãƒˆç”¨
import { mergeConfig } from 'vitest/config';
import base from './vitest.config.base';
import { storybookTest } from '@storybook/addon-vitest/vitest-plugin';
import path from 'node:path';

export default mergeConfig(base, {
  test: {
    name: 'storybook',
    plugins: [
      storybookTest({
        configDir: path.join(__dirname, '.storybook'),
      }),
    ],
    browser: {
      enabled: true,
      headless: true,
      provider: 'playwright',
      instances: [{ browser: 'chromium' }],
    },
    setupFiles: ['.storybook/vitest.setup.ts'],
  },
});
```

### 2. **npm Scripts** ã‚’æ•´ç†

```jsonc
{
  "scripts": {
    "// ğŸ§ª ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ": "",
    "test": "vitest run -c vitest.config.ts && echo '\\nâœ… Unit tests passed!'",
    "test:watch": "vitest -c vitest.config.ts",

    "// ğŸ“š Storybook ãƒ†ã‚¹ãƒˆ": "",
    "test:storybook": "vitest run -c vitest.config.storybook.ts && echo '\\nâœ… Storybook tests passed!'",

    "// âœ… çµ±åˆæ¤œè¨¼": "",
    "verify": "pnpm lint && pnpm build && pnpm typecheck && pnpm test"
  }
}
```

*ãƒã‚¤ãƒ³ãƒˆ*

* `-c`/`--config` ã§ **èª­ã¿è¾¼ã‚€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤º** ã™ã‚‹  
* `verify` ã§ã¯ **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã ã‘** ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«å¤‰æ›´  
  ï¼ˆStorybook ãƒ†ã‚¹ãƒˆã¯åˆ¥ã‚¸ãƒ§ãƒ–ã‚„ Nightly ã§å›ã™ã®ãŒå®šç•ªï¼‰

### 3. CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹ï¼ˆGitHub Actionsï¼‰

```yaml
name: CI

concurrency: ci-${{ github.ref }}

jobs:
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm install --frozen-lockfile
      - run: pnpm verify          # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã¿

  storybook-test:
    needs: unit-test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm install --frozen-lockfile
      - run: pnpm test:storybook # Playwright ã‚’å«ã‚€ Storybook ãƒ†ã‚¹ãƒˆ
```

---

## ãã®ã»ã‹ã®åˆ†é›¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå‚è€ƒï¼‰

| æ–¹æ³• | ä»•çµ„ã¿ | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ |
|------|--------|----------|-----------|
| **`--projects` ãƒ•ãƒ©ã‚°** | 1 ã¤ã® config ã« &lt;br&gt;`projects: [{ name:'unit' }, { name:'storybook' }]` &lt;br&gt;ã‚’å®šç¾©ã—ã€&lt;br&gt;`vitest run --projects unit` ã§çµã‚Šè¾¼ã¿ | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒ 1 ã¤ã§æ¸ˆã‚€ | script ãŒå°‘ã—å†—é•·ã«&lt;br&gt;ãªã‚Šã‚„ã™ã„ |
| **ç’°å¢ƒå¤‰æ•°ã§åˆ‡ã‚Šæ›¿ãˆ** | `if (process.env.STORYBOOK_TEST) { projects.push(storybookProject) }` | ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å¤‰ãˆãšã¨ã‚‚ç’°å¢ƒã§åˆ¶å¾¡å¯ | è¨­å®šãŒèª­ã¿ã«ãããªã‚‹ |
| **å®Œå…¨åˆ¥ãƒªãƒã‚¸ãƒˆãƒª/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åˆ†ã‘ã‚‹** | Storybook ã‚’åˆ¥ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«åˆ‡ã‚Šå‡ºã™ | ä¾å­˜ã‚’ç‰©ç†çš„ã«åˆ†é›¢ | ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ–ãƒƒã‚¯é–‹ç™ºãŒã‚„ã‚„é¢å€’ |

å®Ÿå‹™ã§ã¯ **â€œåˆ¥ config ãƒ•ã‚¡ã‚¤ãƒ«â€** ãŒã‚‚ã£ã¨ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ãƒˆãƒ©ãƒ–ãƒ«ãŒå°‘ãªã„ãŸã‚ã€ã¾ãšã¯ä¸Šè¨˜æ‰‹é †ã§é‹ç”¨ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/06/19 12:00:41*

ãªã‚‹ã»ã©ã€‚å…±é€šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã®ã¯ã‚„ã‚ã¦ã€ãã‚Œãã‚Œã‚ã‚‹ç¨‹åº¦é‡è¤‡ã—ã¦ã‚‚ã„ã„ã‹ã‚‰åˆ¥ã€…ã®ã‚’ä½œã‚ã†ã‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/06/19 12:00:42*

ã§ã¯ **å®Œå…¨ã«åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«** ã§ç”¨æ„ã™ã‚‹å½¢ã«æŒ¯ã‚Šåˆ‡ã‚Šã¾ã—ã‚‡ã†ã€‚  
å¤šå°‘ã®é‡è¤‡ã¯ã‚ã£ã¦ã‚‚ â€œèª­ã¿ã‚„ã™ã•â€ ã¨ â€œæƒ³å®šå¤–ã«ä¸€ç·’ã«èµ°ã‚‰ãªã„å®‰å¿ƒæ„Ÿâ€ ã‚’å„ªå…ˆã—ã¾ã™ã€‚

---

## 1. `vitest.config.ts`  â€•â€• ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå°‚ç”¨

```ts
/// <reference types="vitest/config" />

import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
  plugins: [react(), tailwindcss()],
  test: {
    globals: true,
    environment: 'jsdom',
    css: true,
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        '**/*.config.*',
        '**/src/generated/**',
        '**/src/test/**',
      ],
    },
  },
});
```

&gt; **ãƒã‚¤ãƒ³ãƒˆ**  
&gt; Storybook é–¢é€£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„ browser è¨­å®šã‚’ä¸€åˆ‡å…¥ã‚Œãšã€é€šå¸¸ã® JSDOM ç’°å¢ƒã«é™å®šã€‚

---

## 2. `vitest.config.storybook.ts`  â€•â€• Storybook ãƒ†ã‚¹ãƒˆå°‚ç”¨

```ts
/// <reference types="vitest/config" />

import { defineConfig } from 'vitest/config';
import { storybookTest } from '@storybook/addon-vitest/vitest-plugin';
import react from '@vitejs/plugin-react';
import tailwindcss from '@tailwindcss/vite';
import path from 'node:path';

export default defineConfig({
  plugins: [react(), tailwindcss()],
  test: {
    name: 'storybook',
    globals: true,
    environment: 'jsdom',          // Storybook ã§ã‚‚ JSDOM ãŒæ¨å¥¨
    css: true,
    plugins: [
      storybookTest({
        configDir: path.join(__dirname, '.storybook'),
      }),
    ],
    setupFiles: ['.storybook/vitest.setup.ts'],
    browser: {
      enabled: true,
      headless: true,
      provider: 'playwright',
      instances: [{ browser: 'chromium' }],
    },
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
    },
  },
});
```

&gt; **ãƒã‚¤ãƒ³ãƒˆ**  
&gt; Storybook å›ºæœ‰ã®è¨­å®šã ã‘ã‚’ã“ã¡ã‚‰ã«é–‰ã˜è¾¼ã‚ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå´ã«æ¼ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

---

## 3. `package.json` ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ•´ç†

```jsonc
{
  "scripts": {
    "// ğŸš€ é–‹ç™ºãƒ»å®Ÿè¡Œ": "",
    "dev": "vite",
    "dev:mock:server": "prism mock ../api-client/openapi.yaml -h 0.0.0.0 -p 4010",
    "dev:mock:web": "VITE_USE_PRISM_MOCK=true VITE_APP_ENV=local vite",
    "start": "vite preview",

    "// ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰ãƒ»å“è³ªç®¡ç†": "",
    "build": "vite build",
    "typecheck": "tsc -p . --noEmit",
    "lint": "biome check .",
    "lint:fix": "biome check . --write",

    "// ğŸ§ª ãƒ†ã‚¹ãƒˆ": "",
    "test": "vitest run -c vitest.config.ts && echo '\\nâœ… Unit tests passed!' || (echo '\\nğŸŒ€ Unit tests failed!' && exit 1)",
    "test:watch": "vitest -c vitest.config.ts",
    "test:storybook": "vitest run -c vitest.config.storybook.ts && echo '\\nâœ… Storybook tests passed!' || (echo '\\nğŸŒ€ Storybook tests failed!' && exit 1)",

    "// âœ… çµ±åˆæ¤œè¨¼": "",
    "verify": "pnpm lint && pnpm build && pnpm typecheck && pnpm test",

    "// ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—": "",
    "clean": "rm -rf dist *.tsbuildinfo",

    "// ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ": "",
    "dev:storybook": "storybook dev -p 6006",
    "build:storybook": "storybook build"
  }
}
```

* `test` / `test:watch` ã¯ **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ** ã®ã¿ã‚’å¯¾è±¡  
* `test:storybook` ã§ **Storybook ãƒ†ã‚¹ãƒˆ** ã‚’å€‹åˆ¥å®Ÿè¡Œ  
* `verify` ã«å«ã‚ã‚‹ã®ã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¾ã§ï¼ˆStorybook ãƒ†ã‚¹ãƒˆã¯åˆ¥ã‚¸ãƒ§ãƒ–ã‚„å¤œé–“ãƒãƒƒãƒã§å›ã™ã‚±ãƒ¼ã‚¹ãŒå¤šã„ï¼‰

---

## 4. CI/CDï¼ˆGitHub Actions ä¾‹ï¼‰

```yaml
name: CI

jobs:
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm install --frozen-lockfile
      - run: pnpm verify        # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã ã‘

  storybook-test:
    needs: unit-test            # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒé€šã£ã¦ã‹ã‚‰
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm install --frozen-lockfile
      - run: pnpm test:storybook
```

---

### ã“ã‚Œã§è§£æ±º ğŸ‰

* **é€šå¸¸é–‹ç™ºãƒ»PR ãƒã‚§ãƒƒã‚¯** â€¦ `pnpm verify`ï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã¿ï¼‰
* **UI å›å¸°ãƒ†ã‚¹ãƒˆ** â€¦ `pnpm test:storybook`ï¼ˆPlaywright é€£æº Storybook ãƒ†ã‚¹ãƒˆï¼‰

é‡è¤‡ã¯å¤šå°‘ã‚ã‚Šã¾ã™ãŒ â€œè¨­å®šã‚’é–‹ã‘ã°æ„å›³ãŒã™ãã‚ã‹ã‚‹â€ ã»ã†ãŒé‹ç”¨ã—ã‚„ã™ã„ã®ã§ã€ã¾ãšã¯ã“ã®å½¢ã§å›ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/06/19 12:02:04*

ã¡ãªã¿ã«æ™®é€šã®ãƒ†ã‚¹ãƒˆã®æ–¹ã¯ã€ -c ã§æŒ‡å®šã™ã‚‹å¿…è¦ã‚ã‚‹ã®ã‹ã€‚ vitest run -c vitest.config.ts

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/06/19 12:02:05*

**çµè«–ï¼šå¿…é ˆã§ã¯ãªã„** ã‘ã‚Œã©ã€  
*ã€Œå¸¸ã«ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ä½¿ã†ã€ã¨æ˜ç¤ºã—ãŸã„ãªã‚‰ä»˜ã‘ãŸã»ã†ãŒå®‰å…¨* ã§ã™ã€‚

---

### Vitest ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¢ç´¢ãƒ«ãƒ¼ãƒ«

1. `vitest run` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰é †ã«  
   - `vite.config.*`ï¼ˆã‚ã‚Œã°ãã® `test` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰  
   - `vitest.config.*`  
   ã‚’æ¢ã—ã¦æœ€åˆã«è¦‹ã¤ã‹ã£ãŸè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚  
2. ã‚ãªãŸãŒé€šå¸¸ãƒ†ã‚¹ãƒˆç”¨ã« **`vitest.config.ts`** ã‚’ç½®ã„ã¦ã„ã‚‹ãªã‚‰ã€  
   Storybook ç”¨ (`vitest.config.storybook.ts`) ã¯åå‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé•ã†ã®ã§ **è‡ªå‹•çš„ã«ç„¡è¦–** ã•ã‚Œã¾ã™ã€‚

ã—ãŸãŒã£ã¦ **`vitest run` ã ã‘ã§é€šå¸¸ãƒ†ã‚¹ãƒˆã¯å®Ÿè¡Œã•ã‚Œã‚‹** ã®ã§  
`-c vitest.config.ts` ã¯ *æŠ€è¡“çš„ã«ã¯ä¸è¦* ã§ã™ã€‚

---

### ãã‚Œã§ã‚‚ `-c` ã‚’ä»˜ã‘ã‚‹ãƒ¡ãƒªãƒƒãƒˆ

| ä»˜ã‘ãªã„ (`vitest run`) | ä»˜ã‘ã‚‹ (`vitest run -c vitest.config.ts`) |
|-------------------------|-------------------------------------------|
| è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‹ã‚‰å¤‰ãˆãŸå ´åˆã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒå‡ºã‚‹ | **ã©ã“ã«ç½®ã„ã¦ã‚‚ç¢ºå®Ÿã«ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½¿ã‚ã‚Œã‚‹** |
| å°†æ¥ Storybook ä»¥å¤–ã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ãŸã¨ãã€èª¤ã£ã¦å®Ÿè¡Œã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ | **æ„å›³ã—ãªã„ project ãŒæ··ã–ã‚‹ãƒªã‚¹ã‚¯ã‚’ã‚¼ãƒ­ã«ã§ãã‚‹** |
| CLI ãŒçŸ­ãã¦å°‘ã—ã ã‘ã‚¿ã‚¤ãƒ—é‡ãŒæ¸›ã‚‹ | ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã‚“ã ç¬é–“ã«ã€Œã“ã® config ã‚’ä½¿ã†ã‚“ã ã€ã¨ç†è§£ã§ãã‚‹ |

CI ã‚„å…±åŒé–‹ç™ºã§ã¯ **æ˜ç¤ºçš„ã«ã—ã¦ãŠãã»ã†ãŒäº‹æ•…ãŒå°‘ãªã„** ã®ã§ã€ç§ã¯  
```jsonc
"test": "vitest run -c vitest.config.ts"
```  
ã®ã¾ã¾ã‚’æ¨å¥¨ã—ã¾ã™ã€‚  
ãƒ­ãƒ¼ã‚«ãƒ«ã§æ‰‹æ‰“ã¡ãŒé¢å€’ãªã‚‰ `pnpm test` ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ãˆã°æ¸ˆã‚€ã®ã§è² æ‹…ã¯ã»ã¼ã‚ã‚Šã¾ã›ã‚“ã€‚

---
