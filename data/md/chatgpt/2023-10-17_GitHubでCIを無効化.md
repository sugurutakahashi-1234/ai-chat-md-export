# GitHubでCIを無効化

Date: 2023-10-17

---

## 👤 User
*2023-10-17 19:01:14*

GithubでdraftのPRでCIを走らせないようにする放屁王

---

## 🤖 Assistant
*2023-10-17 19:01:51*

GitHubでドラフトのプルリクエスト（PR）に対して継続的インテグレーション（CI）を実行しないようにするには、CIの設定ファイル（多くのCIツールでは、`.yml` または `.yaml` ファイル）に特定の条件を追加する必要があります。ここでは、GitHub Actionsを使用している場合の一般的なアプローチについて説明しますが、他のCIツールでも同様の概念が適用されます。

GitHub Actionsでこれを行うには、ワークフローの中に条件を設定して、ドラフトのプルリクエストでの実行をスキップします。`if`条件をジョブに追加することでこれを達成できます。以下はその例です：

```yaml
name: CI

on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]

jobs:
  build:
    if: github.event.pull_request.draft == false
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run commands
      run: |
        echo "Do your build or test commands here."
```

この設定では、`if: github.event.pull_request.draft == false` が重要な部分で、これによってPRがドラフト状態ではない場合にのみジョブが実行されます。

また、GitHubのWebhookイベントのペイロードには、PRがドラフト状態かどうかを示すフィールドが含まれています。したがって、CIツールがGitHub Webhooksを利用している場合、この情報を使用してドラフトPRのビルドをスキップする条件を設定できます。

他のCIシステム（Jenkins、Travis CI、CircleCIなど）でも、Webhookペイロードのデータを利用するか、またはCIシステム固有の条件分岐機能を使用して同様のことを実現できます。具体的な設定は、使用しているシステムのドキュメントを参照してください。

---
