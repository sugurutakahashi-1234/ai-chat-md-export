# iOS ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¿®æ­£

æ—¥ä»˜: 2024-05-15

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/5/15 13:37:51*

ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿ

Compiling for iOS 15.0, but module 'WhisperKit' has a minimum deployment target of iOS 16.0: /Users/sugurutakahashi/Library/Developer/Xcode/DerivedData/SmallTalk-eahndepvjrqdazgrfjimeovxfzmv/Index.noindex/Build/Products/Debug-iphonesimulator/WhisperKit.swiftmodule/arm64-apple-ios-simulator.swiftmodule

import Foundation
import WhisperKit


final class TranscriptionDriver {
    private let isRecordingSubject = PassthroughSubject&lt;Bool, Never&gt;()
    var isRecordingPublisher: AnyPublisher&lt;Bool, Never&gt; {
        isRecordingSubject.eraseToAnyPublisher()
    }

    private var transcription = "éŸ³å£°ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚"
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/5/15 13:38:00*

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« `WhisperKit` ã®æœ€ä½å¯¾å¿œiOSãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ16.0ã§ã‚ã‚‹ã®ã«å¯¾ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒiOS 15.0ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ã¦ã„ã‚‹ãŸã‚ã«ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®iOSã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’16.0ã«å¼•ãä¸Šã’ã‚‹**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’é–‹ãã€`iOS Deployment Target`ã‚’16.0ã«è¨­å®šã—ã¾ã™ã€‚
    - Xcodeã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚¿ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ã€ŒGeneralã€ã‚¿ãƒ–ã‚’é¸æŠã—ã¾ã™ã€‚
    - `Deployment Info`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®`iOS Deployment Target`ã‚’16.0ã«å¤‰æ›´ã—ã¾ã™ã€‚

2. **`WhisperKit`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’iOS 15.0ã§å‹•ä½œã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹**
    - ã‚‚ã—å¯èƒ½ã§ã‚ã‚Œã°ã€`WhisperKit`ã®iOS 15.0ã«å¯¾å¿œã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ¢ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚
    - ä¾å­˜é–¢ä¿‚ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼ˆCocoaPodsã‚„Swift Package Managerãªã©ï¼‰ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€è©²å½“ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

ä¾‹: Swift Package Managerã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€`Package.swift`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚
```swift
dependencies: [
    .package(url: "https://github.com/your/repo.git", .upToNextMajor(from: "1.0.0")), // iOS 15.0å¯¾å¿œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š
],
```

3. **ä»–ã®å¯¾å¿œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ¢ã™**
    - `WhisperKit`ã®ä»£ã‚ã‚Šã«ã€iOS 15.0ã«å¯¾å¿œã—ã¦ã„ã‚‹åˆ¥ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã¾ãšã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/5/15 13:38:18*

if #available( ãªã©ã§æŒ‡å®šã§ããªã„ã®ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/5/15 13:38:27*

`#available`ã‚’ä½¿ç”¨ã—ã¦ç‰¹å®šã®iOSãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»¥é™ã§ã®ã¿ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³è‡ªä½“ãŒä½ã„ãŸã‚ã«ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€`#available`ã‚’ä½¿ã£ã¦ã‚‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€`#available`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®iOSãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»¥é™ã§ã®ã¿å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’åˆ†å²ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

#if canImport(WhisperKit)
import WhisperKit
#endif

final class TranscriptionDriver {
    private let isRecordingSubject = PassthroughSubject<Bool, Never>()
    var isRecordingPublisher: AnyPublisher<Bool, Never> {
        isRecordingSubject.eraseToAnyPublisher()
    }

    private var transcription = "éŸ³å£°ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚"

    func startTranscription() {
        if #available(iOS 16.0, *) {
            // WhisperKitã‚’ä½¿ã£ãŸiOS 16.0ä»¥ä¸Šã§ã®å‡¦ç†
            let whisperKit = WhisperKit()
            // whisperKitã‚’ä½¿ã£ãŸå‡¦ç†
        } else {
            // iOS 16.0æœªæº€ã§ã®ä»£æ›¿å‡¦ç†
            print("WhisperKitã¯iOS 16.0ä»¥ä¸Šã§ã®ã¿ä½¿ç”¨ã§ãã¾ã™ã€‚")
        }
    }
}
```

ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€`#if canImport(WhisperKit)`ã‚’ä½¿ã£ã¦æ¡ä»¶ä»˜ãã§`WhisperKit`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€`#available`ã‚’ä½¿ã£ã¦iOS 16.0ä»¥ä¸Šã®å ´åˆã«ã®ã¿`WhisperKit`ã‚’ä½¿ç”¨ã™ã‚‹å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€`WhisperKit`ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè‡ªä½“ãŒã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å•é¡Œã§å¤±æ•—ã™ã‚‹å ´åˆã«ã¯ã€ä¾ç„¶ã¨ã—ã¦ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¼•ãä¸Šã’ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

æœ€å–„ã®è§£æ±ºç­–ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®iOSã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’16.0ã«å¼•ãä¸Šã’ã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚ŒãŒé›£ã—ã„å ´åˆã«ã¯ã€åˆ¥ã®æ–¹æ³•ã¨ã—ã¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚„ä»£æ›¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ¤œè¨ã‚‚è€ƒãˆã¦ã¿ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/5/15 13:39:33*

ä»¥ä¸‹ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ

#if canImport(WhisperKit)
import WhisperKit
#endif

Compiling for iOS 15.0, but module 'WhisperKit' has a minimum deployment target of iOS 16.0: /Users/sugurutakahashi/Library/Developer/Xcode/DerivedData/SmallTalk-eahndepvjrqdazgrfjimeovxfzmv/Index.noindex/Build/Products/Debug-iphonesimulator/WhisperKit.swiftmodule/arm64-apple-ios-simulator.swiftmodule

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/5/15 13:39:46*

`#if canImport`ã‚„`#available`ã‚’ä½¿ã£ã¦ã‚‚ã€Xcodeã®ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å•é¡ŒãŒè§£æ±ºã•ã‚Œãªã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§å•é¡Œã‚’å›é¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

1. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸‹ã’ã‚‹ï¼ˆå¯èƒ½ã§ã‚ã‚Œã°ï¼‰**
   - `WhisperKit`ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€ãã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’iOS 15.0ã«ä¸‹ã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
   - ã“ã‚Œã¯`WhisperKit`ã®`Package.swift`ã‚„`podspec`ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

2. **åˆ¥ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ¢ã™**
   - `WhisperKit`ã®ä»£æ›¿ã¨ã—ã¦ã€iOS 15.0ã«å¯¾å¿œã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚

3. **åˆ¥ã®ãƒ“ãƒ«ãƒ‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½œæˆ**
   - `WhisperKit`ã‚’å¿…è¦ã¨ã™ã‚‹æ©Ÿèƒ½ã‚’iOS 16.0å‘ã‘ã®åˆ¥ã®ãƒ“ãƒ«ãƒ‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã—ã¦åˆ†é›¢ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’2ã¤ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«åˆ†å‰²ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã™ã‚‹ä¾‹ã§ã™ã€‚ã“ã“ã§ã¯ã€`Package.swift`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸‹ã’ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
// WhisperKitã®Package.swift
// ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´
let package = Package(
    name: "WhisperKit",
    platforms: [
        .iOS(.v15)  // ã“ã“ã‚’iOS 15ã«å¤‰æ›´
    ],
    products: [
        .library(
            name: "WhisperKit",
            targets: ["WhisperKit"]),
    ],
    dependencies: [],
    targets: [
        .target(
            name: "WhisperKit",
            dependencies: []),
        .testTarget(
            name: "WhisperKitTests",
            dependencies: ["WhisperKit"]),
    ]
)
```

4. **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¼•ãä¸Šã’ã‚‹**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®iOSã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’16.0ã«å¼•ãä¸Šã’ã‚‹ã“ã¨ã§ã€å•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚ŒãŒæœ€ã‚‚ç°¡å˜ã§ç¢ºå®Ÿãªæ–¹æ³•ã§ã™ã€‚

ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¼•ãä¸Šã’æ–¹æ³•:
1. Xcodeã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚¿ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã€‚
2. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ã€ŒGeneralã€ã‚¿ãƒ–ã‚’é¸æŠã€‚
3. `Deployment Info`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®`iOS Deployment Target`ã‚’16.0ã«å¤‰æ›´ã€‚

ã‚‚ã—ã“ã‚Œã‚‰ã®æ–¹æ³•ãŒã†ã¾ãã„ã‹ãªã„å ´åˆã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹æˆã‚’è¦‹ç›´ã—ã€å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¯¾å¿œã™ã‚‹iOSãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®å®Ÿè¡Œã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/5/15 13:40:11*

if #available(iOS 16.0, \*) {} ã¯topãƒ¬ãƒ™ãƒ«ã§ã¯ä½¿ãˆãªã„ã®ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/5/15 13:40:26*

`#available`ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ãŒã€æ¡ä»¶ä»˜ãã§æ©Ÿèƒ½ã‚’åˆ†å²ã•ã›ã‚‹ãŸã‚ã«ã€é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®ä¸­ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã€‚ãŸã ã—ã€ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æ¡ä»¶ä»˜ãã«ã™ã‚‹ã“ã¨ã¯ã§ããªã„ãŸã‚ã€`#if canImport`ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è‡ªä½“ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å•é¡Œã¯è§£æ±ºã§ãã¾ã›ã‚“ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®iOSã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã›ãšã«ã€`WhisperKit`ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã€æ¬¡ã®ã‚ˆã†ãªå›é¿ç­–ã‚’è©¦ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ€ãƒŸãƒ¼ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œæˆã™ã‚‹**

   ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œæˆã—ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¿œã˜ã¦å‹•ä½œã‚’åˆ†å²ã•ã›ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è‡ªä½“ã‚’å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚

2. **Dynamic Frameworkã‚’ä½¿ç”¨ã™ã‚‹**

   iOS 16.0ä»¥ä¸Šã§ã®ã¿å‹•ä½œã™ã‚‹Dynamic Frameworkã¨ã—ã¦`WhisperKit`ã‚’åˆ†é›¢ã—ã€å¿…è¦ãªå ´åˆã«ã®ã¿ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

ä»¥ä¸‹ã«ã€Dynamic Frameworkã‚’ä½¿ç”¨ã—ãŸå ´åˆã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—1: WhisperKitWrapperã®ä½œæˆ

ã¾ãšã€`WhisperKitWrapper`ã¨ã„ã†åå‰ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

```swift
import Foundation
import Combine

// ãƒ€ãƒŸãƒ¼ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
class WhisperKitWrapper {
    static func isAvailable() -> Bool {
        if #available(iOS 16.0, *) {
            return true
        } else {
            return false
        }
    }

    func startTranscription() {
        if #available(iOS 16.0, *) {
            // å®Ÿéš›ã®WhisperKitã®ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«é…ç½®
            // ä¾‹: WhisperKit().startTranscription()
            print("WhisperKitã‚’ä½¿ç”¨ã—ãŸéŸ³å£°èªè­˜ã‚’é–‹å§‹ã—ã¾ã™ã€‚")
        } else {
            // iOS 16.0æœªæº€ã®ä»£æ›¿å‡¦ç†
            print("WhisperKitã¯iOS 16.0æœªæº€ã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚")
        }
    }
}
```

### ã‚¹ãƒ†ãƒƒãƒ—2: TranscriptionDriverã§ä½¿ç”¨ã™ã‚‹

æ¬¡ã«ã€`TranscriptionDriver`ã§`WhisperKitWrapper`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```swift
import Foundation
import Combine

final class TranscriptionDriver {
    private let isRecordingSubject = PassthroughSubject<Bool, Never>()
    var isRecordingPublisher: AnyPublisher<Bool, Never> {
        isRecordingSubject.eraseToAnyPublisher()
    }

    private var transcription = "éŸ³å£°ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚"

    func startTranscription() {
        if WhisperKitWrapper.isAvailable() {
            let whisperKitWrapper = WhisperKitWrapper()
            whisperKitWrapper.startTranscription()
        } else {
            // iOS 16.0æœªæº€ã®ä»£æ›¿å‡¦ç†
            print("WhisperKitã¯iOS 16.0æœªæº€ã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚")
        }
    }
}
```

ã“ã®ã‚ˆã†ã«ã€`WhisperKit`ãŒåˆ©ç”¨å¯èƒ½ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é©åˆ‡ãªå‡¦ç†ã‚’è¡Œã†ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å•é¡Œã‚’å›é¿ã§ãã¾ã™ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€`WhisperKit`ã®ä½¿ç”¨ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---
