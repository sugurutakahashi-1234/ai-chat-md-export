# SwiftUI アクションシート実装

Date: 2024-10-09

---

## 👤 User
*2024-10-09 18:24:26*

SwiftUI でアクションシートと出す実装

---

## 🤖 Assistant
*2024-10-09 18:24:43*

SwiftUI でアクションシートを表示するには、`ActionSheet` を `sheet` モディファイアと組み合わせて使用します。以下は、ボタンをタップするとアクションシートが表示されるシンプルな実装例です。

```swift
import SwiftUI

struct ActionSheetExampleView: View {
    @State private var showActionSheet = false

    var body: some View {
        Button("Show Action Sheet") {
            showActionSheet = true
        }
        .actionSheet(isPresented: $showActionSheet) {
            ActionSheet(
                title: Text("Choose an Option"),
                message: Text("Please select an action"),
                buttons: [
                    .default(Text("Option 1")) {
                        print("Option 1 selected")
                    },
                    .default(Text("Option 2")) {
                        print("Option 2 selected")
                    },
                    .destructive(Text("Delete")) {
                        print("Delete selected")
                    },
                    .cancel()
                ]
            )
        }
    }
}

struct ActionSheetExampleView_Previews: PreviewProvider {
    static var previews: some View {
        ActionSheetExampleView()
    }
}
```

### 実装のポイント
- `@State` を使って、アクションシートの表示状態を管理します。
- `actionSheet` モディファイアを使用し、`isPresented` に `@State` の変数をバインドします。
- `ActionSheet` には、`title`、`message`、および `buttons` の配列を指定します。`buttons` には、`.default`、`.destructive`、`.cancel` の3種類があります。

この例では、ボタンをタップするとアクションシートが表示され、ユーザーが選択したオプションに応じて処理が行われます。

---

## 👤 User
*2024-10-09 18:24:57*

iOS16以降では？

---

## 🤖 Assistant
*2024-10-09 18:25:12*

iOS 16以降では、SwiftUIのアクションシートは `confirmationDialog` を使って表示します。`ActionSheet` は非推奨となったため、`confirmationDialog` を使用するのが推奨されます。

以下は、iOS 16以降での `confirmationDialog` を使ったアクションシートの実装例です。

```swift
import SwiftUI

struct ConfirmationDialogExampleView: View {
    @State private var showDialog = false

    var body: some View {
        Button("Show Action Sheet") {
            showDialog = true
        }
        .confirmationDialog(
            "Choose an Option", // タイトル
            isPresented: $showDialog, // ダイアログの表示状態をバインド
            titleVisibility: .visible // タイトルの表示オプション
        ) {
            Button("Option 1") {
                print("Option 1 selected")
            }
            Button("Option 2") {
                print("Option 2 selected")
            }
            Button("Delete", role: .destructive) {
                print("Delete selected")
            }
            Button("Cancel", role: .cancel) {
                print("Cancel selected")
            }
        } message: {
            Text("Please select an action") // メッセージ（省略可能）
        }
    }
}

struct ConfirmationDialogExampleView_Previews: PreviewProvider {
    static var previews: some View {
        ConfirmationDialogExampleView()
    }
}
```

### 実装のポイント
- `confirmationDialog` モディファイアを使用して、アクションシートを表示します。
- `isPresented` にバインドされた状態変数で表示を制御します。
- `Button` 内に各アクションのラベルと処理を指定します。
  - `.destructive` や `.cancel` などの `role` を指定することで、削除やキャンセルといった特定の役割を付けられます。
- `message` には、補足的なメッセージを表示することができますが、これは省略可能です。

この方法を使えば、iOS 16以降の標準的なアクションシートをシンプルに実装できます。

---
