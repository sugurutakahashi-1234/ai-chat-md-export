# ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒã®å‡¦ç†

æ—¥ä»˜: 2023-06-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/25 0:38:25*

Swift ã§1.0.1 ã¨ 0.2.3 ãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒã®å‡¦ç†ã‚’ã©ã†ã™ã‚Œã°ã„ã„ã‹æ•™ãˆã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/25 0:39:11*

Swiftã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ï¼ˆä¾‹ãˆã° "1.0.1" ã¨ "0.2.3"ï¼‰ã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã®ä¸€ã¤ã®æ–¹æ³•ã¯ã€ã“ã‚Œã‚‰ã®æ–‡å­—åˆ—ã‚’ `Comparable` ã‚’å®Ÿè£…ã™ã‚‹ `Version` ã¨ã„ã†æ§‹é€ ä½“ã«å¤‰æ›ã—ã€ãã‚Œã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ã§ã™ã€‚

ä»¥ä¸‹ã«ãã®ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
struct Version: Comparable {
    var major: Int
    var minor: Int
    var patch: Int

    init?(_ version: String) {
        let numbers = version.split(separator: ".").compactMap { Int($0) }
        guard numbers.count == 3 else { return nil }
        self.major = numbers[0]
        self.minor = numbers[1]
        self.patch = numbers[2]
    }

    static func < (lhs: Version, rhs: Version) -> Bool {
        if lhs.major != rhs.major {
            return lhs.major < rhs.major
        }
        if lhs.minor != rhs.minor {
            return lhs.minor < rhs.minor
        }
        return lhs.patch < rhs.patch
    }

    static func == (lhs: Version, rhs: Version) -> Bool {
        return lhs.major == rhs.major && lhs.minor == rhs.minor && lhs.patch == rhs.patch
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`Version`æ§‹é€ ä½“ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ–‡å­—åˆ—ã‚’å—ã‘å–ã‚Šã€ãã‚Œã‚’ `major`, `minor`, `patch` ã¨ã„ã†3ã¤ã®éƒ¨åˆ†ã«åˆ†è§£ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®éƒ¨åˆ†ã¯ã€ãã‚Œãã‚Œãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ã—ã¾ã™ã€‚

ã“ã®æ§‹é€ ä½“ã¯ `Comparable` ã‚’å®Ÿè£…ã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã® `<` ã¨ `==` æ¼”ç®—å­ã‚’æä¾›ã—ã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¯”è¼ƒã¯ã¾ãšãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰å§‹ã¾ã‚Šã€æ¬¡ã«ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€æœ€å¾Œã«ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®æ§‹é€ ä½“ã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¯”è¼ƒã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```swift
let version1 = Version("1.0.1")
let version2 = Version("0.2.3")

if let v1 = version1, let v2 = version2 {
    if v1 > v2 {
        print("version1 is greater than version2")
    } else if v1 < v2 {
        print("version1 is less than version2")
    } else {
        print("version1 is equal to version2")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ–‡å­—åˆ—ã‚’ `Version` æ§‹é€ ä½“ã«å¤‰æ›ã—ã€ãã‚Œã‚’æ¯”è¼ƒã—ã¾ã™ã€‚

ãªãŠã€ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¸¸ã«3ã¤ã®æ•°å­—ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ï¼ˆä¾‹ãˆã° "1.0.1"ï¼‰ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å½¢å¼ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾å¿œã™ã‚‹ã«ã¯ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’é©å®œèª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/25 0:58:16*

æ¨™æº–ã®å‡¦ç†ã£ã¦ãªã„ã®ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/25 0:58:46*

Swiftã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ã€ç›´æ¥çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—æ¯”è¼ƒæ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€`Foundation`ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®`ProcessInfo`ã‚¯ãƒ©ã‚¹ã«ã¯`isOperatingSystemAtLeast(_:)`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯OSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã€æ¨™æº–çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ä¼¼ã¦ã„ã¾ã™ã€‚

Swiftã®`Comparable`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨`Foundation`ã®`ProcessInfo`ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€è‡ªåˆ†è‡ªèº«ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒæ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ä¸€ä¾‹ã¨ã—ã¦ã€ç§ãŒä»¥å‰ã«æä¾›ã—ãŸ`Version`æ§‹é€ ä½“ãŒã‚ã‚Šã¾ã™ã€‚

ã‚‚ã—ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæä¾›ã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒæ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ãŸã„ã®ã§ã‚ã‚Œã°ã€CocoaPodsã®`Gem::Version`ã‚„ã€Carthageã‚„SPMï¼ˆSwift Package Managerï¼‰ãªã©ã®ä¾å­˜æ€§ç®¡ç†ãƒ„ãƒ¼ãƒ«ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã¯Swiftã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ãªãã€å¤–éƒ¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

ã—ãŸãŒã£ã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã®æ¯”è¼ƒãŒå¿…è¦ãªå ´åˆã€è‡ªèº«ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‹ã€ã¾ãŸã¯å¤–éƒ¨ã®ä¾å­˜æ€§ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€é¸æŠã—ãªã‘ã‚Œã°ãªã‚‰ãªã„çŠ¶æ³ã¨ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/25 1:00:09*

Version æ§‹é€ ä½“ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦æ¬²ã—ã„ã€

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/25 1:01:12*

Swiftã®`XCTest`ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦`Version`æ§‹é€ ä½“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
import XCTest

class VersionTests: XCTestCase {
    func testVersionComparison() {
        let version1 = Version("1.0.1")
        let version2 = Version("0.2.3")
        let version3 = Version("1.0.1")
        let version4 = Version("1.2.0")

        XCTAssertNotNil(version1)
        XCTAssertNotNil(version2)
        XCTAssertNotNil(version3)
        XCTAssertNotNil(version4)

        XCTAssertTrue(version1! > version2!)
        XCTAssertTrue(version1! == version3!)
        XCTAssertTrue(version1! < version4!)

        XCTAssertFalse(version1! < version2!)
        XCTAssertFalse(version1! != version3!)
        XCTAssertFalse(version1! > version4!)
    }

    func testVersionInitialization() {
        let version1 = Version("1.0.1")
        let version2 = Version("1.0.abc")
        let version3 = Version("1.0")

        XCTAssertNotNil(version1)
        XCTAssertNil(version2)
        XCTAssertNil(version3)
    }
}
```

ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã¯2ã¤ã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚`testVersionComparison`ã¯`Version`ã®æ¯”è¼ƒæ¼”ç®—ã‚’ãƒ†ã‚¹ãƒˆã—ã€`testVersionInitialization`ã¯`Version`ã®åˆæœŸåŒ–ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚

`testVersionComparison`ã§ã¯ã€`XCTAssertTrue`ã¨`XCTAssertFalse`ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¯”è¼ƒçµæœãŒæœŸå¾…é€šã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

`testVersionInitialization`ã§ã¯ã€`XCTAssertNotNil`ã¨`XCTAssertNil`ã‚’ä½¿ç”¨ã—ã¦`Version`ã®åˆæœŸåŒ–ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ä¸æ­£ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ï¼ˆä¾‹ï¼š"1.0.abc"ã‚„"1.0"ï¼‰ãŒ`nil`ã‚’è¿”ã™ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/6/25 1:01:51*

Quick Nimbleã®ã‚±ãƒ¼ã‚¹ã‚’æ›¸ã„ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/6/25 1:02:29*

ã‚‚ã¡ã‚ã‚“ã§ã™ã€Quickã¨Nimbleã‚’ä½¿ã£ã¦`Version`æ§‹é€ ä½“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚Quickã¯è¡Œå‹•é§†å‹•é–‹ç™ºï¼ˆBDDï¼‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€Nimbleã¯ãƒãƒƒãƒãƒ£ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€å…±ã«ãƒ†ã‚¹ãƒˆã®è¨˜è¿°ã‚’ã‚ˆã‚Šè‡ªç„¶è¨€èªã«è¿‘ã„å½¢ã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã«ãã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
import Quick
import Nimble

class VersionSpec: QuickSpec {
    override func spec() {
        describe("Version") {
            context("when initialized with a valid version string") {
                it("should not be nil") {
                    let version = Version("1.0.1")
                    expect(version).toNot(beNil())
                }
            }
            
            context("when initialized with an invalid version string") {
                it("should be nil") {
                    let version = Version("1.0.xyz")
                    expect(version).to(beNil())
                }
            }
            
            context("when comparing versions") {
                let version1 = Version("1.0.1")
                let version2 = Version("0.2.3")
                let version3 = Version("1.0.1")
                let version4 = Version("1.2.0")
                
                it("should correctly compare versions") {
                    expect(version1).to(beGreaterThan(version2))
                    expect(version1).to(equal(version3))
                    expect(version1).to(beLessThan(version4))
                }
            }
        }
    }
}
```

ã“ã®`VersionSpec`ã‚¯ãƒ©ã‚¹ã§ã¯ã€`Version`ã®åˆæœŸåŒ–ã¨æ¯”è¼ƒã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚åˆæœŸåŒ–ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã¯ã€æœ‰åŠ¹ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã‚’ä½¿ã£ãŸå ´åˆã¨ç„¡åŠ¹ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã‚’ä½¿ã£ãŸå ´åˆã®2ã¤ã®ã‚±ãƒ¼ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚æ¯”è¼ƒã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã¯ã€ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¯”è¼ƒçµæœãŒæœŸå¾…é€šã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚

ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã¯ã€Quickã®`describe`, `context`, `it`ã¨ã„ã†é–¢æ•°ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¨˜è¿°ã—ã€Nimbleã®`expect`é–¢æ•°ã¨ãƒãƒƒãƒãƒ£ï¼ˆ`to`, `toNot`, `beNil`, `equal`, `beGreaterThan`, `beLessThan`ãªã©ï¼‰ã‚’ä½¿ã£ã¦çµæœã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®é–¢æ•°ã¨ãƒãƒƒãƒãƒ£ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è‡ªç„¶è¨€èªã«è¿‘ã„å½¢ã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

---
