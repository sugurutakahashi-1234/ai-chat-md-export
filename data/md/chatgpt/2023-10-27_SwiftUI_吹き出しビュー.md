# SwiftUI å¹ãå‡ºã—ãƒ“ãƒ¥ãƒ¼

Date: 2023-10-27

---

## ğŸ‘¤ User
*2023-10-27 16:19:28*

å‹æ‰‹ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’çœç•¥ã—ã¦æ¬²ã—ããªã„ã€‚åŠ ãˆã¦ã‚³ãƒ¼ãƒ‰ã‚’æ•™ãˆã¦æ¬²ã—ã„


import SwiftUI

public enum BubbleType {
    case vertical
    case horizontal
}

public struct EmomilBubbleView: View {
    private let type: BubbleType
    private let text: String

    public init(type: BubbleType, text: String) {
        self.type = type
        self.text = text
    }

    public var body: some View {
        if type == .vertical {
            BubbleView(type: type) {
                Text(text)
                    .typographyStyle(.body3)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                    .multilineTextAlignment(.center)
                    .padding(16)
                    .frame(maxWidth: .infinity)
            }
        } else {
            BubbleView(type: type) {
                Text(text)
                    .typographyStyle(.body3)
                    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
                    .padding(16)
                    .frame(maxWidth: .infinity, alignment: .leading)
            }
        }
    }
}

/// ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºå¤‰æ›´ã€å¹ãå‡ºã—å†…ã®Paddingå¤‰æ›´ãªã©ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã«å¯¾å¿œã—ãŸãƒ“ãƒ¥ãƒ¼
public struct BubbleView&lt;Content&gt;: View where Content: View {
    private let type: BubbleType
    private let iconSize: CGSize
    private let content: () -&gt; Content

    public init(type: BubbleType, iconSize: CGSize = .init(width: 84, height: 84), content: @escaping () -&gt; Content) {
        self.type = type
        self.iconSize = iconSize
        self.content = content
    }

    public var body: some View {
        if type == .vertical {
            VStack(spacing: 0) {
                verticalView
                iconView
            }
        } else {
            HStack(spacing: 0) {
                iconView
                horizontalView
            }
        }
    }
}

private extension BubbleView {
    var verticalView: some View {
        VStack(spacing: 0) {
            roundRectangleView
            Triangle()
                .fill(Color.white)
                .frame(width: 8, height: 10)
                .rotationEffect(.degrees(180))
        }
        .clipped()
        .elevation(.elevation2)
    }

    var horizontalView: some View {
        HStack(spacing: 0) {
            Triangle()
                .fill(Color.white)
                .frame(width: 5, height: 6)
                .rotationEffect(.degrees(-90))
            roundRectangleView
        }
        .clipped()
        .elevation(.elevation2)
    }

    var roundRectangleView: some View {
        content()
            .background(CoreAssets.Color.Neutral.white.swiftUIColor)
            .cornerRadius(32)
    }

    var iconView: some View {
        CoreAssets.Image.face.swiftUIImage
            .resizable()
            .frame(width: iconSize.width, height: iconSize.height)
            .elevation(.elevation2)
    }
}

private struct Triangle: Shape {
    func path(in rect: CGRect) -&gt; Path {
        var path = Path()

        path.move(to: CGPoint(x: rect.midX, y: rect.minY))
        path.addLine(to: CGPoint(x: rect.minX, y: rect.maxY))
        path.addLine(to: CGPoint(x: rect.maxX, y: rect.maxY))
        path.addLine(to: CGPoint(x: rect.midX, y: rect.minY))

        return path
    }
}

---

## ğŸ¤– Assistant
*2023-10-27 16:20:10*

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯SwiftUIã‚’ä½¿ã£ã¦ã€ç¸¦ã‚„æ¨ªæ–¹å‘ã®å¹ãå‡ºã—ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å¹ãå‡ºã—ã®å½¢ã«ã¯`BubbleType`ã¨ã„ã†enumãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€`.vertical`ã¨`.horizontal`ã®2ã¤ã®ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚

ä¸»è¦ãªéƒ¨åˆ†ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ï¼š

1. **EmomilBubbleView**:
    - ã“ã‚Œã¯å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªä¸»è¦ãªå¹ãå‡ºã—ãƒ“ãƒ¥ãƒ¼ã§ã™ã€‚
    - å¹ãå‡ºã—ã®ç¨®é¡ï¼ˆç¸¦ã¾ãŸã¯æ¨ªï¼‰ã¨è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
    - å¹ãå‡ºã—ã®å½¢çŠ¶ã«å¿œã˜ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆã®é…ç½®ã‚’å¤‰æ›´ã—ã¾ã™ï¼ˆä¸­å¤®æƒãˆã¾ãŸã¯å·¦æƒãˆï¼‰ã€‚

2. **BubbleView**:
    - ã“ã®ãƒ“ãƒ¥ãƒ¼ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªå¹ãå‡ºã—ãƒ“ãƒ¥ãƒ¼ã§ã€ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚µã‚¤ã‚ºã‚„å¹ãå‡ºã—ã®ä¸­ã®paddingã‚’å¤‰æ›´ã§ãã¾ã™ã€‚
    - å†…éƒ¨çš„ã«ã¯ã€å¹ãå‡ºã—ã®ã‚¿ã‚¤ãƒ—ï¼ˆç¸¦ã¾ãŸã¯æ¨ªï¼‰ã«å¿œã˜ã¦ã€å¹ãå‡ºã—ã®å½¢çŠ¶ã¨ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

3. **BubbleView extension**:
    - ã“ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã€å¹ãå‡ºã—ã®å…·ä½“çš„ãªéƒ¨åˆ†ï¼ˆç¸¦ã®å¹ãå‡ºã—ã€æ¨ªã®å¹ãå‡ºã—ã€è§’ä¸¸ã®çŸ©å½¢ã€ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ“ãƒ¥ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚

4. **Triangle**:
    - ã“ã‚Œã¯ä¸‰è§’å½¢ã®å½¢ã‚’æŒã¤SwiftUIã®Shapeã§ã™ã€‚ã“ã‚Œã¯å¹ãå‡ºã—ã®å°¾éƒ¨åˆ†ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®æ”¹å–„ã‚„æ©Ÿèƒ½è¿½åŠ ã«é–¢ã—ã¦å…·ä½“çš„ãªè¦æœ›ã‚„è³ªå•ãŒã‚ã‚Œã°ã€ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

---

## ğŸ‘¤ User
*2023-10-27 16:21:15*

ãƒ†ã‚­ã‚¹ãƒˆãŒçœç•¥ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’å»ƒæ­¢ã™ã‚‹è¨­å®šã«ã—ãŸã„ã€‚

---

## ğŸ¤– Assistant
*2023-10-27 16:22:08*

SwiftUIã®ãƒ†ã‚­ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã§ãƒ†ã‚­ã‚¹ãƒˆãŒçœç•¥ã•ã‚Œã¦ã—ã¾ã†å ´åˆã€ä¸»ãªåŸå› ã¯`Text`ãƒ“ãƒ¥ãƒ¼ãŒãã®è¦ªã®ãƒ“ãƒ¥ãƒ¼ã«å¯¾ã—ã¦ååˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’æŒã£ã¦ã„ãªã„ã“ã¨ã§ã™ã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®ä¸€èˆ¬çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

1. **è¡Œæ•°ã®åˆ¶é™ã‚’å‰Šé™¤**: SwiftUIã®`Text`ãƒ“ãƒ¥ãƒ¼ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§1è¡Œã«åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ã¯ã€`lineLimit(nil)`ã‚’ä½¿ç”¨ã—ã¦è¡Œæ•°ã®åˆ¶é™ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚

   ```swift
   Text(text)
       .lineLimit(nil)
   ```

2. **è¦ªãƒ“ãƒ¥ãƒ¼ã®åˆ¶ç´„ã‚’èª¿æ•´**: `Text`ãƒ“ãƒ¥ãƒ¼ã®è¦ªã‚„ç¥–å…ˆã®ãƒ“ãƒ¥ãƒ¼ãŒç‹­ã™ãã‚‹å ´åˆã€ãƒ†ã‚­ã‚¹ãƒˆã¯çœç•¥ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã‚Œã‚’é˜²ããŸã‚ã«ã¯ã€è¦ªãƒ“ãƒ¥ãƒ¼ã®åˆ¶ç´„ã‚’é©åˆ‡ã«èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

3. **fixedSize**: ã“ã®ä¿®é£¾å­ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãŒãã®å†…å®¹ã«åŸºã¥ã„ã¦ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆãŒã‚¯ãƒªãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ãªãå…¨ä½“ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

   ```swift
   Text(text)
       .fixedSize(horizontal: false, vertical: true)
   ```

ã‚ãªãŸã®`EmomilBubbleView`ã«ãŠã‘ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®éƒ¨åˆ†ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ï¼š

```swift
Text(text)
    .typographyStyle(.body3)
    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
    .multilineTextAlignment(.center)
    .lineLimit(nil)  // è¡Œæ•°ã®åˆ¶é™ã‚’å‰Šé™¤
    .fixedSize(horizontal: false, vertical: true)  // ãƒ†ã‚­ã‚¹ãƒˆã®ã‚µã‚¤ã‚ºã‚’å†…å®¹ã«åŸºã¥ã„ã¦å¤‰æ›´
    .padding(16)
    .frame(maxWidth: .infinity)
```

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆãŒçœç•¥ã•ã‚Œã‚‹ã“ã¨ãªãè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

---

## ğŸ‘¤ User
*2023-10-27 16:22:42*

æ”¹è¡Œã¯ã—ã¦ã„ã„ã‘ã©çœç•¥ã—ã¦æ¬²ã—ããªã„ã‚“ã ã€‚

---

## ğŸ¤– Assistant
*2023-10-27 16:23:18*

äº†è§£ã—ã¾ã—ãŸã€‚ãƒ†ã‚­ã‚¹ãƒˆã®çœç•¥ã‚’é¿ã‘ã‚‹ã«ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã«`.truncationMode(.tail)`ã‚’æŒ‡å®šã—ã¦ã‚‚åŠ¹æœã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€ã“ã‚Œã¯ãƒ†ã‚­ã‚¹ãƒˆãŒçœç•¥ã•ã‚Œã‚‹å ´åˆã«ã©ã®éƒ¨åˆ†ã‚’çœç•¥ã™ã‚‹ã‹ã‚’æ±ºå®šã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€çœç•¥ãã®ã‚‚ã®ã‚’é˜²ãã‚‚ã®ã§ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚

çœç•¥ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`fixedSize`ä¿®é£¾å­ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãŒãã®å†…å®¹ã«åŸºã¥ã„ã¦ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```swift
Text(text)
    .typographyStyle(.body3)
    .foregroundColor(CoreAssets.Color.Primary.primary100.swiftUIColor)
    .multilineTextAlignment(.center)
    .fixedSize(horizontal: false, vertical: true) // ã“ã‚ŒãŒéµã§ã™
    .padding(16)
    .frame(maxWidth: .infinity)
```

`fixedSize(horizontal: false, vertical: true)`ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆãŒç¸¦æ–¹å‘ã«è‡ªç”±ã«æ‹¡å¼µã—ã¦å†…å®¹ã‚’ãƒ•ã‚£ãƒƒãƒˆã•ã›ã‚‹ã“ã¨ã‚’æŒ‡ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆãŒãã®å†…å®¹ã«åŸºã¥ã„ã¦ç¸¦æ–¹å‘ã«é©åˆ‡ãªã‚µã‚¤ã‚ºã«ãªã‚Šã€çœç•¥ã•ã‚Œã‚‹ã“ã¨ãªãè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

---
