# SwiftUIでカラー定義を活用する

日付: 2023-05-19

---

## 👤 ユーザー
*2023/05/19 14:26:38*

SwiftUI でアプリを作成するのだか、デザイナーがカラー定義を用意してくれた。そのカラー定義を使って実装していくのだけれど、ポイントをおしえてほしい。
ちなみにSwiftGenを使っていて、そのライブラリの導入はすでに行なっている。

---

## 🤖 アシスタント
*2023/05/19 14:27:32*

SwiftGenをすでに使っているとのことで、その機能を活用してカラー定義を管理することが可能です。以下にポイントとなる部分を列挙します。

1. **カラー定義をasset catalogに登録する**: デザイナーが定義した色をXcodeのasset catalogに登録します。これはXcodeの左サイドバーにある「Assets.xcassets」フォルダを開き、右下の＋ボタンから「New Color Set」を選択し、新しいカラーセットを作成します。そこにデザイナーが定義した色を設定します。

2. **SwiftGenの設定を行う**: SwiftGenの設定ファイルである `swiftgen.yml` ファイルを作成・更新し、その中にカラーの設定を追加します。設定は以下のような形になるでしょう。
```yaml
xcassets:
  inputs:
    - <あなたのプロジェクトパス>/Assets.xcassets
  outputs:
    - templateName: swift5
      output: <あなたのプロジェクトパス>/Generated/Assets.swift
```
3. **SwiftGenを実行する**: SwiftGenを実行すると、先ほど設定した `Assets.swift` ファイルが生成されます。このファイルには、登録した色が列挙型として定義されています。

4. **コード中でカラーを使用する**: 生成された `Assets.swift` ファイルを使用して、コード中でカラーを参照できます。以下のように使用できます。
```swift
Text("Hello, SwiftUI!")
    .foregroundColor(Asset.Colors.yourDefinedColor.color)
```
このようにして、SwiftGenを活用すれば色の名前を直接コード内で指定することなく、型安全に色を利用することができます。また、色の名前を変更したり新たに色を追加した場合も、SwiftGenを再度実行するだけで新しい色定義が `Assets.swift` ファイルに追加されます。

---

## 👤 ユーザー
*2023/05/19 14:34:56*

なるほど。

命名について質問なのですが、Primary や secondary や Success や Neutral などのグループに分かれているのだけれども Black と White だけそれらのグールプに混ぜることができないのだけれども、これらのグループ名を考えて欲しい

---

## 🤖 アシスタント
*2023/05/19 14:35:36*

色のグループ名を考える際には、それぞれの色がアプリケーションの中でどのような役割を果たすのか、という観点が重要になります。以下にいくつかの例を示しますが、具体的な色やアプリケーションの特性によって適宜調整してください。

1. **MainColors**: 主要な色（Primary, Secondary）を含むグループです。一般的にはアプリケーションのブランドカラーや、主要なUI要素（ナビゲーションバー、ボタンなど）の色に使われます。

2. **FeedbackColors**: 成功（Success）、エラー（Error）、警告（Warning）など、ユーザーに何らかのフィードバックを提供する色を含むグループです。

3. **NeutralColors**: 中立的な色（Neutral）を含むグループです。背景、テキスト、ボーダーなどに使われる色を管理します。

4. **BlackAndWhite**: 黒と白の色を管理するグループです。これらの色は、一般的にテキストの色や背景色など、多くの場面で使用されます。

これらのグループ名は、色を分類するための一例です。アプリケーションの特性やデザインガイドラインによって、色の役割が変わる場合があります。そのため、これらのグループ名をそのまま使用するのではなく、自分のアプリケーションに適した色分類を作成することをお勧めします。

---

## 👤 ユーザー
*2023/05/19 14:39:41*

なるほど、カラーを登録する際にAny, Dark, Light とあるんだけどそれぞれの違いは？あとGamutってなに？あと。Devices は universalでも大丈夫なんだっけ？

---

## 🤖 アシスタント
*2023/05/19 14:40:12*

**Any, Dark, Light** は、iOS 13以降で導入されたダークモードとライトモードを指定するためのものです。デバイスがダークモードに設定されているときは、ダークモード用の色が、ライトモードのときは、ライトモード用の色が使用されます。

- **Any**: どちらのモードでも使用される色を指定します。
- **Dark**: ダークモードで使用される色を指定します。
- **Light**: ライトモードで使用される色を指定します。

**Gamut** とは色域のことで、色がどれだけ豊かに表示できるかを示します。主にsRGBとDisplay P3があります。sRGBは一般的な色域で、多くのデバイスで対応しています。一方、Display P3はより広い色域を持ち、色の再現性が高いデバイスで利用されます。

**Devices** についてですが、ここで設定するのは色が適用されるデバイスの種類です。"Universal"は全てのデバイス（iPhone、iPad、Macなど）で使用される色を指定します。ただし、色は特定のデバイスでのみ使用することも可能で、その場合はデバイスごとに色を指定します。例えば、iPad専用の色を作成することもできます。ただし、一般的には"Universal"を使用して、全てのデバイスで同じ色を使用するのが一般的です。

---

## 👤 ユーザー
*2023/05/19 14:45:15*

なるほど、ではFigma で #000000 のような指定のされ方をしているのですが、どのように設定すればいいのでしょうか？

---

## 🤖 アシスタント
*2023/05/19 14:45:42*

Figmaから取得した色情報をXcodeのAsset Catalogに登録する方法を以下に説明します。今回は例としてFigmaで指定されたカラーコードが `#000000` (すなわち黒色)とします。

1. まずはXcodeの左サイドバーにある「Assets.xcassets」を選択して開きます。

2. 右下の+ボタンから「New Color Set」を選択し、新しいカラーセットを作成します。ここでは例として「Black」などと名付けましょう。

3. 新しく作成されたカラーセットを選択して右側のインスペクターパネルを開きます。

4. Appearanceのセクションで、「Any, Dark, Light」の中から「Any」を選択します。これは今回作成する色がダークモードでもライトモードでも同じ色を使用するためです。

5. 「Color」セクションで色の情報を入力します。Figmaから取得した `#000000` というカラーコードを使う場合、以下のように設定します。

   - Input Method: 8-bit (Hexadecimal)
   - Hexadecimal (#): 000000

以上の手順でFigmaで指定されたカラーコードをXcodeのAsset Catalogに追加できます。また、ダークモードとライトモードで異なる色を使用する場合は、「Any, Dark, Light」の中から「Dark」や「Light」を選択し、それぞれのモードで使用する色を設定します。

---

## 👤 ユーザー
*2023/05/19 14:46:24*

なるほど、Content は何を指定すればいいの？

---

## 🤖 アシスタント
*2023/05/19 14:46:41*

Asset Catalogにカラーセットを追加する際、Contentについて考慮する必要は基本的にありません。Contentは通常、画像やアイコンなどのアセットが表示される部分であり、色を設定する場合には特に変更する必要はありません。

色を設定する際には、「Attributes Inspector」パネルの「Color」セクションで色の情報を直接入力します。"Any, Dark, Light" や "Input Method"、"Hexadecimal (#)" などの設定を行って、具体的な色を指定します。

色を設定したら、その色はAsset Catalogのプレビュー部分に表示されます。これは「Content」部分に相当します。しかし、色を設定する際に「Content」を直接操作する必要はありません。

---

## 👤 ユーザー
*2023/05/19 14:58:35*

SwiftGen で生成した定義を全部確認したいのですが、allCases などを使ってListにして、確認したりすることはできないのかな、、、

---

## 🤖 アシスタント
*2023/05/19 14:58:59*

SwiftGenは標準では色定義を `enum` として生成しますが、`enum` のすべてのケースをリストとして取得するためには、その `enum` が `CaseIterable` プロトコルを遵守している必要があります。ただし、SwiftGenが生成する `enum` はこの `CaseIterable` プロトコルを遵守していません。

そのため、SwiftGenで生成された色定義をリストとして取得することは直接的にはできません。ですが、必要であれば自分でそれぞれの色定義を配列に追加して確認することは可能です。例えば以下のようにできます：

```swift
let colors = [Asset.Colors.primary.color, Asset.Colors.secondary.color, Asset.Colors.success.color, ...]
```

ただし、この方法では新たに色を追加した際に都度配列を更新する必要があります。

より自動化するためには、SwiftGenの設定をカスタマイズして生成されるコードを変更する方法もありますが、これにはSwiftGenのテンプレートを理解し、適切にカスタマイズする必要があります。そして、生成されたコードがAppの他の部分と適切に連携できるようにするための追加の調整も必要となるでしょう。

---

## 👤 ユーザー
*2023/05/19 15:06:22*

なんでもいいので、カラーを全量確認する方法はありますか？’

---

## 🤖 アシスタント
*2023/05/19 15:07:00*

SwiftUIでSwiftGenによって生成された全ての色を確認するための簡単な方法は直接的には提供されていませんが、色定義を直接ソースコードで管理する代わりにJSONやplistファイルなどを利用して色情報を管理し、それを読み込むという方法があります。

この方法を使うと、色情報を追加や変更した時にSwiftGenを再度実行する必要がなくなります。また、全ての色情報をリストとして取得し、それを用いて全色を表示するUIを作成することも可能になります。

以下に大まかな手順を示します：

1. JSONファイルなどに色情報を格納します。例えば以下のような形になるでしょう。

```json
{
    "colors": [
        {"name": "primary", "color": "#ff0000"},
        {"name": "secondary", "color": "#00ff00"},
        {"name": "success", "color": "#0000ff"},
        ...
    ]
}
```

2. アプリ内でこのファイルを読み込み、色情報をデータモデルに変換します。Swiftでは、`Codable`プロトコルを利用してJSONをモデルオブジェクトに変換することができます。

3. これらのデータモデルを用いて、全色を表示するUIを作成します。

これにより、全ての色情報を一覧表示することが可能になります。ただし、この方法では色情報をJSONなどのファイルで管理する必要があるため、色情報の更新が発生した時には都度該当のファイルを更新する必要があります。

---

## 👤 ユーザー
*2023/05/19 22:33:22*

少し迷っていることがある。
Successの color としてカラーコードが同じのオパシティがおこなるカラー定義あるのだが、ダークモードを考えた時に、asset catalog でカラーコードを持ってSwiftのコード上でオパシティの値を持つべきか、asset catalog でカラーコードとオパシティの値を両方持つべきかどっちがいいのかな？

一旦、ダークモード対応

---

## 🤖 アシスタント
*2023/05/19 22:34:23*

色のオパシティについて考える際、そのオパシティが一貫して適用されるかどうかを検討することが重要です。つまり、そのオパシティを持つ色が常に同じ透明度を必要とするのであれば、Asset Catalogにオパシティを含めて定義するのが良いでしょう。

しかし、同じ色に対してさまざまなオパシティが必要な場合、またはオパシティがコンテキストによって変わる場合（例えば特定のビューまたは状態で透明度が変わる）は、オパシティをコード上で動的に設定する方が柔軟性が高まります。

ダークモードとライトモードで色のオパシティが変わる場合も、Asset Catalogではなくコード上でオパシティを設定することで、モードに応じた適切なオパシティを選択することができます。

最終的には、アプリケーションの具体的な要件と、それらを最も効率的に満たすことができる方法によって決定するべきです。一般的には、色とオパシティが一貫して適用される場合はAsset Catalogを使用し、そうでない場合はコード上でオパシティを設定する方がより柔軟性があります。

---
