# è§’ä¸¸ã‚·ãƒ¼ãƒˆå®Ÿè£…æ–¹æ³•

Date: 2024-12-20

---

## ğŸ‘¤ User
*2024-12-20 17:25:36*

ã“ã®showModalBottomSheetã‚’è§’ä¸¸ã®ã‚·ãƒ¼ãƒˆã«ã—ãŸã„

import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/presentation/design_token/color_token.dart';
import 'package:snpit_guild_app/presentation/pages/camera_list_page.dart';

class DeckDetailPage extends HookConsumerWidget {
  const DeckDetailPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // TODO: å…¨éƒ¨ä»®ãƒ‡ãƒ¼ã‚¿ã§ã™
    final selectedCameras = useState&lt;List&lt;String&gt;&gt;(['A', 'B', 'C', 'D']);

    return Scaffold(
      appBar: AppBar(
        title: const Text('Edit Deck'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Expanded(
              child: ListView.builder(
                itemCount: selectedCameras.value.length,
                itemBuilder: (context, index) {
                  final camera = selectedCameras.value[index];
                  return ListTile(
                    leading: const Icon(Icons.camera_alt),
                    title: Text(camera),
                    trailing: IconButton(
                      icon: const Icon(Icons.remove_circle),
                      onPressed: () {
                        selectedCameras.value = List.from(selectedCameras.value)
                          ..removeAt(index);
                      },
                    ),
                  );
                },
              ),
            ),
            const SizedBox(height: 16),
            OutlinedButton.icon(
              onPressed: () {
                _showCameraListBottomSheet(context);
              },
              icon: const Icon(Icons.add),
              label: const Text(
                'Put camera',
                style: TextStyle(color: ColorToken.text),
              ),
            ),
          ],
        ),
      ),
      bottomNavigationBar: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: ElevatedButton(
            onPressed: () {
              // TODO: Saveãƒœã‚¿ãƒ³ã®å‡¦ç†
              context.pop();
            },
            child: const Text('Save'),
          ),
        ),
      ),
    );
  }

  void _showCameraListBottomSheet(BuildContext context) {
    showModalBottomSheet&lt;void&gt;(
      context: context,
      builder: (context) {
        return const CameraListPage();
      },
    );
  }
}

---

## ğŸ¤– Assistant
*2024-12-20 17:25:48*

`showModalBottomSheet` ã§è§’ä¸¸ã®ã‚·ãƒ¼ãƒˆã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã€`shape` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ `RoundedRectangleBorder` ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã« `_showCameraListBottomSheet` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™:

```dart
void _showCameraListBottomSheet(BuildContext context) {
  showModalBottomSheet<void>(
    context: context,
    shape: const RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(
        top: Radius.circular(16), // è§’ä¸¸ã®åŠå¾„
      ),
    ),
    builder: (context) {
      return const CameraListPage();
    },
  );
}
```

ã“ã‚Œã§ã€ã‚·ãƒ¼ãƒˆã®ä¸Šéƒ¨ãŒæŒ‡å®šã—ãŸè§’ä¸¸ã«ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€ã‚·ãƒ¼ãƒˆã®èƒŒæ™¯è‰²ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ã€`backgroundColor` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### ã‚·ãƒ¼ãƒˆã®èƒŒæ™¯è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ä¾‹
```dart
void _showCameraListBottomSheet(BuildContext context) {
  showModalBottomSheet<void>(
    context: context,
    shape: const RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(
        top: Radius.circular(16),
      ),
    ),
    backgroundColor: Colors.white, // ã‚·ãƒ¼ãƒˆã®èƒŒæ™¯è‰²
    builder: (context) {
      return const CameraListPage();
    },
  );
}
```

ã“ã‚Œã§ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãŒã•ã‚‰ã«å‘ä¸Šã—ã€è§’ä¸¸ã®ã‚·ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ User
*2024-12-20 17:26:46*

è§’ä¸¸ã«ãªã‚‰ãªã‹ã£ãŸ

---

## ğŸ¤– Assistant
*2024-12-20 17:27:03*

`showModalBottomSheet`ã§è§’ä¸¸ãŒé©ç”¨ã•ã‚Œãªã„å ´åˆã€åŸå› ã¨ã—ã¦ä»¥ä¸‹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ï¼š

1. **è¦ªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒ `Scaffold` ã§è¦†ã‚ã‚Œã¦ã„ãªã„å ´åˆ**  
   `showModalBottomSheet` ã‚’ä½¿ç”¨ã™ã‚‹éš›ã€è¦ªãŒå¿…ãš `Scaffold` ã«å«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

2. **`isScrollControlled` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¿…è¦**  
   `isScrollControlled` ã‚’ `true` ã«è¨­å®šã—ã¦ã€ã‚·ãƒ¼ãƒˆã®é«˜ã•ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åˆã‚ã›ãŸã‚Šã€é©åˆ‡ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒåæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ä¿®æ­£ç‰ˆã§ã™ã€‚ã“ã‚Œã§è§’ä¸¸ãŒé©ç”¨ã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š

```dart
void _showCameraListBottomSheet(BuildContext context) {
  showModalBottomSheet<void>(
    context: context,
    isScrollControlled: true, // ã‚·ãƒ¼ãƒˆã®é«˜ã•ã‚’èª¿æ•´
    shape: const RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(
        top: Radius.circular(16), // è§’ä¸¸ã®è¨­å®š
      ),
    ),
    builder: (context) {
      return DraggableScrollableSheet(
        initialChildSize: 0.6, // åˆæœŸã®é«˜ã• (ç”»é¢ã®60%)
        minChildSize: 0.3, // æœ€å°ã®é«˜ã•
        maxChildSize: 1.0, // æœ€å¤§ã®é«˜ã•
        builder: (context, scrollController) {
          return CameraListPage(
            scrollController: scrollController, // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æ¸¡ã™
          );
        },
      );
    },
  );
}
```

### `CameraListPage` ã®ä¿®æ­£ (å¿…è¦ã§ã‚ã‚Œã°)
`CameraListPage` ã« `scrollController` ã‚’æ¸¡ã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ï¼š

```dart
class CameraListPage extends StatelessWidget {
  final ScrollController scrollController;

  const CameraListPage({Key? key, required this.scrollController}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      controller: scrollController, // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’åˆ¶å¾¡
      itemCount: 20, // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿
      itemBuilder: (context, index) {
        return ListTile(
          title: Text('Camera $index'),
        );
      },
    );
  }
}
```

ã“ã‚Œã§ä»¥ä¸‹ã®ãƒã‚¤ãƒ³ãƒˆãŒè§£æ±ºã§ãã¾ã™ï¼š
- ã‚·ãƒ¼ãƒˆã®è§’ä¸¸ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚
- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚·ãƒ¼ãƒˆå†…ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ãªã‚‹ã€‚

å†åº¦ç¢ºèªã—ã¦ã„ãŸã ãã€ã‚‚ã—è§’ä¸¸ãŒé©ç”¨ã•ã‚Œãªã„å ´åˆã¯ã€ã•ã‚‰ã«ç’°å¢ƒè¨­å®šã‚’è¦‹ç›´ã™å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---

## ğŸ‘¤ User
*2024-12-20 17:27:57*

ã“ã‚“ãªæ„Ÿã˜ãŒã„ã„ã‹ã‚‚

void _showExploreListSheet(BuildContext context, WidgetRef ref) {
    showModalBottomSheet&lt;void&gt;(
      context: context,
      isScrollControlled: true,
      builder: (context) {
        return const FractionallySizedBox(
          heightFactor: 0.5,
          child: ClipRRect(
            borderRadius: BorderRadius.vertical(top: Radius.circular(16)),
            child: 
          ),
        );

---

## ğŸ¤– Assistant
*2024-12-20 17:28:15*

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`FractionallySizedBox` ã‚„ `ClipRRect` ã‚’ä½¿ã£ã¦å¸Œæœ›ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«è¿‘ã¥ã‘ã‚‹å®Ÿè£…ä¾‹ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`showModalBottomSheet` ã‚’ä½¿ç”¨ã—ã¦ã€è§’ä¸¸ã®ã‚·ãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é«˜ã•ã‚’ç”»é¢ã®50%ã«åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚

ä¿®æ­£ç‰ˆ:

```dart
void _showExploreListSheet(BuildContext context, WidgetRef ref) {
  showModalBottomSheet<void>(
    context: context,
    isScrollControlled: true, // é«˜ã•ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åˆã‚ã›ã‚‹
    backgroundColor: Colors.transparent, // èƒŒæ™¯ã‚’é€æ˜ã«ã—ã¦è§’ä¸¸ã‚’é©ç”¨
    builder: (context) {
      return FractionallySizedBox(
        heightFactor: 0.5, // é«˜ã•ã‚’ç”»é¢ã®50%ã«åˆ¶é™
        child: ClipRRect(
          borderRadius: const BorderRadius.vertical(
            top: Radius.circular(16), // ä¸Šéƒ¨ã«è§’ä¸¸ã‚’è¨­å®š
          ),
          child: Container(
            color: Colors.white, // ã‚·ãƒ¼ãƒˆã®èƒŒæ™¯è‰²
            child: Column(
              children: [
                Container(
                  height: 4,
                  width: 40,
                  margin: const EdgeInsets.symmetric(vertical: 8),
                  decoration: BoxDecoration(
                    color: Colors.grey.shade300, // ãƒãƒ³ãƒ‰ãƒ«ã®è‰²
                    borderRadius: BorderRadius.circular(2),
                  ),
                ),
                const Expanded(
                  child: Center(
                    child: Text('Explore List Content'), // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é…ç½®
                  ),
                ),
              ],
            ),
          ),
        ),
      );
    },
  );
}
```

### ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜
1. **`FractionallySizedBox`**
   - `heightFactor` ã‚’ `0.5` ã«è¨­å®šã—ã€ã‚·ãƒ¼ãƒˆã®é«˜ã•ã‚’ç”»é¢ã®50%ã«åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚

2. **`ClipRRect`**
   - `borderRadius` ã‚’è¨­å®šã—ã¦ã€ã‚·ãƒ¼ãƒˆã®ä¸Šéƒ¨ã‚’è§’ä¸¸ã«ã—ã¦ã„ã¾ã™ã€‚

3. **èƒŒæ™¯è‰²ã®é€æ˜åŒ–**
   - `backgroundColor: Colors.transparent` ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€`ClipRRect` ã®è§’ä¸¸ãŒåæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

4. **ãƒ‰ãƒ©ãƒƒã‚°ç”¨ãƒãƒ³ãƒ‰ãƒ«**
   - `Container` ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ãªãƒãƒ³ãƒ‰ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

### å®Ÿè¡Œçµæœ
- ã‚·ãƒ¼ãƒˆã¯ç”»é¢ã®50%ã®é«˜ã•ã§è¡¨ç¤ºã•ã‚Œã€ä¸Šéƒ¨ãŒè§’ä¸¸ã«ãªã‚Šã¾ã™ã€‚
- èƒŒæ™¯è‰²ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚‚ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚
- ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ãªãƒãƒ³ãƒ‰ãƒ«ã‚‚è¿½åŠ ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå‘ä¸Šã—ã¾ã™ã€‚

---
