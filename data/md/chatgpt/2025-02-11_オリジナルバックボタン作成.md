# オリジナルバックボタン作成

日付: 2025-02-11

---

## 👤 ユーザー
*2025/02/11 11:45:27*

{
  "content_type": "image_asset_pointer",
  "asset_pointer": "file-service://file-QEw4X8oRT5HTp945DHUizd",
  "size_bytes": 15346,
  "width": 563,
  "height": 388,
  "fovea": null,
  "metadata": {
    "dalle": null,
    "gizmo": null,
    "generation": null,
    "container_pixel_height": null,
    "container_pixel_width": null,
    "emu_omit_glimpse_image": null,
    "emu_patches_override": null,
    "sanitized": true,
    "asset_pointer_link": null,
    "watermarked_asset_pointer": null
  }
}
flutterでオリジナルなバックボタンを作りたい。
どうすればいいか？

---

## 🤖 アシスタント
*2025/02/11 11:45:44*

Flutter で「デザインを自分好みにした独自のバックボタン」を実装する方法はいくつかあります。ポイントは以下の通りです。

1. **Navigator.pop などで戻る挙動を定義する**  
   - 基本的には `Navigator.of(context).pop()` を呼ぶことで前の画面に戻ります。  
   - そのため、ボタンをタップした時にこのメソッドを呼び出すようにしてあげるだけです。

2. **カスタムウィジェットとしてボタンを作る**  
   - `IconButton` や `GestureDetector`／`InkWell` などを使い、見た目を自由に作りこむことができます。  
   - 円形や角丸など、好きな装飾を `Container` や `BoxDecoration` で作成し、その中にアイコンを配置すれば OK です。

3. **AppBar の leading を差し替える**  
   - もし画面上部の AppBar の左側に置きたいだけであれば、`leading` プロパティにカスタムウィジェットを設定してしまうのも一つの手です。  
   - ただし、AppBar 自体のスタイルが決まっている場合などは、デザイン全体の整合性を見て調整してください。

---

## サンプルコード例

以下のサンプルでは、画面上部に独自デザインの円形ボタンを置いて、タップしたら `Navigator.pop(context)` を呼び出す例を示します。

```dart
import 'package:flutter/material.dart';

class CustomBackButtonPage extends StatelessWidget {
  const CustomBackButtonPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // AppBarを使わない例
      body: SafeArea(
        child: Stack(
          children: [
            // コンテンツ部分
            Center(
              child: Text(
                'カスタムバックボタンのサンプル',
                style: TextStyle(fontSize: 20),
              ),
            ),
            // 左上にカスタムボタンを配置
            Positioned(
              top: 16,
              left: 16,
              child: GestureDetector(
                onTap: () {
                  Navigator.of(context).pop();
                },
                child: Container(
                  width: 32,
                  height: 32,
                  decoration: BoxDecoration(
                    color: Colors.black54, // ボタンの背景色
                    shape: BoxShape.circle,
                  ),
                  child: const Icon(
                    Icons.arrow_back,
                    color: Colors.white, // アイコンの色
                    size: 20,
                  ),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### ポイント解説
- `Stack` と `Positioned` を使っているのは、画面上の好きな位置に配置しやすいからです。  
- `GestureDetector` の `onTap` で `Navigator.of(context).pop()` を呼んでいます。
- `Container` の `decoration` で円形の背景色を設定し、その中に `Icon` を表示しています。  
- もし `InkWell` や `Material` ウィジェットで包むと、タップ時のリップルエフェクト（インクエフェクト）なども付与できます。

---

### AppBar の leading に置く場合の例

```dart
import 'package:flutter/material.dart';

class CustomBackButtonAppBarPage extends StatelessWidget {
  const CustomBackButtonAppBarPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('カスタムバックボタン'),
        // デフォルトの backButton ではなく、自前のウィジェットを leading に指定
        leading: GestureDetector(
          onTap: () {
            Navigator.of(context).pop();
          },
          child: Padding(
            padding: const EdgeInsets.all(8.0),
            child: Container(
              width: 32,
              height: 32,
              decoration: BoxDecoration(
                color: Colors.black54,
                shape: BoxShape.circle,
              ),
              child: const Icon(
                Icons.arrow_back,
                color: Colors.white,
                size: 20,
              ),
            ),
          ),
        ),
      ),
      body: Center(
        child: Text('AppBar leading に配置したカスタムボタン'),
      ),
    );
  }
}
```

こちらでは AppBar のデフォルトの戻るボタンを消して、代わりに独自ウィジェットを `leading` に設定しています。AppBar 本来のレイアウトに組み込みたい場合は、この方法が簡単です。

---

## まとめ
1. **戻る動作** はほぼ `Navigator.pop(context)` で実装できる。  
2. **ボタンの見た目** は `Container` + `BoxDecoration` で自由に装飾できる。  
3. **`AppBar` に組み込む / 独立したウィジェット** どちらでも目的に応じて使い分ける。

これらを押さえれば、Flutter でオリジナルデザインのバックボタンを簡単に実装できます。ぜひお試しください。

---

## 👤 ユーザー
*2025/02/11 11:48:37*

これでon pressのリップルが欲しい

import 'package:flutter/material.dart';
import 'package:snpit_guild_app/domain/design/color_token.dart';

class BackArrowButton extends StatelessWidget {
  const BackArrowButton({
    super.key,
    required this.onPressed,
  });

  final Future&lt;void&gt; Function() onPressed;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.all(8),
      child: Container(
        width: 32,
        height: 32,
        decoration: const BoxDecoration(
          color: Color(0xFF2E3739),
          shape: BoxShape.circle,
        ),
        child: const Icon(
          Icons.chevron_left,
          color: ColorToken.text,
          size: 32,
        ),
      ),
    );
  }
}

---

## 🤖 アシスタント
*2025/02/11 11:48:51*

以下のように **InkWell** や **InkResponse** を使うと、タップしたときにリップル（インクエフェクト）が表示されるようになります。  
実装上のポイントは「**InkWellがリップルを描画するためには、親WidgetツリーにMaterialが存在する必要がある**」ということです。

---

## 実装例

```dart
import 'package:flutter/material.dart';
import 'package:snpit_guild_app/domain/design/color_token.dart';

class BackArrowButton extends StatelessWidget {
  const BackArrowButton({
    super.key,
    required this.onPressed,
  });

  final Future<void> Function() onPressed;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.all(8),
      // Material ウィジェットを用意して、InkWell を包む
      child: Material(
        // 背景を円形にする場合
        shape: const CircleBorder(),
        color: const Color(0xFF2E3739),
        child: InkWell(
          // タップ範囲を円形にする
          customBorder: const CircleBorder(),
          // リップルエフェクトの色を変えたい場合
          splashColor: Colors.white.withOpacity(0.2),
          highlightColor: Colors.white.withOpacity(0.1),

          onTap: onPressed,
          child: const SizedBox(
            width: 32,
            height: 32,
            child: Icon(
              Icons.chevron_left,
              color: ColorToken.text,
              size: 32,
            ),
          ),
        ),
      ),
    );
  }
}
```

### 説明
1. **Material ウィジェット**  
   - `InkWell` や `InkResponse` でリップルを表示するためには、階層上に `Material` が必要です。  
   - `Material` の `shape` を `CircleBorder()` にすることで、背景を円形にできます。  

2. **InkWell のカスタマイズ**  
   - `customBorder` に `CircleBorder()` を指定すると、タップ時のエフェクトも円形になります。  
   - `splashColor` や `highlightColor` でリップル色や押下時の色をカスタマイズ可能です。  
   - 子ウィジェットとして `SizedBox` でサイズを指定し、その中に `Icon` を配置してアイコンボタンの見た目を整えています。

---

## 他のアプローチ
もし既に外側に `Scaffold` (＝MaterialApp) があり、画面全体が Material のコンテキスト下にある場合は、`Material` ウィジェットで包まずに以下のように書いてもリップルは動作します。

```dart
InkWell(
  onTap: onPressed,
  customBorder: const CircleBorder(),
  child: Container(
    width: 32,
    height: 32,
    decoration: const BoxDecoration(
      color: Color(0xFF2E3739),
      shape: BoxShape.circle,
    ),
    child: const Icon(Icons.chevron_left, color: ColorToken.text),
  ),
);
```

しかし、`Material` で背景色を指定したい・リップルの重なり順をより確実に制御したいという場合は、最初に示したように `Material` で包む方が安全です。  

---

以上のように **InkWell + Material** をうまく組み合わせることで、オリジナルのバックボタンにリップルエフェクトを付与できます。

---
