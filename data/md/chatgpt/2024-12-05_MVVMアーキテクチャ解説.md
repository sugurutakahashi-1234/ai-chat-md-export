# MVVMã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è§£èª¬

æ—¥ä»˜: 2024-12-05

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/5 11:52:58*

2024å¹´æœ€æ–°ã®flutterã§ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ•™ãˆã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/5 11:53:09*

îˆƒ2024å¹´ã®æœ€æ–°æƒ…å ±ã«åŸºã¥ãã€Flutterã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã«ãŠã„ã¦ã‚·ãƒ³ãƒ—ãƒ«ã§åŠ¹æœçš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦ã€**MVVMï¼ˆModel-View-ViewModelï¼‰**ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚îˆ„îˆƒã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€UIã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ˜ç¢ºã«åˆ†é›¢ã—ã€ä¿å®ˆæ€§ã‚„ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚îˆ„

**MVVMã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å½¹å‰²:**

îˆƒ- **Modelï¼ˆãƒ¢ãƒ‡ãƒ«ï¼‰**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†ã—ã¾ã™ã€‚îˆ„
îˆƒ- **Viewï¼ˆãƒ“ãƒ¥ãƒ¼ï¼‰**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ‹…å½“ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚îˆ„
îˆƒ- **ViewModelï¼ˆãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ‡ãƒ«ï¼‰**: Modelã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ViewãŒè¡¨ç¤ºã™ã‚‹ãŸã‚ã®å½¢å¼ã«å¤‰æ›ã—ã¾ã™ã€‚ã¾ãŸã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å—ã‘å–ã‚Šã€é©åˆ‡ãªå‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚îˆ„

îˆƒFlutterã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€MVVMãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚îˆ„ îˆ€citeîˆ‚turn0search1îˆ

îˆƒ1. **UIå±¤ï¼ˆViewï¼‰**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å—ã‘å–ã‚Šã¾ã™ã€‚îˆ„
îˆƒ2. **ãƒ­ã‚¸ãƒƒã‚¯å±¤ï¼ˆViewModelï¼‰**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã€ãƒ‡ãƒ¼ã‚¿å±¤ã¨UIå±¤ã®ä»²ä»‹ã‚’è¡Œã„ã¾ã™ã€‚îˆ„
îˆƒ3. **ãƒ‡ãƒ¼ã‚¿å±¤ï¼ˆModelï¼‰**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„APIãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’ç®¡ç†ã—ã¾ã™ã€‚îˆ„

îˆƒã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šã€å„å±¤ãŒç‹¬ç«‹ã—ã¦é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆå¯èƒ½ã¨ãªã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ä¿å®ˆæ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚îˆ„

îˆƒã¾ãŸã€MVVMãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã™ã‚‹éš›ã«ã¯ã€**å˜æ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆUnidirectional Data Flowï¼‰**ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚îˆ„îˆƒã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®æµã‚ŒãŒæ˜ç¢ºã«ãªã‚Šã€çŠ¶æ…‹ç®¡ç†ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚îˆ„ îˆ€citeîˆ‚turn0search0îˆ

îˆƒã•ã‚‰ã«ã€ä¾å­˜æ€§ã®æ³¨å…¥ï¼ˆDependency Injectionï¼‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®çµåˆåº¦ã‚’ä¸‹ã’ã€ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚îˆ„ îˆ€citeîˆ‚turn0search4îˆ

îˆƒã“ã‚Œã‚‰ã®è¨­è¨ˆåŸå‰‡ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ã§æ‹¡å¼µæ€§ã®é«˜ã„Flutterã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚îˆ„

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/5 11:53:30*

ãã‚Œã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’å®Ÿè£…ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/5 11:53:56*

îˆƒFlutterã§MVVMï¼ˆModel-View-ViewModelï¼‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç”¨ã„ã¦ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚îˆ„îˆƒã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šã€UIã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã—ã€ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ã¨ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚îˆ„

**1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

îˆƒã¾ãšã€Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã¾ã™ã€‚îˆ„îˆƒçŠ¶æ…‹ç®¡ç†ã«ã¯`flutter_riverpod`ã‚’ä½¿ç”¨ã—ã€ä¾å­˜æ€§æ³¨å…¥ã«ã¯`get_it`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚îˆ„

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_riverpod: ^1.0.3
  get_it: ^7.2.0
```

**2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ**

îˆƒä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’æ¡ç”¨ã—ã¾ã™ã€‚îˆ„

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ models/
â”‚   â””â”€â”€ user_model.dart
â”œâ”€â”€ view_models/
â”‚   â””â”€â”€ login_view_model.dart
â”œâ”€â”€ views/
â”‚   â””â”€â”€ login_view.dart
â””â”€â”€ services/
    â””â”€â”€ auth_service.dart
```

**3. Modelã®ä½œæˆ**

îˆƒãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹`UserModel`ã‚’å®šç¾©ã—ã¾ã™ã€‚îˆ„

```dart
// lib/models/user_model.dart
class UserModel {
  final String email;
  final String password;

  UserModel({required this.email, required this.password});
}
```

**4. Serviceã®ä½œæˆ**

îˆƒèªè¨¼å‡¦ç†ã‚’è¡Œã†`AuthService`ã‚’ä½œæˆã—ã¾ã™ã€‚îˆ„îˆƒã“ã“ã§ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦å›ºå®šã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚îˆ„

```dart
// lib/services/auth_service.dart
class AuthService {
  Future<bool> login(String email, String password) async {
    // å®Ÿéš›ã®èªè¨¼å‡¦ç†ã‚’ã“ã“ã«å®Ÿè£…
    // ä¾‹: Firebase Authã‚„REST APIã¨ã®é€£æº
    if (email == 'test@example.com' && password == 'password') {
      return true;
    }
    return false;
  }
}
```

**5. ViewModelã®ä½œæˆ**

îˆƒ`LoginViewModel`ã‚’ä½œæˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®ç®¡ç†ã¨èªè¨¼å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚îˆ„

```dart
// lib/view_models/login_view_model.dart
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../services/auth_service.dart';

class LoginViewModel extends StateNotifier<bool> {
  final AuthService _authService;

  LoginViewModel(this._authService) : super(false);

  Future<void> login(String email, String password) async {
    state = await _authService.login(email, password);
  }
}

final authServiceProvider = Provider((ref) => AuthService());
final loginViewModelProvider =
    StateNotifierProvider<LoginViewModel, bool>((ref) {
  final authService = ref.watch(authServiceProvider);
  return LoginViewModel(authService);
});
```

**6. Viewã®ä½œæˆ**

îˆƒãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚îˆ„

```dart
// lib/views/login_view.dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../view_models/login_view_model.dart';

class LoginView extends ConsumerWidget {
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final isLoggedIn = ref.watch(loginViewModelProvider);

    return Scaffold(
      appBar: AppBar(title: Text('ãƒ­ã‚°ã‚¤ãƒ³')),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextField(
              controller: _emailController,
              decoration: InputDecoration(labelText: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹'),
            ),
            TextField(
              controller: _passwordController,
              decoration: InputDecoration(labelText: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰'),
              obscureText: true,
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: () async {
                final email = _emailController.text;
                final password = _passwordController.text;
                await ref
                    .read(loginViewModelProvider.notifier)
                    .login(email, password);
                if (isLoggedIn) {
                  // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸæ™‚ã®å‡¦ç†
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(content: Text('ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ')),
                  );
                } else {
                  // ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—æ™‚ã®å‡¦ç†
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(content: Text('ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—')),
                  );
                }
              },
              child: Text('ãƒ­ã‚°ã‚¤ãƒ³'),
            ),
          ],
        ),
      ),
    );
  }
}
```

**7. ãƒ¡ã‚¤ãƒ³é–¢æ•°ã®è¨­å®š**

îˆƒã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã™ã€‚îˆ„

```dart
// lib/main.dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'views/login_view.dart';

void main() {
  runApp(ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter MVVM Login',
      home: LoginView(),
    );
  }
}
```

îˆƒã“ã®æ§‹æˆã«ã‚ˆã‚Šã€MVVMã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ´»ç”¨ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚îˆ„îˆƒå„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚„ä¿å®ˆãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚îˆ„

îˆƒã•ã‚‰ã«è©³ã—ã„å®Ÿè£…ä¾‹ã‚„è§£èª¬ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚îˆ„

- [ã€Flutterã€‘å®Ÿå‹™ã§ä½¿ã†MVVMã®å®Ÿè£…ä¾‹](https://zenn.dev/kisia_flutter/articles/febeddb432491e)
- [Flutter ã® Riverpodãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§MVVMã‚’å®Ÿç¾ã•ã›ã‚ˆã†ï¼](https://techblog.ldi.co.jp/entry/2023/12/04/104952)

îˆƒã“ã‚Œã‚‰ã®è¨˜äº‹ã§ã¯ã€MVVMã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è©³ç´°ãªè§£èª¬ã‚„å®Ÿè£…ä¾‹ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚îˆ„

---
