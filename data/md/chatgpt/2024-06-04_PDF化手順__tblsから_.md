# PDF化手順: tblsから。

日付: 2024-06-04

---

## 👤 ユーザー
*2024/6/4 17:57:00*

tbls を使って github pages にホスティングしている。このDB定義書をPDF化するにはどうすればいいか？

---

## 🤖 アシスタント
*2024/6/4 17:57:04*

`tbls` を使って生成されたDB定義書をPDF化するためには、以下の手順を試してみてください。

1. **HTMLファイルの準備**:
   `tbls` を使ってDB定義書のHTMLファイルを生成します。以下のコマンドでHTMLファイルを生成できます。
   ```bash
   tbls doc --output docs
   ```

2. **HTMLファイルをローカルで表示**:
   生成されたHTMLファイルをブラウザで開きます。以下のコマンドで簡易サーバーを起動し、ブラウザでアクセスします。
   ```bash
   cd docs
   python3 -m http.server
   ```
   その後、ブラウザで `http://localhost:8000` にアクセスします。

3. **ブラウザからPDFに変換**:
   ブラウザの印刷機能を使って、HTMLファイルをPDFに変換します。例えば、Google Chromeの場合は以下の手順です。
   - ブラウザで `http://localhost:8000` を開きます。
   - ページの右クリックメニューから「印刷」を選択します。
   - 印刷画面で「送信先」を「PDFに保存」に設定します。
   - 「保存」をクリックし、PDFファイルを保存します。

4. **コマンドラインからPDFに変換（オプション）**:
   コマンドラインツールを使ってHTMLをPDFに変換することも可能です。例えば、`wkhtmltopdf` というツールを使う方法です。
   ```bash
   wkhtmltopdf http://localhost:8000 output.pdf
   ```

以上の手順で、`tbls` で生成されたDB定義書をPDF化することができます。

---

## 👤 ユーザー
*2024/6/4 18:27:10*

wkhtmltopdf は使えないらしい npx で使える同様のサービスはないか？

---

## 🤖 アシスタント
*2024/6/4 18:27:20*

`npx` を使ってHTMLをPDFに変換するためには、`puppeteer` というライブラリを利用できます。以下の手順で進めてください。

1. **必要なパッケージのインストール**:
   まず、プロジェクトディレクトリで `puppeteer` をインストールします。
   ```bash
   npm install puppeteer
   ```

2. **スクリプトの作成**:
   `puppeteer` を使ってHTMLをPDFに変換するスクリプトを作成します。例えば、`convertToPDF.js` というファイルを作成し、以下の内容を記述します。
   ```javascript
   const puppeteer = require('puppeteer');

   (async () => {
     const browser = await puppeteer.launch();
     const page = await browser.newPage();
     await page.goto('http://localhost:8000', { waitUntil: 'networkidle2' });
     await page.pdf({ path: 'db_schema.pdf', format: 'A4' });

     await browser.close();
   })();
   ```

3. **ローカルサーバーの起動**:
   `tbls` で生成したHTMLファイルをホスティングするローカルサーバーを起動します。
   ```bash
   cd docs
   python3 -m http.server
   ```

4. **スクリプトの実行**:
   別のターミナルウィンドウを開き、`convertToPDF.js` を実行します。
   ```bash
   npx node convertToPDF.js
   ```

この手順で、`npx` を使ってHTMLをPDFに変換することができます。必要に応じてスクリプトの詳細を調整してください。

---
