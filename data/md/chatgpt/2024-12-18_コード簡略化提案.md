# ã‚³ãƒ¼ãƒ‰ç°¡ç•¥åŒ–ææ¡ˆ

Date: 2024-12-18

---

## ğŸ‘¤ User
*2024-12-18 15:59:05*

ã‚‚ã£ã¨çœç•¥ã—ã¦ã‹ã‘ãªã„ã‹

import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'package:snpit_guild_app/lib/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/guild_api_provider.dart';

part 'get_guild_info.g.dart';

@riverpod
class GetGuildInfoNotifier extends _$GetGuildInfoNotifier {
  @override
  Future&lt;GuildInfoResponseDto?&gt; build() async {
    return null;
  }

  Future&lt;void&gt; fetchGuildInfo() async {
    state = const AsyncValue.loading();
    try {
      final api = ref.read(guildApiProvider);
      final response = await api.guildControllerGetGuildInfo();
      state = AsyncValue.data(response.data);
    } on Exception catch (e, stackTrace) {
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

---

## ğŸ¤– Assistant
*2024-12-18 15:59:20*

ã‚³ãƒ¼ãƒ‰ã‚’çœç•¥ã—ã¦æ›¸ãæ–¹æ³•ã‚’è€ƒãˆã‚‹ã¨ã€ç‰¹ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„ç¹°ã‚Šè¿”ã—éƒ¨åˆ†ã‚’ç°¡æ½”ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€å¯èª­æ€§ã‚’æãªã‚ãªã„ç¯„å›²ã§ã®çœç•¥ãŒé‡è¦ã§ã™ã€‚ä»¥ä¸‹ã«çœç•¥ç‰ˆã‚’ç¤ºã—ã¾ã™ã€‚

```dart
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'guild_api_provider.dart';
part 'get_guild_info.g.dart';

@riverpod
class GetGuildInfoNotifier extends _$GetGuildInfoNotifier {
  @override
  Future<GuildInfoResponseDto?> build() async => null;

  Future<void> fetchGuildInfo() async {
    state = const AsyncValue.loading();
    try {
      state = AsyncValue.data(
        await ref.read(guildApiProvider).guildControllerGetGuildInfo().then((res) => res.data),
      );
    } catch (e, stackTrace) {
      state = AsyncValue.error(e, stackTrace);
    }
  }
}
```

### ä¿®æ­£ç‚¹:
1. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ç°¡ç•¥åŒ–**:
   - ã‚ˆãä½¿ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ‘ã‚¹éƒ¨åˆ†ï¼ˆä¾‹: `infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart`ï¼‰ã‚’çœç•¥ã€‚
   - ã“ã‚Œã«ã¯ `guild_api_provider.dart` ã®ç›¸å¯¾ãƒ‘ã‚¹ã«ä¾å­˜ã—ã¾ã™ã€‚

2. **`build` ã®ç°¡ç•¥åŒ–**:
   - ã‚·ãƒ³ãƒ—ãƒ«ãª `Future` ã‚’çŸ¢å°é–¢æ•°ã§è¡¨ç¾ã€‚

3. **`fetchGuildInfo` å†…ã® `api` å¤‰æ•°å‰Šé™¤**:
   - API ã‚³ãƒ¼ãƒ«ã‚’ç›´æ¥ä¸€è¡Œã§æ›¸ãã€‚

4. **ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ãªãƒ©ãƒ ãƒ€å¼ä½¿ç”¨**:
   - `then` ã‚’åˆ©ç”¨ã—ã¦éåŒæœŸçµæœã‚’ç›´æ¥ `state` ã«è¨­å®šã€‚

ã“ã‚Œã§ã‚³ãƒ¼ãƒ‰é‡ã‚’æ¸›ã‚‰ã—ã¤ã¤ã€æ©Ÿèƒ½æ€§ã‚„èª­ã¿ã‚„ã™ã•ã‚’ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

---
