# SwiftUI メールアドレス コピー機能

日付: 2024-10-10

---

## 👤 ユーザー
*2024/10/10 15:10:41*

SwiftUI で Text にメールアドレスを入れると勝手にリンクになってしまうのを止めたい。

またメールアドレスだけコピーできるようにしたい

 Text("・受付時間： 平日10：00～18：00\\n・E-mail： diatalk@progrit.co.jp")
                            .font(.regular14)
                            .lineSpacing(4)
                            .foregroundColor(Color.gritGray100)

---

## 🤖 アシスタント
*2024/10/10 15:10:53*

SwiftUI の `Text` で自動的にリンク化されるのを防ぐには、`Text` の `textContentType` を設定しない方法が一つです。しかし、標準の `Text` ではそれを止めることはできません。代わりに、`Text` のメールアドレス部分を `Text` から分けて、`Text` にも関わらず自動リンクを避けるために `Text` をラベルのように扱い、独自の `onTapGesture` でメールアドレスをコピーする仕組みを追加できます。

以下のように `AttributedString` と `onTapGesture` を使うと、コピー機能を実装できます。

```swift
import SwiftUI

struct ContentView: View {
    var body: some View {
        VStack(alignment: .leading, spacing: 4) {
            Text("・受付時間： 平日10：00～18：00")
                .font(.custom("Regular", size: 14))
                .foregroundColor(Color.gritGray100)
            
            Text("・E-mail：")
                .font(.custom("Regular", size: 14))
                .foregroundColor(Color.gritGray100) +
            Text("diatalk@progrit.co.jp")
                .font(.custom("Regular", size: 14))
                .foregroundColor(Color.blue) // メールアドレスの部分に色を付ける
                .underline() // 視覚的にリンクっぽく見せたい場合
                .onTapGesture {
                    UIPasteboard.general.string = "diatalk@progrit.co.jp"
                    print("メールアドレスがコピーされました")
                }
        }
        .lineSpacing(4)
    }
}
```

### ポイント:
1. メールアドレス部分にタップジェスチャーを追加し、タップされたら `UIPasteboard` にメールアドレスをコピーします。
2. メールアドレスの部分を `Text` に分けて、自動リンク化を防ぎます。
3. 視覚的には青色で下線を引くことで、リンクのように見せることも可能です（もちろん、これは任意です）。

これで、メールアドレスのリンク化を防ぎ、コピーできる機能を実装できます。

---

## 👤 ユーザー
*2024/10/10 15:11:28*

いややりたいことは色をなくしたい。
また textSelectionをつってコピーさせたい

---

## 🤖 アシスタント
*2024/10/10 15:11:44*

User prefers to remove the color for email addresses and wants to allow text selection for copying using `textSelection` in SwiftUI.

---

## 🔧 ツール
*2024/10/10 15:11:44*

Model set context updated.

---

## 🤖 アシスタント
*2024/10/10 15:11:44*

`Text` でメールアドレス部分をリンクにしないようにして、`textSelection` を使って選択・コピー可能にする方法を紹介します。`textSelection` を使うと、`Text` の部分を選択してコピーできるようになります。`Text` に対してもカラーやリンクスタイルを消すことが可能です。

以下のコード例では、メールアドレスを通常のテキストとして表示し、色やリンク効果を取り除き、コピー可能にしています。

```swift
import SwiftUI

struct ContentView: View {
    var body: some View {
        Text("・受付時間： 平日10：00～18：00\n・E-mail： diatalk@progrit.co.jp")
            .font(.custom("Regular", size: 14))
            .lineSpacing(4)
            .foregroundColor(Color.gritGray100)
            .textSelection(.enabled) // テキスト選択を有効化
    }
}
```

### ポイント:
1. **`textSelection(.enabled)`** を使うことで、テキストが選択可能になり、選択した部分をコピーできます。
2. **`foregroundColor(Color.gritGray100)`** により、すべてのテキストが統一された色で表示されます（メールアドレス部分にもリンクの青色が適用されないようになります）。
3. 自動リンク化を防ぐために、特別な設定は必要ありません。上記コードでは、リンクとして認識されることなく表示されます。

これにより、見た目がリンクではなくなり、テキスト全体を選択してコピーすることができるようになります。

---
