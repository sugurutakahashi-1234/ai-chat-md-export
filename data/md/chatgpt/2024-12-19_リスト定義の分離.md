# リスト定義の分離

日付: 2024-12-19

---

## 👤 ユーザー
*2024/12/19 16:20:07*

この画面でlistの定義を build ないでしてほしい

import 'package:flutter/material.dart';
import 'package:go\_router/go\_router.dart';
import 'package:snpit\_guild\_app/domain/screen.dart';

class MyPage extends StatelessWidget {
  const MyPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('MyPage')),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: \[
            ElevatedButton(
              onPressed: () {
                context.push(Screen.profile.path);
              },
              child: const Text('Profile'),
            ),
            Expanded(
              child: ListView.builder(
                shrinkWrap: true,
                itemCount: 10, // ダミーのデッキ数
                itemBuilder: (context, index) {
                  return ListTile(
                    title: Text('Deck $index'),
                    onTap: () {
                      context.push(Screen.deckDetail.path);
                    },
                  );
                },
              ),
            ),
          \],
        ),
      ),
    );
  }
}

---

## 🤖 アシスタント
*2024/12/19 16:20:23*

画面の `list` 定義を `build` メソッド外に移動し、状態やデータを `build` 外で管理する例を以下に示します。このようにすると、`list` の定義を `build` 外に切り出せます。例えば、`List` の内容を外部で管理する場合、`List<String>` や `List<Map<String, dynamic>>` を用意することが考えられます。

以下のコードでは、データを `List<String>` として外部に移動しています。

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:snpit_guild_app/domain/screen.dart';

class MyPage extends StatelessWidget {
  const MyPage({super.key});

  // リストデータを build メソッドの外で定義
  final List<String> deckList = List.generate(10, (index) => 'Deck $index');

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('MyPage')),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ElevatedButton(
              onPressed: () {
                context.push(Screen.profile.path);
              },
              child: const Text('Profile'),
            ),
            Expanded(
              child: ListView.builder(
                shrinkWrap: true,
                itemCount: deckList.length, // リストの長さを参照
                itemBuilder: (context, index) {
                  return ListTile(
                    title: Text(deckList[index]), // リストデータを表示
                    onTap: () {
                      context.push(Screen.deckDetail.path);
                    },
                  );
                },
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### 修正ポイント
1. **`deckList` を `build` メソッドの外で定義**:
   - `deckList` は `List<String>` 型として宣言し、`build` メソッド外でリストデータを初期化しています。
   - リストの内容は `List.generate` を用いてダミーデータを生成しています。

2. **`itemCount` と `itemBuilder` でリストを参照**:
   - `ListView.builder` 内で `itemCount` と `deckList` を利用することで、リストデータを動的に扱います。

この方法により、リストの定義を `build` メソッドから分離し、コードの可読性と再利用性を向上させます。

---

## 👤 ユーザー
*2024/12/19 16:20:37*

カメラリストという名前に変更して欲しい

---

## 🤖 アシスタント
*2024/12/19 16:20:51*

リストの名前を `cameraList` に変更したコードを以下に示します。

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:snpit_guild_app/domain/screen.dart';

class MyPage extends StatelessWidget {
  const MyPage({super.key});

  // カメラリストデータを定義
  final List<String> cameraList = List.generate(10, (index) => 'Camera $index');

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('MyPage')),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ElevatedButton(
              onPressed: () {
                context.push(Screen.profile.path);
              },
              child: const Text('Profile'),
            ),
            Expanded(
              child: ListView.builder(
                shrinkWrap: true,
                itemCount: cameraList.length, // カメラリストの長さを参照
                itemBuilder: (context, index) {
                  return ListTile(
                    title: Text(cameraList[index]), // カメラリストのデータを表示
                    onTap: () {
                      context.push(Screen.deckDetail.path);
                    },
                  );
                },
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### 修正内容
1. **リスト名を `cameraList` に変更**:
   - `deckList` を `cameraList` にリネームしました。

2. **リスト内容の変更**:
   - リスト内の各項目を `'Camera $index'` に変更しました。

これで、リストはカメラ関連の名前で扱われ、より直感的に管理できるようになります。

---

## 👤 ユーザー
*2024/12/19 16:22:38*

Hookコンシューマーウィジェットにして buildないでcameraListを定義して欲しい

---

## 🤖 アシスタント
*2024/12/19 16:22:52*

`HookConsumerWidget` を使用し、`cameraList` を `build` メソッド外に定義したコード例を以下に示します。この変更により、`HookConsumerWidget` の利点を活かしつつ、リスト定義を `build` メソッドの外に移動しています。

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/screen.dart';

class MyPage extends HookConsumerWidget {
  const MyPage({super.key});

  // カメラリストデータを定義
  final List<String> cameraList = List.generate(10, (index) => 'Camera $index');

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('MyPage')),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ElevatedButton(
              onPressed: () {
                context.push(Screen.profile.path);
              },
              child: const Text('Profile'),
            ),
            Expanded(
              child: ListView.builder(
                shrinkWrap: true,
                itemCount: cameraList.length, // カメラリストの長さを参照
                itemBuilder: (context, index) {
                  return ListTile(
                    title: Text(cameraList[index]), // カメラリストのデータを表示
                    onTap: () {
                      context.push(Screen.deckDetail.path);
                    },
                  );
                },
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### 修正内容
1. **`HookConsumerWidget` の導入**:
   - `StatelessWidget` を `HookConsumerWidget` に置き換え、Riverpod フックを活用できるように変更しました。

2. **`cameraList` を `build` の外に定義**:
   - `cameraList` はクラスプロパティとして定義し、`build` メソッドの外に配置しました。

3. **`WidgetRef` を引数に追加**:
   - `build` メソッドに `WidgetRef ref` を追加しましたが、今回のコードでは未使用です。必要に応じて、状態管理に活用できます。

このアプローチでは、カメラリストが固定データの場合や、状態管理が不要な場合に `build` メソッドの外に置いてコードをシンプルに保つことができます。

---
