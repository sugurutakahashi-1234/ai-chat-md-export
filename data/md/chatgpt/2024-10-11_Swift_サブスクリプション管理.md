# Swift ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†

æ—¥ä»˜: 2024-10-11

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/10/11 18:24:42*

Swift ã§\[Subscription\]

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/10/11 18:24:57*

Swiftã§ã®`[Subscription]`ã«é–¢ã™ã‚‹è³ªå•ã‚„å®Ÿè£…ã«ãŠã„ã¦ã¯ã€`Subscription`ãŒã©ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿å‹ãªã®ã‹ã€ã‚ã‚‹ã„ã¯ã©ã®ã‚ˆã†ã«æ‰±ã„ãŸã„ã‹ã«ã‚ˆã‚Šç­”ãˆãŒå¤‰ã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ã„ãã¤ã‹ã®å…·ä½“çš„ãªåˆ©ç”¨ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

### 1. StoreKitã‚’ä½¿ç”¨ã—ãŸã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†
StoreKitãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚¢ãƒ—ãƒªå†…èª²é‡‘ï¼‰ã‚’ç®¡ç†ã™ã‚‹å ´åˆã€`Subscription`ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†å…¸å‹çš„ãªã‚±ãƒ¼ã‚¹ã¨ã—ã¦`StoreKit.Transaction`ãŒå­˜åœ¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€è¤‡æ•°ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆã€ãã‚Œã‚‰ã‚’é…åˆ—`[SubscriptionTransaction]`ã¨ã—ã¦æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```swift
struct SubscriptionTransaction {
    let id: String
    let purchaseDate: Date
    let revocationDate: Date?
    let renewalStatus: String
}

let subscriptions: [SubscriptionTransaction] = [
    SubscriptionTransaction(id: "001", purchaseDate: Date(), revocationDate: nil, renewalStatus: "active"),
    SubscriptionTransaction(id: "002", purchaseDate: Date().addingTimeInterval(-86400), revocationDate: Date(), renewalStatus: "revoked")
]
```

### 2. ã‚«ã‚¹ã‚¿ãƒ ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«
ã‚‚ã—ç‹¬è‡ªã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã—ã¦ã€ãã‚Œã‚’é…åˆ—ã¨ã—ã¦æ‰±ã„ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ãª`Subscription`æ§‹é€ ä½“ã‚’å®šç¾©ã§ãã¾ã™ã€‚

```swift
struct Subscription {
    let id: String
    let isActive: Bool
    let startDate: Date
    let endDate: Date?
}

let subscriptions: [Subscription] = [
    Subscription(id: "sub1", isActive: true, startDate: Date(), endDate: nil),
    Subscription(id: "sub2", isActive: false, startDate: Date().addingTimeInterval(-86400), endDate: Date())
]
```

### 3. ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
`[Subscription]`ã‚’æ‰±ã†éš›ã«ã¯ã€ä¾‹ãˆã°ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ã¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€æ¬¡ã®ã‚ˆã†ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```swift
let activeSubscriptions = subscriptions.filter { $0.isActive }
```

### 4. ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ãƒˆ
é…åˆ—ã®ä¸­ã§ç‰¹å®šã®åŸºæº–ã«åŸºã¥ã„ã¦ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€é–‹å§‹æ—¥ã§ã‚½ãƒ¼ãƒˆã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```swift
let sortedSubscriptions = subscriptions.sorted { $0.startDate < $1.startDate }
```

ã“ã®ã‚ˆã†ã«ã€`[Subscription]`ã®å–ã‚Šæ‰±ã„ã¯ã€ã‚¢ãƒ—ãƒªã®è¦ä»¶ã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«å¿œã˜ã¦ç•°ãªã‚Šã¾ã™ã€‚ã‚‚ã—ã€å…·ä½“çš„ãªã‚·ãƒŠãƒªã‚ªã‚„å•é¡Œç‚¹ãŒã‚ã‚Œã°ã€ã‚ˆã‚Šè©³ç´°ãªã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã§ãã¾ã™ï¼

---
