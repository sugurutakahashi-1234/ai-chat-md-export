# Flutter å¤šè¨€èªå¯¾å¿œ

Date: 2025-01-15

---

## ğŸ‘¤ User
*2025-01-15 12:40:44*

flutter å¤šè¨€èªã‚¢ãƒ—ãƒªå¯¾å¿œ

---

## ğŸ¤– Assistant
*2025-01-15 12:41:10*

Flutterã§ã‚¢ãƒ—ãƒªã‚’å¤šè¨€èªå¯¾å¿œã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªæ‰‹é †ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚Flutterã¯`flutter_localizations`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨`intl`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å¤šè¨€èªå¯¾å¿œã‚’ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚

---

### 1. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã¾ãšã€`pubspec.yaml`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```yaml
dependencies:
  flutter_localizations:
    sdk: flutter
  intl: ^0.18.0 # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„
```

ãã®å¾Œã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
flutter pub get
```

---

### 2. `MaterialApp`ã§ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–
`MaterialApp`ã«å¿…è¦ãªè¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_localizations/flutter_localizations.dart';
import 'generated/l10n.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'å¤šè¨€èªå¯¾å¿œã‚¢ãƒ—ãƒª',
      localizationsDelegates: [
        S.delegate, // è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: S.delegate.supportedLocales, // å¯¾å¿œã™ã‚‹ãƒ­ã‚±ãƒ¼ãƒ«
      locale: const Locale('ja'), // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªã‚’è¨­å®šï¼ˆä¾‹: æ—¥æœ¬èªï¼‰
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(S.of(context).helloWorld),
      ),
      body: Center(
        child: Text(S.of(context).welcomeMessage),
      ),
    );
  }
}
```

---

### 3. `intl`ã§ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
Flutterã®æ¨™æº–ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã‚’ç®¡ç†ã—ã¾ã™ã€‚

#### a. `arb`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
`lib/l10n`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®ã‚ˆã†ãª`.arb`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

- **intl_en.arb**
  ```json
  {
    "helloWorld": "Hello World",
    "welcomeMessage": "Welcome to Flutter Localization"
  }
  ```

- **intl_ja.arb**
  ```json
  {
    "helloWorld": "ã“ã‚“ã«ã¡ã¯ä¸–ç•Œ",
    "welcomeMessage": "Flutterã®å¤šè¨€èªå¯¾å¿œã¸ã‚ˆã†ã“ã"
  }
  ```

#### b. `flutter pub get`ã§ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

```bash
flutter gen-l10n
```

ã“ã‚Œã«ã‚ˆã‚Šã€`lib/generated/l10n.dart`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

---

### 4. å‹•ä½œç¢ºèª
ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã—ã€`MaterialApp`ã®`locale`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã—ã¦å„è¨€èªã®è¡¨ç¤ºã‚’ç¢ºèªã—ã¾ã™ã€‚

```dart
locale: const Locale('en'), // è‹±èª
locale: const Locale('ja'), // æ—¥æœ¬èª
```

---

### 5. ã‚·ã‚¹ãƒ†ãƒ è¨€èªã«å¿œã˜ãŸåˆ‡ã‚Šæ›¿ãˆ
`locale`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’çœç•¥ã™ã‚‹ã¨ã€ã‚·ã‚¹ãƒ†ãƒ ã®è¨€èªè¨­å®šã«å¾“ã£ã¦è¨€èªãŒè‡ªå‹•ã§åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚

```dart
locale: null, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆã‚·ã‚¹ãƒ†ãƒ è¨€èªã«å¿œã˜ã¦å¤‰æ›´ï¼‰
```

---

### 6. UIã®å‹•çš„è¨€èªåˆ‡ã‚Šæ›¿ãˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
ã‚¢ãƒ—ãƒªå†…ã§è¨€èªã‚’å‹•çš„ã«å¤‰æ›´ã—ãŸã„å ´åˆã€`Locale`ã‚’`StatefulWidget`ã§ç®¡ç†ã—ã¾ã™ã€‚

#### a. `ChangeNotifier`ã§ãƒ­ã‚±ãƒ¼ãƒ«ã‚’ç®¡ç†
```dart
class LocaleProvider with ChangeNotifier {
  Locale _locale = const Locale('ja');

  Locale get locale => _locale;

  void setLocale(Locale locale) {
    _locale = locale;
    notifyListeners();
  }
}
```

#### b. ã‚¢ãƒ—ãƒªã§ä½¿ç”¨
```dart
void main() {
  runApp(
    ChangeNotifierProvider(
      create: (_) => LocaleProvider(),
      child: MyApp(),
    ),
  );
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final localeProvider = Provider.of<LocaleProvider>(context);

    return MaterialApp(
      locale: localeProvider.locale,
      localizationsDelegates: [
        S.delegate,
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: S.delegate.supportedLocales,
      home: MyHomePage(),
    );
  }
}
```

---

ã“ã‚Œã§ã€Flutterã‚¢ãƒ—ãƒªã‚’å¤šè¨€èªå¯¾å¿œã•ã›ã‚‹åŸºæœ¬çš„ãªè¨­å®šãŒå®Œäº†ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã€`intl`ã‚’ä½¿ã£ãŸæ—¥ä»˜ã‚„æ•°å€¤ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã‚‚å¯¾å¿œã§ãã¾ã™ã€‚

---
