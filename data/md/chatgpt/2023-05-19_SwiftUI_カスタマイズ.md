# SwiftUI カスタマイズ

Date: 2023-05-19

---

## 👤 User
*2023-05-20 00:33:08*

SwiftUIでステータスバーとナビゲーションバーをオレンジに統一したい。また、ナビゲーションのタイトルは白にしたい。これらを実装して欲しい

---

## 🤖 Assistant
*2023-05-20 00:34:12*

SwiftUIではUIのカスタマイズにはいくつかの制限がありますが、以下の方法で求めている結果を得られます。

まず、ステータスバーの色を変更することは直接的にはSwiftUIではサポートされていません。しかし、UIKitとSwiftUIを組み合わせることで可能となります。ここではUIApplicationを使用してステータスバーの背景色を変更します。

次に、ナビゲーションバーとナビゲーションバーのタイトルの色を変更するためには、`.navigationBarTitleDisplayMode`、`.navigationBarTitle`、そして`.navigationBarItems`を使用します。

以下に具体的なコードを示します:

```swift
import SwiftUI

struct ContentView: View {
    init() {
        let coloredNavAppearance = UINavigationBarAppearance()
        coloredNavAppearance.configureWithOpaqueBackground()
        coloredNavAppearance.backgroundColor = .orange
        coloredNavAppearance.titleTextAttributes = [.foregroundColor: UIColor.white]
        UINavigationBar.appearance().standardAppearance = coloredNavAppearance
        UINavigationBar.appearance().compactAppearance = coloredNavAppearance
        UINavigationBar.appearance().scrollEdgeAppearance = coloredNavAppearance

        // This will set the status bar color.
        let statusBar = UIView()
        statusBar.backgroundColor = .orange
        if let keyWindow = UIApplication.shared.windows.filter({$0.isKeyWindow}).first,
           let statusBarFrame = keyWindow.windowScene?.statusBarManager?.statusBarFrame {
            statusBar.frame = statusBarFrame
            keyWindow.addSubview(statusBar)
        }
    }

    var body: some View {
        NavigationView {
            Text("Hello, SwiftUI!")
                .navigationBarTitleDisplayMode(.inline)
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードは、`UINavigationBarAppearance`を使用してナビゲーションバーの見た目をカスタマイズし、ナビゲーションバーの背景色とタイトルの色を設定します。また、ステータスバーの色を変更するために、UIViewをステータスバーの上に追加しています。最後に、`NavigationView`内で`navigationBarTitleDisplayMode(.inline)`を使用してナビゲーションタイトルの表示モードを設定します。

ただし、注意すべき点としてこの方法はSwiftUIのフレームワーク内で直接的にサポートされていないため、予期しない挙動をする可能性があります。また、将来のアップデートで動作しなくなる可能性もあります。

本当にカスタマイズが必要な場合は、SwiftUIとUIKitのブリッジを使用して、より詳細な制御を可能にすることも考えられます。

---

## 👤 User
*2023-05-20 00:34:49*

ごめん、ステータスバーの背景とナビゲーションバーの背景をオレンジにしたいだけなんだ

---

## 🤖 Assistant
*2023-05-20 00:35:45*

ステータスバーの色を変更する機能はSwiftUIではまだ提供されていません。しかし、あなたがナビゲーションバーの背景色をオレンジに変更したいという要望は、以下のようにSwiftUIとUIKitを組み合わせて実装することができます:

```swift
import SwiftUI

struct ContentView: View {
    init() {
        let orangeNavBarAppearance = UINavigationBarAppearance()
        orangeNavBarAppearance.configureWithOpaqueBackground()
        orangeNavBarAppearance.backgroundColor = .orange
        UINavigationBar.appearance().standardAppearance = orangeNavBarAppearance
        UINavigationBar.appearance().compactAppearance = orangeNavBarAppearance
        UINavigationBar.appearance().scrollEdgeAppearance = orangeNavBarAppearance
    }

    var body: some View {
        NavigationView {
            Text("Hello, SwiftUI!")
                .navigationBarTitleDisplayMode(.inline)
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードは、`UINavigationBarAppearance`を使用してナビゲーションバーの見た目をカスタマイズし、その背景色をオレンジに設定します。そして、ナビゲーションバーの見た目をそれぞれの状況（標準、コンパクト、スクロールエッジ）に適用します。

ただし、この方法にはいくつかの制約があります。一つ目は、これはUIKitの機能を利用しているため、SwiftUIがUIKitとの互換性を保証するかは不明です。また、二つ目の制約として、この方法はiOS 13.0以降でしか動作しません。

ステータスバーの背景色を変更するには、低レベルのAPIを使って手動でカスタマイズする必要がありますが、それはApp Storeのガイドライン違反となる可能性があるため、推奨されていません。

---

## 👤 User
*2023-05-20 01:31:06*

ちなみに LinearGradient 型のグラデーションをナビゲーションバーの背景に設定したいのだけれどもどうすればいい？

---

## 🤖 Assistant
*2023-05-20 01:32:20*

SwiftUIの現在のバージョン（2021年9月時点）では、ナビゲーションバーの背景に直接的にグラデーションを設定する方法はありません。ナビゲーションバーは、UIKitを基盤として作成されているため、そのカスタマイズには限定的な可能性しかありません。

しかしながら、グラデーションを用いたナビゲーションバーのようなビジュアルを達成するために、ZStackを用いてカスタムのビューを作成するという方法があります。以下に示すように、グラデーションの上に他のビューを重ねることで、グラデーションがあるようなナビゲーションバーを作り出すことができます：

```swift
import SwiftUI

struct ContentView: View {
    var body: some View {
        ZStack {
            // Here we create a gradient background
            LinearGradient(gradient: Gradient(colors: [.orange, .yellow]), startPoint: .top, endPoint: .bottom)
                .ignoresSafeArea()

            // On top of the gradient we place our content inside a NavigationView
            NavigationView {
                ScrollView {
                    // Your content here
                    Text("Hello, SwiftUI!")
                }
                .background(Color.clear) // This will make the background of the ScrollView clear, allowing the gradient to be seen
                .navigationBarTitle("Your Title", displayMode: .inline)
            }
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

この方法では、実際のナビゲーションバーには影響を与えず、ZStackを使ってビジュアル的にそれらしく見せることができます。しかしながら、完全なナビゲーションバーの機能を実現することはできません。

本当にカスタマイズが必要な場合は、SwiftUIとUIKitのブリッジを使用して、より詳細な制御を可能にすることも考えられます。ただし、その場合でもUINavigationBarの背景に直接グラデーションを設定することはできません。

---

## 👤 User
*2023-05-20 01:52:08*

メニューバーのものの色を白にしたいんだけど

---

## 🤖 Assistant
*2023-05-20 01:52:51*

ナビゲーションバー（メニューバー）のタイトルとアイテムの色を変更するには、`.foregroundColor()`を使用できます。以下のコードでは、タイトルとナビゲーションバーアイテムの色が白に設定されています。

```swift
import SwiftUI

struct ContentView: View {
    init() {
        let orangeNavBarAppearance = UINavigationBarAppearance()
        orangeNavBarAppearance.configureWithOpaqueBackground()
        orangeNavBarAppearance.backgroundColor = .orange
        orangeNavBarAppearance.titleTextAttributes = [.foregroundColor: UIColor.white]
        orangeNavBarAppearance.largeTitleTextAttributes = [.foregroundColor: UIColor.white]
        UINavigationBar.appearance().standardAppearance = orangeNavBarAppearance
        UINavigationBar.appearance().compactAppearance = orangeNavBarAppearance
        UINavigationBar.appearance().scrollEdgeAppearance = orangeNavBarAppearance
    }

    var body: some View {
        NavigationView {
            Text("Hello, SwiftUI!")
                .foregroundColor(.white)
                .navigationBarTitleDisplayMode(.inline)
                .toolbar {
                    ToolbarItem(placement: .navigationBarLeading) {
                        Button(action: {}) {
                            Image(systemName: "square.and.arrow.up")
                                .foregroundColor(.white)
                        }
                    }
                }
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

ここでは、`UINavigationBarAppearance`を使ってナビゲーションバーのタイトルとアイテムの色を白に設定しています。これにより、ナビゲーションバー全体（タイトルを含む）がオレンジ色の背景に白色のテキストとアイテムで表示されます。また、`foregroundColor(.white)`を使ってテキストの色を白に設定し、`toolbar`と`ToolbarItem`を使ってナビゲーションバーにアイテム（ここではアップロードアイコン）を追加しています。そしてそのアイテムの色も白に設定しています。

---
