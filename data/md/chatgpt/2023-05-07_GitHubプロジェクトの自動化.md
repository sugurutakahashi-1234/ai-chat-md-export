# GitHubプロジェクトの自動化

Date: 2023-05-07

---

## 👤 User
*2023-05-08 00:05:32*

https://github.com/marketplace/actions/github-project-automation をhttps://github.com/users/suguruTakahashi-1234/projects/1 でつかいたいんだけどyamlファイルを作製して

---

## 🤖 Assistant
*2023-05-08 00:06:26*

すぐにGitHub Actionsを使用して、プロジェクトを自動化するためのyamlファイルを作成しましょう。以下に、GitHub Project Automationのyamlファイルの例を示します。この例では、プロジェクトカードが作成されると、新しいIssueまたはPull Requestに自動的に追加されます。

1. まず、リポジトリのルートディレクトリに`.github`フォルダを作成します。
2. 次に、`.github`フォルダ内に`workflows`フォルダを作成します。
3. そして、`workflows`フォルダ内に`project-automation.yml`ファイルを作成し、以下の内容を記述します：

```yaml
name: Project Automation

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  automate-project:
    runs-on: ubuntu-latest
    steps:
    - name: Move new issue to project
      if: github.event_name == 'issues'
      uses: alex-page/github-project-automation@v1.4.0
      with:
        project-url: "https://github.com/users/suguruTakahashi-1234/projects/1"
        column-name: "To do"
        repo-token: ${{ secrets.GITHUB_TOKEN }}

    - name: Move new pull request to project
      if: github.event_name == 'pull_request'
      uses: alex-page/github-project-automation@v1.4.0
      with:
        project-url: "https://github.com/users/suguruTakahashi-1234/projects/1"
        column-name: "In progress"
        repo-token: ${{ secrets.GITHUB_TOKEN }}
```

このyamlファイルは、新しいIssueが開かれたときに「To do」カラムに追加し、新しいPull Requestが開かれたときに「In progress」カラムに追加します。`project-url`と`column-name`を変更して、自分のプロジェクトとカラム名に合わせてください。

これで、GitHub Actionsがリポジトリに追加され、プロジェクトが自動化されるようになります。

---

## 👤 User
*2023-05-08 00:08:09*

v1.4.0 ではなくて最新のバージョンをつかいたい

---

## 🤖 Assistant
*2023-05-08 00:09:01*

もちろんです。最新のバージョンを使用するには、GitHub Actionsのリリースページにアクセスし、最新のバージョン番号を確認してください。URLは以下のとおりです：

https://github.com/alex-page/github-project-automation/releases

最新のバージョン番号を確認したら、`project-automation.yml`ファイルの`uses`行でバージョン番号を更新してください。例えば、最新のバージョンが`v1.5.0`の場合、以下のようになります：

```yaml
name: Project Automation

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  automate-project:
    runs-on: ubuntu-latest
    steps:
    - name: Move new issue to project
      if: github.event_name == 'issues'
      uses: alex-page/github-project-automation@v1.5.0
      with:
        project-url: "https://github.com/users/suguruTakahashi-1234/projects/1"
        column-name: "To do"
        repo-token: ${{ secrets.GITHUB_TOKEN }}

    - name: Move new pull request to project
      if: github.event_name == 'pull_request'
      uses: alex-page/github-project-automation@v1.5.0
      with:
        project-url: "https://github.com/users/suguruTakahashi-1234/projects/1"
        column-name: "In progress"
        repo-token: ${{ secrets.GITHUB_TOKEN }}
```

ここで、`uses`行のバージョン番号（`v1.5.0`）が最新のものに更新されています。これで最新のバージョンを使用するようにGitHub Actionsが設定されます。

---

## 👤 User
*2023-05-08 00:25:03*

https://github.com/marketplace/actions/github-project-automation を読むとPersonal access token を作成しなければならないかもしれない。

どのよううに作成すればいいのか？

---

## 🤖 Assistant
*2023-05-08 00:26:14*

Personal Access Token (PAT)は、あなたのアカウントに対するアクセス権を持つトークンです。GitHub Actionsで使用するPATを作成するには、以下の手順に従ってください：

1. まず、GitHubにログインして、右上のアバターアイコンをクリックします。
2. ドロップダウンメニューから`Settings`を選択してください。
3. 左側のメニューから`Developer settings`をクリックします。
4. `Personal access tokens`をクリックし、`Generate new token`ボタンをクリックします。
5. トークンの説明を入力し、トークンに必要な権限を選択します。GitHub Project Automationの場合、`repo`（リポジトリへのフルアクセス）権限が必要です。その他の必要な権限がある場合は、それらも選択してください。
6. `Generate token`ボタンをクリックして、新しいトークンを生成します。

**注意：** トークンが生成されたら、それを安全な場所に保存してください。トークンは生成後に1度だけ表示されます。もし紛失した場合、新しいトークンを生成する必要があります。

PATをGitHub ActionsのSecretsに追加する方法：

1. トークンを生成した後、リポジトリに移動して、`Settings`タブをクリックします。
2. 左側のメニューから`Secrets`を選択し、`New repository secret`ボタンをクリックします。
3. Secretの名前と値を入力します。例えば、名前を`GH_PERSONAL_ACCESS_TOKEN`とし、値には先ほど生成したトークンを貼り付けます。
4. `Add secret`ボタンをクリックして保存します。

これで、PATがリポジトリのSecretsに保存されました。yamlファイル内でPATを使用する場合、以下のように`repo-token`の値を更新してください：

```yaml
repo-token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}
```

これにより、GitHub ActionsはPATを使用してリポジトリにアクセスし、プロジェクトの自動化を実行できます。

---
