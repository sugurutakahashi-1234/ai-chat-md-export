# モデル番号を取得

日付: 2023-06-02

---

## 👤 ユーザー
*2023/6/2 19:51:52*

SwiftのコードでiPhoneやiPadのモデル番号を取る方法を教えて欲しい

---

## 🤖 アシスタント
*2023/6/2 19:52:43*

iOSデバイスのモデル名を取得するためには、`UIDevice`というクラスが提供されていますが、これはデバイスの種類（iPhone、iPadなど）しか取得できません。具体的なモデル番号（iPhone 6、iPhone 6S、iPad Proなど）を取得するには、`sys/utsname.h`という低レベルAPIを使用する方法があります。

以下にその方法を示します:

```swift
import UIKit
import Darwin.sys.utsname

public extension UIDevice {
    var modelName: String {
        var systemInfo = utsname()
        uname(&systemInfo)
        let machineMirror = Mirror(reflecting: systemInfo.machine)
        let identifier = machineMirror.children.reduce("") { identifier, element in
            guard let value = element.value as? Int8, value != 0 else { return identifier }
            return identifier + String(UnicodeScalar(UInt8(value)))
        }
        
        func mapToDevice(identifier: String) -> String {
            #if os(iOS)
            let deviceMap = [
                "iPod5,1": "iPod Touch 5",
                "iPod7,1": "iPod Touch 6",
                "iPod9,1": "iPod Touch 7",
                "iPhone3,1": "iPhone 4",
                "iPhone3,2": "iPhone 4",
                "iPhone3,3": "iPhone 4",
                "iPhone4,1": "iPhone 4S",
                "iPhone5,1": "iPhone 5",
                "iPhone5,2": "iPhone 5 (GSM+CDMA)",
                "iPhone5,3": "iPhone 5c (GSM)",
                "iPhone5,4": "iPhone 5c (GSM+CDMA)",
                "iPhone6,1": "iPhone 5s (GSM)",
                "iPhone6,2": "iPhone 5s (GSM+CDMA)",
                "iPhone7,2": "iPhone 6",
                "iPhone7,1": "iPhone 6 Plus",
                "iPhone8,1": "iPhone 6s",
                "iPhone8,2": "iPhone 6s Plus",
                "iPhone8,4": "iPhone SE",
                "iPhone9,1": "iPhone 7",
                "iPhone9,3": "iPhone 7",
                "iPhone9,2": "iPhone 7 Plus",
                "iPhone9,4": "iPhone 7 Plus",
                "iPhone10,1": "iPhone 8",
                "iPhone10,4": "iPhone 8",
                "iPhone10,2": "iPhone 8 Plus",
                "iPhone10,5": "iPhone 8 Plus",
                "iPhone10,3": "iPhone X",
                "iPhone10,6": "iPhone X",
                "iPhone11,2": "iPhone XS",
                "iPhone11,4": "iPhone XS Max",
                "iPhone11,6": "iPhone XS Max",
                "iPhone11,8": "iPhone XR",
                "iPhone12,1": "iPhone 11",
                "iPhone12,3": "iPhone 11 Pro",
                "iPhone12,5": "iPhone 11 Pro Max",
                "iPhone12,8": "iPhone SE (2nd generation)",
                "iPhone13,1": "iPhone 12 Mini",
                "iPhone13,2": "iPhone 12",
                "iPhone13,3": "

---

## 👤 ユーザー
*2023/6/2 19:52:51*

つづき

---

## 🤖 アシスタント
*2023/6/2 19:53:04*

"iPhone 12 Pro",
                "iPhone13,4": "iPhone 12 Pro Max",
                // 注意: ここから先は2021年9月までにリリースされたデバイスのモデル識別子です。それ以降にリリースされたデバイスについては適宜追加してください。
                "iPad2,1": "iPad 2",
                "iPad2,2": "iPad 2",
                "iPad2,3": "iPad 2",
                "iPad2,4": "iPad 2",
                "iPad3,1": "iPad (3rd generation)",
                "iPad3,2": "iPad (3rd generation)",
                "iPad3,3": "iPad (3rd generation)",
                "iPad3,4": "iPad (4th generation)",
                "iPad3,5": "iPad (4th generation)",
                "iPad3,

---

## 🤖 アシスタント
*2023/6/2 19:53:26*

"6": "iPad (4th generation)",
                "iPad6,11": "iPad (5th generation)",
                "iPad6,12": "iPad (5th generation)",
                "iPad7,5": "iPad (6th generation)",
                "iPad7,6": "iPad (6th generation)",
                "iPad7,11": "iPad (7th generation)",
                "iPad7,12": "iPad (7th generation)",
                "iPad11,6": "iPad (8th generation

---

## 👤 ユーザー
*2023/6/2 19:59:58*

モデル番号を取得するようなライブラリを

---

## 🤖 アシスタント
*2023/6/2 20:00:37*

確かに、iOSデバイスのモデル名を取得するためのライブラリがいくつかあります。これらのライブラリを使用すると、モデル名のマッピングを自分で管理する必要がなくなります。

1つの例としては「DeviceKit」があります。

以下に、DeviceKitをインストールして使用する手順を示します。

1. [CocoaPods](https://cocoapods.org/) を使用して DeviceKit をプロジェクトに追加します。

プロジェクトの Podfile に以下の行を追加してください：

```ruby
pod 'DeviceKit'
```

その後、ターミナルで `pod install` を実行します。

2. Swift ファイルで DeviceKit をインポートし、次のようにデバイスモデルを取得します：

```swift
import DeviceKit

let device = Device.current
print(device.description)  // "iPhone 6 Plus"
```

DeviceKit ライブラリは、現在使用中のデバイスのモデル名だけでなく、デバイスが特定のモデルのグループ（例えば、「simulator」、「Touch ID 対応デバイス」、「Face ID 対応デバイス」など）に属しているかどうかを確認する機能も提供しています。これらの機能は、特定のデバイス機能を必要とするアプリケーションの場合に特に有用です。

ただし、ライブラリを使用する場合は、ライブラリが最新のデバイスモデルをサポートしているか定期的に確認する必要があります。ライブラリが古い場合、新しいモデルのデバイス名を正しく取得できない可能性があります。

---

## 👤 ユーザー
*2023/6/2 20:01:24*

モデル番号が取得したい ユニークなものです。

---

## 🤖 アシスタント
*2023/6/2 20:01:57*

デバイスの一意なモデル番号を取得するためには、低レベルAPI `sys/utsname.h`を使用します。その際、デバイスの詳細なモデル名（例えば "iPhone7,2"）が取得できます。

以下にその手順を示します。

```swift
import UIKit
import Darwin.sys.utsname

public extension UIDevice {
    var modelIdentifier: String {
        var systemInfo = utsname()
        uname(&systemInfo)
        let machineMirror = Mirror(reflecting: systemInfo.machine)
        return machineMirror.children.reduce(into: "") { identifier, element in
            guard let value = element.value as? Int8, value != 0 else { return }
            identifier.append(String(UnicodeScalar(UInt8(value))))
        }
    }
}
```

この拡張を使って、次のようにモデル識別子を取得することができます。

```swift
let modelIdentifier = UIDevice.current.modelIdentifier
print(modelIdentifier)  // "iPhone7,2" など
```

このコードは、デバイスのモデル識別子（例えば "iPhone7,2"）をそのまま取得します。ただし、この識別子は Apple の公式ドキュメントには記載されていないため、どのモデルに対応しているかを確認するためには第三者が作成したリストを参照する必要があります。

注意点として、この方法で取得できるのはデバイスのハードウェアモデル識別子であり、個々のデバイスを一意に識別するもの（例えばシリアル番号やUUID）ではない点を理解しておいてください。

---
