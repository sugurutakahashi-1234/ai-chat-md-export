# Column„Ç®„É©„Éº‰øÆÊ≠£ÊñπÊ≥ï

Êó•‰ªò: 2024-12-25

---

## üë§ „É¶„Éº„Ç∂„Éº
*2024/12/25 11:31:07*

GuildPage„Å´„Å§„ÅÑ„Å¶return Column( „ÅÆÈÉ®ÂàÜ„Åß„Ç®„É©„Éº„Å´„Å™„Å£„Å¶„Åó„Åæ„Å£„Å¶„ÅÑ„Çã„ÄÇ
ÂéüÂõ†„ÇíË™ø„Åπ„Åü„ÅÑ

return Column(
                  children: [
                    Container(
                      padding: const EdgeInsets.all(16),
                      child: Column(
                        children: [
                          Text(
                            guildInfo.guildName ?? '',
                          ),
                          Text(
                            'ID: ${guildInfo.guildId}',
                          ),
                          const SizedBox(height: 16),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                            children: [
                              _buildStatColumn('Search', '3,879', 'Q'),
                              _buildStatColumn('Attack', '1,230', 'E'),
                              _buildStatColumn('Luck', '893', 'L'),
                              _buildStatColumn('Defence', '905', 'B'),
                            ],
                          ),
                        ],
                      ),
                    ),
                    TabBar(
                      indicatorColor: Theme.of(context).primaryColor,
                      labelColor: Theme.of(context).primaryColor,
                      unselectedLabelColor: Colors.grey,
                      tabs: const [
                        Tab(text: 'Members'),
                        Tab(text: 'Spots'),
                      ],
                      onTap: (index) {
                        selectedTab.value = index;
                      },
                    ),
                    Expanded(
                      child: selectedTab.value == 0
                          ? ListView.builder(
                              itemCount: guildInfo.guildMembers?.length ?? 0,
                              itemBuilder: (context, index) {
                                final member = guildInfo.guildMembers![index];
                                return ListTile(
                                  leading: CircleAvatar(
                                    backgroundColor: Colors.grey[300],
                                    child: Text(
                                      member.userId?.substring(0, 2) ?? '',
                                    ),
                                  ),
                                  title: Text(member.userId ?? ''),
                                  subtitle: const Row(
                                    children: [
                                      Icon(Icons.search),
                                      SizedBox(width: 8),
                                      Icon(Icons.shield),
                                    ],
                                  ),
                                );
                              },
                            )
                          : const Center(
                              child: Text('Spots tab content here'),
                            ),
                    ),
                  ],
                );



import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/screen.dart';
import 'package:snpit_guild_app/gen/assets.gen.dart';
import 'package:snpit_guild_app/presentation/design_token/color_token.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/guilds/get_guild_info.dart';
import 'package:snpit_guild_app/presentation/providers/on_created_guild.dart';

class GuildPage extends HookConsumerWidget {
  const GuildPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final selectedTab = useState(0);
    final guildInfoAsync = ref.watch(getMyGuildNotifierProvider);

    useEffect(
      () {
        Future.microtask(() {
          ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        });
        return null;
      },
      [],
    );

    // „ÇÆ„É´„Éâ„Åå‰ΩúÊàê„Åï„Çå„ÅüÂ†¥Âêà„ÇÆ„É´„ÉâÊÉÖÂ†±„ÇíÂèñÂæó„Åô„Çã
    ref.listen&lt;bool&gt;(
      onCreatedGuildNotifierProvider,
      (_, next) async {
        if (next) {
          await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        }
      },
    );

    return Scaffold(
      body: RefreshIndicator(
        onRefresh: () async {
          await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        },
        child: SingleChildScrollView(
          physics: const AlwaysScrollableScrollPhysics(),
          child: guildInfoAsync.when(
            data: (guildInfo) {
              if (guildInfo != null) {
                // return const Center(
                //   child: Text('Guild Info'),
                // );
                // TODO: „ÇÆ„É´„ÉâÊÉÖÂ†±„ÇíË°®Á§∫„Åô„Çã
                return Column(
                  children: [
                    Container(
                      padding: const EdgeInsets.all(16),
                      child: Column(
                        children: [
                          Text(
                            guildInfo.guildName ?? '',
                          ),
                          Text(
                            'ID: ${guildInfo.guildId}',
                          ),
                          const SizedBox(height: 16),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                            children: [
                              _buildStatColumn('Search', '3,879', 'Q'),
                              _buildStatColumn('Attack', '1,230', 'E'),
                              _buildStatColumn('Luck', '893', 'L'),
                              _buildStatColumn('Defence', '905', 'B'),
                            ],
                          ),
                        ],
                      ),
                    ),
                    TabBar(
                      indicatorColor: Theme.of(context).primaryColor,
                      labelColor: Theme.of(context).primaryColor,
                      unselectedLabelColor: Colors.grey,
                      tabs: const [
                        Tab(text: 'Members'),
                        Tab(text: 'Spots'),
                      ],
                      onTap: (index) {
                        selectedTab.value = index;
                      },
                    ),
                    Expanded(
                      child: selectedTab.value == 0
                          ? ListView.builder(
                              itemCount: guildInfo.guildMembers?.length ?? 0,
                              itemBuilder: (context, index) {
                                final member = guildInfo.guildMembers![index];
                                return ListTile(
                                  leading: CircleAvatar(
                                    backgroundColor: Colors.grey[300],
                                    child: Text(
                                      member.userId?.substring(0, 2) ?? '',
                                    ),
                                  ),
                                  title: Text(member.userId ?? ''),
                                  subtitle: const Row(
                                    children: [
                                      Icon(Icons.search),
                                      SizedBox(width: 8),
                                      Icon(Icons.shield),
                                    ],
                                  ),
                                );
                              },
                            )
                          : const Center(
                              child: Text('Spots tab content here'),
                            ),
                    ),
                  ],
                );
              } else {
                return const Padding(
                  padding: EdgeInsets.symmetric(horizontal: 16),
                  child: _NoGuildWidget(),
                );
              }
            },
            loading: () =&gt; const Center(child: CircularProgressIndicator()),
            error: (error, stackTrace) {
              WidgetsBinding.instance.addPostFrameCallback((_) {
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(content: Text('Error: $error')),
                );
              });
              return Center(child: Text('An error occurred: $error'));
            },
          ),
        ),
      ),
    );
  }

  Widget _buildStatColumn(String title, String value, String subtext) {
    return Column(
      children: [
        Text(
          value,
          style: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
        ),
        Text(title),
        Text(
          subtext,
          style: const TextStyle(color: Colors.grey, fontSize: 12),
        ),
      ],
    );
  }
}

class _NoGuildWidget extends StatelessWidget {
  const _NoGuildWidget();

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        const SizedBox(height: 48),
        const Text(
          'No guild affiliation',
          style: TextStyle(
            fontSize: 28,
            fontWeight: FontWeight.bold,
          ),
          textAlign: TextAlign.center,
        ),
        const SizedBox(height: 20),
        const Text(
          'Join a guild or create a new one!',
          style: TextStyle(fontSize: 16),
          textAlign: TextAlign.center,
        ),
        const SizedBox(height: 56),
        Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(8),
            border: Border.all(color: ColorToken.secondary),
          ),
          padding: const EdgeInsets.all(24),
          child: Column(
            children: [
              Image.asset(
                Assets.images.joinGuildFig.path,
              ),
              const SizedBox(height: 24),
              ElevatedButton(
                onPressed: () {
                  context.push(Screen.guildCode.path);
                },
                child: const Stack(
                  alignment: Alignment.center,
                  children: [
                    Center(
                      child: Text(
                        'Join an existing guild',
                      ),
                    ),
                    Positioned(
                      right: 0,
                      child: Icon(
                        Icons.arrow_forward,
                        size: 24,
                        color: ColorToken.text,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
        const SizedBox(height: 16),
        Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(8),
            border: Border.all(color: ColorToken.secondary),
          ),
          padding: const EdgeInsets.all(24),
          child: Column(
            children: [
              Image.asset(
                Assets.images.createGuildFig.path,
              ),
              const SizedBox(height: 24),
              ElevatedButton(
                onPressed: () {
                  context.push(Screen.guildCreate.path);
                },
                child: const Stack(
                  alignment: Alignment.center,
                  children: [
                    Center(
                      child: Text('Host a new guild'),
                    ),
                    Positioned(
                      right: 0,
                      child: Icon(
                        Icons.arrow_forward,
                        size: 24,
                        color: ColorToken.text,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
        const SizedBox(height: 48),
      ],
    );
  }
}

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2024/12/25 11:31:37*

`Column`„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åô„ÇãÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãÁÆáÊâÄ„ÇíÂàÜÊûê„Åô„Çã„Å®„ÄÅ‰∏ª„Å´‰ª•‰∏ã„ÅÆÁêÜÁî±„ÅåËÄÉ„Åà„Çâ„Çå„Åæ„Åô„ÄÇ

### 1. **Ë¶™Ë¶ÅÁ¥†„ÅÆÂà∂Á¥Ñ**
   `Column`„ÅØ„Åù„ÅÆÂ≠êË¶ÅÁ¥†„ÇíÁ∏¶ÊñπÂêë„Å´ÈÖçÁΩÆ„Åó„Åæ„Åô„Åå„ÄÅ„Çπ„ÇØ„É≠„Éº„É´ÂèØËÉΩ„Å™Ë¶ÅÁ¥†„ÇÑË¶™Ë¶ÅÁ¥†„ÅÆÈ´ò„Åï„Å´Èñ¢„Åô„ÇãÂà∂Á¥Ñ„Åå„Å™„ÅÑÂ†¥Âêà„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åô„ÄÇÁâπ„Å´ `Expanded` „Ç¶„Ç£„Ç∏„Çß„ÉÉ„Éà„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅË¶™Ë¶ÅÁ¥†„Åå `Column` „ÇíÁÑ°Âà∂Èôê„Å´‰º∏„Å∞„Åù„ÅÜ„Å®„Åô„Çã„Å®„Ç®„É©„Éº„Å´„Å™„Çä„Åæ„Åô„ÄÇ

#### ‰øÆÊ≠£‰æã:
`Column`„Çí`Flexible`„ÇÑ`Expanded`„ÅßÂõ≤„ÇÄ„Å®Ë¶™Ë¶ÅÁ¥†„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„ÅåÈÅ©Âàá„Å´ÈÅ©Áî®„Åï„Çå„Åæ„Åô„ÄÇ

```dart
return Flexible(
  child: Column(
    children: [
      Container(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            Text(
              guildInfo.guildName ?? '',
            ),
            Text(
              'ID: ${guildInfo.guildId}',
            ),
            const SizedBox(height: 16),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceEvenly,
              children: [
                _buildStatColumn('Search', '3,879', 'Q'),
                _buildStatColumn('Attack', '1,230', 'E'),
                _buildStatColumn('Luck', '893', 'L'),
                _buildStatColumn('Defence', '905', 'B'),
              ],
            ),
          ],
        ),
      ),
      Expanded(
        child: TabBarView(
          children: [
            ListView.builder(
              itemCount: guildInfo.guildMembers?.length ?? 0,
              itemBuilder: (context, index) {
                final member = guildInfo.guildMembers![index];
                return ListTile(
                  leading: CircleAvatar(
                    backgroundColor: Colors.grey[300],
                    child: Text(
                      member.userId?.substring(0, 2) ?? '',
                    ),
                  ),
                  title: Text(member.userId ?? ''),
                  subtitle: const Row(
                    children: [
                      Icon(Icons.search),
                      SizedBox(width: 8),
                      Icon(Icons.shield),
                    ],
                  ),
                );
              },
            ),
            const Center(child: Text('Spots tab content here')),
          ],
        ),
      ),
    ],
  ),
);
```

---

### 2. **`TabBar`„ÅÆÈÖçÁΩÆ**
   `TabBar` „ÅØÈÅ©Âàá„Å´ÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Å®Ë¶™Ë¶ÅÁ¥†„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„Åå‰∏çË∂≥„Åó„Å¶ÂïèÈ°å„ÇíÂºï„ÅçËµ∑„Åì„ÅôÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆÂ†¥Âêà„ÄÅ`DefaultTabController`„Åß„É©„ÉÉ„Éó„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

#### ‰øÆÊ≠£‰æã:
‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ `DefaultTabController` „ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ

```dart
return DefaultTabController(
  length: 2, // Tab„ÅÆÊï∞
  child: Column(
    children: [
      Container(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            Text(
              guildInfo.guildName ?? '',
            ),
            Text(
              'ID: ${guildInfo.guildId}',
            ),
            const SizedBox(height: 16),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceEvenly,
              children: [
                _buildStatColumn('Search', '3,879', 'Q'),
                _buildStatColumn('Attack', '1,230', 'E'),
                _buildStatColumn('Luck', '893', 'L'),
                _buildStatColumn('Defence', '905', 'B'),
              ],
            ),
          ],
        ),
      ),
      const TabBar(
        tabs: [
          Tab(text: 'Members'),
          Tab(text: 'Spots'),
        ],
      ),
      Expanded(
        child: TabBarView(
          children: [
            ListView.builder(
              itemCount: guildInfo.guildMembers?.length ?? 0,
              itemBuilder: (context, index) {
                final member = guildInfo.guildMembers![index];
                return ListTile(
                  leading: CircleAvatar(
                    backgroundColor: Colors.grey[300],
                    child: Text(
                      member.userId?.substring(0, 2) ?? '',
                    ),
                  ),
                  title: Text(member.userId ?? ''),
                  subtitle: const Row(
                    children: [
                      Icon(Icons.search),
                      SizedBox(width: 8),
                      Icon(Icons.shield),
                    ],
                  ),
                );
              },
            ),
            const Center(child: Text('Spots tab content here')),
          ],
        ),
      ),
    ],
  ),
);
```

---

### 3. **`guildInfo.guildMembers`„Åå`null`„ÅÆÂ†¥Âêà**
   `guildInfo.guildMembers`„Åå`null`„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`ListView.builder`„Å´Ê∏°„Åô`itemCount`„Åå`null`„ÅÆÂ†¥Âêà„ÇÇ„Ç®„É©„Éº„Å´„Å™„Çä„Åæ„Åô„ÄÇ

#### ‰øÆÊ≠£‰æã:
`guildMembers`„Åå`null`„ÅÆÂ†¥Âêà„ÅÆ„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÇíË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ

```dart
itemCount: guildInfo.guildMembers?.length ?? 0,
itemBuilder: (context, index) {
  final member = guildInfo.guildMembers?[index];
  return ListTile(
    leading: CircleAvatar(
      backgroundColor: Colors.grey[300],
      child: Text(
        member?.userId?.substring(0, 2) ?? '',
      ),
    ),
    title: Text(member?.userId ?? ''),
    subtitle: const Row(
      children: [
        Icon(Icons.search),
        SizedBox(width: 8),
        Icon(Icons.shield),
      ],
    ),
  );
},
```

---

„Åì„Çå„Çâ„ÇíË©¶„Åó„Å¶„Ç®„É©„Éº„ÅåËß£Ê∂à„Åï„Çå„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„ÇÇ„Åó„Åæ„Å†ÂïèÈ°å„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅÂÖ∑‰ΩìÁöÑ„Å™„Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ±Êúâ„ÅÑ„Åü„Å†„Åë„Çã„Å®„Çà„ÇäË©≥Á¥∞„Å™Ë™øÊüª„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2024/12/25 11:34:10*

2„ÇíË©¶„Åó„Åü„Åå„Åì„ÅÜ„ÅÑ„ÅÜ„Ç®„É©„Éº„Å™„Å£„Åü

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Exception caught by rendering library ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
The following assertion was thrown during performLayout():
RenderFlex children have non-zero flex but incoming height constraints are unbounded.
When a column is in a parent that does not provide a finite height constraint, for example if it is in a vertical scrollable, it will try to shrink-wrap its children along the vertical axis. Setting a flex on a child (e.g. using Expanded) indicates that the child is to expand to fill the remaining space in the vertical direction.
These two directives are mutually exclusive. If a parent is to shrink-wrap its child, the child cannot simultaneously expand to fit its parent.
Consider setting mainAxisSize to MainAxisSize.min and using FlexFit.loose fits for the flexible children (using Flexible rather than Expanded). This will allow the flexible children to size themselves to less than the infinite remaining space they would otherwise be forced to take, and then will cause the RenderFlex to shrink-wrap the children rather than expanding to fit the maximum constraints provided by the parent.
If this message did not help you determine the problem, consider using debugDumpRenderTree():

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2024/12/25 11:34:34*

„Åì„ÅÆ„Ç®„É©„Éº„ÅÆÂéüÂõ†„ÅØ„ÄÅ`Column`„ÅÆÂ≠êË¶ÅÁ¥†„Å´`Expanded`„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„ÇãÁä∂ÊÖã„Åß„ÄÅ`Column`Ëá™‰Ωì„ÅåÁÑ°Èôê„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„ÇíÊåÅ„Å§Ë¶™Ë¶ÅÁ¥†ÂÜÖ„Å´ÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„Çã„Åì„Å®„Åß„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ`SingleChildScrollView`„ÅåË¶™„Å´„ÅÇ„ÇãÂ†¥Âêà„Å´„Åì„Çå„ÅåÁô∫Áîü„Åó„Åæ„Åô„ÄÇ

‰ª•‰∏ã„ÅÆËß£Ê±∫ÊñπÊ≥ï„ÇíË©¶„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

---

### Ëß£Ê±∫ÊñπÊ≥ï 1: `Column`„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„ÇíÊòéÁ¢∫„Å´„Åô„Çã
`Column`„Çí`SingleChildScrollView`„ÅÆÂÜÖÈÉ®„Å´ÈÖçÁΩÆ„Åô„ÇãÂ†¥Âêà„ÄÅ`Column`„ÅÆÈ´ò„Åï„ÇíÊòéÁ¢∫„Å´Âà∂Á¥Ñ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„Çå„ÇíË°å„ÅÜ„Åü„ÇÅ„Å´„ÄÅ`ConstrainedBox`„ÇÑ`IntrinsicHeight`„Çí‰ΩøÁî®„Åß„Åç„Åæ„Åô„ÄÇ

#### ‰øÆÊ≠£‰æã
`ConstrainedBox`„Çí‰ΩøÁî®„Åó„Å¶È´ò„Åï„ÇíÂà∂Èôê„Åô„Çã‰æã:

```dart
return SingleChildScrollView(
  physics: const AlwaysScrollableScrollPhysics(),
  child: ConstrainedBox(
    constraints: BoxConstraints(
      minHeight: MediaQuery.of(context).size.height,
    ),
    child: IntrinsicHeight(
      child: Column(
        children: [
          Container(
            padding: const EdgeInsets.all(16),
            child: Column(
              children: [
                Text(
                  guildInfo.guildName ?? '',
                ),
                Text(
                  'ID: ${guildInfo.guildId}',
                ),
                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    _buildStatColumn('Search', '3,879', 'Q'),
                    _buildStatColumn('Attack', '1,230', 'E'),
                    _buildStatColumn('Luck', '893', 'L'),
                    _buildStatColumn('Defence', '905', 'B'),
                  ],
                ),
              ],
            ),
          ),
          const TabBar(
            tabs: [
              Tab(text: 'Members'),
              Tab(text: 'Spots'),
            ],
          ),
          Expanded(
            child: TabBarView(
              children: [
                ListView.builder(
                  itemCount: guildInfo.guildMembers?.length ?? 0,
                  itemBuilder: (context, index) {
                    final member = guildInfo.guildMembers![index];
                    return ListTile(
                      leading: CircleAvatar(
                        backgroundColor: Colors.grey[300],
                        child: Text(
                          member.userId?.substring(0, 2) ?? '',
                        ),
                      ),
                      title: Text(member.userId ?? ''),
                      subtitle: const Row(
                        children: [
                          Icon(Icons.search),
                          SizedBox(width: 8),
                          Icon(Icons.shield),
                        ],
                      ),
                    );
                  },
                ),
                const Center(child: Text('Spots tab content here')),
              ],
            ),
          ),
        ],
      ),
    ),
  ),
);
```

---

### Ëß£Ê±∫ÊñπÊ≥ï 2: `SingleChildScrollView`„ÇíÈô§Â§ñ
`SingleChildScrollView`„Çí‰ΩøÁî®„Åó„Å™„ÅÑÂ†¥Âêà„ÄÅ`Column`„Å®„Åù„ÅÆÂ≠êË¶ÅÁ¥†„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„ÅÆÂïèÈ°å„ÇíÂõûÈÅø„Åß„Åç„Åæ„Åô„ÄÇ`RefreshIndicator`„Çí`ListView`„Åß„É©„ÉÉ„Éó„Åó„Å¶‰ΩøÁî®„Åô„ÇãÊñπÊ≥ï„Åß„Åô„ÄÇ

#### ‰øÆÊ≠£‰æã
```dart
return Scaffold(
  body: RefreshIndicator(
    onRefresh: () async {
      await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
    },
    child: DefaultTabController(
      length: 2,
      child: Column(
        children: [
          Container(
            padding: const EdgeInsets.all(16),
            child: Column(
              children: [
                Text(
                  guildInfo.guildName ?? '',
                ),
                Text(
                  'ID: ${guildInfo.guildId}',
                ),
                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    _buildStatColumn('Search', '3,879', 'Q'),
                    _buildStatColumn('Attack', '1,230', 'E'),
                    _buildStatColumn('Luck', '893', 'L'),
                    _buildStatColumn('Defence', '905', 'B'),
                  ],
                ),
              ],
            ),
          ),
          const TabBar(
            tabs: [
              Tab(text: 'Members'),
              Tab(text: 'Spots'),
            ],
          ),
          Expanded(
            child: TabBarView(
              children: [
                ListView.builder(
                  itemCount: guildInfo.guildMembers?.length ?? 0,
                  itemBuilder: (context, index) {
                    final member = guildInfo.guildMembers![index];
                    return ListTile(
                      leading: CircleAvatar(
                        backgroundColor: Colors.grey[300],
                        child: Text(
                          member.userId?.substring(0, 2) ?? '',
                        ),
                      ),
                      title: Text(member.userId ?? ''),
                      subtitle: const Row(
                        children: [
                          Icon(Icons.search),
                          SizedBox(width: 8),
                          Icon(Icons.shield),
                        ],
                      ),
                    );
                  },
                ),
                const Center(child: Text('Spots tab content here')),
              ],
            ),
          ),
        ],
      ),
    ),
  ),
);
```

---

### Ëß£Ê±∫ÊñπÊ≥ï 3: `Flexible`„Çí‰ΩøÁî®
`Flexible`„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÂ≠êË¶ÅÁ¥†„ÅåË¶™Ë¶ÅÁ¥†„ÅÆÈ´ò„ÅïÂà∂Á¥Ñ„Å´Âøú„Åò„Å¶‰º∏Á∏Æ„Åô„Çã„Çà„ÅÜ„Å´„Åô„Çã„ÄÇ

#### ‰øÆÊ≠£‰æã
```dart
child: Flexible(
  child: Column(
    children: [
      // Â≠êË¶ÅÁ¥†„Åü„Å°...
    ],
  ),
),
```

---

„Åì„Çå„Çâ„ÅÆËß£Ê±∫ÊñπÊ≥ï„ÇíË©¶„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÁâπ„Å´`SingleChildScrollView`ÂÜÖ„Åß`Column`„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅÂà∂Á¥Ñ„ÅÆË®≠ÂÆö„ÅåÈáçË¶Å„Åß„Åô„ÄÇ„Åù„Çå„Åß„ÇÇ„Ç®„É©„Éº„ÅåËß£Ê∂à„Åï„Çå„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Åï„Çâ„Å™„ÇãË©≥Á¥∞„ÇíÂÖ±Êúâ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2024/12/25 11:35:56*

Ëß£Ê±∫ÊñπÊ≥ï„ÅÆ2„ÅÆË©¶„Åó„Åü„ÅÑ

if (guildInfo != null) { } else „ÅÆ else„ÅÆÁîªÈù¢„ÅÆ„Åø„Å´ SingleChildScrollView „ÇíÈÅ©Áî®„Åï„Åõ„Åü„ÅÑ

import 'package:flutter/material.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/screen.dart';
import 'package:snpit_guild_app/gen/assets.gen.dart';
import 'package:snpit_guild_app/presentation/design_token/color_token.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/guilds/get_guild_info.dart';
import 'package:snpit_guild_app/presentation/providers/on_created_guild.dart';

class GuildPage extends HookConsumerWidget {
  const GuildPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final guildInfoAsync = ref.watch(getMyGuildNotifierProvider);

    useEffect(
      () {
        Future.microtask(() {
          ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        });
        return null;
      },
      [],
    );

    // „ÇÆ„É´„Éâ„Åå‰ΩúÊàê„Åï„Çå„ÅüÂ†¥Âêà„ÇÆ„É´„ÉâÊÉÖÂ†±„ÇíÂèñÂæó„Åô„Çã
    ref.listen&lt;bool&gt;(
      onCreatedGuildNotifierProvider,
      (_, next) async {
        if (next) {
          await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        }
      },
    );

    return Scaffold(
      body: RefreshIndicator(
        onRefresh: () async {
          await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
        },
        child: SingleChildScrollView(
          physics: const AlwaysScrollableScrollPhysics(),
          child: guildInfoAsync.when(
            data: (guildInfo) {
              if (guildInfo != null) {
                // return const Center(
                //   child: Text('Guild Info'),
                // );
                // TODO: „ÇÆ„É´„ÉâÊÉÖÂ†±„ÇíË°®Á§∫„Åô„Çã
                return DefaultTabController(
                  length: 2, // Tab„ÅÆÊï∞
                  child: Column(
                    children: [
                      Container(
                        padding: const EdgeInsets.all(16),
                        child: Column(
                          children: [
                            Text(
                              guildInfo.guildName ?? '',
                            ),
                            Text(
                              'ID: ${guildInfo.guildId}',
                            ),
                            const SizedBox(height: 16),
                            Row(
                              mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                              children: [
                                _buildStatColumn('Search', '3,879', 'Q'),
                                _buildStatColumn('Attack', '1,230', 'E'),
                                _buildStatColumn('Luck', '893', 'L'),
                                _buildStatColumn('Defence', '905', 'B'),
                              ],
                            ),
                          ],
                        ),
                      ),
                      const TabBar(
                        tabs: [
                          Tab(text: 'Members'),
                          Tab(text: 'Spots'),
                        ],
                      ),
                      Expanded(
                        child: TabBarView(
                          children: [
                            ListView.builder(
                              itemCount: guildInfo.guildMembers?.length ?? 0,
                              itemBuilder: (context, index) {
                                final member = guildInfo.guildMembers![index];
                                return ListTile(
                                  leading: CircleAvatar(
                                    backgroundColor: Colors.grey[300],
                                    child: Text(
                                      member.userId?.substring(0, 2) ?? '',
                                    ),
                                  ),
                                  title: Text(member.userId ?? ''),
                                  subtitle: const Row(
                                    children: [
                                      Icon(Icons.search),
                                      SizedBox(width: 8),
                                      Icon(Icons.shield),
                                    ],
                                  ),
                                );
                              },
                            ),
                            const Center(child: Text('Spots tab content here')),
                          ],
                        ),
                      ),
                    ],
                  ),
                );
              } else {
                return const Padding(
                  padding: EdgeInsets.symmetric(horizontal: 16),
                  child: _NoGuildWidget(),
                );
              }
            },
            loading: () =&gt; const Center(child: CircularProgressIndicator()),
            error: (error, stackTrace) {
              WidgetsBinding.instance.addPostFrameCallback((_) {
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(content: Text('Error: $error')),
                );
              });
              return Center(child: Text('An error occurred: $error'));
            },
          ),
        ),
      ),
    );
  }

  Widget _buildStatColumn(String title, String value, String subtext) {
    return Column(
      children: [
        Text(
          value,
          style: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
        ),
        Text(title),
        Text(
          subtext,
          style: const TextStyle(color: Colors.grey, fontSize: 12),
        ),
      ],
    );
  }
}

class _NoGuildWidget extends StatelessWidget {
  const _NoGuildWidget();

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        const SizedBox(height: 48),
        const Text(
          'No guild affiliation',
          style: TextStyle(
            fontSize: 28,
            fontWeight: FontWeight.bold,
          ),
          textAlign: TextAlign.center,
        ),
        const SizedBox(height: 20),
        const Text(
          'Join a guild or create a new one!',
          style: TextStyle(fontSize: 16),
          textAlign: TextAlign.center,
        ),
        const SizedBox(height: 56),
        Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(8),
            border: Border.all(color: ColorToken.secondary),
          ),
          padding: const EdgeInsets.all(24),
          child: Column(
            children: [
              Image.asset(
                Assets.images.joinGuildFig.path,
              ),
              const SizedBox(height: 24),
              ElevatedButton(
                onPressed: () {
                  context.push(Screen.guildCode.path);
                },
                child: const Stack(
                  alignment: Alignment.center,
                  children: [
                    Center(
                      child: Text(
                        'Join an existing guild',
                      ),
                    ),
                    Positioned(
                      right: 0,
                      child: Icon(
                        Icons.arrow_forward,
                        size: 24,
                        color: ColorToken.text,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
        const SizedBox(height: 16),
        Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(8),
            border: Border.all(color: ColorToken.secondary),
          ),
          padding: const EdgeInsets.all(24),
          child: Column(
            children: [
              Image.asset(
                Assets.images.createGuildFig.path,
              ),
              const SizedBox(height: 24),
              ElevatedButton(
                onPressed: () {
                  context.push(Screen.guildCreate.path);
                },
                child: const Stack(
                  alignment: Alignment.center,
                  children: [
                    Center(
                      child: Text('Host a new guild'),
                    ),
                    Positioned(
                      right: 0,
                      child: Icon(
                        Icons.arrow_forward,
                        size: 24,
                        color: ColorToken.text,
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
        const SizedBox(height: 48),
      ],
    );
  }
}

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2024/12/25 11:36:10*

`SingleChildScrollView` „Çí `else` ÈÉ®ÂàÜ„ÅÆ„Åø„Å´ÈÅ©Áî®„Åô„Çã„Çà„ÅÜ„Å´„Åô„Çã„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ `guildInfo` „Åå `null` „ÅÆÂ†¥Âêà„Å´„ÅÆ„Åø `SingleChildScrollView` „Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØÈÄöÂ∏∏„ÅÆ„É¨„Ç§„Ç¢„Ç¶„Éà„Çí‰øùÊåÅ„Åó„Åæ„Åô„ÄÇ

‰øÆÊ≠£Áâà„Ç≥„Éº„Éâ„Çí‰ª•‰∏ã„Å´Á§∫„Åó„Åæ„Åô„ÄÇ

```dart
return Scaffold(
  body: RefreshIndicator(
    onRefresh: () async {
      await ref.read(getMyGuildNotifierProvider.notifier).executeRequest();
    },
    child: guildInfoAsync.when(
      data: (guildInfo) {
        if (guildInfo != null) {
          // „ÇÆ„É´„ÉâÊÉÖÂ†±„Åå„ÅÇ„ÇãÂ†¥Âêà
          return DefaultTabController(
            length: 2, // Tab„ÅÆÊï∞
            child: Column(
              children: [
                Container(
                  padding: const EdgeInsets.all(16),
                  child: Column(
                    children: [
                      Text(
                        guildInfo.guildName ?? '',
                      ),
                      Text(
                        'ID: ${guildInfo.guildId}',
                      ),
                      const SizedBox(height: 16),
                      Row(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: [
                          _buildStatColumn('Search', '3,879', 'Q'),
                          _buildStatColumn('Attack', '1,230', 'E'),
                          _buildStatColumn('Luck', '893', 'L'),
                          _buildStatColumn('Defence', '905', 'B'),
                        ],
                      ),
                    ],
                  ),
                ),
                const TabBar(
                  tabs: [
                    Tab(text: 'Members'),
                    Tab(text: 'Spots'),
                  ],
                ),
                Expanded(
                  child: TabBarView(
                    children: [
                      ListView.builder(
                        itemCount: guildInfo.guildMembers?.length ?? 0,
                        itemBuilder: (context, index) {
                          final member = guildInfo.guildMembers![index];
                          return ListTile(
                            leading: CircleAvatar(
                              backgroundColor: Colors.grey[300],
                              child: Text(
                                member.userId?.substring(0, 2) ?? '',
                              ),
                            ),
                            title: Text(member.userId ?? ''),
                            subtitle: const Row(
                              children: [
                                Icon(Icons.search),
                                SizedBox(width: 8),
                                Icon(Icons.shield),
                              ],
                            ),
                          );
                        },
                      ),
                      const Center(child: Text('Spots tab content here')),
                    ],
                  ),
                ),
              ],
            ),
          );
        } else {
          // „ÇÆ„É´„ÉâÊÉÖÂ†±„Åå„Å™„ÅÑÂ†¥Âêà
          return SingleChildScrollView(
            physics: const AlwaysScrollableScrollPhysics(),
            child: const Padding(
              padding: EdgeInsets.symmetric(horizontal: 16),
              child: _NoGuildWidget(),
            ),
          );
        }
      },
      loading: () => const Center(child: CircularProgressIndicator()),
      error: (error, stackTrace) {
        WidgetsBinding.instance.addPostFrameCallback((_) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(content: Text('Error: $error')),
          );
        });
        return Center(child: Text('An error occurred: $error'));
      },
    ),
  ),
);
```

### Â§âÊõ¥ÁÇπ
1. `guildInfo` „Åå `null` „Åã„Å©„ÅÜ„Åã„ÅßÊù°‰ª∂ÂàÜÂ≤ê„ÇíË°å„ÅÑ„ÄÅ`else` ÈÉ®ÂàÜ„Åß„ÅÆ„Åø `SingleChildScrollView` „Çí‰ΩøÁî®„Åó„Åæ„Åó„Åü„ÄÇ
2. `guildInfo != null` „ÅÆÂ†¥Âêà„ÅØ„ÄÅ`DefaultTabController` „Çí‰Ωø„Å£„Åü„É¨„Ç§„Ç¢„Ç¶„Éà„Çí„Åù„ÅÆ„Åæ„ÅæÂà©Áî®„Åó„Åæ„Åô„ÄÇ
3. „Ç®„É©„ÉºÊôÇ„ÇÑ„É≠„Éº„Éá„Ç£„É≥„Ç∞ÊôÇ„ÅÆË°®Á§∫„ÅØÂ§âÊõ¥„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ

„Åì„ÅÆ„Ç≥„Éº„Éâ„Åß„ÄÅ`else` ÈÉ®ÂàÜ„Å´„ÅÆ„Åø `SingleChildScrollView` „ÇíÈÅ©Áî®„Åß„Åç„Çã„ÅØ„Åö„Åß„Åô„ÄÇË©¶„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑÔºÅ

---
