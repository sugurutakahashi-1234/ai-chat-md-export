# 引数追加の修正

Date: 2024-12-23

---

## 👤 User
*2024-12-23 16:46:14*

guildId と userId を引数で渡して欲しい

@riverpod
class UpdateGuildMemberNotifier extends _$UpdateGuildMemberNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; executeRequest() async {
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerUpdateGuildMember(
        UpdateGuildMemberRequestDto(
          updateStatus: true,
          memberStatus: UpdateGuildMemberRequestDtoMemberStatus.REQUESTED,
        ),
        guildId: '',
        userId: '',
      );
      debugPrint('Response Body: ${response.data}');
      debugPrint('Response Body.data: ${response.data?.data}');
      state = AsyncValue.data(response.data?.data);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error in GetGuildInfoNotifier: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

---

## 🤖 Assistant
*2024-12-23 16:46:29*

`guildId` と `userId` を引数で渡せるようにするためには、`executeRequest` メソッドのシグネチャを変更して、それらを受け取れるようにします。また、その引数を `api.guildControllerUpdateGuildMember` メソッドに渡すように変更します。

以下は修正版のコードです：

```dart
@riverpod
class UpdateGuildMemberNotifier extends _$UpdateGuildMemberNotifier {
  @override
  Future<String?> build() async => null;

  /// guildId と userId を引数として受け取るように変更
  Future<void> executeRequest({
    required String guildId,
    required String userId,
  }) async {
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerUpdateGuildMember(
        UpdateGuildMemberRequestDto(
          updateStatus: true,
          memberStatus: UpdateGuildMemberRequestDtoMemberStatus.REQUESTED,
        ),
        guildId: guildId,
        userId: userId,
      );
      debugPrint('Response Body: ${response.data}');
      debugPrint('Response Body.data: ${response.data?.data}');
      state = AsyncValue.data(response.data?.data);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error in UpdateGuildMemberNotifier: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}
```

### 修正点
1. **引数追加**
   - `executeRequest` メソッドに `guildId` と `userId` を `required` パラメータとして追加しました。

2. **呼び出し部分の修正**
   - `guildControllerUpdateGuildMember` メソッドに、引数として渡された `guildId` と `userId` を設定しました。

3. **デバッグメッセージ**
   - `guildId` と `userId` を受け取れるようになったため、必要に応じてそれらもデバッグログに出力することを検討してください。

これで、`executeRequest` を呼び出す際に必要な `guildId` と `userId` を渡すことが可能になります。

---
