# iOSアプリ開発のセキュリティ

Date: 2023-05-30

---

## 👤 User
*2023-05-30 17:53:16*

iOSアプリ開発をしているのですが、SDKのライセンスキーなどの情報は info.plist で持つので大丈夫ですかね？
ipaから抜かれたりしないかを心配しております。

---

## 🤖 Assistant
*2023-05-30 17:54:28*

その懸念は全くもって妥当です。info.plist ファイルは実際にはアプリのバンドル内に含まれており、一部のツールを使うと外部から参照できます。そのため、セキュリティ上重要な情報（ライセンスキーやAPIキーなど）を保管するのには適していません。

ライセンスキーのような機密情報を安全に保管するための一般的な方法は以下の通りです。

1. **キーチェーン**: iOSキーチェーンはユーザー名とパスワードのような短い文字列のセキュアストレージとして機能します。しかし、これはランタイム時にのみアクセス可能であり、またこの情報はデバイス間で同期することができます。

2. **環境変数**: ビルド環境の環境変数にキーを保管し、ビルド時にアプリに埋め込む方法もあります。ただし、これもアプリがリバースエンジニアリングされると情報が漏れるリスクがあります。

3. **サーバー側で管理**: 重要な情報をアプリから完全に分離してサーバー側で管理し、必要に応じてその情報を提供するAPIを用意することも考えられます。これにより、ユーザーがキーを利用できる範囲を制限し、不正利用を防ぐことができます。

これらの方法は、それぞれ利点と欠点があり、用途に応じて適切な手法を選ぶ必要があります。セキュリティはとても重要な問題なので、信頼性の高い方法を探し出すことが必要です。

---

## 👤 User
*2023-05-30 17:54:41*

info.plist はやっぱりよくないの？

---

## 🤖 Assistant
*2023-05-30 17:55:31*

はい、その通りです。info.plist ファイルは、アプリの設定や特性に関する情報を格納するためのものであり、簡単に参照や編集が可能です。このファイルはアプリのバンドル内にあり、リバースエンジニアリングツールを使えば簡単にアクセスできます。そのため、セキュリティが重要な情報（APIキー、ライセンスキーなど）を含めるべきではありません。

アプリがコードから直接キーを読むようにすれば、それを安全に管理するための場所が必要になります。その場所は、リバースエンジニアリングに対して十分に安全である必要があります。そのためには、iOSのキーチェーンや環境変数、またはサーバー側での管理などの手法があります。

総じて、機密情報はプログラム内や設定ファイル内に直接書くべきではありません。それらの情報が漏洩した場合、悪意のあるユーザーによる不正利用のリスクがあります。そのため、信頼性の高い手法を用いてこれらの情報を安全に管理することが重要です。

---

## 👤 User
*2023-05-30 18:01:12*

普通にハードコーディングしていれば安全ですか？

---

## 🤖 Assistant
*2023-05-30 18:01:50*

ハードコーディング（ハードコーディングとは、直接ソースコード内に機密情報を書き込むこと）は、セキュリティ上のリスクを伴います。ソースコードは、バイナリやリバースエンジニアリングツールを使用して簡単に読み取ることができるため、機密情報が直接埋め込まれていると、それらの情報が容易に取得される可能性があります。

ハードコーディングを使用する場合でも、いくつかのセキュリティ上の懸念があります。

1. **ソースコードの漏洩**: ソースコードが不正な手に渡った場合、機密情報が直接公開されます。

2. **アプリの更新**: もし機密情報が変更された場合、アプリを再ビルドして再配布する必要があります。これにより、アプリの更新サイクルが長くなり、変更が適用されるまでの間にセキュリティ上の脆弱性が存在する可能性があります。

3. **不正利用のリスク**: ソースコード内にハードコーディングされた機密情報が悪意のあるユーザーや攻撃者によって取得されると、それが不正利用されるリスクがあります。

そのため、セキュリティを確保するためには、ハードコーディングは避けるべきです。代わりに、先に述べた方法のうち、iOSキーチェーンや環境変数、サーバー側での管理などを活用して機密情報を保護することをお勧めします。これらの方法を使用すると、機密情報を安全に保管し、アプリのセキュリティを向上させることができます。

---

## 👤 User
*2023-05-30 18:02:01*

info.plist とハードコーディングのどちらが安全？

---

## 🤖 Assistant
*2023-05-30 18:02:52*

info.plist とハードコーディングのどちらが安全かという質問に対して、明確な答えを提供することは難しいです。それぞれの方法には利点と欠点があり、セキュリティ上のリスクを最小限に抑えるためには、追加の対策を講じる必要があります。

**info.plist の利点:**
- アプリのバンドル内に格納されるため、アプリの設定や特性に関する情報を一元管理できます。
- Appleの規定に従って情報を記述することができます。
- コードの変更なしに設定の変更が可能です。

**info.plist の欠点:**
- バンドル内に含まれており、リバースエンジニアリングツールを使用すれば簡単にアクセスできます。
- 機密情報（APIキー、ライセンスキーなど）を保管するためには適していません。
- 不正アクセスや情報漏洩のリスクがあります。

**ハードコーディングの利点:**
- 機密情報がコード内に直接埋め込まれているため、リバースエンジニアリングツールを使用しても容易には取得できません。

**ハードコーディングの欠点:**
- ソースコードが漏洩した場合、機密情報が公開されます。
- アプリの更新が必要になるため、セキュリティの変更が即座に適用されない可能性があります。
- 機密情報の変更が困難であり、新しいバージョンのアプリを再配布する必要があります。

最善のアプローチは、セキュリティを強化するために追加の対策を講じることです。これには、以下のような手法があります。

1. **iOSキーチェーン**: キーチェーンを使用して機密情報を保護し、安全にアクセスできるようにします。

2. **暗号化**: 機密情報を暗号化し、ソースコード内に保存する前に復号化する必要がある場合は、暗号化アルゴリズムを使用します。

3. **サーバー側での管理**: 重要な情報をアプリから完全に分離してサーバー側で管理し、必要に応じてAPIを介して提供します。

これらの対策を組み合わせることで、よりセキュアなア

---
