# Textä¿®é£¾å­ã‚’ä½œæˆ

æ—¥ä»˜: 2023-05-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/24 12:42:43*

Swiftã§Textã«ã ã‘ä¿®é£¾ã™ã‚‹ã‚ˆã†ãªãƒ¢ãƒ‡ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ã®å®šç¾©ã‚’æ›¸ã„ã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/24 12:43:11*

SwiftUIã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®ãƒ†ã‚­ã‚¹ãƒˆä¿®é£¾ã‚’é©ç”¨ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ã€ç‰¹å®šã®ãƒ•ã‚©ãƒ³ãƒˆã¨è‰²ã‚’é©ç”¨ã™ã‚‹ç°¡å˜ãªä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import SwiftUI

struct CustomTextModifier: ViewModifier {
    func body(content: Content) -> some View {
        content
            .font(.system(size: 20))
            .foregroundColor(.red)
    }
}

extension View {
    func customTextModifier() -> some View {
        self.modifier(CustomTextModifier())
    }
}

struct ContentView: View {
    var body: some View {
        Text("Hello, World!")
            .customTextModifier()
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€`CustomTextModifier`ã¨ã„ã†æ–°ã—ã„`ViewModifier`ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ä»»æ„ã®ãƒ“ãƒ¥ãƒ¼ã«å¯¾ã—ã¦é©ç”¨ã§ãã‚‹ã‚‚ã®ã§ã€ãã®ãƒ“ãƒ¥ãƒ¼ã®è¡¨ç¤ºã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®ä¿®é£¾å­ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«ã®ã¿é©ç”¨ã—ãŸã„ã¨ã„ã†è¦æœ›ãŒã‚ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«Textã¸ã®æ‹¡å¼µã‚’ä½œæˆã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

```swift
import SwiftUI

struct CustomTextModifier: ViewModifier {
    func body(content: Content) -> some View {
        content
            .font(.system(size: 20))
            .foregroundColor(.red)
    }
}

extension Text {
    func customTextModifier() -> some View {
        self.modifier(CustomTextModifier())
    }
}

struct ContentView: View {
    var body: some View {
        Text("Hello, World!")
            .customTextModifier()
    }
}
```

ã“ã®å ´åˆã€æ–°ã—ã„`customTextModifier`ãƒ¡ã‚½ãƒƒãƒ‰ã¯Textãƒ“ãƒ¥ãƒ¼ã«ã®ã¿é©ç”¨ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/24 12:43:44*

kerning ã‚’è¨­å®šã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/24 12:44:02*

kerningï¼ˆæ–‡å­—é–“éš”ï¼‰ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«ã€ä¿®é£¾å­ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

```swift
import SwiftUI

struct CustomTextModifier: ViewModifier {
    var kerningValue: CGFloat

    func body(content: Content) -> some View {
        content
            .font(.system(size: 20))
            .foregroundColor(.red)
            .kerning(kerningValue)
    }
}

extension Text {
    func customTextModifier(kerning: CGFloat) -> some View {
        self.modifier(CustomTextModifier(kerningValue: kerning))
    }
}

struct ContentView: View {
    var body: some View {
        Text("Hello, World!")
            .customTextModifier(kerning: 2.0)
    }
}
```
ã“ã“ã§ã¯`CustomTextModifier`ã«`kerningValue`ã¨ã„ã†æ–°ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã€ãã‚Œã‚’`body`ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§`kerning`ãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚ãã®çµæœã€ãƒ†ã‚­ã‚¹ãƒˆã«é©ç”¨ã™ã‚‹ã¨ãã«kerningï¼ˆæ–‡å­—é–“éš”ï¼‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/24 12:45:02*

ãã®ã‚³ãƒ¼ãƒ‰ã§`'kerning' is only available in iOS 16.0 or newer` ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã®ã§å¯¾å¿œã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/24 12:45:30*

kerningã¯iOS 16.0ä»¥é™ã§ã®ã¿åˆ©ç”¨å¯èƒ½ãªæ©Ÿèƒ½ã§ã™ã€‚ã‚‚ã—iOS 15.0ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ã‚µãƒãƒ¼ãƒˆã—ãŸã„å ´åˆã¯ã€æ¡ä»¶ä»˜ãã§ã“ã®ä¿®é£¾å­ã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€æ®‹å¿µãªãŒã‚‰ç›´æ¥çš„ãªæ¡ä»¶ä»˜ããƒ“ãƒ¥ãƒ¼ä¿®é£¾å­ã¯SwiftUIã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ä¸€ã¤ã®æ–¹æ³•ã¯ã€ãƒ“ãƒ¥ãƒ¼è‡ªä½“ã«æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã«ãã®ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
import SwiftUI

struct CustomTextModifier: ViewModifier {
    var kerningValue: CGFloat

    func body(content: Content) -> some View {
        content
            .font(.system(size: 20))
            .foregroundColor(.red)
    }
}

extension Text {
    func customTextModifier(kerning: CGFloat) -> some View {
        self.modifier(CustomTextModifier(kerningValue: kerning))
    }
    
    @ViewBuilder
    func applyKerningIfNeeded(_ value: CGFloat) -> some View {
        if #available(iOS 16.0, *) {
            self.kerning(value)
        } else {
            self
        }
    }
}

struct ContentView: View {
    var body: some View {
        Text("Hello, World!")
            .customTextModifier(kerning: 2.0)
            .applyKerningIfNeeded(2.0)
    }
}
```
ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`applyKerningIfNeeded(_:)`ã¨ã„ã†æ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€OSãŒiOS 16.0ä»¥ä¸Šã§ã‚ã‚‹å ´åˆã«ã®ã¿kerningã‚’é©ç”¨ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€Textãƒ“ãƒ¥ãƒ¼ã¯ãã®ã¾ã¾è¿”ã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/24 12:45:55*

OSãŒiOS 15.0æœªæº€ã§ã‚‚kerningã‚’è¨­å®šã—ãŸã„å ´åˆã¯ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/24 12:46:33*

SwiftUIã®`kerning`ä¿®é£¾å­ã¯iOS 16.0ä»¥é™ã§åˆ©ç”¨å¯èƒ½ã§ã™ãŒã€ãã‚Œä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ–‡å­—é–“éš”ã‚’èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€ä»£ã‚ã‚Šã«`NSAttributedString`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€SwiftUIã®`Text`ãƒ“ãƒ¥ãƒ¼ã¯ç›´æ¥`NSAttributedString`ã‚’å—ã‘ä»˜ã‘ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€UIKitã‚’ãƒ©ãƒƒãƒ—ã—ã¦`NSAttributedString`ã‚’è¡¨ç¤ºã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ãã®æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import SwiftUI
import UIKit

struct AttributedText: UIViewRepresentable {
    var attributedString: NSAttributedString

    func makeUIView(context: Context) -> UILabel {
        let label = UILabel()
        label.numberOfLines = 0
        return label
    }

    func updateUIView(_ uiView: UILabel, context: Context) {
        uiView.attributedText = attributedString
    }
}

extension Text {
    func customTextModifier(kerning: CGFloat) -> some View {
        let attributedString = NSMutableAttributedString(string: self.storage)
        attributedString.addAttribute(.kern, value: kerning, range: NSRange(location: 0, length: self.storage.count))
        return AttributedText(attributedString: attributedString)
    }
}

struct ContentView: View {
    var body: some View {
        Text("Hello, World!")
            .customTextModifier(kerning: 2.0)
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`UIViewRepresentable`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®Ÿè£…ã—ãŸ`AttributedText`ã¨ã„ã†æ–°ã—ã„ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ“ãƒ¥ãƒ¼ã¯UIKitã®`UILabel`ã‚’ãƒ©ãƒƒãƒ—ã—ã€`NSAttributedString`ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ãã—ã¦ã€`customTextModifier(kerning:)`ãƒ¡ã‚½ãƒƒãƒ‰ã¯`NSAttributedString`ã‚’ä½œæˆã—ã€ãã®kerningå±æ€§ã‚’è¨­å®šã—ã¾ã™ã€‚

ãŸã ã—ã€ã“ã®æ–¹æ³•ã¯SwiftUIã®ä»–ã®ç‰¹æ€§ã¨ã¯ç›¸äº’é‹ç”¨ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€ã“ã®`AttributedText`ãƒ“ãƒ¥ãƒ¼ã¯ç›´æ¥SwiftUIã®ä¿®é£¾å­ã‚’å—ã‘å…¥ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã‚‰ã‚’é©ç”¨ã™ã‚‹ã«ã¯ã€ã•ã‚‰ãªã‚‹å‡¦ç†ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

---
