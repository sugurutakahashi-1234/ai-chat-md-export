# SwiftUI 下スワイプ 検知

日付: 2024-06-26

---

## 👤 ユーザー
*2024/06/26 17:06:13*

下スワイプ SwiftUI 検知

---

## 🤖 アシスタント
*2024/06/26 17:06:32*

SwiftUIで下スワイプを検知するためには、`DragGesture`を使用するのが一般的です。以下は、下スワイプを検知するための基本的な例です。

```swift
import SwiftUI

struct ContentView: View {
    @State private var offset = CGSize.zero
    
    var body: some View {
        VStack {
            Text("Swipe down to detect")
                .padding()
                .background(Color.blue)
                .cornerRadius(10)
                .offset(y: offset.height)
                .gesture(
                    DragGesture()
                        .onChanged { value in
                            // 下方向にスワイプしているかどうかを確認
                            if value.translation.height > 0 {
                                offset = value.translation
                            }
                        }
                        .onEnded { value in
                            // スワイプが終了したときにオフセットをリセット
                            if value.translation.height > 50 {
                                // スワイプが十分な距離であれば、何かアクションを実行
                                print("Swiped down")
                            }
                            offset = .zero
                        }
                )
            Spacer()
        }
        .padding()
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードでは、`DragGesture`を使用して垂直方向のドラッグジェスチャーを検知し、下方向にスワイプされたかどうかを確認しています。`onChanged`クロージャ内で下方向へのスワイプかどうかをチェックし、`onEnded`クロージャ内でスワイプが完了したときのアクションを実行しています。スワイプの距離が一定の閾値（ここでは50ポイント）を超えた場合にアクションを実行するようにしています。

---

## 👤 ユーザー
*2024/06/26 17:08:43*

30ptぶんのウエスワイプの場合は

---

## 🤖 アシスタント
*2024/06/26 17:09:01*

30ポイントの上スワイプを検知する場合は、`DragGesture`を使用してスワイプの方向と距離をチェックし、その条件に応じてアクションを実行します。以下のコードは、上スワイプを検知し、30ポイント以上の上スワイプがあった場合に特定のアクションを実行する例です。

```swift
import SwiftUI

struct ContentView: View {
    @State private var offset = CGSize.zero
    
    var body: some View {
        VStack {
            Text("Swipe up to detect")
                .padding()
                .background(Color.blue)
                .cornerRadius(10)
                .offset(y: offset.height)
                .gesture(
                    DragGesture()
                        .onChanged { value in
                            // 上方向にスワイプしているかどうかを確認
                            if value.translation.height < 0 {
                                offset = value.translation
                            }
                        }
                        .onEnded { value in
                            // スワイプが終了したときにオフセットをリセット
                            if value.translation.height < -30 {
                                // スワイプが十分な距離であれば、何かアクションを実行
                                print("Swiped up")
                            }
                            offset = .zero
                        }
                )
            Spacer()
        }
        .padding()
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードでは、`DragGesture`を使用して上方向へのスワイプを検知し、`value.translation.height`が負の値かつその絶対値が30ポイント以上であるかどうかをチェックしています。条件を満たした場合、スワイプが検知され、アクションが実行されます。

---

## 👤 ユーザー
*2024/06/27 10:19:45*

ウエスワイプも検知したい

                    DragGesture()
                        .onEnded { value in
                            if value.translation.height &lt; -15 {
                                presenter.onDownScroll()
                            }
                        }

---

## 🤖 アシスタント
*2024/06/27 10:19:59*

上下のスワイプを同時に検知するには、`DragGesture`の`onEnded`クロージャ内でスワイプの方向と距離を判定するロジックを追加する必要があります。以下のコードは、上スワイプと下スワイプの両方を検知し、それぞれの条件に応じて異なるアクションを実行する例です。

```swift
import SwiftUI

struct ContentView: View {
    @State private var offset = CGSize.zero
    
    var body: some View {
        VStack {
            Text("Swipe up or down to detect")
                .padding()
                .background(Color.blue)
                .cornerRadius(10)
                .offset(y: offset.height)
                .gesture(
                    DragGesture()
                        .onChanged { value in
                            // スワイプ中のオフセットを更新
                            offset = value.translation
                        }
                        .onEnded { value in
                            // 上方向へのスワイプを検知
                            if value.translation.height < -15 {
                                print("Swiped up")
                                presenter.onUpScroll()
                            }
                            // 下方向へのスワイプを検知
                            if value.translation.height > 15 {
                                print("Swiped down")
                                presenter.onDownScroll()
                            }
                            // オフセットをリセット
                            offset = .zero
                        }
                )
            Spacer()
        }
        .padding()
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

このコードでは、`DragGesture`の`onEnded`クロージャ内で、`value.translation.height`の値に基づいてスワイプの方向を判定しています。スワイプが上方向（-15ポイント以上）の場合は`presenter.onUpScroll()`を呼び出し、下方向（15ポイント以上）の場合は`presenter.onDownScroll()`を呼び出すようにしています。スワイプ中のオフセットは`onChanged`クロージャで更新し、スワイプが終了したらオフセットをリセットしています。

この方法で、上下のスワイプを同時に検知することができます。

---
