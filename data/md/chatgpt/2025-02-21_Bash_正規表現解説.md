# Bash 正規表現解説

日付: 2025-02-21

---

## 👤 ユーザー
*2025/2/21 15:53:14*

if \[\[ ! "${INPUT\_BUILD\_NAME}" =~ ^\[0-9\]+\\.\[0-9\]+\\.\[0-9\]+$ \]\]; thenとは

---

## 🤖 アシスタント
*2025/2/21 15:53:31*

この `if` 文は、Bash スクリプトで `INPUT_BUILD_NAME` 変数の値が **"X.Y.Z"（数値.数値.数値）形式かどうか"** をチェックするための条件です。

### 構文の意味：
```bash
if [[ ! "${INPUT_BUILD_NAME}" =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
```

#### 1. `[[ ... ]]`
- `[[ ... ]]` は、Bash の拡張テスト構文で、条件式を評価するために使われます。

#### 2. `!`
- `!` は「否定演算子」です。この場合、条件が `false` なら `true` になり、`true` なら `false` になります。
- つまり、この `if` 文は「INPUT_BUILD_NAME が `X.Y.Z` 形式で**ない**場合」に `true` になります。

#### 3. `"${INPUT_BUILD_NAME}" =~ 正規表現`
- `=~` は Bash の **正規表現マッチ演算子** です。
- `INPUT_BUILD_NAME` の値が、右側の正規表現 `^[0-9]+\.[0-9]+\.[0-9]+$` にマッチするかをチェックします。

#### 4. `^[0-9]+\.[0-9]+\.[0-9]+$`
- `^` は文字列の先頭を意味します。
- `[0-9]+` は「1 桁以上の数字」を表します。
- `\.` は「.（ドット）」をエスケープして「ドットそのもの」を表します。
- `[0-9]+` は 2 番目の数字部分です。
- `\.` は 2 回目の「ドット」。
- `[0-9]+` は 3 番目の数字部分。
- `$` は文字列の終端を表します。

### まとめ：
この `if` 文は、「`INPUT_BUILD_NAME` が `X.Y.Z`（数値.数値.数値）形式でない場合」に `then` 以下の処理を実行します。

#### **使用例**
```bash
INPUT_BUILD_NAME="1.2.3"

if [[ ! "${INPUT_BUILD_NAME}" =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
  echo "ERROR: Build name must be in X.Y.Z format"
  exit 1
fi

echo "Build name is valid"
```

##### **動作例**
✅ `INPUT_BUILD_NAME="1.2.3"` → `Build name is valid`  
❌ `INPUT_BUILD_NAME="1.2"` → `ERROR: Build name must be in X.Y.Z format`  
❌ `INPUT_BUILD_NAME="1.2.3-beta"` → `ERROR: Build name must be in X.Y.Z format`  

この条件文を使うことで、バージョン番号の形式が正しいかどうかを簡単にチェックできます！

---
