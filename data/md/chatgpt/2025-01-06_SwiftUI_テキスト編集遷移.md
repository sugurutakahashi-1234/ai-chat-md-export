# SwiftUI テキスト編集遷移

Date: 2025-01-06

---

## 👤 User
*2025-01-06 18:24:04*

SwiftUI テキスト編集 Push遷移して編集画面とする方法

---

## 🤖 Assistant
*2025-01-06 18:24:22*

SwiftUIでPush遷移して編集画面を表示し、テキストを編集する方法を解説します。以下は、`NavigationStack`と`@State`や`@Binding`を使ったシンプルな実装例です。

---

### 1. 編集画面の設計

編集画面を別のビューとして作成します。このビューでは、テキストを編集できる状態を保持します。

```swift
import SwiftUI

struct TextEditView: View {
    @Binding var text: String
    @Environment(\.dismiss) private var dismiss

    var body: some View {
        VStack {
            TextField("編集してください", text: $text)
                .textFieldStyle(.roundedBorder)
                .padding()
                .navigationTitle("テキスト編集")
            
            Spacer()
            
            Button("保存") {
                dismiss() // 編集を終了し前の画面に戻る
            }
            .buttonStyle(.borderedProminent)
        }
        .padding()
    }
}
```

---

### 2. 元の画面の設計

`NavigationStack`を使用し、編集画面にPush遷移できるようにします。編集したテキストを元の画面に反映するには、`@State`を使用します。

```swift
struct ContentView: View {
    @State private var text: String = "サンプルテキスト"

    var body: some View {
        NavigationStack {
            VStack {
                Text("現在のテキスト: \(text)")
                    .padding()

                NavigationLink(destination: TextEditView(text: $text)) {
                    Text("編集する")
                        .padding()
                        .background(Color.blue)
                        .foregroundColor(.white)
                        .cornerRadius(8)
                }
            }
            .navigationTitle("メイン画面")
            .padding()
        }
    }
}
```

---

### 3. 全体の流れ

1. **テキスト編集画面 (`TextEditView`)**:
   - `@Binding`で親ビューから渡されたテキストを直接編集可能。
   - `@Environment(\.dismiss)`で画面を閉じる。

2. **メイン画面 (`ContentView`)**:
   - `@State`でテキストの状態を保持。
   - `NavigationLink`で編集画面に遷移。

---

### 実行結果

1. メイン画面に初期状態のテキストが表示される。
2. 「編集する」ボタンを押すと編集画面に遷移。
3. 編集画面でテキストを編集し「保存」を押すと、変更内容がメイン画面に反映される。

---

### 追加の改善ポイント

- **入力制限やバリデーション**を追加する場合：
  編集画面で入力値を検証してから保存処理を行う。
  
- **スタイルのカスタマイズ**：
  ボタンやテキストフィールドのスタイルをデザインに合わせて変更。

これで、Push遷移によるテキスト編集の実装が完了です！

---
