# ãƒ“ãƒ¥ãƒ¼ä¿®æ­£ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

æ—¥ä»˜: 2024-10-17

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/10/18 7:39:12*

ç›´ã—ã¦ã»ã—ã„
'buildExpression' is unavailable: this expression does not conform to 'View'

if viewModel.isPresentedGuide {
                if case .guide(let type) = viewModel.pauseAlert {
                    var title: String = ""
                    var message: String = ""
                    var imageRes: String = ""
                    switch type {
                    case .jaMode:
                        title = "æ—¥æœ¬èªãƒ¢ãƒ¼ãƒ‰"
                        imageRes = "conversation_study_tutorial_ja_mode"
                        message = "è‹±èªã§ãªã‚“ã¦è¨€ã£ãŸã‚‰ã„ã„ã‹ã‚ã‹ã‚‰ãªã„æ™‚ã«ä½¿ã£ã¦ã¿ã¦ã­ï¼ä½¿ã„çµ‚ã‚ã£ãŸã‚‰ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨å…ƒã®ä¼šè©±ã«æˆ»ã‚‹ã‚ˆã€‚"

                    case .preference:
                        title = "ä¼šè©±ã®èª¿æ•´"
                        imageRes = "conversation_study_tutorial_setting"
                        message = "ä¼šè©±ã¯ã‚„ã‚Šã‚„ã™ã„ã§ã™ã‹ï¼Ÿå³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ç›¸æ‰‹ã®ç™ºè©±é€Ÿåº¦ã‚„è¨€èªãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´ã§ãã¾ã™ï¼"
                    }
                    AppAlert {
                        GuideAlert(
                            title: title,
                            imageRes: imageRes,
                            message: message,
                            onOkTapped: { viewModel.hideAlert() }
                        )
                    }
                }
            }

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/10/18 7:39:39*

`buildExpression` ãŒä½¿ãˆãªã„ç†ç”±ã¯ `GuideAlert` ã‚„ `AppAlert` ãŒ `View` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦ã„ãªã„ãŸã‚ã§ã™ã€‚ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ãŸã‚ã«ã¯ã€`GuideAlert` ã¨ `AppAlert` ã‚’ `View` ã«æº–æ‹ ã•ã›ã‚‹ã‹ã€é©åˆ‡ã« SwiftUI ã®ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦æ‰±ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€ã‚³ãƒ¼ãƒ‰ã‚’ SwiftUI ã«é©å¿œã•ã›ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ä¿®æ­£ã‚’è¡Œã„ã¾ã™ã€‚

1. `AppAlert` ãŒ `View` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚
2. `GuideAlert` ãŒ `View` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã§ãã¾ã™:

```swift
if viewModel.isPresentedGuide {
    if case .guide(let type) = viewModel.pauseAlert {
        var title: String = ""
        var message: String = ""
        var imageRes: String = ""
        
        switch type {
        case .jaMode:
            title = "æ—¥æœ¬èªãƒ¢ãƒ¼ãƒ‰"
            imageRes = "conversation_study_tutorial_ja_mode"
            message = "è‹±èªã§ãªã‚“ã¦è¨€ã£ãŸã‚‰ã„ã„ã‹ã‚ã‹ã‚‰ãªã„æ™‚ã«ä½¿ã£ã¦ã¿ã¦ã­ï¼ä½¿ã„çµ‚ã‚ã£ãŸã‚‰ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨å…ƒã®ä¼šè©±ã«æˆ»ã‚‹ã‚ˆã€‚"
        
        case .preference:
            title = "ä¼šè©±ã®èª¿æ•´"
            imageRes = "conversation_study_tutorial_setting"
            message = "ä¼šè©±ã¯ã‚„ã‚Šã‚„ã™ã„ã§ã™ã‹ï¼Ÿå³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ç›¸æ‰‹ã®ç™ºè©±é€Ÿåº¦ã‚„è¨€èªãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´ã§ãã¾ã™ï¼"
        }
        
        AppAlert { // AppAlertãŒViewã«æº–æ‹ ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
            GuideAlert( // GuideAlertãŒViewã«æº–æ‹ ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
                title: title,
                imageRes: imageRes,
                message: message,
                onOkTapped: { viewModel.hideAlert() }
            )
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity) // AppAlertãŒViewã¨ã—ã¦æ­£ã—ãæç”»ã•ã‚Œã‚‹ã‚ˆã†ã«
    }
}
```

`AppAlert` ã¨ `GuideAlert` ãŒã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ãŒã€ã‚‚ã—ã“ã‚Œã‚‰ãŒ `View` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦ã„ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `View` ã«æº–æ‹ ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```swift
struct AppAlert<Content: View>: View {
    let content: Content
    
    var body: some View {
        VStack {
            content
        }
        .background(Color.white)
        .cornerRadius(10)
    }
}

struct GuideAlert: View {
    let title: String
    let imageRes: String
    let message: String
    let onOkTapped: () -> Void
    
    var body: some View {
        VStack {
            Text(title)
                .font(.headline)
            Image(imageRes)
                .resizable()
                .aspectRatio(contentMode: .fit)
            Text(message)
                .font(.body)
            Button("OK", action: onOkTapped)
        }
        .padding()
    }
}
```

ã“ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã¨ã€SwiftUI ã®ãƒ“ãƒ¥ãƒ¼ã®æ§‹é€ ã¨æ•´åˆæ€§ãŒå–ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/10/18 7:40:20*

æº–æ‹ ã—ã¦ã„ã‚‹ã‚“ã ã‘ã©Viewã§è¡Œã£ã¦ã¯ã„ã‘ãªã„è¨˜è¿°ãªã®ã‹ã‚‚ã—ã‚Œãªã„

    enum PauseAlertType: Equatable {
        case none
        case pause
        case quit
        case guide(GuideType)

        enum GuideType {
            case jaMode
            case preference
        }
    }

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/10/18 7:41:04*

`View` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã€ä»¥ä¸‹ã®ç‚¹ãŒå•é¡Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### 1. **æ¡ä»¶åˆ†å²ã§ã®çŠ¶æ…‹ç®¡ç†**
SwiftUI ã§ã¯ `View` ã®æ§‹é€ ãŒå®£è¨€çš„ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€`if` ã‚„ `switch` ã§ãƒ“ãƒ¥ãƒ¼ãƒ„ãƒªãƒ¼ã®çŠ¶æ…‹ã‚’å‹•çš„ã«å¤‰æ›´ã™ã‚‹ã¨å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

### 2. **çŠ¶æ…‹ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œãªã„**
`viewModel.pauseAlert` ã‚„ `viewModel.isPresentedGuide` ã®çŠ¶æ…‹ç®¡ç†ãŒé©åˆ‡ã§ãªã„å ´åˆã€SwiftUI ãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€çŠ¶æ…‹ã‚’æ˜ç¤ºçš„ã« `@State` ã‚„ `@ObservedObject` ã§ç®¡ç†ã—ã€ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¦ã€ãƒ“ãƒ¥ãƒ¼æ§‹é€ ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ã¤ã¤ã€æ¡ä»¶ã«å¿œã˜ã¦ãƒ“ãƒ¥ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ä¿®æ­£ç‰ˆã‚³ãƒ¼ãƒ‰ä¾‹:

```swift
struct ContentView: View {
    @ObservedObject var viewModel: ViewModel

    var body: some View {
        VStack {
            if viewModel.isPresentedGuide {
                if let type = viewModel.getPauseGuideType() {
                    GuideAlertView(type: type) {
                        viewModel.hideAlert()
                    }
                }
            }
        }
    }
}

struct GuideAlertView: View {
    let type: PauseAlertType.GuideType
    let onOkTapped: () -> Void

    var body: some View {
        var title: String = ""
        var message: String = ""
        var imageRes: String = ""

        switch type {
        case .jaMode:
            title = "æ—¥æœ¬èªãƒ¢ãƒ¼ãƒ‰"
            imageRes = "conversation_study_tutorial_ja_mode"
            message = "è‹±èªã§ãªã‚“ã¦è¨€ã£ãŸã‚‰ã„ã„ã‹ã‚ã‹ã‚‰ãªã„æ™‚ã«ä½¿ã£ã¦ã¿ã¦ã­ï¼ä½¿ã„çµ‚ã‚ã£ãŸã‚‰ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨å…ƒã®ä¼šè©±ã«æˆ»ã‚‹ã‚ˆã€‚"

        case .preference:
            title = "ä¼šè©±ã®èª¿æ•´"
            imageRes = "conversation_study_tutorial_setting"
            message = "ä¼šè©±ã¯ã‚„ã‚Šã‚„ã™ã„ã§ã™ã‹ï¼Ÿå³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ç›¸æ‰‹ã®ç™ºè©±é€Ÿåº¦ã‚„è¨€èªãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´ã§ãã¾ã™ï¼"
        }

        VStack {
            Text(title)
                .font(.headline)
            Image(imageRes)
                .resizable()
                .aspectRatio(contentMode: .fit)
            Text(message)
                .font(.body)
            Button("OK", action: onOkTapped)
        }
        .padding()
        .background(Color.white)
        .cornerRadius(10)
        .shadow(radius: 5)
    }
}

class ViewModel: ObservableObject {
    @Published var isPresentedGuide: Bool = false
    @Published var pauseAlert: PauseAlertType = .none

    func getPauseGuideType() -> PauseAlertType.GuideType? {
        if case let .guide(type) = pauseAlert {
            return type
        }
        return nil
    }

    func hideAlert() {
        pauseAlert = .none
        isPresentedGuide = false
    }
}
```

### ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆï¼š
1. **`GuideAlertView` ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç§»å‹•**  
   `GuideAlertView` ã« `GuideType` ã«ã‚ˆã‚‹ã‚¹ã‚¤ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã‚’ç§»å‹•ã•ã›ã€ãƒ“ãƒ¥ãƒ¼ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ã¤ã¤è¡¨ç¤ºã‚’åˆ†é›¢ã—ã¾ã—ãŸã€‚

2. **`viewModel.getPauseGuideType()` ã®å°å…¥**  
   `pauseAlert` ãŒ `.guide` ã®å ´åˆã®ã¿ `GuideType` ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¦ã€ãƒ“ãƒ¥ãƒ¼ã§ã® `if case` æ–‡ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ã¾ã—ãŸã€‚

3. **çŠ¶æ…‹ç®¡ç†ã®ä¿®æ­£**  
   SwiftUI ã®ãƒ“ãƒ¥ãƒ¼ã¯çŠ¶æ…‹ãŒå¤‰ã‚ã‚‹ãŸã³ã«å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŸã‚ã€`@Published` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã„ã€çŠ¶æ…‹ã®å¤‰åŒ–ãŒåæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ã“ã‚Œã§ã€SwiftUI ã®å®£è¨€çš„ãªãƒ“ãƒ¥ãƒ¼æ§‹é€ ã«é©ã—ãŸæ–¹æ³•ã§ã‚¬ã‚¤ãƒ‰ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã§ãã‚‹ã¯ãšã§ã™ã€‚

---
