# OpenAPIè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

æ—¥ä»˜: 2025-03-05

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 13:08:46*

æ—¥æœ¬èªã§ @Openapi( ã®è¨­å®šæ™‚ã«æŒ‡å®šã—ãŸæ–¹ãŒã‚ˆã•ãã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ•™ãˆã¦ã»ã—ã„

// Openapi Generator last run: : 2025-03-05T13:05:58.668527
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  additionalProperties: AdditionalProperties(
    pubName: 'guild_api',
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  generatorName: Generator.dio,
  runSourceGenOnOutput: true,
  outputDirectory: 'lib/infrastructure/openapi/generated',
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
)
class Example {}




import 'dart:convert';
import 'dart:io';

import 'package:crypto/crypto.dart';
import 'package:meta/meta.dart';

class Openapi {
  /// Additional properties to pass to the compiler (CSV)
  ///
  /// --additional-properties
  final AdditionalProperties? additionalProperties;

  // /// Allows you to customize how inline schemas are handled or named
  // ///
  // /// --inline-schema-options
  // final InlineSchemaOptions? inlineSchemaOptions;

  /// The package of the api. defaults to lib.api
  ///
  /// --api-package
  final String? apiPackage;

  /// Provides the access information to the input spec file.
  ///
  /// For use with useNextGen.
  ///
  /// The next generation of the OAS spec file information. Allows for local and
  /// remote spec files.
  ///
  /// This version of the spec file configuration allows for custom authorization
  /// to be applied to the fetch request when the spec file is in a remote
  /// location. There is also special handling for when the spec file lives within
  /// AWS.
  final InputSpec inputSpec;

  /// folder containing the template files
  ///
  /// You can read more about templating here
  /// https://github.com/OpenAPITools/openapi-generator/blob/master/docs/templating.md
  /// -t
  final String? templateDirectory;

  /// Generator to use (dart|dart2-api|dart-jaguar|dart-dio)
  ///
  /// -g, --generator-name
  final Generator generatorName;

  ///  Where to write the generated files (current dir by default)
  ///
  ///  -o, --output
  final String? outputDirectory;

  /// Defines whether the output directory should be cleaned up before generating the output.
  ///
  /// e.g [''], ['lib/src']
  final List&lt;String&gt;? cleanSubOutputDirectory;

  /// Skips the default behavior of validating an input specification.
  ///
  /// --skip-validate-spec
  final bool? skipSpecValidation;

  /// Add reserved words mappings as reservedWord=replacement format.
  /// It is supported by the dart2-api and dart-dio generator.
  ///
  /// --reserved-words-mappings
  final Map&lt;String, String&gt;? reservedWordsMappings;

  /// if set to true, flutter pub get will be run on the [outputDirectory] after the code has been generated.
  /// Defaults to true for backwards compatibility
  final bool? fetchDependencies;

  ///if set to true, source gen will be run on the output of openapi-generator
  ///Defaults to true
  final bool? runSourceGenOnOutput;

  ///  sets mappings between OpenAPI spec types and generated code types in
  ///  the format of OpenAPIType=generatedType,OpenAPIType=generatedType.
  ///  For example: array=List,map=Map,string=String. You can also have
  ///  multiple occurrences of this option. To map a specified format, use
  ///  type+format, e.g. string+password=EncryptedString will map `type:
  ///  string, format: password` to `EncryptedString`.
  ///
  ///   --type-mappings
  final Map&lt;String, String&gt;? typeMappings;

  /// a map to store the mapping between property name and the name provided by the user
  ///
  ///  specifies mappings between the property name and the new name in the format
  ///  of property_a=firstProperty,property_b=secondProperty.
  ///  [HTTP](https://openapi-generator.tech/docs/customization/#name-mapping)

  ///   --name-mappings
  final Map&lt;String, String&gt;? nameMappings;

  ///  Specifies mappings between the enum name and the new name in the
  ///  format of enum_name=AnotherName,enum_name2=OtherName2. You can also
  ///  have multiple occurrences of this option.

  ///  --enum-name-mappings
  final Map&lt;String, String&gt;? enumNameMappings;

  /// specifies mappings between a given class and the import that should
  /// be used for that class in the format of type=import,type=import. You
  /// can also have multiple occurrences of this option.
  ///
  /// --import-mappings
  ///
  /// e.g {'OffsetDate': 'package:time_machine/time_machine.dart'}
  final Map&lt;String, String&gt;? importMappings;

  /// Inline schemas are created as separate schemas automatically and the
  /// auto-generated schema name may not look good to everyone. One can customize
  /// the name using the title field or the inlineSchemaNameMapping option.
  ///
  /// --inline-schema-name-mappings
  ///
  /// e.g {'inline_object_2': 'SomethingMapped'}
  final Map&lt;String, String&gt;? inlineSchemaNameMappings;

  /// The path where to store the cached copy of the specification.
  ///
  /// If you have more than one spec file, you can use this to cache them separately otherwise they will all be cached
  /// in the exact same file which means only the last spec that was processed with end up being cached.
  ///
  /// e.g .dart_tool/spec/specA.json
  final String? cachePath;

  /// Use a custom pubspec when running the generator.
  final String? projectPubspecPath;

  /// Include in depth logging output from run commands.
  final bool debugLogging;

  /// If `true`, the annotated file will be modified after code generation completes.
  ///
  /// This is a workaround to ensure this library runs every time you execute the `build_runner` command.
  ///
  /// **Why modify the file?**
  ///
  /// `build_runner` only processes files that have changed since the last run. By modifying the file, you
  /// force `build_runner` to recognize it as changed and re-run the generation process.
  ///
  /// Note: Setting this to `true` can lead to merge conflicts in team environments,
  /// as each developer may end up modifying the annotated file.
  ///
  /// This setting is different from [skipIfSpecIsUnchanged], which only regenerates
  /// the client SDK if it detects changes in the OpenAPI specification.
  ///
  /// Defaults to [false].
  final bool forceAlwaysRun;

  /// Skips execution if the OpenAPI specification file is different from a cached copy.
  ///
  /// For remote specifications, the file will be downloaded and cached locally.
  /// The cache is then compared to the remote file to detect any changes.
  ///
  /// If set to false, a cached copy of the OpenAPI specification file is not kept.
  ///
  /// Defaults to [true].
  final bool skipIfSpecIsUnchanged;

  const Openapi({
    this.additionalProperties,
    this.skipSpecValidation = false,
    required this.inputSpec,
    this.templateDirectory,
    required this.generatorName,
    this.outputDirectory,
    this.cleanSubOutputDirectory,
    this.typeMappings,
    this.nameMappings,
    this.enumNameMappings,
    this.importMappings,
    this.reservedWordsMappings,
    this.inlineSchemaNameMappings,
    // this.inlineSchemaOptions,
    this.apiPackage,
    this.fetchDependencies = true,
    this.runSourceGenOnOutput = true,
    this.cachePath,
    this.projectPubspecPath,
    this.debugLogging = false,
    this.forceAlwaysRun = true,
    this.skipIfSpecIsUnchanged = true,
  });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('@Openapi(');
    if (additionalProperties != null) {
      buffer.writeln('  additionalProperties: $additionalProperties,');
    }
    if (apiPackage != null) {
      buffer.writeln('  apiPackage: "$apiPackage",');
    }
    buffer.writeln('  inputSpec: $inputSpec,');
    if (templateDirectory != null) {
      buffer.writeln('  templateDirectory: "$templateDirectory",');
    }
    buffer.writeln('  generatorName: $generatorName,');
    if (outputDirectory != null) {
      buffer.writeln('  outputDirectory: "$outputDirectory",');
    }
    if (cleanSubOutputDirectory != null) {
      buffer.writeln(
          '  cleanSubOutputDirectory: ["${cleanSubOutputDirectory!.join('", "')}"],');
    }
    if (skipSpecValidation != null) {
      buffer.writeln('  skipSpecValidation: $skipSpecValidation,');
    }
    if (reservedWordsMappings != null) {
      buffer.writeln(
          '  reservedWordsMappings: ${reservedWordsMappings.toString()},');
    }
    if (fetchDependencies != null) {
      buffer.writeln('  fetchDependencies: $fetchDependencies,');
    }
    if (runSourceGenOnOutput != null) {
      buffer.writeln('  runSourceGenOnOutput: $runSourceGenOnOutput,');
    }
    if (typeMappings != null) {
      buffer.writeln('  typeMappings: ${_formatMap(typeMappings!)},');
    }
    if (nameMappings != null) {
      buffer.writeln('  nameMappings: ${_formatMap(nameMappings!)},');
    }
    if (enumNameMappings != null) {
      buffer.writeln('  enumNameMappings: ${_formatMap(enumNameMappings!)},');
    }
    if (importMappings != null) {
      buffer.writeln('  importMappings: ${_formatMap(importMappings!)},');
    }
    if (inlineSchemaNameMappings != null) {
      buffer.writeln(
          '  inlineSchemaNameMappings: ${_formatMap(inlineSchemaNameMappings!)},');
    }
    if (cachePath != null) {
      buffer.writeln('  cachePath: "$cachePath",');
    }
    if (projectPubspecPath != null) {
      buffer.writeln('  projectPubspecPath: "$projectPubspecPath",');
    }
    buffer.writeln('  debugLogging: $debugLogging,');
    buffer.writeln('  forceAlwaysRun: $forceAlwaysRun,');
    buffer.writeln('  skipIfSpecIsUnchanged: $skipIfSpecIsUnchanged,');
    buffer.write(')');
    return buffer.toString();
  }
}

String _formatMap(Map&lt;String, String&gt; map) {
  final buffer = StringBuffer();
  buffer.write('{');
  buffer.writeAll(
      map.entries.map((entry) =&gt; "'${entry.key}':'${entry.value}'"), ', ');
  buffer.write('}');
  return buffer.toString();
}

/// Provides the input spec file to be used.
///
/// Provides the location of the input spec file to be used by the generator.
/// Includes the option to use the default json or yaml paths.
class InputSpec {
  final String path;

  const InputSpec({required this.path});

  const InputSpec.json() : this(path: 'openapi.json');

  const InputSpec.yaml({bool shortExtension = false})
      : this(path: 'openapi.y${shortExtension ? '' : 'a'}ml');

  InputSpec.fromMap(Map&lt;String, dynamic&gt; map) : this(path: map['path']);

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('InputSpec(');
    buffer.writeln('  path: "$path"');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Provides the location for the remote specification.
///
/// Provides basic support for fetching remote specification files hidden behind
/// an authenticated endpoint.
///
/// By default when no [url] is provided a default [Uri.http] to
/// localhost:8080/ is used.
///
/// This contains authentication information for fetching the OAS spec ONLY. This
/// does not apply security to the entry points defined in the OAS spec.
class RemoteSpec extends InputSpec {
  final RemoteSpecHeaderDelegate headerDelegate;

  const RemoteSpec({
    required String path,
    this.headerDelegate = const RemoteSpecHeaderDelegate(),
  }) : super(path: path);

  const RemoteSpec.empty() : this(path: 'http://localhost:8080/');

  Uri get url =&gt; Uri.parse(path);

  RemoteSpec.fromMap(Map&lt;String, dynamic&gt; map)
      : headerDelegate =
            map['headerDelegate'] ?? const RemoteSpecHeaderDelegate(),
        super.fromMap(map);

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('RemoteSpec(');
    buffer.writeln('  path: "$path",');
    buffer.writeln('  headerDelegate: $headerDelegate');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Default [RemoteSpecHeaderDelegate] used when retrieving a remote OAS spec.
class RemoteSpecHeaderDelegate {
  const RemoteSpecHeaderDelegate();

  Map&lt;String, String&gt;? header() =&gt; null;

  RemoteSpecHeaderDelegate.fromMap(Map&lt;String, dynamic&gt; map) : this();

  @override
  String toString() =&gt; 'RemoteSpecHeaderDelegate()';
}

/// Indicates whether or not the spec file live within AWS.
///
/// Since AWS handles the authentication header differently, we need to inform
/// the builder to include the alternate auth header.
///
/// This currently only supports AWS Object GET.
///
/// This contains authentication information for fetching the OAS spec ONLY. This
/// does not apply security to the entry points defined in the OAS spec.
///
/// This delegate makes the assumption that the AWS credentials to be used are
/// provided by the environment and are not empty.
class AWSRemoteSpecHeaderDelegate extends RemoteSpecHeaderDelegate {
  /// The [bucket] where the OAS spec is stored within AWS.
  final String bucket;
  final String? accessKeyId;
  final String? secretAccessKey;

  const AWSRemoteSpecHeaderDelegate({
    required this.bucket,
    this.secretAccessKey = null,
    this.accessKeyId = null,
  }) : super();

  AWSRemoteSpecHeaderDelegate.fromMap(Map&lt;String, dynamic&gt; map)
      : bucket = map['bucket'],
        accessKeyId = map['accessKeyId'],
        secretAccessKey = map['secretAccessKey'],
        super.fromMap(map);

  /// Generates the [header] map used within the GET request.
  ///
  /// Assumes that the user's auth AWS credentials
  @override
  Map&lt;String, String&gt;? header({
    String? path,
  }) {
    if (!(path != null && path.isNotEmpty)) {
      throw new AssertionError('The path to the OAS spec should be provided');
    }

    // Use the provided credentials to the constructor, if any, otherwise
    // fallback to the environment values or throw.
    final accessKey = accessKeyId ?? Platform.environment['AWS_ACCESS_KEY_ID'];
    final secretKey =
        secretAccessKey ?? Platform.environment['AWS_SECRET_ACCESS_KEY'];
    if ((accessKey == null || accessKey.isEmpty) ||
        (secretKey == null || secretKey.isEmpty)) {
      throw new AssertionError(
          'AWS_SECRET_KEY_ID & AWS_SECRET_ACCESS_KEY should be defined and not empty or they should be provided in the delegate constructor.');
    }

    final now = DateTime.now();

    return {
      'Authorization': authHeaderContent(
        now: now,
        bucket: bucket,
        path: path,
        accessKeyId: accessKey,
        secretAccessKey: secretKey,
      ),
      'x-amz-date': now.toIso8601String(),
    };
  }

  /// The [Authentication] header content.
  ///
  /// This builds the Authorization header content format used by AWS.
  @visibleForTesting
  String authHeaderContent({
    required DateTime now,
    required String bucket,
    required String path,
    required String accessKeyId,
    required String secretAccessKey,
  }) {
    // https://docs.aws.amazon.com/AmazonS3/latest/userguide/RESTAuthentication.html#RESTAuthenticationExamples
    String toSign = [
      'GET',
      '',
      '',
      now.toIso8601String(),
      '/$bucket/$path',
    ].join('\n');

    final utf8AKey = utf8.encode(secretAccessKey);
    final utf8ToSign = utf8.encode(toSign);

    final signature =
        base64Encode(Hmac(sha1, utf8AKey).convert(utf8ToSign).bytes);
    return 'AWS $accessKeyId:$signature';
  }
}

class AdditionalProperties {
  ///  toggles whether unicode identifiers are allowed in names or not, default is false
  final bool? allowUnicodeIdentifiers;

  /// Whether to ensure parameter names are unique in an operation (rename parameters that are not).
  final bool? ensureUniqueParams;

  /// Add form or body parameters to the beginning of the parameter list.
  final bool? prependFormOrBodyParameters;

  ///	Author name in generated pubspec
  final String? pubAuthor;

  /// 	Email address of the author in generated pubspec
  final String? pubAuthorEmail;

  ///	Description in generated pubspec
  final String? pubDescription;

  ///	Homepage in generated pubspec
  final String? pubHomepage;

  ///	Name in generated pubspec
  final String? pubName;

  /// Version in generated pubspec
  final String? pubVersion;

  /// Sort model properties to place required parameters before optional parameters.
  final bool? sortModelPropertiesByRequiredFlag;

  /// Sort method arguments to place required parameters before optional parameters.
  final bool? sortParamsByRequiredFlag;

  /// Source folder for generated code
  final String? sourceFolder;

  /// Allow the 'x-enum-values' extension for enums
  final bool? useEnumExtension;

  /// If the server adds new enum cases, that are unknown by an old spec/client,
  /// the client will fail to parse the network response.With this option enabled, each enum will have a new case, 'unknown_default_open_api',
  /// so that when the server sends an enum case that is not known by the client/spec,
  /// they can safely fallback to this case.
  ///
  /// Default: false
  final bool enumUnknownDefaultCase;

  /// Flutter wrapper to use (none|flutterw|fvm)
  final Wrapper wrapper;

  /// Set to true for generators with better support for discriminators.
  /// (Python, Java, Go, PowerShell, C#have this enabled by default).
  ///
  /// true
  /// The mapping in the discriminator includes descendent schemas that allOf
  /// inherit from self and the discriminator mapping schemas in the OAS document.
  ///
  /// false
  /// The mapping in the discriminator includes any descendent schemas that allOf
  /// inherit from self, any oneOf schemas, any anyOf schemas, any x-discriminator-values,
  /// and the discriminator mapping schemas in the OAS document AND Codegen validates
  /// that oneOf and anyOf schemas contain the required discriminator and throws
  /// an error if the discriminator is missing.
  final bool legacyDiscriminatorBehavior;

  const AdditionalProperties({
    this.allowUnicodeIdentifiers = false,
    this.ensureUniqueParams = true,
    this.useEnumExtension = false,
    this.enumUnknownDefaultCase = false,
    this.prependFormOrBodyParameters = false,
    this.pubAuthor,
    this.pubAuthorEmail,
    this.pubDescription,
    this.pubHomepage,
    this.legacyDiscriminatorBehavior = true,
    this.pubName,
    this.pubVersion,
    this.sortModelPropertiesByRequiredFlag = true,
    this.sortParamsByRequiredFlag = true,
    this.sourceFolder,
    this.wrapper = Wrapper.none,
  });

  /// Produces an [AdditionalProperties] object from the [ConstantReader] [map].
  AdditionalProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : this(
          allowUnicodeIdentifiers: map['allowUnicodeIdentifiers'] ?? false,
          ensureUniqueParams: map['ensureUniqueParams'] ?? true,
          useEnumExtension: map['useEnumExtension'] ?? true,
          enumUnknownDefaultCase: map['enumUnknownDefaultCase'] ?? false,
          prependFormOrBodyParameters:
              map['prependFormOrBodyParameters'] ?? false,
          pubAuthor: map['pubAuthor'],
          pubAuthorEmail: map['pubAuthorEmail'],
          pubDescription: map['pubDescription'],
          pubHomepage: map['pubHomepage'],
          pubName: map['pubName'],
          pubVersion: map['pubVersion'],
          legacyDiscriminatorBehavior:
              map['legacyDiscriminatorBehavior'] ?? true,
          sortModelPropertiesByRequiredFlag:
              map['sortModelPropertiesByRequiredFlag'] ?? true,
          sortParamsByRequiredFlag: map['sortParamsByRequiredFlag'] ?? true,
          sourceFolder: map['sourceFolder'],
          wrapper: EnumTransformer.wrapper(map['wrapper']),
        );

  Map&lt;String, dynamic&gt; toMap() =&gt; {
        'allowUnicodeIdentifiers': allowUnicodeIdentifiers,
        'ensureUniqueParams': ensureUniqueParams,
        'useEnumExtension': useEnumExtension,
        'enumUnknownDefaultCase': enumUnknownDefaultCase,
        'prependFormOrBodyParameters': prependFormOrBodyParameters,
        if (pubAuthor != null) 'pubAuthor': pubAuthor,
        if (pubAuthorEmail != null) 'pubAuthorEmail': pubAuthorEmail,
        if (pubDescription != null) 'pubDescription': pubDescription,
        if (pubHomepage != null) 'pubHomepage': pubHomepage,
        if (pubName != null) 'pubName': pubName,
        if (pubVersion != null) 'pubVersion': pubVersion,
        'legacyDiscriminatorBehavior': legacyDiscriminatorBehavior,
        'sortModelPropertiesByRequiredFlag': sortModelPropertiesByRequiredFlag,
        'sortParamsByRequiredFlag': sortParamsByRequiredFlag,
        if (sourceFolder != null) 'sourceFolder': sourceFolder,
        'wrapper': EnumTransformer.wrapperName(wrapper)
      };

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('AdditionalProperties(');
    if (allowUnicodeIdentifiers != null)
      buffer.writeln('  allowUnicodeIdentifiers: $allowUnicodeIdentifiers,');
    if (ensureUniqueParams != null)
      buffer.writeln('  ensureUniqueParams: $ensureUniqueParams,');
    if (prependFormOrBodyParameters != null)
      buffer.writeln(
          '  prependFormOrBodyParameters: $prependFormOrBodyParameters,');
    if (pubAuthor != null) buffer.writeln('  pubAuthor: "$pubAuthor",');
    if (pubAuthorEmail != null)
      buffer.writeln('  pubAuthorEmail: "$pubAuthorEmail",');
    if (pubDescription != null)
      buffer.writeln('  pubDescription: "$pubDescription",');
    if (pubHomepage != null) buffer.writeln('  pubHomepage: "$pubHomepage",');
    if (pubName != null) buffer.writeln('  pubName: "$pubName",');
    if (pubVersion != null) buffer.writeln('  pubVersion: "$pubVersion",');
    if (sortModelPropertiesByRequiredFlag != null)
      buffer.writeln(
          '  sortModelPropertiesByRequiredFlag: $sortModelPropertiesByRequiredFlag,');
    if (sortParamsByRequiredFlag != null)
      buffer.writeln('  sortParamsByRequiredFlag: $sortParamsByRequiredFlag,');
    if (sourceFolder != null)
      buffer.writeln('  sourceFolder: "$sourceFolder",');
    if (useEnumExtension != null)
      buffer.writeln('  useEnumExtension: $useEnumExtension,');
    buffer.writeln('  enumUnknownDefaultCase: $enumUnknownDefaultCase,');
    buffer.writeln('  wrapper: $wrapper,');
    buffer
        .writeln('  legacyDiscriminatorBehavior: $legacyDiscriminatorBehavior');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Allows you to customize how inline schemas are handled or named
class InlineSchemaOptions {
  ///  sets the array item suffix
  final String? arrayItemSuffix;

  /// set the map item suffix
  final String? mapItemSuffix;

  /// special value to skip reusing inline schemas during refactoring
  final bool skipSchemaReuse;

  ///	will restore the 6.x (or below) behaviour to refactor allOf inline schemas
  ///into $ref. (v7.0.0 will skip the refactoring of these allOf inline schemas by default)
  final bool refactorAllofInlineSchemas;

  /// Email address of the author in generated pubspec
  final bool resolveInlineEnums;

  const InlineSchemaOptions(
      {this.arrayItemSuffix,
      this.mapItemSuffix,
      this.skipSchemaReuse = true,
      this.refactorAllofInlineSchemas = true,
      this.resolveInlineEnums = true});

  /// Produces an [InlineSchemaOptions] that is easily consumable from the [ConstantReader].
  InlineSchemaOptions.fromMap(Map&lt;String, dynamic&gt; map)
      : this(
          arrayItemSuffix: map['arrayItemSuffix'],
          mapItemSuffix: map['mapItemSuffix'],
          skipSchemaReuse: map['skipSchemaReuse'] ?? true,
          refactorAllofInlineSchemas: map['refactorAllofInlineSchemas'] ?? true,
          resolveInlineEnums: map['resolveInlineEnums'] ?? true,
        );

  /// A convenience function that simplifies the output to the compiler.
  Map&lt;String, dynamic&gt; toMap() =&gt; {
        if (arrayItemSuffix != null) 'arrayItemSuffix': arrayItemSuffix!,
        if (mapItemSuffix != null) 'mapItemSuffix': mapItemSuffix!,
        'skipSchemaReuse': skipSchemaReuse,
        'refactorAllofInlineSchemas': refactorAllofInlineSchemas,
        'resolveInlineEnums': resolveInlineEnums,
      };

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('InlineSchemaOptions(');
    if (arrayItemSuffix != null)
      buffer.writeln('  arrayItemSuffix: "$arrayItemSuffix",');
    if (mapItemSuffix != null)
      buffer.writeln('  mapItemSuffix: "$mapItemSuffix",');
    buffer.writeln('  skipSchemaReuse: $skipSchemaReuse,');
    buffer
        .writeln('  refactorAllofInlineSchemas: $refactorAllofInlineSchemas,');
    buffer.writeln('  resolveInlineEnums: $resolveInlineEnums');
    buffer.write(')');
    return buffer.toString();
  }
}

class DioProperties extends AdditionalProperties {
  /// Choose serialization format JSON or PROTO is supported
  final DioDateLibrary? dateLibrary;
  final DioSerializationLibrary? serializationLibrary;

  /// Is the null fields should be in the JSON payload
  final bool? nullableFields;

  const DioProperties(
      {this.dateLibrary,
      this.nullableFields,
      this.serializationLibrary,
      bool allowUnicodeIdentifiers = false,
      bool ensureUniqueParams = true,
      bool prependFormOrBodyParameters = false,
      String? pubAuthor,
      String? pubAuthorEmail,
      String? pubDescription,
      String? pubHomepage,
      String? pubName,
      String? pubVersion,
      bool sortModelPropertiesByRequiredFlag = true,
      bool sortParamsByRequiredFlag = true,
      bool useEnumExtension = true,
      bool enumUnknownDefaultCase = false,
      String? sourceFolder,
      Wrapper wrapper = Wrapper.none})
      : super(
            allowUnicodeIdentifiers: allowUnicodeIdentifiers,
            ensureUniqueParams: ensureUniqueParams,
            prependFormOrBodyParameters: prependFormOrBodyParameters,
            pubAuthor: pubAuthor,
            pubAuthorEmail: pubAuthorEmail,
            pubDescription: pubDescription,
            pubHomepage: pubHomepage,
            pubName: pubName,
            pubVersion: pubVersion,
            sortModelPropertiesByRequiredFlag:
                sortModelPropertiesByRequiredFlag,
            sortParamsByRequiredFlag: sortParamsByRequiredFlag,
            sourceFolder: sourceFolder,
            useEnumExtension: useEnumExtension,
            enumUnknownDefaultCase: enumUnknownDefaultCase,
            wrapper: wrapper);

  DioProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : dateLibrary = EnumTransformer.dioDateLibrary(map['dateLibrary']),
        nullableFields = map['nullableFields'],
        serializationLibrary = EnumTransformer.dioSerializationLibrary(
            map['serializationLibrary']),
        super.fromMap(map);

  Map&lt;String, dynamic&gt; toMap() =&gt; Map.from(super.toMap())
    ..addAll({
      if (dateLibrary != null)
        'dateLibrary': EnumTransformer.dioDateLibraryName(dateLibrary!),
      if (nullableFields != null) 'nullableFields': nullableFields,
      if (serializationLibrary != null)
        'serializationLibrary':
            EnumTransformer.dioSerializationLibraryName(serializationLibrary!),
    });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('DioProperties(');
    buffer.writeln(super
        .toString()
        .replaceAll(RegExp(r'AdditionalProperties\(|\)$'), '')
        .replaceAll('\n', '\n  ')); // Indent base class fields
    if (dateLibrary != null) buffer.writeln('  dateLibrary: $dateLibrary,');
    if (nullableFields != null)
      buffer.writeln('  nullableFields: $nullableFields,');
    if (serializationLibrary != null)
      buffer.writeln('  serializationLibrary: $serializationLibrary,');
    buffer.write(')');
    return buffer.toString();
  }
}

class DioAltProperties extends AdditionalProperties {
  /// This will turn off AnyOf support. This would be a bit weird, but you can do it if you want.
  final bool? listAnyOf;

  /// Anything in this will be split on a command added to the dependencies section of your generated code.
  /// pubspec-dependencies
  ///
  /// this allows a user to specify additional dependencies required for this artifact, it spits
  /// the comma separated list into a proper list, removing empty ones and makes it available in the appropriate
  /// vendor-prefix to allow the mustache template to pick it up.
  ///
  /// dependencies should be comma separated
  final String? pubspecDependencies;

  /// pubspec-dev-dependencies
  /// Anything here will be added to the dev dependencies of your generated code.
  final String? pubspecDevDependencies;

  const DioAltProperties(
      {this.pubspecDependencies,
      this.pubspecDevDependencies,
      this.listAnyOf,
      bool allowUnicodeIdentifiers = false,
      bool ensureUniqueParams = true,
      bool prependFormOrBodyParameters = false,
      String? pubAuthor,
      String? pubAuthorEmail,
      String? pubDescription,
      String? pubHomepage,
      String? pubName,
      String? pubVersion,
      bool sortModelPropertiesByRequiredFlag = true,
      bool sortParamsByRequiredFlag = true,
      bool useEnumExtension = true,
      bool enumUnknownDefaultCase = false,
      String? sourceFolder,
      Wrapper wrapper = Wrapper.none})
      : super(
            allowUnicodeIdentifiers: allowUnicodeIdentifiers,
            ensureUniqueParams: ensureUniqueParams,
            prependFormOrBodyParameters: prependFormOrBodyParameters,
            pubAuthor: pubAuthor,
            pubAuthorEmail: pubAuthorEmail,
            pubDescription: pubDescription,
            pubHomepage: pubHomepage,
            pubName: pubName,
            pubVersion: pubVersion,
            sortModelPropertiesByRequiredFlag:
                sortModelPropertiesByRequiredFlag,
            sortParamsByRequiredFlag: sortParamsByRequiredFlag,
            sourceFolder: sourceFolder,
            useEnumExtension: useEnumExtension,
            enumUnknownDefaultCase: enumUnknownDefaultCase,
            wrapper: wrapper);

  DioAltProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : listAnyOf = map['listAnyOf'],
        pubspecDependencies = map['pubspecDependencies'],
        pubspecDevDependencies = map['pubspecDevDependencies'],
        super.fromMap(map);

  Map&lt;String, dynamic&gt; toMap() =&gt; Map.from(super.toMap())
    ..addAll({
      if (listAnyOf != null) 'listAnyOf': listAnyOf,
      if (pubspecDependencies != null)
        'pubspecDependencies': pubspecDependencies,
      if (pubspecDevDependencies != null)
        'pubspecDevDependencies': pubspecDevDependencies,
    });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('DioAltProperties(');

    // Indent the fields from AdditionalProperties
    buffer.writeln(super
        .toString()
        .replaceAll(RegExp(r'AdditionalProperties\(|\)$'), '')
        .replaceAll('\n', '\n  '));

    // Add DioAltProperties-specific fields
    if (listAnyOf != null) buffer.writeln('  listAnyOf: $listAnyOf,');
    if (pubspecDependencies != null)
      buffer.writeln('  pubspecDependencies: "$pubspecDependencies",');
    if (pubspecDevDependencies != null)
      buffer.writeln('  pubspecDevDependencies: "$pubspecDevDependencies",');

    buffer.write(')');
    return buffer.toString();
  }
}

enum DioDateLibrary {
  /// Dart core library (DateTime)
  core,

  /// Time Machine is date and time library for Flutter, Web, and Server with
  /// support for timezones, calendars, cultures, formatting and parsing.
  timemachine
}

enum DioSerializationLibrary {
  @Deprecated('Use [builtValue] instead.')
  built_value,
  builtValue,
  jsonSerializable
}

enum SerializationFormat { JSON, PROTO }

/// The name of the generator to use
enum Generator {
  /// This generator uses the default http package that comes with dart
  /// corresponds to dart
  dart,

  /// This generator uses the dio package. Source gen is required after generating code with this generator
  /// corresponds to dart-dio
  ///
  /// A powerful Http client for Dart, which supports Interceptors, Global configuration,
  /// FormData, Request Cancellation, File downloading, Timeout etc
  /// https://pub.flutter-io.cn/packages/dio
  dio,

  /// This uses the generator provided by bluetrainsoftware which internally uses the dio package
  ///
  /// You can read more about it here https://github.com/dart-ogurets/dart-openapi-maven
  dioAlt,
}

// TODO: Upon release of NextGen as default migrate to sdk 2.17 for enhanced enums
//  remove this work around.
/// Transforms the enums used with the [Openapi] annotation.
class EnumTransformer {
  static DioDateLibrary? dioDateLibrary(String? name) {
    switch (name) {
      case 'timemachine':
        return DioDateLibrary.timemachine;
      case 'core':
        return DioDateLibrary.core;
    }
    return null;
  }

  static String dioDateLibraryName(DioDateLibrary lib) {
    switch (lib) {
      case DioDateLibrary.timemachine:
        return 'timemachine';
      default:
        return 'core';
    }
  }

  static DioSerializationLibrary? dioSerializationLibrary(String? name) {
    switch (name) {
      case 'json_serializable':
      case 'jsonSerializable':
        return DioSerializationLibrary.jsonSerializable;
      case 'built_value':
      case 'builtValue':
        return DioSerializationLibrary.builtValue;
    }
    return null;
  }

  static String dioSerializationLibraryName(DioSerializationLibrary lib) {
    switch (lib) {
      case DioSerializationLibrary.jsonSerializable:
        return 'json_serializable';
      default:
        return 'built_value';
    }
  }

  /// Converts the given [name] to the matching [Generator] name.
  ///
  /// Defaults to [Generator.dart];
  static Generator generator(String? name) {
    switch (name) {
      case 'dio':
        return Generator.dio;
      case 'dioAlt':
        return Generator.dioAlt;
      default:
        return Generator.dart;
    }
  }

  static String generatorName(Generator generator) {
    switch (generator) {
      case Generator.dio:
        return 'dart-dio';
      case Generator.dioAlt:
        return 'dart2-api';
      default:
        return 'dart';
    }
  }

  /// Converts the given [name] to the matching [Wrapper] name.
  ///
  /// Defaults to [Wrapper.none];
  static Wrapper wrapper(String? name) {
    switch (name) {
      case 'fvm':
        return Wrapper.fvm;
      case 'flutterw':
        return Wrapper.flutterw;
      default:
        return Wrapper.none;
    }
  }

  static String wrapperName(Wrapper wrapper) {
    switch (wrapper) {
      case Wrapper.flutterw:
        return 'flutterw';
      case Wrapper.fvm:
        return 'fvm';
      default:
        return 'none';
    }
  }
}

enum Wrapper { fvm, flutterw, none }

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 13:08:46*

ä»¥ä¸‹ã§ã¯ã€`@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆOpenAPI Generator ã‚’ Dart/Dio ç”¨ã«ä½¿ã†å ´åˆï¼‰ã«ãŠã„ã¦ã€æŒ‡å®šã—ã¦ãŠãã¨ä¾¿åˆ©ãƒ»ãŠã™ã™ã‚ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¾‹ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€Œè¨­å®šã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã‚„ç”Ÿæˆå¾Œã®ã‚³ãƒ¼ãƒ‰ã§ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã‚‚ã®ã€ã«ãªã‚Šã¾ã™ã€‚

---

## 1. `additionalProperties`ï¼ˆç‰¹ã« `pubName`, `pubVersion` ãªã©ï¼‰
`pubspec.yaml` ã«æ›¸ãå‡ºã•ã‚Œã‚‹æƒ…å ±ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»èª¬æ˜ãªã©ã‚’è¨­å®šã™ã‚‹ã¨ã€ç”Ÿæˆç‰©ã‚’ã»ã‹ã®äººã¨å…±æœ‰ã™ã‚‹ã¨ãã‚„ç¤¾å†…ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ä½¿ã†ã¨ããªã©ã«ä¾¿åˆ©ã§ã™ã€‚

```dart
@Openapi(
  additionalProperties: AdditionalProperties(
    pubName: 'my_api_client',
    pubVersion: '1.0.0',
    pubDescription: 'My API client generated from OpenAPI',
    pubAuthor: 'YourName',
    // ãªã©â€¦
  ),
  // ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³â€¦
)
```

---

## 2. `typeMappings` / `importMappings`
OpenAPIã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãŒãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ã¯ãªãã€æ—¥ä»˜å‹ã‚„ãã®ä»–ã®ç‰¹æ®Šãªå‹ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã«ã€Dart å´ã§ã©ã®ã‚¯ãƒ©ã‚¹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã‹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚

### `typeMappings`
OpenAPI spec å†…ã§ `type` ã‚„ `format` ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã€å¼·åˆ¶çš„ã«åˆ¥ã® Dart å‹ã«ç½®ãæ›ãˆãŸã„å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚  
```yaml
typeMappings: {
  'date': 'DateTime',  // "type: string, format: date" ã‚’ DateTime æ‰±ã„ã«ã™ã‚‹ã€ãªã©
  'object': 'Map<String, dynamic>'
}
```

### `importMappings`
Dart å´ã§å®šç¾©æ¸ˆã¿ã‚¯ãƒ©ã‚¹ã‚’å†åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã€ã‚ã‚‹ç‰¹å®šã®å‹ã‚’æ—¢å­˜ã‚¯ãƒ©ã‚¹ã¸ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€ã‹ã¤ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚‚æŒ‡å®šã™ã‚‹å ´åˆã«ä½¿ã„ã¾ã™ã€‚
```yaml
importMappings: {
  'OffsetDate': 'package:time_machine/time_machine.dart',
}
```
ã“ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã¨ã€OpenAPIã® `OffsetDate` ã¨ã„ã†å‹ã‚’ã€`time_machine` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ `OffsetDate` å‹ã«ç´ä»˜ã‘ã¦ãã‚Œã¾ã™ã€‚

---

## 3. `nameMappings` / `enumNameMappings`
OpenAPIã®å®šç¾©ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚„Enumåã‚’ã€Dart ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆæ™‚ã«ãƒªãƒãƒ¼ãƒ ã—ãŸã„å ´åˆã«ä½¿ãˆã¾ã™ã€‚

```dart
@Openapi(
  nameMappings: {
    'oldName': 'newName',
    // â€¦
  },
  enumNameMappings: {
    'StateEnum': 'GuildState',
    // â€¦
  },
)
```

å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ä¸Šã§æ‰±ã„ã‚„ã™ã„å‘½åã«ã—ãŸã‚Šã€æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«åˆã‚ã›ãŸã„ã¨ãã«ä¾¿åˆ©ã§ã™ã€‚

---

## 4. `inlineSchemaNameMappings`
OpenAPI ã‚¹ã‚­ãƒ¼ãƒã« `inline_object` ã‚„ `inline_response_200` ã®ã‚ˆã†ãªåŒ¿åã‚¹ã‚­ãƒ¼ãƒãŒå¤šã„å ´åˆã€Dart å´ã®ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã‚‚ãã†ã„ã†åå‰ã«ãªã‚‹ã¨åˆ†ã‹ã‚Šã«ãã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  
ä¸‹è¨˜ã®ã‚ˆã†ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `inline_object_1` ã¨ã•ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ `InlineRequest` ã®ã‚ˆã†ãªä»»æ„ã®åç§°ã«å¤‰æ›´ã§ãã¾ã™ã€‚

```dart
inlineSchemaNameMappings: {
  'inline_object_1': 'InlineRequest',
  'inline_object_2': 'InlineAnotherModel',
},
```

---

## 5. `skipIfSpecIsUnchanged` / `forceAlwaysRun`
- **`skipIfSpecIsUnchanged`**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `true` ã§ã€ã€ŒOpenAPI ã®ä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰å›ã‹ã‚‰å¤‰æ›´ã•ã‚Œã¦ã„ãªã„å ´åˆã¯å†ç”Ÿæˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã€ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚  
  æ¯å›æ™‚é–“ã®ã‹ã‹ã‚‹ç”Ÿæˆã‚’é¿ã‘ãŸã„å ´åˆã‚„ã€CI/CD ä¸Šã§ç„¡é§„ãªãƒ“ãƒ«ãƒ‰ã‚’æŠ‘åˆ¶ã—ãŸã„å ´åˆã«ã¯æœ‰åŠ¹ã§ã™ã€‚

- **`forceAlwaysRun`**: ã“ã¡ã‚‰ã¯ `true` ã«ã™ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰ãƒ©ãƒ³ãƒŠãƒ¼ï¼ˆ`build_runner`ï¼‰ãŒå·®åˆ†ã‚’æ¤œçŸ¥ã™ã‚‹ã‹ã©ã†ã‹ã«é–¢ä¿‚ãªãã€å¸¸ã«å†ç”Ÿæˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚  
  ãƒãƒ¼ãƒ ã§ä½œæ¥­ã—ã¦ã„ã¦ã€OpenAPI ã®ä»•æ§˜ã‚’é »ç¹ã«æ›´æ–°ã—ãªãã¦ã‚‚ã€å¿…ãšã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å†ç”Ÿæˆã‚’èµ°ã‚‰ã›ãŸã„ï¼ˆã‚ã‚‹ã„ã¯ç”Ÿæˆãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒ•ãƒƒã‚¯ã—ã¦ä½•ã‹ã—ãŸã„ï¼‰å ´åˆãªã©ã«ä½¿ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

---

## 6. `debugLogging`
OpenAPI Generator å®Ÿè¡Œæ™‚ã®ãƒ­ã‚°ã‚’è©³ç´°ã«å‡ºåŠ›ã—ãŸã„ã¨ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã¨ä¾¿åˆ©ã§ã™:

```dart
@Openapi(
  // â€¦
  debugLogging: true,
)
```
ç”Ÿæˆæ™‚ã®ãƒ­ã‚°ã‚’ã‚ˆã‚Šè©³ã—ãç¢ºèªã—ãŸã„ã¨ãã«å½¹ç«‹ã¡ã¾ã™ã€‚

---

## 7. `fetchDependencies`
ç”Ÿæˆå¾Œã« `flutter pub get` ãªã©ã‚’è‡ªå‹•å®Ÿè¡Œã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚Dart/Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€true ã®ã¾ã¾ã«ã—ã¦ãŠãã¨ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã€‚

```dart
@Openapi(
  // â€¦
  fetchDependencies: true,
)
```

---

## 8. Dio ç”¨ã®è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¾‹ (`DioProperties` / `DioAltProperties`)
`generatorName` ã« `Generator.dio` ã‚ã‚‹ã„ã¯ `Generator.dioAlt` ã‚’æŒ‡å®šã—ã¦ã„ã‚‹å ´åˆã€Dio ã«ç‰¹åŒ–ã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

### ä¾‹: `DioProperties`
```dart
@Openapi(
  generatorName: Generator.dio,
  additionalProperties: DioProperties(
    dateLibrary: DioDateLibrary.core, // core(=DateTime) ã‚‚ã—ãã¯ timemachine
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    nullableFields: true, // null ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ JSON ã«å«ã‚ã‚‹ã‹
    // â€¦
  ),
)
```
- `dateLibrary` ã¯ `core` (æ¨™æº–ã® `DateTime`) ã‹ `timemachine` (time_machine ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸) ã‹ã‚‰é¸ã¹ã¾ã™ã€‚  
- `serializationLibrary` ã§ã¯ `jsonSerializable` or `builtValue` ã‚’é¸æŠå¯èƒ½ã§ã™ã€‚

### ä¾‹: `DioAltProperties`
```dart
@Openapi(
  generatorName: Generator.dioAlt,
  additionalProperties: DioAltProperties(
    listAnyOf: false, // anyOfã¸ã®å¯¾å¿œã‚’ç„¡åŠ¹ã«ã™ã‚‹ãªã©
    pubspecDependencies: 'flutter_svg: ^1.1.0, random_package: ^2.3.4',
    pubspecDevDependencies: 'build_runner: any',
    // â€¦
  ),
)
```
DioAlt ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€`pubspecDependencies` ã¨ `pubspecDevDependencies` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã® `pubspec.yaml` ã«è¿½åŠ ã®ä¾å­˜é–¢ä¿‚ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¾ã™ã€‚

---

## ã¾ã¨ã‚
å®Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é‹ç”¨ã™ã‚‹å ´åˆã«ã¯ã€

- **`additionalProperties`** ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±ï¼ˆ`pubName`, `pubVersion`, `pubDescription` ãªã©ï¼‰ã‚’ã—ã£ã‹ã‚Šè¨­å®šã™ã‚‹
- **`skipIfSpecIsUnchanged`** ã§ç„¡é§„ãªå†ç”Ÿæˆã‚’æ¸›ã‚‰ã™
- **`typeMappings`/`importMappings`** ã§æ—¥ä»˜å‹ãªã©ã‚’æ˜ç¤ºçš„ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹  
- **`nameMappings`/`inlineSchemaNameMappings`** ãªã©ã§ç”Ÿæˆã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¹åã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’æ•´ãˆã‚‹  
- **`debugLogging`** ã§ç”Ÿæˆæ™‚ã®ãƒ­ã‚°ã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹  
- **`DioProperties`** ã‚„ **`DioAltProperties`** ã§ Dio å‘ã‘å›ºæœ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹  

ã¨ã„ã£ãŸæµã‚ŒãŒç‰¹ã«ãŠã™ã™ã‚ã§ã™ã€‚ç”Ÿæˆå¾Œã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šæ‰±ã„ã‚„ã™ããªã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«å¿œã˜ã¦ç´°ã‹ãã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:02:28*

ä»Šã€åˆ¥ã®open API ã®è‡ªå‹•ç”ŸæˆSDKã‹ã‚‰ä¹—ã‚Šæ›ãˆã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã€‚
ç¾çŠ¶ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§APIã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã€‚
ã“ã‚Œã‚’openapi_generator: ^latestã®SDKã«ä¹—ã‚Šæ›ãˆã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã€‚
åŒã˜ã‚ˆã†ãªdioã®è¨­å®šã‚’ã—ãªãŒã‚‰æ–°è¦ã‚³ãƒ¼ãƒ‰ã«ç§»è¡Œã—ãŸã„ã‚“ã ã€‚
ã©ã†ã™ã‚Œã°ã„ã„ã‹æ•™ãˆã¦ã»ã—ã„ã€‚


import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/presentation/providers/flavor_provider.dart';

part 'base_uri_provider.g.dart';

@Riverpod(keepAlive: true)
Future&lt;Uri&gt; baseUri(Ref ref) async {
  final flavor = ref.watch(flavorProvider);
  return flavor.getBaseUri();
}



import 'package:dio/dio.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:package_info_plus/package_info_plus.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/presentation/providers/access_token.dart';

part 'dio_provider.g.dart';

@Riverpod(keepAlive: true)
Future&lt;Dio&gt; dio(Ref ref) async {
  // ignore: unused_local_variable
  final packageInfo = await PackageInfo.fromPlatform();

  final dio = Dio(
    BaseOptions(
      headers: {
        'Content-Type': 'application/json',
        'app_version': packageInfo.version,
      },
      connectTimeout: const Duration(seconds: 30),
      sendTimeout: const Duration(seconds: 30),
      receiveTimeout: const Duration(seconds: 30),
    ),
  );

  dio.interceptors.add(
    InterceptorsWrapper(
      onRequest: (options, handler) async {
        final accessToken = await ref.read(accessTokenNotifierProvider.future);

        if (accessToken != null) {
          options.headers['access_token'] = accessToken;
        }

        return handler.next(options);
      },
      onError: (e, handler) {
        return handler.next(e);
      },
      onResponse: (response, handler) {
        return handler.next(response);
      },
    ),
  );

  dio.interceptors.add(
    LogInterceptor(
      requestBody: true,
      responseBody: true,
    ),
  );

  return dio;
}


import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/infrastructure/snpit_guild_api/snpit_guild_api.openapi.dart';

import 'base_uri_provider.dart';
import 'dio_provider.dart';

part 'api_provider.g.dart';

@Riverpod(keepAlive: true)
Future&lt;UsersApi&gt; usersApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final usersApi = UsersApi(dio, baseUri);
  return usersApi;
}

@Riverpod(keepAlive: true)
Future&lt;GuildsApi&gt; guildsApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final guildsApi = GuildsApi(dio, baseUri);
  return guildsApi;
}

@Riverpod(keepAlive: true)
Future&lt;GuildMembersApi&gt; guildMembersApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final guildMembersApi = GuildMembersApi(dio, baseUri);
  return guildMembersApi;
}

@Riverpod(keepAlive: true)
Future&lt;PhotosApi&gt; photosApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final photosApi = PhotosApi(dio, baseUri);
  return photosApi;
}

@Riverpod(keepAlive: true)
Future&lt;SpotsApi&gt; spotsApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final spotsApi = SpotsApi(dio, baseUri);
  return spotsApi;
}

@Riverpod(keepAlive: true)
Future&lt;DecksApi&gt; decksApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final decksApi = DecksApi(dio, baseUri);
  return decksApi;
}

@Riverpod(keepAlive: true)
Future&lt;ExplorersApi&gt; explorersApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final explorersApi = ExplorersApi(dio, baseUri);
  return explorersApi;
}

@Riverpod(keepAlive: true)
Future&lt;ItemsApi&gt; itemsApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final itemsApi = ItemsApi(dio, baseUri);
  return itemsApi;
}

@Riverpod(keepAlive: true)
Future&lt;ItemBoxesApi&gt; itemBoxesApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final itemBoxesApi = ItemBoxesApi(dio, baseUri);
  return itemBoxesApi;
}

@Riverpod(keepAlive: true)
Future&lt;AuthApi&gt; authApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final decksApi = AuthApi(dio, baseUri);
  return decksApi;
}

@Riverpod(keepAlive: true)
Future&lt;FlagsApi&gt; flagsApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final flagsApi = FlagsApi(dio, baseUri);
  return flagsApi;
}

@Riverpod(keepAlive: true)
Future&lt;CamerasApi&gt; camerasApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final camerasApi = CamerasApi(dio, baseUri);
  return camerasApi;
}

@Riverpod(keepAlive: true)
Future&lt;WalletApi&gt; walletApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  final walletApi = WalletApi(dio, baseUri);
  return walletApi;
}

import 'package:dio/dio.dart';
import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/domain/api_error.dart';
import 'package:snpit_guild_app/infrastructure/snpit_guild_api/snpit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/api_provider.dart';
import 'package:snpit_guild_app/utils/api_handling_utils.dart';

part 'get_flag_list.g.dart';

@Riverpod(keepAlive: true)
class GetFlagListNotifier extends _$GetFlagListNotifier {
  @override
  Future&lt;List&lt;FlagDTO&gt;?&gt; build() async =&gt; null;

  Future&lt;List&lt;FlagDTO&gt;&gt; getFlagList() async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(flagsApiProvider.future);
        final response = await api.flagControllerGetAllFlags();
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        dioExceptionHandling(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception catch (error) {
        debugPrint('Handled Exception: $error');
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}


import 'dart:io';

import 'package:device_info_plus/device_info_plus.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/domain/app_constants.dart';
import 'package:snpit_guild_app/domain/flavor.dart';

part 'flavor_provider.g.dart';

@Riverpod(keepAlive: true)
Flavor flavor(Ref ref) {
  throw UnimplementedError('flavorProvider must be overridden in main()');
}

extension FlavorExtensions on Flavor {
  static Flavor fromString(String flavorString) {
    switch (flavorString) {
      case 'prod':
        return Flavor.prd;
      case 'stage':
        return Flavor.stg;
      case 'dev':
        return Flavor.dev;
      case 'local':
        return Flavor.local;
      default:
        return Flavor.dev;
    }
  }

  bool get isDebugMode {
    switch (this) {
      case Flavor.prd:
        return false;
      case Flavor.stg:
        return true;
      case Flavor.dev:
        return true;
      case Flavor.local:
        return true;
    }
  }

  String get getSnpitDeeplinkUrl {
    switch (this) {
      case Flavor.prd:
        return AppConstants.snpitDeeplinkUrlPrd;
      case Flavor.stg:
      case Flavor.dev:
      case Flavor.local:
        return AppConstants.snpitDeeplinkUrlDev;
    }
  }

  Future&lt;String&gt; getGuildAppStoreUrl() async {
    switch (this) {
      case Flavor.prd:
        if (Platform.isIOS) {
          return AppConstants.guildAppAppStoreUrlPrd;
        } else {
          return AppConstants.guildAppGooglePlayStoreUrlPrd;
        }
      case Flavor.stg:
      case Flavor.dev:
      case Flavor.local:
        if (Platform.isIOS) {
          return AppConstants.guildAppAppStoreUrlDev;
        } else {
          return AppConstants.guildAppGooglePlayStoreUrlDev;
        }
    }
  }

  Future&lt;Uri&gt; getBaseUri() async {
    switch (this) {
      case Flavor.prd:
        return Uri.parse('https://guild-api.snpit.xyz');
      case Flavor.stg:
        // [TODO] [flavor] ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã® URL ã‚’è¨­å®šã™ã‚‹
        return Uri.parse('https://dev-guild-api.snpit.xyz');
      case Flavor.dev:
        return Uri.parse('https://dev-guild-api.snpit.xyz');
      case Flavor.local:
        // å®Ÿæ©Ÿã® iOS / Android ç«¯æœ«ã‹ã‚‰ Mac ã§ç«‹ã¡ä¸Šã’ãŸ localhost ã®ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã™ã‚‹å ´åˆã¯ PC ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«å¤‰æ›´ã™ã‚‹
        // ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ `ipconfig getifaddr en0` ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã§å–å¾—å¯èƒ½
        const hostPcIpAddress = '192.168.1.139';
        const port = 4010; // prism mock server 4010
        // const port = 3002; // docker server 3002

        final deviceInfo = DeviceInfoPlugin();

        if (Platform.isIOS) {
          final iosInfo = await deviceInfo.iosInfo;
          if (iosInfo.isPhysicalDevice) {
            // iOS å®Ÿæ©Ÿ
            return Uri.parse('http://$hostPcIpAddress:$port');
          } else {
            // iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
            return Uri.parse('http://localhost:$port');
          }
        } else if (Platform.isAndroid) {
          final androidInfo = await deviceInfo.androidInfo;
          if (androidInfo.isPhysicalDevice) {
            // Android å®Ÿæ©Ÿ
            return Uri.parse('http://$hostPcIpAddress:$port');
          } else {
            // Android ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
            return Uri.parse('http://10.0.2.2:$port');
          }
        } else {
          // ãã®ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆWebãƒ–ãƒ©ã‚¦ã‚¶ãªã©ï¼‰
          return Uri.parse('http://localhost:$port');
        }
    }
  }
}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 14:02:30*

**ç§»è¡Œã¨è¨­å®š**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¤ã„SDKã‹ã‚‰ç§»è¡Œã—ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ã‚’è¨­å®šã™ã‚‹ãŸã‚ã®Dioã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã£ãŸ*Apiã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã€‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®šã®æ‰‹é †ã‚’ç¤ºã™ã€‚

**ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®é€£æºã¨æ‹¡å¼µ**  
æœ€é©ãªè§£æ±ºç­–ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¼•ãç¶šãç›´æ¥`*Api`ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚

**ã‚³ãƒ¼ãƒ‰ã®æ³¨å…¥ã¨æ‹¡å¼µ**  
`openapi_generator`ã®`AdditionalProperties`ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€`build runner`ã‚’å®Ÿè¡Œã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ`Dio`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’`*Api`ã«æ¸¡ã™æ–¹æ³•ã‚’æ¤œè¨ã—ã¦ã„ã‚‹ã€‚

**æ–°ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®æ´»ç”¨**  
æ–°ã—ã„ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã¯ã€åå‰ä»˜ãå¼•æ•°`Dio dio, {String basePath, or int? something, or interceptors? }`ã‚’æŒã¤`UsersApi`ã‚¯ãƒ©ã‚¹ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã€‚

**è¨­å®šã¨æ‰‹é †ã®ç¢ºèª**  
pubspecã®æ›´æ–°ã€build runnerã®å®Ÿè¡Œã€ã‚«ã‚¹ã‚¿ãƒ ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã®`@Openapi`ã®ä½¿ç”¨ã€ç”Ÿæˆå¾Œã®ã‚³ãƒ¼ãƒ‰ã§ã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã®ä½œæˆãªã©ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:02:29*

ä»¥ä¸‹ã§ã¯ã€ã€Œ`openapi_generator` (Dio ç‰ˆ) ã«ä¹—ã‚Šæ›ãˆãŸéš›ã«ã€ã“ã‚Œã¾ã§ã®ã‚³ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã‚«ã‚¹ã‚¿ãƒ  `Dio` ã¨ `baseUri` ã‚’ä½¿ã£ã¦ API ã‚’å‘¼ã³å‡ºã™æ–¹æ³•ã€ã®æ¦‚è¦ã‚’ç¤ºã—ã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã¯ä¸‹è¨˜ã®2ç‚¹ã§ã™ã€‚

1. ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ (`.openapi.dart` ãªã©) ã§ã€`*Api` ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã« **å¤–éƒ¨ã‹ã‚‰** `dio` ã¨ `basePath` ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹  
2. ç”Ÿæˆå¾Œã®ã‚³ãƒ¼ãƒ‰ã§ã€å¾“æ¥ã¨åŒã˜ãƒ—ãƒ­ãƒã‚¤ãƒ€ (`dioProvider`ã€`baseUriProvider` ãªã©) ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚Šå‡ºã™

## 1. `openapi_generator` ã®è¨­å®šä¾‹

`build_runner` ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ãŸã‚ã® `@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: `example.dart`ï¼‰ã‚’ç”¨æ„ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã« Dio ç”¨ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```dart
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  // ã“ã“ã§ä½¿ã†ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’æŒ‡å®š
  generatorName: Generator.dio,

  // å…¥åŠ›ã¨ãªã‚‹ OpenAPI spec (yaml or json) ã®ãƒ‘ã‚¹ã‚’æŒ‡å®š
  inputSpec: InputSpec(
    path: 'path/to/your_openapi.yaml',
  ),

  // å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š
  outputDirectory: 'lib/infrastructure/openapi/generated',

  // ä»¥ä¸‹ã¯ä»»æ„ï¼ˆä»˜åŠ æƒ…å ±ï¼‰
  additionalProperties: DioProperties(
    pubName: 'guild_api',                   // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
    pubVersion: '1.0.0',                    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    dateLibrary: DioDateLibrary.core,
    // ã»ã‹ã€å¿…è¦ã«å¿œã˜ã¦è¨­å®š
  ),
)
class Example {}
```

- `generatorName: Generator.dio` ã¨ã™ã‚‹ã“ã¨ã§ã€Dio ãƒ™ãƒ¼ã‚¹ã® Dart ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `additionalProperties` ã« `DioProperties` ã‚’æ¸¡ã™ã¨ã€`pubspec.yaml` ã«æ›¸ãå‡ºã•ã‚Œã‚‹è¨­å®šã‚„ã€æ™‚åˆ»å‹(`dateLibrary`)ãƒ»ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º(`serializationLibrary`)ãªã©ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚

ã‚ã¨ã¯ `build_runner` ã‚’å®Ÿè¡Œã™ã‚Œã°ã€

```bash
flutter pub run build_runner build
```

ï¼ˆã‚ã‚‹ã„ã¯ `watch` ã§ã‚‚OKï¼‰ ã§ç”Ÿæˆã‚³ãƒ¼ãƒ‰ãŒã§ãã¾ã™ã€‚  
ã“ã®ã‚³ãƒ¼ãƒ‰å†…ã« `UsersApi`, `GuildsApi` ãªã©ã®ã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

---

## 2. ç”Ÿæˆå¾Œã‚³ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹ï¼ˆDio ã®å·®ã—æ›¿ãˆãƒ»BasePath ã®æŒ‡å®šï¼‰

`dart-dio` ç‰ˆã®ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã§ã¯ã€å…¸å‹çš„ã«

```dart
class UsersApi {
  UsersApi(
    this.dio, {
    this.basePath, // æ–‡å­—åˆ—
  }) {
    // çœç•¥
  }

  final Dio dio;
  String? basePath;
  ...
}
```

ã¨ã„ã†å½¢ã§ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå®šç¾©ã•ã‚Œã¾ã™ã€‚  
ã¤ã¾ã‚Š **ã‚«ã‚¹ã‚¿ãƒ ã® `Dio` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚„ã€`basePath` ã‚’æ¸¡ã›ã‚‹** ã®ã§ã€å¾“æ¥ã®ã‚ˆã†ã«è‡ªå‰ã§ `dioProvider` ã‚„ `baseUriProvider` ã‚’å®šç¾©ã—ã¦ãŠã„ã¦ã€ãã“ã‹ã‚‰æ¸¡ã™ã ã‘ã§OKã§ã™ã€‚

---

### 2-1. å¾“æ¥ã‚³ãƒ¼ãƒ‰ã«è¿‘ã„æ›¸ãæ–¹

ãŠç¤ºã—ã„ãŸã ã„ãŸæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚ˆã†ã«ã€Riverpod ã§ `dioProvider` ã¨ `baseUriProvider` ã‚’å®šç¾©ã—ã¦ãŠãã€ä¸‹è¨˜ã®ã‚ˆã†ã« `UsersApi` / `GuildsApi` ãªã©ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã‚’è¡Œã„ã¾ã™ã€‚

#### `dio_provider.dart` (ã»ã¼å¾“æ¥é€šã‚Š)

```dart
@Riverpod(keepAlive: true)
Future<Dio> dio(Ref ref) async {
  // å¾“æ¥ã©ãŠã‚Šã®ã‚«ã‚¹ã‚¿ãƒ  Dio è¨­å®š
  final packageInfo = await PackageInfo.fromPlatform();

  final dio = Dio(
    BaseOptions(
      headers: {
        'Content-Type': 'application/json',
        'app_version': packageInfo.version,
      },
      connectTimeout: const Duration(seconds: 30),
      sendTimeout: const Duration(seconds: 30),
      receiveTimeout: const Duration(seconds: 30),
    ),
  );

  // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãªã©ã‚’ä»˜ä¸ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼
  dio.interceptors.add(
    InterceptorsWrapper(
      onRequest: (options, handler) async {
        final accessToken = await ref.read(accessTokenNotifierProvider.future);
        if (accessToken != null) {
          options.headers['access_token'] = accessToken;
        }
        return handler.next(options);
      },
      onError: (e, handler) {
        return handler.next(e);
      },
      onResponse: (response, handler) {
        return handler.next(response);
      },
    ),
  );

  // ãƒ­ã‚°å‡ºåŠ›
  dio.interceptors.add(
    LogInterceptor(
      requestBody: true,
      responseBody: true,
    ),
  );

  return dio;
}
```

#### `base_uri_provider.dart` (ã»ã¼å¾“æ¥é€šã‚Š)

```dart
@Riverpod(keepAlive: true)
Future<Uri> baseUri(Ref ref) async {
  final flavor = ref.watch(flavorProvider);
  return flavor.getBaseUri();
}
```

#### `api_provider.dart` (æ–°ã—ã„ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨)

ç”Ÿæˆå¾Œã® SDK ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: `my_openapi.dart`ï¼‰ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `UsersApi` ã‚„ `GuildsApi` ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

```dart
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/infrastructure/openapi/generated/my_openapi.dart';

import 'dio_provider.dart';
import 'base_uri_provider.dart';

part 'api_provider.g.dart';

@Riverpod(keepAlive: true)
Future<UsersApi> usersApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);

  // ç”Ÿæˆå¾Œã® UsersApi ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ (Dio dio, {String? basePath}) ã®ã‚ˆã†ã«
  // ãªã£ã¦ã„ã‚‹ã¯ãšã€‚Uri -> String ã«å¤‰æ›ã—ã¦æŒ‡å®šã™ã‚‹ã€‚
  final usersApi = UsersApi(dio, basePath: baseUri.toString());
  return usersApi;
}

@Riverpod(keepAlive: true)
Future<GuildsApi> guildsApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);
  return GuildsApi(dio, basePath: baseUri.toString());
}

// ... and so on for other APIs
```

ä»¥ä¸Šã§ã€ã‚¢ãƒ—ãƒªã®åˆ¥ãƒ‘ãƒ¼ãƒ„ï¼ˆNotifier ãªã©ï¼‰ã‹ã‚‰

```dart
final api = await ref.watch(usersApiProvider.future);
final response = await api.someEndpointCall();
```

ã®ã‚ˆã†ã«å‘¼ã¹ã°ã€å¾“æ¥åŒæ§˜ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ä»˜ãã® `Dio` ã§ API ã‚’å©ã‘ã¾ã™ã€‚

---

### 2-2. `createOpenapi()` å½¢å¼ã®å ´åˆ

ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½œã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™:

```dart
Openapi createOpenapi({
  Dio? dio,
  String? basePath,
}) {
  final api = dio ?? Dio();
  // ...
  return Openapi(dio: api, basePath: basePath);
}
```

ãã—ã¦ã€`Openapi` ã‚¯ãƒ©ã‚¹çµŒç”±ã§ `getUsersApi()`, `getGuildsApi()` ã¨ã„ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ã“ã®å ´åˆã¯ã€

```dart
final openapiClient = createOpenapi(
  dio: customDio,
  basePath: 'https://example.com',
);

final usersApi = openapiClient.getUsersApi();
```

ã¨ã„ã£ãŸä½¿ã„æ–¹ã‚’ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚  
**ã„ãšã‚Œã«ã›ã‚ˆã€ã‚«ã‚¹ã‚¿ãƒ  `Dio` ã¨ `basePath` ã‚’å¤–éƒ¨ã‹ã‚‰æ³¨å…¥ã§ãã‚‹** ã®ã§ã€å¾“æ¥ã¨åŒã˜ã‚ˆã†ã« Riverpod ã§ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚

---

## 3. ç§»è¡Œã®ãƒã‚¤ãƒ³ãƒˆã¾ã¨ã‚

1. **ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿è¨­å®š**  
   - `@Openapi` ã§ `generatorName: Generator.dio` ã‚’æŒ‡å®š  
   - `additionalProperties` ã« `DioProperties` ã‚’å¿…è¦ã«å¿œã˜ã¦è¨­å®š (`pubName`ã€`pubVersion`ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©)  

2. **è‡ªå‰ã® `Dio` ã‚’å¼•ãç¶šãä½¿ç”¨**  
   - ã“ã‚Œã¾ã§ã©ãŠã‚Š `dioProvider` ã§ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã‚„ãƒ˜ãƒƒãƒ€ã‚’è¨­å®š  
   - ç”Ÿæˆã‚³ãƒ¼ãƒ‰å´ã§ã¯ã€`*Api(dio, basePath: ...)` ã¨ã—ã¦ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«è‡ªå‰ `Dio` ã‚’æ³¨å…¥  

3. **`baseUri` ã¯æ–‡å­—åˆ—åŒ–ã—ã¦ `basePath` ã«æ¸¡ã™**  
   - ç”Ÿæˆå¾Œã® `UsersApi` / `GuildsApi` ã¯ `(Dio dio, {String? basePath})` ã®å½¢ãŒå¤šã„  
   - `Uri` ã‚’ä½¿ã£ã¦ã„ã‚‹ãªã‚‰ `.toString()` ã§æ¸¡ã™  

4. **ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œ**  
   - `flutter pub run build_runner build` ãªã©ã‚’å®Ÿè¡Œã—ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª  
   - ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’å‘¼ã³å‡ºã™éƒ¨åˆ†ï¼ˆ`api_provider.dart` ãªã©ï¼‰ã‚’æ›¸ãæ›ãˆ

ã“ã†ã™ã‚Œã°ã€æ—¢å­˜ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€æ§‹æˆã‚„ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ã»ã¼ãã®ã¾ã¾æ´»ã‹ã—ã¤ã¤ã€æ–°ã—ã„ `openapi_generator` è£½ã® API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ç§»è¡Œã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:21:55*

æ–°ã—ã„SDKã§ã¯ã“ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒæä¾›ã•ã‚Œã¦ã„ãŸ

//
// AUTO-GENERATED FILE, DO NOT MODIFY!
//

import 'package:dio/dio.dart';
import 'package:built_value/serializer.dart';
import 'package:guild_api/src/serializers.dart';
import 'package:guild_api/src/auth/api_key_auth.dart';
import 'package:guild_api/src/auth/basic_auth.dart';
import 'package:guild_api/src/auth/bearer_auth.dart';
import 'package:guild_api/src/auth/oauth.dart';
import 'package:guild_api/src/api/admin_explorer_attributes_api.dart';
import 'package:guild_api/src/api/admin_explorers_api.dart';
import 'package:guild_api/src/api/admin_flag_attributes_api.dart';
import 'package:guild_api/src/api/admin_flags_api.dart';
import 'package:guild_api/src/api/admin_item_boxes_api.dart';
import 'package:guild_api/src/api/admin_items_api.dart';
import 'package:guild_api/src/api/admin_spot_attributes_api.dart';
import 'package:guild_api/src/api/admin_spots_api.dart';
import 'package:guild_api/src/api/auth_api.dart';
import 'package:guild_api/src/api/cameras_api.dart';
import 'package:guild_api/src/api/decks_api.dart';
import 'package:guild_api/src/api/explorers_api.dart';
import 'package:guild_api/src/api/flags_api.dart';
import 'package:guild_api/src/api/guild_members_api.dart';
import 'package:guild_api/src/api/guilds_api.dart';
import 'package:guild_api/src/api/health_check_api.dart';
import 'package:guild_api/src/api/item_boxes_api.dart';
import 'package:guild_api/src/api/items_api.dart';
import 'package:guild_api/src/api/maintenance_api.dart';
import 'package:guild_api/src/api/nft_api.dart';
import 'package:guild_api/src/api/photos_api.dart';
import 'package:guild_api/src/api/spots_api.dart';
import 'package:guild_api/src/api/users_api.dart';
import 'package:guild_api/src/api/wallet_api.dart';

class GuildApi {
  static const String basePath = r'http://localhost';

  final Dio dio;
  final Serializers serializers;

  GuildApi({
    Dio? dio,
    Serializers? serializers,
    String? basePathOverride,
    List&lt;Interceptor&gt;? interceptors,
  })  : this.serializers = serializers ?? standardSerializers,
        this.dio = dio ??
            Dio(BaseOptions(
              baseUrl: basePathOverride ?? basePath,
              connectTimeout: const Duration(milliseconds: 5000),
              receiveTimeout: const Duration(milliseconds: 3000),
            )) {
    if (interceptors == null) {
      this.dio.interceptors.addAll([
        OAuthInterceptor(),
        BasicAuthInterceptor(),
        BearerAuthInterceptor(),
        ApiKeyAuthInterceptor(),
      ]);
    } else {
      this.dio.interceptors.addAll(interceptors);
    }
  }

  void setOAuthToken(String name, String token) {
    if (this.dio.interceptors.any((i) =&gt; i is OAuthInterceptor)) {
      (this.dio.interceptors.firstWhere((i) =&gt; i is OAuthInterceptor)
              as OAuthInterceptor)
          .tokens[name] = token;
    }
  }

  void setBearerAuth(String name, String token) {
    if (this.dio.interceptors.any((i) =&gt; i is BearerAuthInterceptor)) {
      (this.dio.interceptors.firstWhere((i) =&gt; i is BearerAuthInterceptor)
              as BearerAuthInterceptor)
          .tokens[name] = token;
    }
  }

  void setBasicAuth(String name, String username, String password) {
    if (this.dio.interceptors.any((i) =&gt; i is BasicAuthInterceptor)) {
      (this.dio.interceptors.firstWhere((i) =&gt; i is BasicAuthInterceptor)
              as BasicAuthInterceptor)
          .authInfo[name] = BasicAuthInfo(username, password);
    }
  }

  void setApiKey(String name, String apiKey) {
    if (this.dio.interceptors.any((i) =&gt; i is ApiKeyAuthInterceptor)) {
      (this
                  .dio
                  .interceptors
                  .firstWhere((element) =&gt; element is ApiKeyAuthInterceptor)
              as ApiKeyAuthInterceptor)
          .apiKeys[name] = apiKey;
    }
  }

  /// Get AdminExplorerAttributesApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminExplorerAttributesApi getAdminExplorerAttributesApi() {
    return AdminExplorerAttributesApi(dio, serializers);
  }

  /// Get AdminExplorersApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminExplorersApi getAdminExplorersApi() {
    return AdminExplorersApi(dio, serializers);
  }

  /// Get AdminFlagAttributesApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminFlagAttributesApi getAdminFlagAttributesApi() {
    return AdminFlagAttributesApi(dio, serializers);
  }

  /// Get AdminFlagsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminFlagsApi getAdminFlagsApi() {
    return AdminFlagsApi(dio, serializers);
  }

  /// Get AdminItemBoxesApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminItemBoxesApi getAdminItemBoxesApi() {
    return AdminItemBoxesApi(dio, serializers);
  }

  /// Get AdminItemsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminItemsApi getAdminItemsApi() {
    return AdminItemsApi(dio, serializers);
  }

  /// Get AdminSpotAttributesApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminSpotAttributesApi getAdminSpotAttributesApi() {
    return AdminSpotAttributesApi(dio, serializers);
  }

  /// Get AdminSpotsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AdminSpotsApi getAdminSpotsApi() {
    return AdminSpotsApi(dio, serializers);
  }

  /// Get AuthApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  AuthApi getAuthApi() {
    return AuthApi(dio, serializers);
  }

  /// Get CamerasApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  CamerasApi getCamerasApi() {
    return CamerasApi(dio, serializers);
  }

  /// Get DecksApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  DecksApi getDecksApi() {
    return DecksApi(dio, serializers);
  }

  /// Get ExplorersApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  ExplorersApi getExplorersApi() {
    return ExplorersApi(dio, serializers);
  }

  /// Get FlagsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  FlagsApi getFlagsApi() {
    return FlagsApi(dio, serializers);
  }

  /// Get GuildMembersApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  GuildMembersApi getGuildMembersApi() {
    return GuildMembersApi(dio, serializers);
  }

  /// Get GuildsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  GuildsApi getGuildsApi() {
    return GuildsApi(dio, serializers);
  }

  /// Get HealthCheckApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  HealthCheckApi getHealthCheckApi() {
    return HealthCheckApi(dio, serializers);
  }

  /// Get ItemBoxesApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  ItemBoxesApi getItemBoxesApi() {
    return ItemBoxesApi(dio, serializers);
  }

  /// Get ItemsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  ItemsApi getItemsApi() {
    return ItemsApi(dio, serializers);
  }

  /// Get MaintenanceApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  MaintenanceApi getMaintenanceApi() {
    return MaintenanceApi(dio, serializers);
  }

  /// Get NFTApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  NFTApi getNFTApi() {
    return NFTApi(dio, serializers);
  }

  /// Get PhotosApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  PhotosApi getPhotosApi() {
    return PhotosApi(dio, serializers);
  }

  /// Get SpotsApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  SpotsApi getSpotsApi() {
    return SpotsApi(dio, serializers);
  }

  /// Get UsersApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  UsersApi getUsersApi() {
    return UsersApi(dio, serializers);
  }

  /// Get WalletApi instance, base route and serializer can be overridden by a given but be careful,
  /// by doing that all interceptors will not be executed
  WalletApi getWalletApi() {
    return WalletApi(dio, serializers);
  }
}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 14:21:57*

**æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’è¦³å¯Ÿä¸­**

æ–°ã—ã„Dartã‚³ãƒ¼ãƒ‰ã«ã¯ã€`GuildApi`ã‚¯ãƒ©ã‚¹ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€`dio`ã€`serializers`ã€`basePathOverride`ã€`interceptors`ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒã£ã¦ã„ã‚‹ã€‚ ê¸°ë³¸ì ìœ¼ë¡œã€`dio`ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã€`interceptors`ã‚’é©åˆ‡ã«è¨­å®šã—ã¦ã„ã‚‹ã€‚

**è¨­è¨ˆã®ææ¡ˆã‚’ç¢ºèª**

Riverpodã‚’ä½¿ç”¨ã—ã¦ã€`GuildApi`ã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½œæˆã—ã€`dio`ã‚„`basePathOverride`ã‚’è¨­å®šã—ã¦ã„ã‚‹ã€‚ã‚‚ã—JWTã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€`guildApi.setBearerAuth()`ã‚’å‘¼ã³å‡ºã™ã“ã¨ã‚‚å¯èƒ½ã€‚

**å˜ä¸€ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ææ¡ˆä¸­**

`GuildApi`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™å˜ä¸€ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã€å„ã‚µãƒ–APIã«å¯¾ã—ã¦å€‹åˆ¥ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¤œè¨ã—ã¦ã„ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:21:56*

æ–°ã—ã„ `GuildApi` ã‚¯ãƒ©ã‚¹ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹å ´åˆã§ã‚‚ã€**ã‚«ã‚¹ã‚¿ãƒ  `Dio`** ã‚„ **ãƒ™ãƒ¼ã‚¹URL**ã€**ç‹¬è‡ªã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼** ã‚’ä»Šã¾ã§é€šã‚Šä½¿ã†ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã¯

1. `GuildApi` ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ `dio`, `basePathOverride`, `interceptors` ã‚’å·®ã—æ›¿ãˆã‚‰ã‚Œã‚‹  
2. `Riverpod` ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã® `dioProvider`ãƒ»`baseUriProvider` ã®å€¤ã‚’å—ã‘å–ã‚Šã€ãã‚Œã‚’ `GuildApi` ã®ç”Ÿæˆã«æ¸¡ã™  

ã¨ã„ã†ç‚¹ã§ã™ã€‚ä»¥ä¸‹ã«ã‚µãƒ³ãƒ—ãƒ«æ§‹æˆã‚’ç¤ºã—ã¾ã™ã€‚

---

## 1. æ—¢å­˜ã® `dioProvider` / `baseUriProvider` ã¯ãã®ã¾ã¾åˆ©ç”¨

ã™ã§ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ `dioProvider`ãƒ»`baseUriProvider` ã‚’æµç”¨ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€

```dart
@Riverpod(keepAlive: true)
Future<Dio> dio(Ref ref) async {
  // å¾“æ¥é€šã‚Šã®ã‚«ã‚¹ã‚¿ãƒ Dioè¨­å®š
  final packageInfo = await PackageInfo.fromPlatform();

  final dio = Dio(
    BaseOptions(
      headers: {
        'Content-Type': 'application/json',
        'app_version': packageInfo.version,
      },
      connectTimeout: const Duration(seconds: 30),
      sendTimeout: const Duration(seconds: 30),
      receiveTimeout: const Duration(seconds: 30),
    ),
  );

  // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä»˜ä¸ãªã©ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼
  dio.interceptors.add(
    InterceptorsWrapper(
      onRequest: (options, handler) async {
        final accessToken = await ref.read(accessTokenNotifierProvider.future);
        if (accessToken != null) {
          options.headers['access_token'] = accessToken;
        }
        return handler.next(options);
      },
      onError: (e, handler) {
        return handler.next(e);
      },
      onResponse: (response, handler) {
        return handler.next(response);
      },
    ),
  );

  // ãƒ­ã‚°å‡ºåŠ›ãªã©
  dio.interceptors.add(LogInterceptor(
    requestBody: true,
    responseBody: true,
  ));

  return dio;
}


@Riverpod(keepAlive: true)
Future<Uri> baseUri(Ref ref) async {
  final flavor = ref.watch(flavorProvider);
  return flavor.getBaseUri();
}
```

ä¸Šè¨˜ã®ã‚ˆã†ãªå½¢ã®ã¾ã¾ã§OKã§ã™ã€‚

---

## 2. æ–°ã—ã„ `GuildApi` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½œæˆ

è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªå°‚ç”¨ã® `guildApiProvider` ã‚’ç”¨æ„ã—ã¦ã€ãã“ã§ `GuildApi` ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«å¯¾ã—ã¦ã€**ã™ã§ã«è¨­å®šæ¸ˆã¿ã®ã‚«ã‚¹ã‚¿ãƒ  `Dio`** ã¨ **`basePathOverride`** ã‚’æ¸¡ã™ã ã‘ã§ã™ã€‚

```dart
import 'package:guild_api/guild_api.dart'; // æ–°SDKã® import
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'dio_provider.dart';
import 'base_uri_provider.dart';

part 'guild_api_provider.g.dart';

@Riverpod(keepAlive: true)
Future<GuildApi> guildApi(Ref ref) async {
  final dio = await ref.watch(dioProvider.future);
  final baseUri = await ref.watch(baseUriProvider.future);

  // æ–°SDKã® GuildApi ã‚’ç”Ÿæˆ
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ baseUrl: http://localhost ã«ãªã£ã¦ã„ã‚‹ã®ã§
  // basePathOverride ã§è‡ªåˆ†ã®ã‚µãƒ¼ãƒãƒ¼URLã‚’å·®ã—æ›¿ãˆã‚‹
  final api = GuildApi(
    dio: dio,
    basePathOverride: baseUri.toString(),
    // interceptors: [è‡ªå‰ã§è¿½åŠ ã—ãŸã„Interceptors...],
    // serializers: ...,
  );

  // ã‚‚ã—ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ setBearerAuth() ãªã©ã§è¨­å®šã—ãŸã„ãªã‚‰ã“ã“ã§ã§ãã‚‹
  // api.setBearerAuth("default", "xxxxx");

  return api;
}
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€`Riverpod` ã‹ã‚‰ `guildApiProvider` ã‚’ `read` ã¾ãŸã¯ `watch` ã™ã‚Œã°ã€**ã‚«ã‚¹ã‚¿ãƒ DioãŒæ³¨å…¥ã•ã‚ŒãŸ `GuildApi` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹** ã‚’ã„ã¤ã§ã‚‚å–ã‚Šå‡ºã›ã¾ã™ã€‚

---

## 3. å„ APIï¼ˆ`getUsersApi()` ãªã©ï¼‰ã®å–å¾—

`GuildApi` ã«ã¯ `getUsersApi()`, `getFlagsApi()` ãªã©å¤šæ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã€ãã‚Œãã‚Œã‚’å–å¾—ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```dart
@Riverpod(keepAlive: true)
Future<UsersApi> usersApi(Ref ref) async {
  final guildApi = await ref.watch(guildApiProvider.future);
  return guildApi.getUsersApi();
}

@Riverpod(keepAlive: true)
Future<FlagsApi> flagsApi(Ref ref) async {
  final guildApi = await ref.watch(guildApiProvider.future);
  return guildApi.getFlagsApi();
}

// ... ä»¥ä¸‹åŒæ§˜
```

ã™ã‚‹ã¨ã€åˆ©ç”¨å´ã§ã¯

```dart
final flagsApi = await ref.watch(flagsApiProvider.future);
final response = await flagsApi.flagControllerGetAllFlags();
```

ã¨å‘¼ã³å‡ºã›ã¾ã™ã€‚  
ã‚‚ã¡ã‚ã‚“ã€Œã™ã¹ã¦ã®APIã‚’ã¾ã¨ã‚ã¦ `GuildApi` ã¨ã—ã¦è¿”ã—ã¦ã€å‘¼ã³å‡ºã—å´ã§ `guildApi.getFlagsApi()` ã‚’ç›´æ¥å‘¼ã¶ã€ã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ¼ãƒ å†…ã§åˆ†ã‘ã‚„ã™ã„å½¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚

---

## 4. ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°å‡¦ç†ãªã©ã¯ã©ã†ã™ã‚‹ï¼Ÿ

### 4-1. ã™ã§ã« `dioProvider` å´ã«ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ãŒã‚ã‚‹ãªã‚‰

ã™ã§ã« `dioProvider` ã§ `InterceptorsWrapper` ã‚’è¿½åŠ ã—ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‹•çš„ã«ãƒ˜ãƒƒãƒ€ã¸ä»˜ä¸ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãã®ã¾ã¾ã§OKã§ã™ã€‚`GuildApi` ã«ã‚ãˆã¦ãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã°ãªãã¦ã‚‚ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®éƒ½åº¦ `dio` ãŒãƒˆãƒ¼ã‚¯ãƒ³ä»˜ãã§æŠ•ã’ã¦ãã‚Œã¾ã™ã€‚

### 4-2. SDK ã§æä¾›ã•ã‚Œã‚‹ `setBearerAuth`, `setBasicAuth` ãªã©ã‚’ä½¿ã„ãŸã„å ´åˆ

`GuildApi` ã«ã‚ã‚‹ `setBearerAuth(name, token)`, `setOAuthToken(name, token)` ãªã©ã¯ã€**SDK å†…è”µã®èªè¨¼ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼** ã‚’åˆ©ç”¨ã™ã‚‹å½¢ã§ã™ã€‚  
- ã‚‚ã—è‡ªä½œã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã§ã¯ãªãã€ã€ŒSDK æ¨™æº–ã®BearerAuthInterceptorã‚’ä½¿ã„ãŸã„ã€å ´åˆã€ä¸Šè¨˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã›ã°ãƒˆãƒ¼ã‚¯ãƒ³ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚  
- ä¾‹ãˆã°ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã« `guildApiProvider` ã‚’å†ç”Ÿæˆã—ã¦ `setBearerAuth` ã‚’å‘¼ã¶ã‹ã€ã‚ã‚‹ã„ã¯æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆæ™‚ã«éƒ½åº¦ `guildApi` ã‚’ `read` ã—ã¦å‘¼ã³å‡ºã™ã€ãªã©ã®é‹ç”¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ãŸã ã—ã€æ—¢å­˜ã®Dioã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã§äº‹è¶³ã‚Šã¦ã„ã‚‹å ´åˆã¯ã€ç„¡ç†ã« `setBearerAuth()` ã‚’ä½¿ã†å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

## 5. ã¾ã¨ã‚

- æ–°ã—ã„ `GuildApi` ã¯ **ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿** ã§ `Dio` ã¨ `basePathOverride` ã‚’è‡ªç”±ã«å·®ã—è¾¼ã‚ã‚‹  
- ã—ãŸãŒã£ã¦ã€**å¾“æ¥ã® `dioProvider` + `baseUriProvider`** ã‚’ãã®ã¾ã¾ä½¿ã„ã¤ã¤ `Riverpod` ã§æ³¨å…¥ã™ã‚Œã°OK  
- `GuildApi` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ã‚µãƒ–API (`getUsersApi()`, `getFlagsApi()`) ã‚’å–å¾—ã—ã¦å‘¼ã¶  
- ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä»˜ä¸ãªã©ã¯ã€æ—¢å­˜ã®Dioã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã‚’æ´»ã‹ã™ or æ–°SDKã® `setBearerAuth` ç³»ã‚’ä½¿ã†ã€ã®ã©ã¡ã‚‰ã§ã‚‚å¯¾å¿œå¯èƒ½  

ã“ã®ã‚ˆã†ã«ç§»è¡Œã™ã‚Œã°ã€ã€Œã„ã¾ã¾ã§ `dio` ã«ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã‚’ä»•è¾¼ã¿ã€`baseUri` ã‚’ãƒ—ãƒ­ãƒã‚¤ãƒ€ã§åˆ‡ã‚Šæ›¿ãˆã¦ã„ãŸã€æ§‹æˆã‚’ã»ã¼ãã®ã¾ã¾ç¶­æŒã—ã¤ã¤ã€æ–°ã—ã„SDKã® `GuildApi` ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:44:20*

guildControllerCreateGuildã‚’å‘¼ã¶ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã»ã—ã„ã€‚


class GuildsApi {
  final Dio _dio;

  final Serializers _serializers;

  const GuildsApi(this._dio, this._serializers);

  /// Create a new guild [GLD0103, GLD0301, GLD0302]
  ///
  ///
  /// Parameters:
  /// * [createGuildRequestDto]
  /// * [cancelToken] - A [CancelToken] that can be used to cancel the operation
  /// * [headers] - Can be used to add additional headers to the request
  /// * [extras] - Can be used to add flags to the request
  /// * [validateStatus] - A [ValidateStatus] callback that can be used to determine request success based on the HTTP status of the response
  /// * [onSendProgress] - A [ProgressCallback] that can be used to get the send progress
  /// * [onReceiveProgress] - A [ProgressCallback] that can be used to get the receive progress
  ///
  /// Returns a [Future] containing a [Response] with a [EmptyResponseSchema] as data
  /// Throws [DioException] if API call or serialization fails
  Future&lt;Response&lt;EmptyResponseSchema&gt;&gt; guildControllerCreateGuild({
    required CreateGuildRequestDto createGuildRequestDto,
    CancelToken? cancelToken,
    Map&lt;String, dynamic&gt;? headers,
    Map&lt;String, dynamic&gt;? extra,
    ValidateStatus? validateStatus,
    ProgressCallback? onSendProgress,
    ProgressCallback? onReceiveProgress,
  }) async {
    final _path = r'/v1/guilds';
    final _options = Options(
      method: r'POST',
      headers: &lt;String, dynamic&gt;{
        ...?headers,
      },
      extra: &lt;String, dynamic&gt;{
        'secure': &lt;Map&lt;String, String&gt;&gt;[],
        ...?extra,
      },
      contentType: 'application/json',
      validateStatus: validateStatus,
    );

    dynamic _bodyData;

    try {
      const _type = FullType(CreateGuildRequestDto);
      _bodyData =
          _serializers.serialize(createGuildRequestDto, specifiedType: _type);
    } catch (error, stackTrace) {
      throw DioException(
        requestOptions: _options.compose(
          _dio.options,
          _path,
        ),
        type: DioExceptionType.unknown,
        error: error,
        stackTrace: stackTrace,
      );
    }

    final _response = await _dio.request&lt;Object&gt;(
      _path,
      data: _bodyData,
      options: _options,
      cancelToken: cancelToken,
      onSendProgress: onSendProgress,
      onReceiveProgress: onReceiveProgress,
    );

    EmptyResponseSchema? _responseData;

    try {
      final rawResponse = _response.data;
      _responseData = rawResponse == null
          ? null
          : _serializers.deserialize(
              rawResponse,
              specifiedType: const FullType(EmptyResponseSchema),
            ) as EmptyResponseSchema;
    } catch (error, stackTrace) {
      throw DioException(
        requestOptions: _response.requestOptions,
        response: _response,
        type: DioExceptionType.unknown,
        error: error,
        stackTrace: stackTrace,
      );
    }

    return Response&lt;EmptyResponseSchema&gt;(
      data: _responseData,
      headers: _response.headers,
      isRedirect: _response.isRedirect,
      requestOptions: _response.requestOptions,
      redirects: _response.redirects,
      statusCode: _response.statusCode,
      statusMessage: _response.statusMessage,
      extra: _response.extra,
    );
  }

//
// AUTO-GENERATED FILE, DO NOT MODIFY!
//

// ignore_for_file: unused_element
import 'package:built_value/built_value.dart';
import 'package:built_value/serializer.dart';

part 'create_guild_request_dto.g.dart';

/// CreateGuildRequestDto
///
/// Properties:
/// * [guildName] - Name of the guild.
/// * [guildDescription] - Description of the guild.
/// * [guildAvatar] - Avatar URL of the guild
/// * [guildBanner] - Banner URL of the guild
@BuiltValue()
abstract class CreateGuildRequestDto
    implements Built&lt;CreateGuildRequestDto, CreateGuildRequestDtoBuilder&gt; {
  /// Name of the guild.
  @BuiltValueField(wireName: r'guildName')
  String get guildName;

  /// Description of the guild.
  @BuiltValueField(wireName: r'guildDescription')
  String? get guildDescription;

  /// Avatar URL of the guild
  @BuiltValueField(wireName: r'guildAvatar')
  String? get guildAvatar;

  /// Banner URL of the guild
  @BuiltValueField(wireName: r'guildBanner')
  String? get guildBanner;

  CreateGuildRequestDto._();

  factory CreateGuildRequestDto(
      [void updates(CreateGuildRequestDtoBuilder b)]) = _$CreateGuildRequestDto;

  @BuiltValueHook(initializeBuilder: true)
  static void _defaults(CreateGuildRequestDtoBuilder b) =&gt; b;

  @BuiltValueSerializer(custom: true)
  static Serializer&lt;CreateGuildRequestDto&gt; get serializer =&gt;
      _$CreateGuildRequestDtoSerializer();
}

class _$CreateGuildRequestDtoSerializer
    implements PrimitiveSerializer&lt;CreateGuildRequestDto&gt; {
  @override
  final Iterable&lt;Type&gt; types = const [
    CreateGuildRequestDto,
    _$CreateGuildRequestDto
  ];

  @override
  final String wireName = r'CreateGuildRequestDto';

  Iterable&lt;Object?&gt; _serializeProperties(
    Serializers serializers,
    CreateGuildRequestDto object, {
    FullType specifiedType = FullType.unspecified,
  }) sync* {
    yield r'guildName';
    yield serializers.serialize(
      object.guildName,
      specifiedType: const FullType(String),
    );
    if (object.guildDescription != null) {
      yield r'guildDescription';
      yield serializers.serialize(
        object.guildDescription,
        specifiedType: const FullType.nullable(String),
      );
    }
    if (object.guildAvatar != null) {
      yield r'guildAvatar';
      yield serializers.serialize(
        object.guildAvatar,
        specifiedType: const FullType.nullable(String),
      );
    }
    if (object.guildBanner != null) {
      yield r'guildBanner';
      yield serializers.serialize(
        object.guildBanner,
        specifiedType: const FullType.nullable(String),
      );
    }
  }

  @override
  Object serialize(
    Serializers serializers,
    CreateGuildRequestDto object, {
    FullType specifiedType = FullType.unspecified,
  }) {
    return _serializeProperties(serializers, object,
            specifiedType: specifiedType)
        .toList();
  }

  void _deserializeProperties(
    Serializers serializers,
    Object serialized, {
    FullType specifiedType = FullType.unspecified,
    required List&lt;Object?&gt; serializedList,
    required CreateGuildRequestDtoBuilder result,
    required List&lt;Object?&gt; unhandled,
  }) {
    for (var i = 0; i &lt; serializedList.length; i += 2) {
      final key = serializedList[i] as String;
      final value = serializedList[i + 1];
      switch (key) {
        case r'guildName':
          final valueDes = serializers.deserialize(
            value,
            specifiedType: const FullType(String),
          ) as String;
          result.guildName = valueDes;
          break;
        case r'guildDescription':
          final valueDes = serializers.deserialize(
            value,
            specifiedType: const FullType.nullable(String),
          ) as String?;
          if (valueDes == null) continue;
          result.guildDescription = valueDes;
          break;
        case r'guildAvatar':
          final valueDes = serializers.deserialize(
            value,
            specifiedType: const FullType.nullable(String),
          ) as String?;
          if (valueDes == null) continue;
          result.guildAvatar = valueDes;
          break;
        case r'guildBanner':
          final valueDes = serializers.deserialize(
            value,
            specifiedType: const FullType.nullable(String),
          ) as String?;
          if (valueDes == null) continue;
          result.guildBanner = valueDes;
          break;
        default:
          unhandled.add(key);
          unhandled.add(value);
          break;
      }
    }
  }

  @override
  CreateGuildRequestDto deserialize(
    Serializers serializers,
    Object serialized, {
    FullType specifiedType = FullType.unspecified,
  }) {
    final result = CreateGuildRequestDtoBuilder();
    final serializedList = (serialized as Iterable&lt;Object?&gt;).toList();
    final unhandled = &lt;Object?&gt;[];
    _deserializeProperties(
      serializers,
      serialized,
      specifiedType: specifiedType,
      serializedList: serializedList,
      unhandled: unhandled,
      result: result,
    );
    return result.build();
  }
}

import 'package:dio/dio.dart';
import 'package:flutter/foundation.dart';
import 'package:guild_api/guild_api.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/domain/api_error.dart';

import 'package:snpit_guild_app/presentation/providers/api_client/api_provider.dart';
import 'package:snpit_guild_app/utils/api_handling_utils.dart';

part 'create_guild.g.dart';

@riverpod
class CreateGuildNotifier extends _$CreateGuildNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;String&gt; createGuild(String guildName) async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(guildsApiProvider.future);
        final response = await api.guildControllerCreateGuild(
          createGuildRequestDto: CreateGuildRequestDto(
            (b) =&gt; b..guildName = guildName,
          ),
        );
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        dioExceptionHandling(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception catch (error) {
        debugPrint('Handled Exception: $error');
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 14:44:22*

**ã‚³ãƒ¼ãƒ‰ã®æ¤œè¨ä¸­**

`guildControllerCreateGuild`ã‚’å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’`Riverpod`ç’°å¢ƒã§ä½œæˆã—ã¦ã„ã‚‹ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’æ¸¡ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã™ã‚‹æ–¹æ³•ã‚’æ¢ã£ã¦ã„ã‚‹ã€‚

**`guildControllerCreateGuild`ã‚’å‘¼ã³å‡ºã—**

`guildName`ã‚’æ¸¡ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèªã—ã€æˆåŠŸæ™‚ã«`state`ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¦ã„ã‚‹ã€‚æ¬¡ã«ä½•ã‚’ã™ã‚‹ã‹ã‚’è€ƒãˆã¦ã„ã‚‹æ®µéšã€‚ã“ã®ãƒ•ãƒ­ãƒ¼ã‚’ã©ã†ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ã‹æ¤œè¨ä¸­ã€‚

**æ¤œè¨ã—ã¦ã„ã‚‹æ–¹æ³•**

`guildControllerCreateGuild`ã®ç›´æ¥çš„ãªå‘¼ã³å‡ºã—æ–¹æ³•ã‚’è¦‹ã¦ã„ã‚‹ã€‚`guildsApiProvider`ã‹ã‚‰`GuildsApi`ã‚’å–å¾—ã—ã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ä¸­ã€‚

**æ›´æ–°ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰**

æ–°ã—ã„`api`ã‹ã‚‰`guildControllerCreateGuild`ã‚’å‘¼ã³å‡ºã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹æ–¹æ³•ã‚’è¦‹ç›´ã—ã¦ã„ã‚‹ã€‚æ—§æ¥ã®`ApiError`æ‰‹æ³•ã‚‚æ¤œè¨ä¸­ã€‚

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç¢ºèª**

`EmptyResponseSchema`ã¯å…¨ãƒ‡ãƒ¼ã‚¿ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€`response.data`ã‚„`response.statusCode`ã‚’è¦‹ã¦ã„ã‚‹ã€‚ã“ã‚Œã§ä½•ã‚’è¦‹ã¦ã„ã‚‹ã®ã‹åˆ†ã‹ã‚‹ã‹ãªï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:44:22*

ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã€`guildControllerCreateGuild` ã‚’å‘¼ã¶ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã¾ã™ã€‚  
Riverpodï¼ˆ`guildsApiProvider`ï¼‰ã‚’ä½¿ã£ãŸä¾‹ã‚’ç¤ºã—ã¾ã™ãŒã€å˜ç´”ã« `GuildsApi` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã•ãˆå–å¾—ã§ãã‚Œã°åŒæ§˜ã®å‘¼ã³å‡ºã—ã«ãªã‚Šã¾ã™ã€‚

---

## 1. `guildsApiProvider` ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ä¾‹

```dart
import 'package:dio/dio.dart';
import 'package:flutter/foundation.dart';
import 'package:guild_api/guild_api.dart'; // æ–°SDK
import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'package:snpit_guild_app/presentation/providers/api_client/api_provider.dart';
import 'package:snpit_guild_app/utils/api_handling_utils.dart';
import 'package:snpit_guild_app/domain/api_error.dart';

part 'create_guild.g.dart';

@riverpod
class CreateGuildNotifier extends _$CreateGuildNotifier {
  @override
  Future<String?> build() async => null;

  /// ã‚®ãƒ«ãƒ‰ä½œæˆAPIå‘¼ã³å‡ºã—
  /// [guildName] ã«ã¯æ–°è¦ã‚®ãƒ«ãƒ‰åã‚’æ¸¡ã™
  Future<String> createGuild(String guildName) async {
    // ã™ã§ã«å€¤ãŒã‚ã‚‹å ´åˆã¯å†åº¦èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹ã¾ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã«
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        // guildsApiProvider ã‹ã‚‰ GuildsApi ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—
        final guildsApi = await ref.watch(guildsApiProvider.future);

        // ãƒœãƒ‡ã‚£ã¨ãªã‚‹ CreateGuildRequestDto ã‚’çµ„ã¿ç«‹ã¦
        final requestDto = CreateGuildRequestDto(
          (b) => b
            ..guildName = guildName
            // ä»¥ä¸‹ã€ã‚®ãƒ«ãƒ‰ã®èª¬æ˜ã‚„ç”»åƒURLç­‰ã‚’å…¥ã‚Œã‚‹ãªã‚‰
            // ..guildDescription = 'èª¬æ˜æ–‡'
            // ..guildAvatar = 'https://example.com/avatar.png'
            // ..guildBanner = 'https://example.com/banner.png'
        );

        // å®Ÿéš›ã®APIã‚³ãƒ¼ãƒ«
        final response = await guildsApi.guildControllerCreateGuild(
          createGuildRequestDto: requestDto,
        );

        // ã“ã®APIã¯ EmptyResponseSchema ãŒè¿”ã£ã¦ãã‚‹æƒ³å®šãªã®ã§ã€
        // response.data ã«ã¯ç©ºã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ null ãŒå…¥ã‚Šã¾ã™
        debugPrint('Response status code: ${response.statusCode}');
        debugPrint('Response data: ${response.data}'); // EmptyResponseSchema?

        // å¿…è¦ãªã‚‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãªã©ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚¨ãƒ©ãƒ¼å‡¦ç†
        if (response.statusCode != 200 && response.statusCode != 201) {
          throw Exception('Unexpected status code ${response.statusCode}');
        }

        // ä»Šå›ã®APIã¯ãƒœãƒ‡ã‚£ã¨ã—ã¦ç‰¹ã«è¿”ã™ã‚‚ã®ãŒç„¡ã„ï¼ˆEmptyResponseSchemaï¼‰æƒ³å®šãªã®ã§
        // ã“ã“ã§ã¯ã‚®ãƒ«ãƒ‰IDãªã©ã®æƒ…å ±ã¯å¾—ã‚‰ã‚Œã¾ã›ã‚“ã€‚
        // æˆåŠŸã—ãŸã¨ä»®å®šã—ã¦ã€ŒguildNameã€ã‚’è¿”ã—ã¦ã„ã‚‹ä¾‹ã§ã™
        state = AsyncValue.data(guildName);
        return guildName;
      } on DioException catch (error) {
        dioExceptionHandling(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception catch (error) {
        debugPrint('Handled Exception: $error');
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}
```

### è£œè¶³

- `createGuildRequestDto` ã«ã¯å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ `guildName` ã®ã¿å¿…é ˆã¨ã—ã¦è¨­å®šã—ã¦ã„ã¾ã™ãŒã€`guildDescription` ãªã©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚‚ãƒ“ãƒ«ãƒ€ãƒ¼ã§è¿½åŠ ã§ãã¾ã™ã€‚
- APIã®è¿”å´å‹ãŒ `EmptyResponseSchema` ã®ãŸã‚ã€`response.data` ã¯åŸºæœ¬çš„ã«ç©º (ã‚‚ã—ãã¯ `null`) ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚ä½œæˆã—ãŸã‚®ãƒ«ãƒ‰ã®IDã‚„è©³ç´°ã‚’å¾—ãŸã„å ´åˆã¯ã€API å´ãŒåˆ¥ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™è¨­è¨ˆã«ãªã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- ã‚‚ã— `guildsApiProvider` ãŒæœªå®šç¾©ã®å ´åˆã¯ã€å˜ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ç›´æ¥ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã£ã¦å‘¼ã³å‡ºã—ã¦ã‚‚OKã§ã™ã€‚

```dart
final guildsApi = GuildsApi(customDio, customSerializers);
final response = await guildsApi.guildControllerCreateGuild(
  createGuildRequestDto: CreateGuildRequestDto(
    (b) => b..guildName = 'MyGuild',
  ),
);
```

---

## 2. `guildsApiProvider` ã®å®Ÿè£…ä¾‹

æ–°SDKã§ç”Ÿæˆã•ã‚ŒãŸ `GuildsApi` ã‚’ä½¿ã†ãŸã‚ã«ã¯ã€ã©ã“ã‹ã§ `GuildsApi` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  
Riverpod ã§ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½œã‚‹ãªã‚‰ã€ä¸‹è¨˜ã®ã‚ˆã†ã« `dioProvider` ã‚„ `baseUriProvider` ã‚’ç”¨ã„ã¦åˆæœŸåŒ–ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€èˆ¬çš„ã§ã™ã€‚

```dart
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:guild_api/guild_api.dart'; // æ–°SDK
import 'package:snpit_guild_app/presentation/providers/dio_provider.dart';
import 'package:snpit_guild_app/presentation/providers/base_uri_provider.dart';

part 'api_provider.g.dart';

@Riverpod(keepAlive: true)
Future<GuildsApi> guildsApi(Ref ref) async {
  // ã‚«ã‚¹ã‚¿ãƒ  Dio (ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä»˜ä¸ãªã©) ã‚’å–å¾—
  final dio = await ref.watch(dioProvider.future);
  // ãƒ™ãƒ¼ã‚¹URLã‚’å–å¾—
  final baseUri = await ref.watch(baseUriProvider.future);

  // GuildsApi ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ
  // ã‚‚ã— built_value ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãŒå¿…è¦ãªå ´åˆã¯ãã“ã‚‚æ³¨å…¥ã™ã‚‹
  final guildsApi = GuildsApi(
    dio,
    standardSerializers, // ä¾‹: guild_apiãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® standardSerializers ã‚’ä½¿ã†
  );

  // ãƒ™ãƒ¼ã‚¹URLå·®ã—æ›¿ãˆ (Dio ã® baseUrl ã‚’ä¸Šæ›¸ãï¼‰
  dio.options.baseUrl = baseUri.toString();

  return guildsApi;
}
```

â€» æ–°ã—ã„ SDK ã®æ§‹æˆã«ã‚ˆã£ã¦ã¯ `GuildApi` å…¨ä½“ã‚’è¿”ã™ã‚‚ã®ï¼ˆ`GuildApi getGuildsApi()` ã™ã‚‹æ§‹é€ ï¼‰ã«ãªã£ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ `GuildApi` ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã« `dio` ã¨ `basePathOverride` ã‚’æ¸¡ã™ã ã‘ã§OKã§ã™ã€‚

---

ä»¥ä¸Šã®æ‰‹é †ã§ `guildControllerCreateGuild` ã‚’å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã¾ã™ã€‚  
ã¾ã¨ã‚ã‚‹ã¨ã€

1. `guildsApiProvider` ã§ã‚«ã‚¹ã‚¿ãƒ  `Dio` / ãƒ™ãƒ¼ã‚¹URLã‚’è¨­å®šã—ãŸ `GuildsApi` ã‚’è¿”ã™  
2. å®Ÿéš›ã«å‘¼ã³å‡ºã™ã¨ã“ã‚ï¼ˆ`CreateGuildNotifier` ãªã©ï¼‰ã§ `ref.watch(guildsApiProvider.future)` ã—ã€  
3. `guildControllerCreateGuild(createGuildRequestDto: ...)` ã‚’å®Ÿè¡Œ  

ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:45:20*

ã“ã®ã‚³ãƒ¼ãƒ‰ã«é¦´æŸ“ã¿ãŒãªã„

(b) =&gt; b..guildName = 'MyGuild',

// ãƒœãƒ‡ã‚£ã¨ãªã‚‹ CreateGuildRequestDto ã‚’çµ„ã¿ç«‹ã¦
        final requestDto = CreateGuildRequestDto(
          (b) =&gt; b
            ..guildName = guildName
            // ä»¥ä¸‹ã€ã‚®ãƒ«ãƒ‰ã®èª¬æ˜ã‚„ç”»åƒURLç­‰ã‚’å…¥ã‚Œã‚‹ãªã‚‰
            // ..guildDescription = 'èª¬æ˜æ–‡'
            // ..guildAvatar = 'https://example.com/avatar.png'
            // ..guildBanner = 'https://example.com/banner.png'
        );

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:45:21*

ã“ã‚Œã¯ Dart ã® [built_value](https://github.com/google/built_value.dart) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç”Ÿæˆã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¹ï¼ˆ`CreateGuildRequestDto`ãªã©ï¼‰ã‚’ **ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³** ã§åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã®æ›¸ãæ–¹ã§ã™ã€‚  
`(b) => b..guildName = 'MyGuild'` ã®éƒ¨åˆ†ã¯ã€Dart ã® **ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰æ¼”ç®—å­** (`..`) ã‚’åˆ©ç”¨ã—ã¦ã€Œãƒ“ãƒ«ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ãƒã‚§ãƒ¼ãƒ³çš„ã«è¨­å®šã—ã¦ã„ã‚‹ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

---

## å…·ä½“çš„ãªä»•çµ„ã¿

1. `CreateGuildRequestDto((b) => b..guildName = 'MyGuild')` ã¯ã€å†…éƒ¨çš„ã«  
   ```dart
   final builder = CreateGuildRequestDtoBuilder();
   builder.guildName = 'MyGuild';
   return builder.build();
   ```  
   ã¨åŒã˜ã‚ˆã†ãªæ“ä½œã‚’ã—ã¦ã„ã¾ã™ã€‚

2. `CreateGuildRequestDto` ã¯ built_value ã§ã€Œimmutableï¼ˆä¸å¤‰ï¼‰ãªã‚¯ãƒ©ã‚¹ã€ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã€**å®Ÿéš›ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¯ç›´æ¥ä»£å…¥ã§ããªã„** ä»•æ§˜ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®ä»£ã‚ã‚Šã«ã€ŒBuilderã€(ä¾‹: `CreateGuildRequestDtoBuilder`) ã‚’ä½¿ã£ã¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚»ãƒƒãƒˆã—ã€æœ€å¾Œã« `build()` ã§ä¸å¤‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹å½¢ã§ã™ã€‚

3. `..` ã¯ **ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰æ¼”ç®—å­** ã¨å‘¼ã°ã‚Œã€  
   ```dart
   b..guildName = guildName
    ..guildDescription = 'desc'
   ```  
   ã®ã‚ˆã†ã«ã€åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦é€£ç¶šã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£è¨­å®šã‚’è¡Œã†ã¨ãã«ä¾¿åˆ©ã§ã™ã€‚

---

## æ›¸ãæ›ãˆæ–¹ï¼ˆã‚ˆã‚Šé¦´æŸ“ã¿ã®ã‚ã‚‹è¨˜æ³•ã«ã™ã‚‹ï¼‰

ã‚‚ã—ã€Œãƒ©ãƒ ãƒ€å¼ + ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰æ¼”ç®—å­ã€ã®æ›¸ãæ–¹ãŒåˆ†ã‹ã‚Šã«ãã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« **ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ç”Ÿæˆã—ã¦ã‹ã‚‰æ‰‹å‹•ã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åŸ‹ã‚** ã‚‹æ–¹æ³•ã§ã‚‚åŒã˜å‹•ä½œã«ãªã‚Šã¾ã™ã€‚

```dart
final builder = CreateGuildRequestDtoBuilder();
builder.guildName = 'MyGuild';
builder.guildDescription = 'MyDesc';
builder.guildAvatar = 'http://example.com/avatar.png';

final requestDto = builder.build();
```

ãŸã ã—ã€built_value ã®ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã¯ã€Œ(b) => b..ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ = å€¤ã€ã®æ›¸ãæ–¹ã§ä½¿ã†ã®ãŒä¸€ç¨®ã®å®šç•ªã¨ãªã£ã¦ã„ã‚‹ãŸã‚ã€æ…£ã‚Œã¦ã—ã¾ãˆã°ã“ã¡ã‚‰ã®ã»ã†ãŒ **1è¡Œã§ä½œæˆã§ãã‚‹** ã®ã§ä¾¿åˆ©ã§ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:46:08*

ã‚ˆãã‚ã‹ã£ã¦ã„ãªã„ã®ã ãŒã€freezed ã¨ã‹ã§ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã§ãƒãƒƒãƒ”ãƒ³ã‚°ã§ããªã„ã®ã‹ï¼Ÿ

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 14:46:10*

**ç¢ºèªä¸­ã®é¸æŠè‚¢**

UserãŒã€Œfreezedã€ã‚„ã€Œbuilt_valueã€ã§ã®ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã§ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã®å¯èƒ½æ€§ã‚’æ¢ã£ã¦ã„ã‚‹ãŒã€ã€Œbuilt_valueã€ã¯ç›´æ¥ã®åå‰ä»˜ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‰²ã‚Šå½“ã¦ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚‰ãšã€ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚

**ã‚·ãƒ³ãƒ—ãƒ«ã•ã¸ã®æŒ‘æˆ¦**

UserãŒã€Œfreezedã€ã‚’æ¢ã—ã¦ã„ã‚‹ãŒã€ã€Œbuilt_valueã€ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚ç´¹ä¾‹ã¨ã—ã¦ã€Œjson_serializableã€ã‚’æŒ™ã’ã€ã€ŒCreateGuildRequestDto(guildName: 'MyGuild')ã€ãªã©ã‚’ææ¡ˆã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:46:10*

çµè«–ã‹ã‚‰ã„ã†ã¨ã€ã€Œ**OpenAPI Generatorï¼ˆdart-dio + built_value ã®è¨­å®šï¼‰ã§å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰**ã€ã®å ´åˆã¯ã€åŸºæœ¬çš„ã« `freezed` ã®ã‚ˆã†ãª**åˆ¥ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã§ â€œã‚­ãƒ¼ã¨å€¤ã‚’æŒã£ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹â€ ã‚’**ç›´æ¥**æ‰±ã†å½¢ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚  

- `built_value` ã¯ **ä¸å¤‰ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹** ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚Šã€ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã¯ **ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼ˆ`Builder` + `.build()`ï¼‰ã§åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚  
- `freezed` ã‚‚åŒæ§˜ã«ä¸å¤‰ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ãŒã€**OpenAPI Generator ãŒæ¨™æº–ã§ç”Ÿæˆã™ã‚‹ã®ã¯ `built_value` å®Ÿè£…** ã‹ã€ã‚ã‚‹ã„ã¯ `json_serializable` å®Ÿè£…ãŒå¤šã„ã§ã™ï¼ˆ`freezed` ã‚’æ¡ç”¨ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ç¾çŠ¶ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚  

ä»¥ä¸‹ã§è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

---

## 1. ã€Œã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã€ã§ã‚»ãƒƒãƒˆã—ãŸã„å ´åˆ

### 1-1. built_value ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨ã

`built_value` ã§ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ (`CreateGuildRequestDto` ãªã©) ã¯ã€æœ¬æ¥

```dart
final requestDto = CreateGuildRequestDto(
  (b) => b
    ..guildName = 'MyGuild'
    ..guildDescription = 'Description'
);
```

ã®ã‚ˆã†ã«æ›¸ãã®ãŒæ­£æ”»æ³•ã§ã™ã€‚  
ã€Œã‚­ãƒ¼ã¨å€¤ã®ãƒãƒƒãƒ—ã€ã§ç›´æ¥ç”Ÿæˆã™ã‚‹æ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚‚ã—**ãƒãƒƒãƒ—ï¼ˆ`Map<String, dynamic>`ï¼‰ã‚’æ—¢ã«æŒã£ã¦ã„ã‚‹**ãªã‚‰ã€`built_value` ã®ã€Œã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã€ã‚’çµŒç”±ã—ã¦ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã“ã¨ã§ **æ“¬ä¼¼çš„ã«ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã‹ã‚‰å¤‰æ›ã™ã‚‹** ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚ãŸã¨ãˆã°:

```dart
// ã¾ãš OpenAPI ç”Ÿæˆã§å‡ºã¦ãã‚‹ `serializers` ã‚’ import
import 'package:guild_api/src/serializers.dart';
// ã‚ã‚‹ã„ã¯ standardSerializers ãŒä½¿ãˆã‚‹ãªã‚‰ãã‚Œã‚’ import

// OpenAPI generator ã§å‡ºåŠ›ã•ã‚ŒãŸ CreateGuildRequestDto
import 'package:guild_api/src/model/create_guild_request_dto.dart';

// ãƒãƒƒãƒ—å½¢å¼
final requestBodyMap = <String, dynamic>{
  'guildName': 'MyGuild',
  'guildDescription': 'Description',
  'guildAvatar': 'http://example.com/avatar.png',
};

final requestDto = standardSerializers.deserializeWith(
  CreateGuildRequestDto.serializer,
  requestBodyMap,
);
```

ã“ã®ã‚ˆã†ã«ã—ã¦ä½œã£ãŸ `requestDto` ã‚’ API å‘¼ã³å‡ºã—ã«æ¸¡ã™ã€ã¨ã„ã†æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã€‚  
ãŸã ã— **å†…éƒ¨çš„ã«ã¯ã€ŒJSONã‚’ãƒãƒƒãƒ”ãƒ³ã‚° -> built_valueã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã€ã—ã¦ã„ã‚‹** ã«ã™ããªã„ãŸã‚ã€ã€Œå…ƒã€… built_value ãŒè¦æ±‚ã™ã‚‹ `(b) => b..someField = ...` ã®æ›¸ãæ–¹ã€ã‚’çœç•¥ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

### 1-2. json_serializable ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨ã

OpenAPI Generator ã‚’ã€Œ`serializationLibrary: jsonSerializable`ã€ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã€`built_value` ã§ã¯ãªã JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º (`toJson`, `fromJson`) ã‚’æŒã¤æ™®é€šã® Dart ã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã€

```dart
// è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãŒã“ã†ã„ã†å½¢ãªã‚‰
class CreateGuildRequestDto {
  String guildName;
  String? guildDescription;
  // ...
  
  CreateGuildRequestDto({
    required this.guildName,
    this.guildDescription,
    // ...
  });

  factory CreateGuildRequestDto.fromJson(Map<String, dynamic> json) => ...
  Map<String, dynamic> toJson() => ...
}
```

ã¨ãªã‚‹ã®ã§ã€

```dart
final requestDto = CreateGuildRequestDto.fromJson({
  'guildName': 'MyGuild',
  'guildDescription': 'Description',
});
```

ã¨ã„ã†ã€Œã‚­ãƒ¼ã¨å€¤ã«ã‚ˆã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚

---

## 2. `freezed` ã¨ã®çµ„ã¿åˆã‚ã›ã¯ï¼Ÿ

`freezed` ã§å®šç¾©ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã«ç›´æ¥å¤‰æ›ã™ã‚‹ã‚ˆã†ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€**OpenAPI Generator ã®æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯å­˜åœ¨ã—ã¾ã›ã‚“**ã€‚  
ãŸã ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§

1. ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ï¼ˆbuilt_value ã‹ json_serializableï¼‰ã‚’ä¸­é–“ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å—ã‘å–ã‚Š  
2. `freezed` ã§ä½œã‚‰ã‚ŒãŸè‡ªåˆ†ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹

ã¨ã„ã†2æ®µéšã®å¤‰æ›ã‚’ã™ã‚‹ã€ã¨ã„ã†ã‚„ã‚Šæ–¹ã¯å¯èƒ½ã§ã™ã€‚  
ã—ã‹ã—ã€ã€ŒOpenAPI Generator ã®å‡ºåŠ›ãã®ã‚‚ã®ã‚’ `freezed` ã«ã—ãŸã„ã€ã¨ã„ã†ã®ã¯ **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒ ã—ãªã„é™ã‚Šé›£ã—ã„** ã¨ã„ã†ã®ãŒç¾çŠ¶ã§ã™ã€‚

---

## 3. ã¾ã¨ã‚

- OpenAPI Generatorï¼ˆdart-dio + built_valueï¼‰ã®å ´åˆã€  
  - `CreateGuildRequestDto((b) => b..guildName = 'MyGuild')` ã® **ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³** ãŒæ¨™æº–ã®åˆæœŸåŒ–æ–¹æ³•ã€‚  
  - ã‚‚ã—ã©ã†ã—ã¦ã‚‚ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã§æ¸¡ã—ãŸã„å ´åˆã¯ã€`serializers.deserializeWith(...)` ã‚’ä½¿ã†  
- `json_serializable` ã‚’ä½¿ã†ã‚ˆã†ã«è¨­å®šã™ã‚Œã°ã€`ClassName.fromJson(Map<String,dynamic>)` ã¨ã„ã†ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚„ã™ããªã‚‹ã€‚  
- `freezed` ã¯**æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„**ã€‚ã‚‚ã— `freezed` ã‚’ä½¿ã†ãªã‚‰ã€è‡ªå‰ã§ç”Ÿæˆç‰©ã‚’å¤‰æ›ã™ã‚‹ or ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè‡ªä½“ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚  

ã€Œãƒ“ãƒ«ãƒ‰å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’ã„ã˜ã‚‰ãšã«ãƒ“ãƒ«ãƒ€ãƒ¼è¨˜æ³•ã‚’é¿ã‘ãŸã„ã€ã¨ã„ã†è¦æœ›ãŒå¼·ã„å ´åˆã¯ã€**ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼è¨­å®šã‚’ `jsonSerializable` ã«ã™ã‚‹** ã“ã¨ãŒæœ€ã‚‚ç°¡å˜ãªé¸æŠè‚¢ã§ã™ã€‚ã‚‚ã—æ—¢ã«ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ built_value æ–¹å¼ã‚’ä½¿ã†ãªã‚‰ã€**ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³** ã‚„ **ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶çµŒç”±ã®ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º** ã«æ…£ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:50:08*

jsonSerializableã«ã™ã‚‹æ–¹æ³•ã‚’æ•™ãˆã¦ã»ã—ã„ã€‚

// Openapi Generator last run: : 2025-03-05T14:37:28.318064
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  additionalProperties: AdditionalProperties(
    pubName: 'guild_api',
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
)
class Example {}
import 'dart:convert';
import 'dart:io';

import 'package:crypto/crypto.dart';
import 'package:meta/meta.dart';

class Openapi {
  /// Additional properties to pass to the compiler (CSV)
  ///
  /// --additional-properties
  final AdditionalProperties? additionalProperties;

  // /// Allows you to customize how inline schemas are handled or named
  // ///
  // /// --inline-schema-options
  // final InlineSchemaOptions? inlineSchemaOptions;

  /// The package of the api. defaults to lib.api
  ///
  /// --api-package
  final String? apiPackage;

  /// Provides the access information to the input spec file.
  ///
  /// For use with useNextGen.
  ///
  /// The next generation of the OAS spec file information. Allows for local and
  /// remote spec files.
  ///
  /// This version of the spec file configuration allows for custom authorization
  /// to be applied to the fetch request when the spec file is in a remote
  /// location. There is also special handling for when the spec file lives within
  /// AWS.
  final InputSpec inputSpec;

  /// folder containing the template files
  ///
  /// You can read more about templating here
  /// https://github.com/OpenAPITools/openapi-generator/blob/master/docs/templating.md
  /// -t
  final String? templateDirectory;

  /// Generator to use (dart|dart2-api|dart-jaguar|dart-dio)
  ///
  /// -g, --generator-name
  final Generator generatorName;

  ///  Where to write the generated files (current dir by default)
  ///
  ///  -o, --output
  final String? outputDirectory;

  /// Defines whether the output directory should be cleaned up before generating the output.
  ///
  /// e.g [''], ['lib/src']
  final List&lt;String&gt;? cleanSubOutputDirectory;

  /// Skips the default behavior of validating an input specification.
  ///
  /// --skip-validate-spec
  final bool? skipSpecValidation;

  /// Add reserved words mappings as reservedWord=replacement format.
  /// It is supported by the dart2-api and dart-dio generator.
  ///
  /// --reserved-words-mappings
  final Map&lt;String, String&gt;? reservedWordsMappings;

  /// if set to true, flutter pub get will be run on the [outputDirectory] after the code has been generated.
  /// Defaults to true for backwards compatibility
  final bool? fetchDependencies;

  ///if set to true, source gen will be run on the output of openapi-generator
  ///Defaults to true
  final bool? runSourceGenOnOutput;

  ///  sets mappings between OpenAPI spec types and generated code types in
  ///  the format of OpenAPIType=generatedType,OpenAPIType=generatedType.
  ///  For example: array=List,map=Map,string=String. You can also have
  ///  multiple occurrences of this option. To map a specified format, use
  ///  type+format, e.g. string+password=EncryptedString will map `type:
  ///  string, format: password` to `EncryptedString`.
  ///
  ///   --type-mappings
  final Map&lt;String, String&gt;? typeMappings;

  /// a map to store the mapping between property name and the name provided by the user
  ///
  ///  specifies mappings between the property name and the new name in the format
  ///  of property_a=firstProperty,property_b=secondProperty.
  ///  [HTTP](https://openapi-generator.tech/docs/customization/#name-mapping)

  ///   --name-mappings
  final Map&lt;String, String&gt;? nameMappings;

  ///  Specifies mappings between the enum name and the new name in the
  ///  format of enum_name=AnotherName,enum_name2=OtherName2. You can also
  ///  have multiple occurrences of this option.

  ///  --enum-name-mappings
  final Map&lt;String, String&gt;? enumNameMappings;

  /// specifies mappings between a given class and the import that should
  /// be used for that class in the format of type=import,type=import. You
  /// can also have multiple occurrences of this option.
  ///
  /// --import-mappings
  ///
  /// e.g {'OffsetDate': 'package:time_machine/time_machine.dart'}
  final Map&lt;String, String&gt;? importMappings;

  /// Inline schemas are created as separate schemas automatically and the
  /// auto-generated schema name may not look good to everyone. One can customize
  /// the name using the title field or the inlineSchemaNameMapping option.
  ///
  /// --inline-schema-name-mappings
  ///
  /// e.g {'inline_object_2': 'SomethingMapped'}
  final Map&lt;String, String&gt;? inlineSchemaNameMappings;

  /// The path where to store the cached copy of the specification.
  ///
  /// If you have more than one spec file, you can use this to cache them separately otherwise they will all be cached
  /// in the exact same file which means only the last spec that was processed with end up being cached.
  ///
  /// e.g .dart_tool/spec/specA.json
  final String? cachePath;

  /// Use a custom pubspec when running the generator.
  final String? projectPubspecPath;

  /// Include in depth logging output from run commands.
  final bool debugLogging;

  /// If `true`, the annotated file will be modified after code generation completes.
  ///
  /// This is a workaround to ensure this library runs every time you execute the `build_runner` command.
  ///
  /// **Why modify the file?**
  ///
  /// `build_runner` only processes files that have changed since the last run. By modifying the file, you
  /// force `build_runner` to recognize it as changed and re-run the generation process.
  ///
  /// Note: Setting this to `true` can lead to merge conflicts in team environments,
  /// as each developer may end up modifying the annotated file.
  ///
  /// This setting is different from [skipIfSpecIsUnchanged], which only regenerates
  /// the client SDK if it detects changes in the OpenAPI specification.
  ///
  /// Defaults to [false].
  final bool forceAlwaysRun;

  /// Skips execution if the OpenAPI specification file is different from a cached copy.
  ///
  /// For remote specifications, the file will be downloaded and cached locally.
  /// The cache is then compared to the remote file to detect any changes.
  ///
  /// If set to false, a cached copy of the OpenAPI specification file is not kept.
  ///
  /// Defaults to [true].
  final bool skipIfSpecIsUnchanged;

  const Openapi({
    this.additionalProperties,
    this.skipSpecValidation = false,
    required this.inputSpec,
    this.templateDirectory,
    required this.generatorName,
    this.outputDirectory,
    this.cleanSubOutputDirectory,
    this.typeMappings,
    this.nameMappings,
    this.enumNameMappings,
    this.importMappings,
    this.reservedWordsMappings,
    this.inlineSchemaNameMappings,
    // this.inlineSchemaOptions,
    this.apiPackage,
    this.fetchDependencies = true,
    this.runSourceGenOnOutput = true,
    this.cachePath,
    this.projectPubspecPath,
    this.debugLogging = false,
    this.forceAlwaysRun = true,
    this.skipIfSpecIsUnchanged = true,
  });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('@Openapi(');
    if (additionalProperties != null) {
      buffer.writeln('  additionalProperties: $additionalProperties,');
    }
    if (apiPackage != null) {
      buffer.writeln('  apiPackage: "$apiPackage",');
    }
    buffer.writeln('  inputSpec: $inputSpec,');
    if (templateDirectory != null) {
      buffer.writeln('  templateDirectory: "$templateDirectory",');
    }
    buffer.writeln('  generatorName: $generatorName,');
    if (outputDirectory != null) {
      buffer.writeln('  outputDirectory: "$outputDirectory",');
    }
    if (cleanSubOutputDirectory != null) {
      buffer.writeln(
          '  cleanSubOutputDirectory: ["${cleanSubOutputDirectory!.join('", "')}"],');
    }
    if (skipSpecValidation != null) {
      buffer.writeln('  skipSpecValidation: $skipSpecValidation,');
    }
    if (reservedWordsMappings != null) {
      buffer.writeln(
          '  reservedWordsMappings: ${reservedWordsMappings.toString()},');
    }
    if (fetchDependencies != null) {
      buffer.writeln('  fetchDependencies: $fetchDependencies,');
    }
    if (runSourceGenOnOutput != null) {
      buffer.writeln('  runSourceGenOnOutput: $runSourceGenOnOutput,');
    }
    if (typeMappings != null) {
      buffer.writeln('  typeMappings: ${_formatMap(typeMappings!)},');
    }
    if (nameMappings != null) {
      buffer.writeln('  nameMappings: ${_formatMap(nameMappings!)},');
    }
    if (enumNameMappings != null) {
      buffer.writeln('  enumNameMappings: ${_formatMap(enumNameMappings!)},');
    }
    if (importMappings != null) {
      buffer.writeln('  importMappings: ${_formatMap(importMappings!)},');
    }
    if (inlineSchemaNameMappings != null) {
      buffer.writeln(
          '  inlineSchemaNameMappings: ${_formatMap(inlineSchemaNameMappings!)},');
    }
    if (cachePath != null) {
      buffer.writeln('  cachePath: "$cachePath",');
    }
    if (projectPubspecPath != null) {
      buffer.writeln('  projectPubspecPath: "$projectPubspecPath",');
    }
    buffer.writeln('  debugLogging: $debugLogging,');
    buffer.writeln('  forceAlwaysRun: $forceAlwaysRun,');
    buffer.writeln('  skipIfSpecIsUnchanged: $skipIfSpecIsUnchanged,');
    buffer.write(')');
    return buffer.toString();
  }
}

String _formatMap(Map&lt;String, String&gt; map) {
  final buffer = StringBuffer();
  buffer.write('{');
  buffer.writeAll(
      map.entries.map((entry) =&gt; "'${entry.key}':'${entry.value}'"), ', ');
  buffer.write('}');
  return buffer.toString();
}

/// Provides the input spec file to be used.
///
/// Provides the location of the input spec file to be used by the generator.
/// Includes the option to use the default json or yaml paths.
class InputSpec {
  final String path;

  const InputSpec({required this.path});

  const InputSpec.json() : this(path: 'openapi.json');

  const InputSpec.yaml({bool shortExtension = false})
      : this(path: 'openapi.y${shortExtension ? '' : 'a'}ml');

  InputSpec.fromMap(Map&lt;String, dynamic&gt; map) : this(path: map['path']);

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('InputSpec(');
    buffer.writeln('  path: "$path"');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Provides the location for the remote specification.
///
/// Provides basic support for fetching remote specification files hidden behind
/// an authenticated endpoint.
///
/// By default when no [url] is provided a default [Uri.http] to
/// localhost:8080/ is used.
///
/// This contains authentication information for fetching the OAS spec ONLY. This
/// does not apply security to the entry points defined in the OAS spec.
class RemoteSpec extends InputSpec {
  final RemoteSpecHeaderDelegate headerDelegate;

  const RemoteSpec({
    required String path,
    this.headerDelegate = const RemoteSpecHeaderDelegate(),
  }) : super(path: path);

  const RemoteSpec.empty() : this(path: 'http://localhost:8080/');

  Uri get url =&gt; Uri.parse(path);

  RemoteSpec.fromMap(Map&lt;String, dynamic&gt; map)
      : headerDelegate =
            map['headerDelegate'] ?? const RemoteSpecHeaderDelegate(),
        super.fromMap(map);

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('RemoteSpec(');
    buffer.writeln('  path: "$path",');
    buffer.writeln('  headerDelegate: $headerDelegate');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Default [RemoteSpecHeaderDelegate] used when retrieving a remote OAS spec.
class RemoteSpecHeaderDelegate {
  const RemoteSpecHeaderDelegate();

  Map&lt;String, String&gt;? header() =&gt; null;

  RemoteSpecHeaderDelegate.fromMap(Map&lt;String, dynamic&gt; map) : this();

  @override
  String toString() =&gt; 'RemoteSpecHeaderDelegate()';
}

/// Indicates whether or not the spec file live within AWS.
///
/// Since AWS handles the authentication header differently, we need to inform
/// the builder to include the alternate auth header.
///
/// This currently only supports AWS Object GET.
///
/// This contains authentication information for fetching the OAS spec ONLY. This
/// does not apply security to the entry points defined in the OAS spec.
///
/// This delegate makes the assumption that the AWS credentials to be used are
/// provided by the environment and are not empty.
class AWSRemoteSpecHeaderDelegate extends RemoteSpecHeaderDelegate {
  /// The [bucket] where the OAS spec is stored within AWS.
  final String bucket;
  final String? accessKeyId;
  final String? secretAccessKey;

  const AWSRemoteSpecHeaderDelegate({
    required this.bucket,
    this.secretAccessKey = null,
    this.accessKeyId = null,
  }) : super();

  AWSRemoteSpecHeaderDelegate.fromMap(Map&lt;String, dynamic&gt; map)
      : bucket = map['bucket'],
        accessKeyId = map['accessKeyId'],
        secretAccessKey = map['secretAccessKey'],
        super.fromMap(map);

  /// Generates the [header] map used within the GET request.
  ///
  /// Assumes that the user's auth AWS credentials
  @override
  Map&lt;String, String&gt;? header({
    String? path,
  }) {
    if (!(path != null && path.isNotEmpty)) {
      throw new AssertionError('The path to the OAS spec should be provided');
    }

    // Use the provided credentials to the constructor, if any, otherwise
    // fallback to the environment values or throw.
    final accessKey = accessKeyId ?? Platform.environment['AWS_ACCESS_KEY_ID'];
    final secretKey =
        secretAccessKey ?? Platform.environment['AWS_SECRET_ACCESS_KEY'];
    if ((accessKey == null || accessKey.isEmpty) ||
        (secretKey == null || secretKey.isEmpty)) {
      throw new AssertionError(
          'AWS_SECRET_KEY_ID & AWS_SECRET_ACCESS_KEY should be defined and not empty or they should be provided in the delegate constructor.');
    }

    final now = DateTime.now();

    return {
      'Authorization': authHeaderContent(
        now: now,
        bucket: bucket,
        path: path,
        accessKeyId: accessKey,
        secretAccessKey: secretKey,
      ),
      'x-amz-date': now.toIso8601String(),
    };
  }

  /// The [Authentication] header content.
  ///
  /// This builds the Authorization header content format used by AWS.
  @visibleForTesting
  String authHeaderContent({
    required DateTime now,
    required String bucket,
    required String path,
    required String accessKeyId,
    required String secretAccessKey,
  }) {
    // https://docs.aws.amazon.com/AmazonS3/latest/userguide/RESTAuthentication.html#RESTAuthenticationExamples
    String toSign = [
      'GET',
      '',
      '',
      now.toIso8601String(),
      '/$bucket/$path',
    ].join('\n');

    final utf8AKey = utf8.encode(secretAccessKey);
    final utf8ToSign = utf8.encode(toSign);

    final signature =
        base64Encode(Hmac(sha1, utf8AKey).convert(utf8ToSign).bytes);
    return 'AWS $accessKeyId:$signature';
  }
}

class AdditionalProperties {
  ///  toggles whether unicode identifiers are allowed in names or not, default is false
  final bool? allowUnicodeIdentifiers;

  /// Whether to ensure parameter names are unique in an operation (rename parameters that are not).
  final bool? ensureUniqueParams;

  /// Add form or body parameters to the beginning of the parameter list.
  final bool? prependFormOrBodyParameters;

  ///	Author name in generated pubspec
  final String? pubAuthor;

  /// 	Email address of the author in generated pubspec
  final String? pubAuthorEmail;

  ///	Description in generated pubspec
  final String? pubDescription;

  ///	Homepage in generated pubspec
  final String? pubHomepage;

  ///	Name in generated pubspec
  final String? pubName;

  /// Version in generated pubspec
  final String? pubVersion;

  /// Sort model properties to place required parameters before optional parameters.
  final bool? sortModelPropertiesByRequiredFlag;

  /// Sort method arguments to place required parameters before optional parameters.
  final bool? sortParamsByRequiredFlag;

  /// Source folder for generated code
  final String? sourceFolder;

  /// Allow the 'x-enum-values' extension for enums
  final bool? useEnumExtension;

  /// If the server adds new enum cases, that are unknown by an old spec/client,
  /// the client will fail to parse the network response.With this option enabled, each enum will have a new case, 'unknown_default_open_api',
  /// so that when the server sends an enum case that is not known by the client/spec,
  /// they can safely fallback to this case.
  ///
  /// Default: false
  final bool enumUnknownDefaultCase;

  /// Flutter wrapper to use (none|flutterw|fvm)
  final Wrapper wrapper;

  /// Set to true for generators with better support for discriminators.
  /// (Python, Java, Go, PowerShell, C#have this enabled by default).
  ///
  /// true
  /// The mapping in the discriminator includes descendent schemas that allOf
  /// inherit from self and the discriminator mapping schemas in the OAS document.
  ///
  /// false
  /// The mapping in the discriminator includes any descendent schemas that allOf
  /// inherit from self, any oneOf schemas, any anyOf schemas, any x-discriminator-values,
  /// and the discriminator mapping schemas in the OAS document AND Codegen validates
  /// that oneOf and anyOf schemas contain the required discriminator and throws
  /// an error if the discriminator is missing.
  final bool legacyDiscriminatorBehavior;

  const AdditionalProperties({
    this.allowUnicodeIdentifiers = false,
    this.ensureUniqueParams = true,
    this.useEnumExtension = false,
    this.enumUnknownDefaultCase = false,
    this.prependFormOrBodyParameters = false,
    this.pubAuthor,
    this.pubAuthorEmail,
    this.pubDescription,
    this.pubHomepage,
    this.legacyDiscriminatorBehavior = true,
    this.pubName,
    this.pubVersion,
    this.sortModelPropertiesByRequiredFlag = true,
    this.sortParamsByRequiredFlag = true,
    this.sourceFolder,
    this.wrapper = Wrapper.none,
  });

  /// Produces an [AdditionalProperties] object from the [ConstantReader] [map].
  AdditionalProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : this(
          allowUnicodeIdentifiers: map['allowUnicodeIdentifiers'] ?? false,
          ensureUniqueParams: map['ensureUniqueParams'] ?? true,
          useEnumExtension: map['useEnumExtension'] ?? true,
          enumUnknownDefaultCase: map['enumUnknownDefaultCase'] ?? false,
          prependFormOrBodyParameters:
              map['prependFormOrBodyParameters'] ?? false,
          pubAuthor: map['pubAuthor'],
          pubAuthorEmail: map['pubAuthorEmail'],
          pubDescription: map['pubDescription'],
          pubHomepage: map['pubHomepage'],
          pubName: map['pubName'],
          pubVersion: map['pubVersion'],
          legacyDiscriminatorBehavior:
              map['legacyDiscriminatorBehavior'] ?? true,
          sortModelPropertiesByRequiredFlag:
              map['sortModelPropertiesByRequiredFlag'] ?? true,
          sortParamsByRequiredFlag: map['sortParamsByRequiredFlag'] ?? true,
          sourceFolder: map['sourceFolder'],
          wrapper: EnumTransformer.wrapper(map['wrapper']),
        );

  Map&lt;String, dynamic&gt; toMap() =&gt; {
        'allowUnicodeIdentifiers': allowUnicodeIdentifiers,
        'ensureUniqueParams': ensureUniqueParams,
        'useEnumExtension': useEnumExtension,
        'enumUnknownDefaultCase': enumUnknownDefaultCase,
        'prependFormOrBodyParameters': prependFormOrBodyParameters,
        if (pubAuthor != null) 'pubAuthor': pubAuthor,
        if (pubAuthorEmail != null) 'pubAuthorEmail': pubAuthorEmail,
        if (pubDescription != null) 'pubDescription': pubDescription,
        if (pubHomepage != null) 'pubHomepage': pubHomepage,
        if (pubName != null) 'pubName': pubName,
        if (pubVersion != null) 'pubVersion': pubVersion,
        'legacyDiscriminatorBehavior': legacyDiscriminatorBehavior,
        'sortModelPropertiesByRequiredFlag': sortModelPropertiesByRequiredFlag,
        'sortParamsByRequiredFlag': sortParamsByRequiredFlag,
        if (sourceFolder != null) 'sourceFolder': sourceFolder,
        'wrapper': EnumTransformer.wrapperName(wrapper)
      };

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('AdditionalProperties(');
    if (allowUnicodeIdentifiers != null)
      buffer.writeln('  allowUnicodeIdentifiers: $allowUnicodeIdentifiers,');
    if (ensureUniqueParams != null)
      buffer.writeln('  ensureUniqueParams: $ensureUniqueParams,');
    if (prependFormOrBodyParameters != null)
      buffer.writeln(
          '  prependFormOrBodyParameters: $prependFormOrBodyParameters,');
    if (pubAuthor != null) buffer.writeln('  pubAuthor: "$pubAuthor",');
    if (pubAuthorEmail != null)
      buffer.writeln('  pubAuthorEmail: "$pubAuthorEmail",');
    if (pubDescription != null)
      buffer.writeln('  pubDescription: "$pubDescription",');
    if (pubHomepage != null) buffer.writeln('  pubHomepage: "$pubHomepage",');
    if (pubName != null) buffer.writeln('  pubName: "$pubName",');
    if (pubVersion != null) buffer.writeln('  pubVersion: "$pubVersion",');
    if (sortModelPropertiesByRequiredFlag != null)
      buffer.writeln(
          '  sortModelPropertiesByRequiredFlag: $sortModelPropertiesByRequiredFlag,');
    if (sortParamsByRequiredFlag != null)
      buffer.writeln('  sortParamsByRequiredFlag: $sortParamsByRequiredFlag,');
    if (sourceFolder != null)
      buffer.writeln('  sourceFolder: "$sourceFolder",');
    if (useEnumExtension != null)
      buffer.writeln('  useEnumExtension: $useEnumExtension,');
    buffer.writeln('  enumUnknownDefaultCase: $enumUnknownDefaultCase,');
    buffer.writeln('  wrapper: $wrapper,');
    buffer
        .writeln('  legacyDiscriminatorBehavior: $legacyDiscriminatorBehavior');
    buffer.write(')');
    return buffer.toString();
  }
}

/// Allows you to customize how inline schemas are handled or named
class InlineSchemaOptions {
  ///  sets the array item suffix
  final String? arrayItemSuffix;

  /// set the map item suffix
  final String? mapItemSuffix;

  /// special value to skip reusing inline schemas during refactoring
  final bool skipSchemaReuse;

  ///	will restore the 6.x (or below) behaviour to refactor allOf inline schemas
  ///into $ref. (v7.0.0 will skip the refactoring of these allOf inline schemas by default)
  final bool refactorAllofInlineSchemas;

  /// Email address of the author in generated pubspec
  final bool resolveInlineEnums;

  const InlineSchemaOptions(
      {this.arrayItemSuffix,
      this.mapItemSuffix,
      this.skipSchemaReuse = true,
      this.refactorAllofInlineSchemas = true,
      this.resolveInlineEnums = true});

  /// Produces an [InlineSchemaOptions] that is easily consumable from the [ConstantReader].
  InlineSchemaOptions.fromMap(Map&lt;String, dynamic&gt; map)
      : this(
          arrayItemSuffix: map['arrayItemSuffix'],
          mapItemSuffix: map['mapItemSuffix'],
          skipSchemaReuse: map['skipSchemaReuse'] ?? true,
          refactorAllofInlineSchemas: map['refactorAllofInlineSchemas'] ?? true,
          resolveInlineEnums: map['resolveInlineEnums'] ?? true,
        );

  /// A convenience function that simplifies the output to the compiler.
  Map&lt;String, dynamic&gt; toMap() =&gt; {
        if (arrayItemSuffix != null) 'arrayItemSuffix': arrayItemSuffix!,
        if (mapItemSuffix != null) 'mapItemSuffix': mapItemSuffix!,
        'skipSchemaReuse': skipSchemaReuse,
        'refactorAllofInlineSchemas': refactorAllofInlineSchemas,
        'resolveInlineEnums': resolveInlineEnums,
      };

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('InlineSchemaOptions(');
    if (arrayItemSuffix != null)
      buffer.writeln('  arrayItemSuffix: "$arrayItemSuffix",');
    if (mapItemSuffix != null)
      buffer.writeln('  mapItemSuffix: "$mapItemSuffix",');
    buffer.writeln('  skipSchemaReuse: $skipSchemaReuse,');
    buffer
        .writeln('  refactorAllofInlineSchemas: $refactorAllofInlineSchemas,');
    buffer.writeln('  resolveInlineEnums: $resolveInlineEnums');
    buffer.write(')');
    return buffer.toString();
  }
}

class DioProperties extends AdditionalProperties {
  /// Choose serialization format JSON or PROTO is supported
  final DioDateLibrary? dateLibrary;
  final DioSerializationLibrary? serializationLibrary;

  /// Is the null fields should be in the JSON payload
  final bool? nullableFields;

  const DioProperties(
      {this.dateLibrary,
      this.nullableFields,
      this.serializationLibrary,
      bool allowUnicodeIdentifiers = false,
      bool ensureUniqueParams = true,
      bool prependFormOrBodyParameters = false,
      String? pubAuthor,
      String? pubAuthorEmail,
      String? pubDescription,
      String? pubHomepage,
      String? pubName,
      String? pubVersion,
      bool sortModelPropertiesByRequiredFlag = true,
      bool sortParamsByRequiredFlag = true,
      bool useEnumExtension = true,
      bool enumUnknownDefaultCase = false,
      String? sourceFolder,
      Wrapper wrapper = Wrapper.none})
      : super(
            allowUnicodeIdentifiers: allowUnicodeIdentifiers,
            ensureUniqueParams: ensureUniqueParams,
            prependFormOrBodyParameters: prependFormOrBodyParameters,
            pubAuthor: pubAuthor,
            pubAuthorEmail: pubAuthorEmail,
            pubDescription: pubDescription,
            pubHomepage: pubHomepage,
            pubName: pubName,
            pubVersion: pubVersion,
            sortModelPropertiesByRequiredFlag:
                sortModelPropertiesByRequiredFlag,
            sortParamsByRequiredFlag: sortParamsByRequiredFlag,
            sourceFolder: sourceFolder,
            useEnumExtension: useEnumExtension,
            enumUnknownDefaultCase: enumUnknownDefaultCase,
            wrapper: wrapper);

  DioProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : dateLibrary = EnumTransformer.dioDateLibrary(map['dateLibrary']),
        nullableFields = map['nullableFields'],
        serializationLibrary = EnumTransformer.dioSerializationLibrary(
            map['serializationLibrary']),
        super.fromMap(map);

  Map&lt;String, dynamic&gt; toMap() =&gt; Map.from(super.toMap())
    ..addAll({
      if (dateLibrary != null)
        'dateLibrary': EnumTransformer.dioDateLibraryName(dateLibrary!),
      if (nullableFields != null) 'nullableFields': nullableFields,
      if (serializationLibrary != null)
        'serializationLibrary':
            EnumTransformer.dioSerializationLibraryName(serializationLibrary!),
    });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('DioProperties(');
    buffer.writeln(super
        .toString()
        .replaceAll(RegExp(r'AdditionalProperties\(|\)$'), '')
        .replaceAll('\n', '\n  ')); // Indent base class fields
    if (dateLibrary != null) buffer.writeln('  dateLibrary: $dateLibrary,');
    if (nullableFields != null)
      buffer.writeln('  nullableFields: $nullableFields,');
    if (serializationLibrary != null)
      buffer.writeln('  serializationLibrary: $serializationLibrary,');
    buffer.write(')');
    return buffer.toString();
  }
}

class DioAltProperties extends AdditionalProperties {
  /// This will turn off AnyOf support. This would be a bit weird, but you can do it if you want.
  final bool? listAnyOf;

  /// Anything in this will be split on a command added to the dependencies section of your generated code.
  /// pubspec-dependencies
  ///
  /// this allows a user to specify additional dependencies required for this artifact, it spits
  /// the comma separated list into a proper list, removing empty ones and makes it available in the appropriate
  /// vendor-prefix to allow the mustache template to pick it up.
  ///
  /// dependencies should be comma separated
  final String? pubspecDependencies;

  /// pubspec-dev-dependencies
  /// Anything here will be added to the dev dependencies of your generated code.
  final String? pubspecDevDependencies;

  const DioAltProperties(
      {this.pubspecDependencies,
      this.pubspecDevDependencies,
      this.listAnyOf,
      bool allowUnicodeIdentifiers = false,
      bool ensureUniqueParams = true,
      bool prependFormOrBodyParameters = false,
      String? pubAuthor,
      String? pubAuthorEmail,
      String? pubDescription,
      String? pubHomepage,
      String? pubName,
      String? pubVersion,
      bool sortModelPropertiesByRequiredFlag = true,
      bool sortParamsByRequiredFlag = true,
      bool useEnumExtension = true,
      bool enumUnknownDefaultCase = false,
      String? sourceFolder,
      Wrapper wrapper = Wrapper.none})
      : super(
            allowUnicodeIdentifiers: allowUnicodeIdentifiers,
            ensureUniqueParams: ensureUniqueParams,
            prependFormOrBodyParameters: prependFormOrBodyParameters,
            pubAuthor: pubAuthor,
            pubAuthorEmail: pubAuthorEmail,
            pubDescription: pubDescription,
            pubHomepage: pubHomepage,
            pubName: pubName,
            pubVersion: pubVersion,
            sortModelPropertiesByRequiredFlag:
                sortModelPropertiesByRequiredFlag,
            sortParamsByRequiredFlag: sortParamsByRequiredFlag,
            sourceFolder: sourceFolder,
            useEnumExtension: useEnumExtension,
            enumUnknownDefaultCase: enumUnknownDefaultCase,
            wrapper: wrapper);

  DioAltProperties.fromMap(Map&lt;String, dynamic&gt; map)
      : listAnyOf = map['listAnyOf'],
        pubspecDependencies = map['pubspecDependencies'],
        pubspecDevDependencies = map['pubspecDevDependencies'],
        super.fromMap(map);

  Map&lt;String, dynamic&gt; toMap() =&gt; Map.from(super.toMap())
    ..addAll({
      if (listAnyOf != null) 'listAnyOf': listAnyOf,
      if (pubspecDependencies != null)
        'pubspecDependencies': pubspecDependencies,
      if (pubspecDevDependencies != null)
        'pubspecDevDependencies': pubspecDevDependencies,
    });

  @override
  String toString() {
    final buffer = StringBuffer();
    buffer.writeln('DioAltProperties(');

    // Indent the fields from AdditionalProperties
    buffer.writeln(super
        .toString()
        .replaceAll(RegExp(r'AdditionalProperties\(|\)$'), '')
        .replaceAll('\n', '\n  '));

    // Add DioAltProperties-specific fields
    if (listAnyOf != null) buffer.writeln('  listAnyOf: $listAnyOf,');
    if (pubspecDependencies != null)
      buffer.writeln('  pubspecDependencies: "$pubspecDependencies",');
    if (pubspecDevDependencies != null)
      buffer.writeln('  pubspecDevDependencies: "$pubspecDevDependencies",');

    buffer.write(')');
    return buffer.toString();
  }
}

enum DioDateLibrary {
  /// Dart core library (DateTime)
  core,

  /// Time Machine is date and time library for Flutter, Web, and Server with
  /// support for timezones, calendars, cultures, formatting and parsing.
  timemachine
}

enum DioSerializationLibrary {
  @Deprecated('Use [builtValue] instead.')
  built_value,
  builtValue,
  jsonSerializable
}

enum SerializationFormat { JSON, PROTO }

/// The name of the generator to use
enum Generator {
  /// This generator uses the default http package that comes with dart
  /// corresponds to dart
  dart,

  /// This generator uses the dio package. Source gen is required after generating code with this generator
  /// corresponds to dart-dio
  ///
  /// A powerful Http client for Dart, which supports Interceptors, Global configuration,
  /// FormData, Request Cancellation, File downloading, Timeout etc
  /// https://pub.flutter-io.cn/packages/dio
  dio,

  /// This uses the generator provided by bluetrainsoftware which internally uses the dio package
  ///
  /// You can read more about it here https://github.com/dart-ogurets/dart-openapi-maven
  dioAlt,
}

// TODO: Upon release of NextGen as default migrate to sdk 2.17 for enhanced enums
//  remove this work around.
/// Transforms the enums used with the [Openapi] annotation.
class EnumTransformer {
  static DioDateLibrary? dioDateLibrary(String? name) {
    switch (name) {
      case 'timemachine':
        return DioDateLibrary.timemachine;
      case 'core':
        return DioDateLibrary.core;
    }
    return null;
  }

  static String dioDateLibraryName(DioDateLibrary lib) {
    switch (lib) {
      case DioDateLibrary.timemachine:
        return 'timemachine';
      default:
        return 'core';
    }
  }

  static DioSerializationLibrary? dioSerializationLibrary(String? name) {
    switch (name) {
      case 'json_serializable':
      case 'jsonSerializable':
        return DioSerializationLibrary.jsonSerializable;
      case 'built_value':
      case 'builtValue':
        return DioSerializationLibrary.builtValue;
    }
    return null;
  }

  static String dioSerializationLibraryName(DioSerializationLibrary lib) {
    switch (lib) {
      case DioSerializationLibrary.jsonSerializable:
        return 'json_serializable';
      default:
        return 'built_value';
    }
  }

  /// Converts the given [name] to the matching [Generator] name.
  ///
  /// Defaults to [Generator.dart];
  static Generator generator(String? name) {
    switch (name) {
      case 'dio':
        return Generator.dio;
      case 'dioAlt':
        return Generator.dioAlt;
      default:
        return Generator.dart;
    }
  }

  static String generatorName(Generator generator) {
    switch (generator) {
      case Generator.dio:
        return 'dart-dio';
      case Generator.dioAlt:
        return 'dart2-api';
      default:
        return 'dart';
    }
  }

  /// Converts the given [name] to the matching [Wrapper] name.
  ///
  /// Defaults to [Wrapper.none];
  static Wrapper wrapper(String? name) {
    switch (name) {
      case 'fvm':
        return Wrapper.fvm;
      case 'flutterw':
        return Wrapper.flutterw;
      default:
        return Wrapper.none;
    }
  }

  static String wrapperName(Wrapper wrapper) {
    switch (wrapper) {
      case Wrapper.flutterw:
        return 'flutterw';
      case Wrapper.fvm:
        return 'fvm';
      default:
        return 'none';
    }
  }
}

enum Wrapper { fvm, flutterw, none }

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:50:10*

`openapi_generator_annotations` ã‚’ä½¿ã£ã¦ Dart/Dio ç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ãã«ã€**`built_value`** ã§ã¯ãªã **`json_serializable`** ãƒ™ãƒ¼ã‚¹ã§ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚ŠãŸã„å ´åˆã¯ã€è¿½åŠ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ **`serializationLibrary: DioSerializationLibrary.jsonSerializable`** ã‚’æŒ‡å®šã—ã¾ã™ã€‚

---

## 1. è¨­å®šä¾‹

ãŸã¨ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `DioProperties` ã§ `serializationLibrary` ã‚’ `jsonSerializable` ã«ã—ã€ã•ã‚‰ã«å¿…è¦ã«å¿œã˜ã¦ `dateLibrary` ã‚„ `nullableFields` ã‚’è¨­å®šã—ã¾ã™ã€‚

```dart
@Openapi(
  generatorName: Generator.dio,
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    // â†“ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆ
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    // å¿…è¦ã«å¿œã˜ã¦
    // dateLibrary: DioDateLibrary.core,
    // nullableFields: true,
  ),
)
class Example {}
```

- `generatorName: Generator.dio` ã§ **Dio** ãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ
- `serializationLibrary: DioSerializationLibrary.jsonSerializable` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãŒ **`json_serializable`** ã®ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ç”Ÿæˆã•ã‚Œã¾ã™
- `pubName` ã‚„ `dateLibrary` ãªã©ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§é©å®œè¨­å®šã—ã¦ä¸‹ã•ã„

ã“ã®è¨­å®šã§ `build_runner` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`built_value` ã®ä»£ã‚ã‚Šã«ã€`json_serializable` ã‚’ç”¨ã„ã¦ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹æ§‹é€ ãŒç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™:

```dart
class CreateGuildRequestDto {
  String guildName;
  String? guildDescription;
  // ...

  CreateGuildRequestDto({
    required this.guildName,
    this.guildDescription,
  });

  factory CreateGuildRequestDto.fromJson(Map<String, dynamic> json) =>
      _$CreateGuildRequestDtoFromJson(json);

  Map<String, dynamic> toJson() => _$CreateGuildRequestDtoToJson(this);
}
```

---

## 2. ç”Ÿæˆå¾Œã®ä½¿ã„æ–¹

`json_serializable` ã®ã‚¯ãƒ©ã‚¹ã«ãªã‚‹ã¨ã€**é€šå¸¸ã® Dart ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿** ã‚„ `fromJson(Map<String, dynamic>)` / `toJson()` ãŒä½¿ãˆã‚‹ã®ã§ã€

```dart
final dto = CreateGuildRequestDto(
  guildName: 'MyGuild',
  guildDescription: 'Some desc',
);

final Map<String, dynamic> map = dto.toJson();
final reDto = CreateGuildRequestDto.fromJson(map);
```

ã¨ã„ã†å½¢ã§ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚`built_value` ã®ã‚ˆã†ã«ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã‚ãªãã¦ã‚‚ã‚ˆããªã‚‹ã®ãŒä¸»ãªé•ã„ã§ã™ã€‚

---

## 3. ã¾ã¨ã‚

1. `@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã® `additionalProperties` ã« `DioProperties` ã‚’ä½¿ã†
2. `DioProperties` å†…ã§ `serializationLibrary: DioSerializationLibrary.jsonSerializable` ã‚’æŒ‡å®š
3. ç”Ÿæˆå¾Œã€`json_serializable` ã‚¹ã‚¿ã‚¤ãƒ«ã® Dart ã‚¯ãƒ©ã‚¹ãŒå‡ºåŠ›ã•ã‚Œã€`fromJson` / `toJson` ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹

ã“ã‚Œã ã‘ã§OKã§ã™ã€‚ã‚ã¨ã¯ã„ã¤ã‚‚ã©ãŠã‚Š `flutter pub run build_runner build` ã™ã‚Œã°ã€`built_value` ã§ã¯ãªã `json_serializable` ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 14:58:53*

ã“ã†è¨€ã†ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ

penapi generator completed successfully.

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Installing dependencies with generated source. [flutter pub get] in dir [guild_api]
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Resolving dependencies...
Downloading packages...
  js 0.7.1 (0.7.2 available)
Got dependencies!
1 package has newer versions incompatible with dependency constraints.
Try `flutter pub outdated` for more information.

Install completed successfully.

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Running source code generation.
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:flutter pub run build_runner build --delete-conflicting-outputs
[WARNING] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
===&gt; args [generate, -o=guild_api, -i=lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml, -g=dart-dio, --additional-properties=allowUnicodeIdentifiers=false,ensureUniqueParams=true,useEnumExtension=true,enumUnknownDefaultCase=false,prependFormOrBodyParameters=false,pubName=guild_api,legacyDiscriminatorBehavior=true,sortModelPropertiesByRequiredFlag=true,sortParamsByRequiredFlag=true,wrapper=none,serializationLibrary=json_serializable]
[SEVERE] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Failed to generate content.

Could not complete source generation Failed to generate source code. Build Command output: Failed to update packages.
 #0      OpenapiGenerator.runSourceGen (package:openapi_generator/src/openapi_generator_runner.dart:416:34)
&lt;asynchronous suspension&gt;
#1      OpenapiGenerator.generateSources.&lt;anonymous closure&gt; (package:openapi_generator/src/openapi_generator_runner.dart:361:7)
&lt;asynchronous suspension&gt;
#2      OpenapiGenerator.generateSources (package:openapi_generator/src/openapi_generator_runner.dart:360:12)
&lt;asynchronous suspension&gt;
#3      OpenapiGenerator.generatorV2 (package:openapi_generator/src/openapi_generator_runner.dart:210:7)
&lt;asynchronous suspension&gt;
#4      normalizeGeneratorOutput (package:source_gen/src/output_helpers.dart:10:1)
&lt;asynchronous suspension&gt;
#5      StreamCompleter.setSourceStream (package:async/src/stream_completer.dart:76:3)
&lt;asynchronous suspension&gt;
 
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Found generated timestamp. Updating with 2025-03-05T14:58:05.634224
[INFO] Running build completed, took 16.0s
[INFO] Caching finalized dependency graph completed, took 93ms
[SEVERE] Failed after 16.2s
Failed to update packages.
make: *** [build] Error 1


// Openapi Generator last run: : 2025-03-05T14:58:05.634224
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
)
class Example {}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 14:58:55*

**è§£æ±ºç­–ã‚’æ¨¡ç´¢ã™ã‚‹**

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä¾å­˜é–¢ä¿‚ã®è¡çªã‚’ç¤ºå”†ã—ã¦ãŠã‚Šã€"json_serializable"ã¨Dartã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã®äº’æ›æ€§ãŒå•é¡Œã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚

**ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ã‚’è©¦ã¿ã‚‹**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œguild_apiã€ãƒ•ã‚©ãƒ«ãƒ€ã§ã€Œflutter pub getã€ã‚’å®Ÿè¡Œã—ã€ä¾å­˜é–¢ä¿‚ã®è¡çªã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€Œflutter pub upgrade --major-versionsã€ã‚„ã€Œflutter pub add json_serializableã€ã‚’è©¦ã™ã‚ˆã†ææ¡ˆã—ã¦ã„ã‚‹ã€‚

**ä¾å­˜é–¢ä¿‚ã®è¿½åŠ ã‚’æ¨¡ç´¢**

`DioAltProperties`ã‚’ä½¿ã£ã¦`pubspecDependencies`ã‚’è¿½åŠ ã—ã€`generatorName: Generator.dioAlt`ã‚’è¨­å®šã—ã€ã‚«ã‚¹ã‚¿ãƒ ã®`pubspec.yaml`ã‚’æ‰‹å‹•ã§å®šç¾©ã™ã‚‹æ–¹æ³•ã‚’æ¢ã£ã¦ã„ã‚‹ã€‚

**ä¾å­˜é–¢ä¿‚ã®è¿½åŠ ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ“ä½œ**

ãƒ«ãƒ¼ãƒˆã®`pubspec.yaml`ã«ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`flutter pub run build_runner build`ã‚’å†å®Ÿè¡Œã—ã¦ã„ã‚‹ã€‚ãƒªã‚¢ãƒ«ãªã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã¦ã€ä¾å­˜é–¢ä¿‚ã®è¡çªã‚’ä¿®æ­£ä¸­ã€‚

**æ‰‹å‹•ã§ã®æ“ä½œã‚’ææ¡ˆ**

æ´¾æ‰‹ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®èƒŒå¾Œã«æ½œã‚€è­¦å‘Šã‚’è¦‹ã¦ã€æ‰‹å‹•ã§ã®åˆ¶ç´„è¿½åŠ ãƒ»å‰Šé™¤ã‚’æŒ‡å°ã—ã€"js"ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çªã‚’è§£æ±ºã—ã¦ã„ã‚‹ã€‚

**ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ä¿®æ­£**

`guild_api`ã®`pubspec.yaml`ã§åˆ¶ç´„ã‚’æ›´æ–°ã—ã€`flutter pub get`ã‚’å®Ÿè¡Œã—ã€ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã¦ä¿®æ­£ã‚’è©¦ã¿ã¦ã„ã‚‹ã€‚ä»–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚æ¤œè¨ä¸­ã€‚

**å„ªã‚ŒãŸæƒ…å ±ã‚’æä¾›ã™ã‚‹**

`guild_api`ã®`pubspec.yaml`ã‚’æ›´æ–°ã—ã€ã‚«ã‚¹ã‚¿ãƒ ä¾å­˜é–¢ä¿‚ã®è¿½åŠ ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚ä»–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚æ¤œè¨ã—ã€ã‚¨ãƒ©ãƒ¼ä¿®æ­£ã‚’é€²ã‚ã¦ã„ã‚‹ã€‚

**ã‚«ã‚¹ã‚¿ãƒ ã®ä¾å­˜é–¢ä¿‚ã®è¿½åŠ **

`projectPubspecPath`ã‚’è¿½åŠ ã—ã€`guild_api`ã®`pubspec.yaml`ã«å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’è¨˜è¿°ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¨ãƒ©ãƒ¼ã®è¡çªãŒè§£æ±ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ã¾ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 14:58:54*

`serializationLibrary: DioSerializationLibrary.jsonSerializable` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ç”Ÿæˆå¾Œã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒ **`json_serializable`** ã‚’ä½¿ã£ãŸå½¢å¼ã«ãªã‚‹ãŸã‚ã€ç”Ÿæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆä»Šå›ã®å ´åˆã¯ `guild_api/`ï¼‰ã® `pubspec.yaml` ã« **`json_serializable`ãƒ»`json_annotation` ãªã©ãŒè¿½è¨˜** ã•ã‚Œã¾ã™ã€‚  
ã—ã‹ã—ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ä¾å­˜é–¢ä¿‚ã®ç«¶åˆï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªï¼‰ãŒèµ·ãã€ã€ŒFailed to update packagesã€ã¨ãªã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã§ã¯ã€ã“ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã®**ä¸»ãªåŸå› **ã¨**å¯¾å‡¦ç­–**ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

---

## 1. ã‚ˆãã‚ã‚‹åŸå› : ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çª

ãŸã¨ãˆã°ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã«

```
1 package has newer versions incompatible with dependency constraints.
Try `flutter pub outdated` for more information.
```

ã¨å‡ºã‚‹å ´åˆã€`guild_api/` ã®ä¸‹ã«ç”Ÿæˆã•ã‚ŒãŸ `pubspec.yaml` ãŒä½•ã‚‰ã‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (ä¾‹: `json_annotation: ^4.x`) ã‚’æŒ‡å®šã—ã€ãƒ«ãƒ¼ãƒˆã®Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå´ï¼ˆã‚ã‚‹ã„ã¯ä»–ã®ä¾å­˜ï¼‰ã§åˆ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå›ºå®šã•ã‚Œã¦ã„ã‚‹ã¨ã€è¡çªãŒç”Ÿã˜ã¾ã™ã€‚  
è¡çªãŒèµ·ãã‚‹ã¨ã€`flutter pub get` ãŒå¤±æ•—ã—ã€è‡ªå‹•ç”ŸæˆãŒæœ€å¾Œã¾ã§å®Œäº†ã—ã¾ã›ã‚“ã€‚

### 1-1. åŸå› ã®è©³ç´°ã‚’èª¿ã¹ã‚‹æ‰‹é †

1. `cd guild_api` ã—ã¦ç”Ÿæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚Šã€`flutter pub get` ã‚’å®Ÿè¡Œ  
2. ãã®éš›ã«ã‚¨ãƒ©ãƒ¼ã‚„è­¦å‘ŠãŒå‡ºã‚Œã°ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªãŒåŸå› ã‹åˆ†ã‹ã‚Šã¾ã™  
3. å¿…è¦ã«å¿œã˜ã¦ `flutter pub upgrade --major-versions` ã‚„ `flutter pub outdated` ã‚’ä½¿ã„ã€è¡çªã‚’è§£æ¶ˆã—ã¾ã™  

ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆã™ã‚Œã°ã€`cd ..` ã§ãƒ«ãƒ¼ãƒˆã«æˆ»ã£ã¦ `flutter pub run build_runner build` (ã‚ã‚‹ã„ã¯ watch) ã‚’å†åº¦å®Ÿè¡Œã™ã‚‹ã¨æˆåŠŸã™ã‚‹ã¯ãšã§ã™ã€‚

---

## 2. ç”Ÿæˆå…ˆã® `pubspec.yaml` ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`openapi_generator` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€ç”Ÿæˆå…ˆã® `pubspec.yaml` ã«ã€Œ`json_serializable` ã‚„ `build_runner`ã€ãªã©ã‚’è‡ªå‹•ã§è¿½åŠ ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã—ã‹ã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªãŒã‚ã‚‹ã¨å¤±æ•—ã™ã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€**è‡ªåˆ†ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã—ãŸã„** å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹æ®µãŒã‚ã‚Šã¾ã™ã€‚

### 2-1. ç”Ÿæˆã•ã‚ŒãŸ `guild_api/pubspec.yaml` ã‚’ç›´æ¥ç·¨é›†ã™ã‚‹

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆï¼ˆä¾‹ï¼‰:

```yaml
name: guild_api
description: OpenAPI Generator project
publish_to: none
version: 1.0.0

environment:
  sdk: ">=2.18.0 <3.0.0"

dependencies:
  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§æƒãˆã‚‹
  json_annotation: ^4.8.0
  dio: any
  # ã»ã‹ã«è¡çªã®åŸå› ãŒã‚ã‚Œã°ä¿®æ­£

dev_dependencies:
  build_runner: any
  json_serializable: ^6.6.1
  # ã»ã‹è¡çªå›é¿ãŒå¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Œã°åŒæ§˜ã«æŒ‡å®š
```

ãã®å¾Œ `cd guild_api && flutter pub get` ã‚’è©¦ã—ã€å•é¡Œãªãå®Œäº†ã™ã‚‹ã‹ã‚’ç¢ºèªã€‚  
ãŸã ã—æ³¨æ„ç‚¹ã¨ã—ã¦ã€`openapi_generator` ã¯å†åº¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã¨ãã« `pubspec.yaml` ã‚’ä¸Šæ›¸ãã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚(ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚Šã¾ã™ãŒã€å¤šãã¯æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã—ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚)

### 2-2. `projectPubspecPath` ã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ  pubspec ã®è¨­å®š

`@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ `projectPubspecPath` ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ã“ã‚Œã«ã‚ˆã‚Šã€Œç”Ÿæˆå…ˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä½¿ã† `pubspec.yaml` ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚’ **ç‹¬è‡ªãƒ•ã‚¡ã‚¤ãƒ«** ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ä¾‹:

```dart
@Openapi(
  // ...
  projectPubspecPath: 'tool/openapi_pubspec.yaml',
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
  ),
)
```

ã“ã®å ´åˆã€`tool/openapi_pubspec.yaml` ã®å†…å®¹ãŒç”Ÿæˆå…ˆã® `pubspec.yaml` ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹å½¢ã«ãªã‚Šã¾ã™ã€‚  
ã—ãŸãŒã£ã¦ã€äº‹å‰ã«ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `tool/openapi_pubspec.yaml` ãªã©ã«ç½®ã„ã¦ãŠã‘ã°ã€å¸¸ã«ãã“ã§æŒ‡å®šã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```yaml
name: guild_api
description: Custom Pubspec for OpenAPI Generator
publish_to: none
version: 1.0.0

environment:
  sdk: ">=2.18.0 <3.0.0"

dependencies:
  dio: ^5.2.1
  json_annotation: ^4.8.0
  # ã»ã‹

dev_dependencies:
  build_runner: any
  json_serializable: ^6.6.1
  # ã»ã‹
```

ã“ã†ã™ã‚‹ã¨ç”Ÿæˆã®ãŸã³ã« `pubspec.yaml` ãŒä¸Šæ›¸ãã•ã‚Œã‚‹å¿ƒé…ãŒå°‘ãªãã€ã‹ã¤ä¾å­˜é–¢ä¿‚ã®è¡çªã‚’å›é¿ã—ã‚„ã™ã„ã§ã™ã€‚

---

## 3. `pubspecDependencies` / `pubspecDevDependencies` ã‚’ä½¿ã† (DioAltProperties)

`@Openapi` ã§ `generatorName: Generator.dioAlt`ï¼ˆ`dart2-api`ï¼‰ã‚’ä½¿ã†å ´åˆã¯ã€`DioAltProperties(pubspecDependencies: '...', pubspecDevDependencies: '...')` ã®ã‚ˆã†ã«è¨­å®šã§ãã‚‹ã®ã§ã™ãŒã€**`Generator.dio` (dart-dio) + `DioProperties`** ã ã¨åŒæ§˜ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ã‚‚ã—ã©ã†ã—ã¦ã‚‚ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ `pubspec.yaml` ã«è‡ªåˆ†ã§ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ æŒ‡å®šã—ãŸã„ã€ãªã‚‰ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒ ã™ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯ä¸Šè¨˜ **`projectPubspecPath`** ã‚’ä½¿ã†æ–¹æ³•ãŒç„¡é›£ã§ã™ã€‚

---

## 4. ã¾ã¨ã‚

- `json_serializable` ã‚’ä½¿ã†è¨­å®šã«ã™ã‚‹ã¨ã€ç”Ÿæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ `flutter pub get` ãŒè¡Œã‚ã‚Œã€ãã®éç¨‹ã§ **ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çª** ãŒèµ·ãã‚‹å ´åˆãŒã‚ã‚‹  
- **ã¾ãšã¯ `cd guild_api && flutter pub get`** ã‚’ã—ã¦ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¡çªã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèª  
- è¡çªã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã¯  
  1. ç”Ÿæˆã•ã‚ŒãŸ `pubspec.yaml` ã‚’ç›´æ¥æ›¸ãæ›ãˆã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã‚‹  
  2. `projectPubspecPath` ã§ç‹¬è‡ªã® `pubspec.yaml` ã‚’ç”¨æ„ã—ã€ãã¡ã‚‰ã‚’ä½¿ã†  
  3. ï¼ˆ`dioAlt` ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãªã‚‰ï¼‰ `pubspecDependencies` / `pubspecDevDependencies` ã§è¿½åŠ æŒ‡å®šã™ã‚‹  
- è¡çªãŒè§£æ¶ˆã•ã‚ŒãŸã‚‰å†åº¦ `flutter pub run build_runner build` (ã¾ãŸã¯ watch) ã™ã‚Œã°ã€ã‚¨ãƒ©ãƒ¼ãªãç”ŸæˆãŒå®Œäº†ã—ã€`json_serializable` ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:08:23*

è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®

name: guild_api
version: 1.0.0
description: OpenAPI API client
homepage: homepage

environment:
  sdk: '&gt;=2.17.0 &lt;4.0.0'

dependencies:
  dio: '^5.2.0'
  json_annotation: '^4.4.0'

dev_dependencies:
  build_runner: any
  json_serializable: '^6.1.5'
  test: ^1.16.0


ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã‚ã‚‹

name: snpit_guild_app
description: "A new Flutter project."

publish_to: 'none'

# å€‹äººã®é–‹ç™º PC ã§ãƒ“ãƒ«ãƒ‰ã—ãŸå ´åˆã«åæ˜ ã•ã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³
version: 0.1.10+1

environment:
  sdk: ^3.6.2
  flutter: 3.27.4

dependencies:
  flutter:
    sdk: flutter
  # slang
  flutter_localizations:
    sdk: flutter
  cupertino_icons:

  # Language
  slang: ^4.4.1
  slang_flutter: ^4.4.0

  # Router
  go_router: ^14.8.0

  # State Management
  flutter_hooks: ^0.20.5
  hooks_riverpod: ^2.6.1
  flutter_riverpod: ^2.6.1
  riverpod_annotation: ^2.6.1

  # Image SVG Converter
  flutter_svg: ^2.0.17
  vector_graphics: ^1.1.17

  # Map
  google_maps_flutter: ^2.10.0
  geolocator: ^13.0.2
  widget_to_marker: ^1.0.6

  # Carousel Widget
  carousel_slider: ^5.0.0

  # Camera
  camera: 0.10.6 # 0.11.0 ä»¥ä¸Šã ã¨ Android ãŒæ¨ªå‘ãæ’®å½±ã«ãªã£ã¦ã—ã¾ã†ãŸã‚ 0.10.6 ã«å›ºå®šï¼ˆèª¿æŸ»ã—ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„ï¼‰
  image_picker: ^1.1.2
  image: ^4.5.2

  # Permission Handler
  permission_handler: ^11.3.1

  # Device Info
  device_info_plus: ^11.3.0

  # Debug Info
  package_info_plus: ^8.2.1

  # Image Cropper
  image_cropper: ^8.1.0

  # URL Launcher
  url_launcher: ^6.3.1
  store_redirect: ^2.0.4

  # OpenAPI Generator
  openapi_generator_annotations: ^6.1.0

  # OpenAPI Generator
  freezed: ^2.5.7 # openapi_freezed_dio_builder ^0.9.7 ã¨ã®ç«¶åˆã§ 2.5.8 ä»¥ä¸Šã«ã§ããªã„
  openapi_base: ^1.3.2 # openapi_freezed_dio_builder ^0.9.7 ã¨ã®ç«¶åˆã§ 2.0.0 ä»¥ä¸Šã«ã§ããªã„
  json_annotation: ^4.9.0
  dio: ^5.8.0
  flutter_launcher_icons: ^0.14.3

  # HTTP Parser (for Photo Upload)
  http_parser: ^4.1.2

  # Utility
  intl: ^0.19.0 # slang_flutter ^4.4.0 ã¨ã®ç«¶åˆã§ ^0.20.2 ä»¥ä¸Šã«ã§ããªã„
  auto_size_text: ^3.0.0

  # Secure Storage
  flutter_secure_storage: ^9.2.4

  # Image Cache
  cached_network_image: ^3.4.1

  # Delete Cache
  path_provider: ^2.1.5

  # Font
  google_fonts: ^6.2.1

  # Verification Code
  flutter_verification_code: ^1.1.7

  # Splash Screen
  flutter_native_splash: ^2.4.4

  # Dotenv
  flutter_dotenv: ^5.2.1

  # OpenAPI Generator
  # guild_api:
  #   path: ./guild_api

dev_dependencies:
  # Test
  flutter_test:
    sdk: flutter
  
  # Builder
  build_runner: ^2.4.15
  riverpod_generator: ^2.6.3 # openapi_freezed_dio_builder ^0.9.7 ã¨ã®ç«¶åˆã§ 2.6.4 ä»¥ä¸Šã«ã§ããªã„
  flutter_gen_runner: ^5.8.0
  slang_build_runner: ^4.4.2

  # OpenAPI Generator
  openapi_generator: ^6.1.0

  # OpenAPI Generator
  # ã“ã® SDK ãŒå…ƒå‡¶ã§ã•ã¾ã–ã¾ãª SDK ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã®ç«¶åˆãŒç™ºç”Ÿã—ã¦ã„ã‚‹ãŸã‚åˆ¥ã® SDK ã¸ã®ä¹—ã‚Šæ›ãˆã‚’æ¤œè¨ã—ãŸæ–¹ãŒè‰¯ã„
  openapi_freezed_dio_builder:
    git:
      url: git@github.com:Gallusys/openapi_freezed_dio_builder.git
      path: packages/openapi_freezed_dio_builder
      ref: master
  json_serializable: ^6.9.0 # riverpod_generator ^2.6.3 ã¨ã®ç«¶åˆ (= openapi_freezed_dio_builder ^0.9.7 ã¨ã®ç«¶åˆ) ã§ 6.9.1 ä»¥ä¸Šã«ã§ããªã„

  # Linter
  pedantic_mono:

  # URL Launcher
  url_launcher_ios: ^6.3.2

flutter:
  uses-material-design: true

  assets:
    - .env
    - assets/images/

flutter_gen:
  assets:
    outputs:
      directory_path_enabled: true
  integrations:
    flutter_svg: true

flutter_launcher_icons:
  android: true
  ios: true
  image_path: "assets/app_icon/icon.png"

flutter_native_splash:
  image: 'assets/app_icon/icon_foreground.png'
  fullscreen: true
  color: "#2E3739"
  android_12:
    color: "#2E3739"
    icon_background_color: "#2E3739"
    image: 'assets/app_icon/icon_foreground.png'

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:08:25*

**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¢ºèª**

`guild_api`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ä¸€è‡´ã—ã¦ã„ãªã„ã¨æ„Ÿã˜ã¦ã„ã‚‹ã€‚ç‰¹ã«ã€ä¾å­˜é–¢ä¿‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®çŸ›ç›¾ãŒæ°—ã«ãªã‚‹ã€‚

**ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®è¦–ç‚¹ã‚’è€ƒæ…®**  
`projectPubspecPath`ã‚’æŒ‡å®šã—ã¦ã€openapiç”ŸæˆãŒå‡ºã™pubspecã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚ã“ã‚Œã€ã„ãã‚‰ã‹ãƒãƒ¼ã‚¸ã—ãŸã„ãªã€‚

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®çµ±ä¸€ã‚’æ¨¡ç´¢ã™ã‚‹**

`projectPubspecPath`ã‚’ä½¿ã£ã¦openapiç”Ÿæˆæ™‚ã®pubspecã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã€mainãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨çµ±ä¸€ã—ã¦ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’è§£æ¶ˆã™ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:08:24*

OpenAPI Generator ãŒ `json_serializable` ãƒ™ãƒ¼ã‚¹ã§ç”Ÿæˆã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆ`guild_api/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ï¼‰ã¨ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ`snpit_guild_app`ï¼‰ã® Pubspec ã§ **ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé£Ÿã„é•ã£ã¦ã„ã‚‹** ãŸã‚ã€`flutter pub get` æ™‚ã«è¡çªãŒç™ºç”Ÿã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å¯¾å¿œã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚

---

## 1. åŸå› ï¼šç”Ÿæˆå…ˆã® `pubspec.yaml` ã¨ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çª

è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ `guild_api/pubspec.yaml`:

```yaml
name: guild_api
version: 1.0.0
description: OpenAPI API client
environment:
  sdk: '>=2.17.0 <4.0.0'

dependencies:
  dio: '^5.2.0'
  json_annotation: '^4.4.0'

dev_dependencies:
  build_runner: any
  json_serializable: '^6.1.5'
  test: ^1.16.0
```

ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `pubspec.yaml`:

```yaml
environment:
  sdk: ^3.6.2
  flutter: 3.27.4

dependencies:
  dio: ^5.8.0
  json_annotation: ^4.9.0
  ...
dev_dependencies:
  json_serializable: ^6.9.0
  ...
```

- **`dio`** ãŒ `^5.2.0` vs `^5.8.0`  
- **`json_annotation`** ãŒ `^4.4.0` vs `^4.9.0`  
- **`json_serializable`** ãŒ `^6.1.5` vs `^6.9.0`  

ã¨ã„ã†ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç•°ãªã‚‹ãŸã‚ã€ç”Ÿæˆå¾Œã« `guild_api` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•ã—ã¦ `flutter pub get` ã™ã‚‹ã¨è¡çªãŒèµ·ã“ã‚Šã‚„ã™ã„ã§ã™ã€‚ã¾ãŸã€SDK ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ`>=2.17.0 <4.0.0` ã¨ `^3.6.2`ï¼‰ã‚‚å·®ãŒã‚ã‚Šã¾ã™ã€‚

---

## 2. å¯¾å‡¦æ–¹æ³•

### æ–¹æ³•A: ç”Ÿæˆå¾Œã® `guild_api/pubspec.yaml` ã‚’æ‰‹å‹•ã§ä¿®æ­£

1. è‡ªå‹•ç”ŸæˆãŒå®Œäº†ã—ãŸã‚‰ã€`guild_api/pubspec.yaml` ã‚’é–‹ãã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åˆã‚ã›ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãã‚ãˆã‚‹  
   - ä¾‹: `dio: ^5.8.0`, `json_annotation: ^4.9.0`, `json_serializable: ^6.9.0` ãªã©  
   - `environment` ã® `sdk` ã‚‚å¿…è¦ã«å¿œã˜ã¦ `^3.6.2` ã«æ›¸ãæ›ãˆã¦ãŠãã®ãŒãŠã™ã™ã‚  
2. `cd guild_api && flutter pub get` ã‚’å®Ÿè¡Œã—ã€ä¾å­˜è§£æ±ºãŒå•é¡Œãªãé€šã‚‹ã‹ç¢ºèª  
3. ã†ã¾ãã„ã‘ã°ã€ãã®ã¾ã¾ `flutter pub run build_runner build`ï¼ˆãƒ«ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å®Ÿè¡Œï¼‰ ã—ã¦æ­£å¸¸ã«ç”Ÿæˆç‰©ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™

> **æ³¨æ„**: OpenAPI Generator ã¯å†ç”Ÿæˆæ™‚ã« `pubspec.yaml` ã‚’**ä¸Šæ›¸ã**ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€æ¯å›æ‰‹å‹•ä¿®æ­£ãŒå¿…è¦ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚

---

### æ–¹æ³•B: `projectPubspecPath` ã‚’ä½¿ã£ã¦è‡ªå‰ã® `pubspec.yaml` ã‚’æŒ‡å®š

`@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹ `projectPubspecPath` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã†ã¨ã€**ç”Ÿæˆå…ˆã® `pubspec.yaml` ã‚’ç‹¬è‡ªãƒ•ã‚¡ã‚¤ãƒ«ã§ç½®ãæ›ãˆã‚‹** ã“ã¨ãŒã§ãã¾ã™ã€‚

#### 1) ä¾‹ãˆã° `tool/openapi_pubspec.yaml` ã‚’ç”¨æ„

ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã€è¡çªãŒèµ·ããªã„ã‚ˆã†æ•´ãˆã¾ã™ã€‚ãŸã¨ãˆã°:

```yaml
name: guild_api
version: 1.0.0
description: "OpenAPI API client"
publish_to: none

environment:
  sdk: ">=3.6.2 <4.0.0"

dependencies:
  dio: ^5.8.0
  json_annotation: ^4.9.0
dev_dependencies:
  build_runner: any
  json_serializable: ^6.9.0
  test: ^1.21.0
```

#### 2) `@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§æŒ‡å®š

```dart
@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
  ),
  projectPubspecPath: 'tool/openapi_pubspec.yaml', // ã“ã“ã«è¿½è¨˜
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
)
class Example {}
```

ã“ã†ã™ã‚‹ã¨ã€ç”Ÿæˆã•ã‚Œã‚‹ `guild_api/pubspec.yaml` ã¯è‡ªå‹•çš„ã« `tool/openapi_pubspec.yaml` ã®å†…å®¹ã«ãªã‚Šã¾ã™ã€‚  
**å†ç”Ÿæˆã—ã¦ã‚‚ä¸Šæ›¸ãã•ã‚Œãšã€ã‹ã¤ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªã‚’å›é¿** ã§ãã‚‹ã®ã§ã€æ¯å›æ‰‹å‹•ã§ç·¨é›†ã™ã‚‹æ‰‹é–“ãŒçœã‘ã¾ã™ã€‚

---

### æ–¹æ³•C: `dioAlt` + `DioAltProperties` ã‚’ä½¿ã† (å‚è€ƒ)

`generatorName: Generator.dioAlt`ï¼ˆå®Ÿä½“ã¯ `dart2-api`ï¼‰ã‚’ä½¿ã†ã¨ã€`pubspecDependencies` ã‚„ `pubspecDevDependencies` ã‚’ç›´æ¥æ–‡å­—åˆ—ã§è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ç¾åœ¨ã¯ `generatorName: Generator.dio` ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€**æ–¹æ³•Aã‹BãŒä¸€èˆ¬çš„** ã§ã™ã€‚

---

## 3. ã¾ã¨ã‚

- `json_serializable` ç‰ˆã‚’ä½¿ã†ã¨ã€ç”Ÿæˆã•ã‚Œã‚‹ `guild_api/pubspec.yaml` ã« **`json_annotation` ã‚„ `json_serializable` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³** ãŒæ›¸ã‹ã‚Œã€ãã‚ŒãŒãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒ‡å®šã¨è¡çªã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™  
- ã¾ãšã¯ **`guild_api/pubspec.yaml` ã‚’ç·¨é›†** ã—ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã‚‹ï¼ˆæ–¹æ³•Aï¼‰  
- ã‚ã‚‹ã„ã¯ã€**`projectPubspecPath`** ã§**äº‹å‰ã«ç”¨æ„ã—ãŸ `pubspec.yaml`** ã‚’æµç”¨ï¼ˆæ–¹æ³•Bï¼‰ãŒã‚¹ãƒãƒ¼ãƒˆ  
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã‚‰ã‚Œã‚Œã°ã€`flutter pub get` ãŒæˆåŠŸã—ã€ç”Ÿæˆç‰©ãŒå•é¡Œãªãåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:15:16*

æ–¹æ³•Bã‚’ã¨ã£ãŸã‘ã©ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Installing dependencies with generated source. [dart pub get] in dir [guild_api]
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Resolving dependencies...
Downloading packages...
  js 0.7.1 (0.7.2 available)
Got dependencies!
1 package has newer versions incompatible with dependency constraints.
Try `flutter pub outdated` for more information.

Install completed successfully.

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Running source code generation.
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:dart pub run build_runner build --delete-conflicting-outputs
[WARNING] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
===&gt; args [generate, -o=guild_api, -i=lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml, -g=dart-dio, --additional-properties=allowUnicodeIdentifiers=false,ensureUniqueParams=true,useEnumExtension=true,enumUnknownDefaultCase=false,prependFormOrBodyParameters=false,pubName=guild_api,legacyDiscriminatorBehavior=true,sortModelPropertiesByRequiredFlag=true,sortParamsByRequiredFlag=true,wrapper=none,serializationLibrary=json_serializable]
[SEVERE] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Failed to generate content.

Could not complete source generation Failed to generate source code. Build Command output:  #0      OpenapiGenerator.runSourceGen (package:openapi_generator/src/openapi_generator_runner.dart:416:34)
&lt;asynchronous suspension&gt;
#1      OpenapiGenerator.generateSources.&lt;anonymous closure&gt; (package:openapi_generator/src/openapi_generator_runner.dart:361:7)
&lt;asynchronous suspension&gt;
#2      OpenapiGenerator.generateSources (package:openapi_generator/src/openapi_generator_runner.dart:360:12)
&lt;asynchronous suspension&gt;
#3      OpenapiGenerator.generatorV2 (package:openapi_generator/src/openapi_generator_runner.dart:210:7)
&lt;asynchronous suspension&gt;
#4      normalizeGeneratorOutput (package:source_gen/src/output_helpers.dart:10:1)
&lt;asynchronous suspension&gt;
#5      StreamCompleter.setSourceStream (package:async/src/stream_completer.dart:76:3)
&lt;asynchronous suspension&gt;
 
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Found generated timestamp. Updating with 2025-03-05T15:14:39.576451
[INFO] Running build completed, took 4.5s
[INFO] Caching finalized dependency graph completed, took 89ms
[SEVERE] Failed after 4.6s
Failed to update packages.
make: *** [build] Error 1

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:15:19*

**ç’°å¢ƒã®èª¿æŸ»**

ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã€`sdk`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚ˆã‚‹ç’°å¢ƒã®èª¤èªè­˜ã®å¯èƒ½æ€§ã‚’è€ƒãˆã¦ã„ã‚‹ã€‚ã“ã‚ŒãŒã‚¨ãƒ©ãƒ¼ã®ç™ºç”Ÿã«ã¤ãªãŒã£ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‹ã€‚

**ç’°å¢ƒã®è¦‹ç›´ã—**

`flutter pub get`ã‚’è©¦ã™ã“ã¨ã§ã€ç’°å¢ƒã®æ··ä¹±ã‚’è§£æ¶ˆã—ã€Flutterç’°å¢ƒã¨ã—ã¦èªè­˜ã•ã›ã‚‹æ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹ã€‚

**è§£æ±ºç­–ã‚’æ¨¡ç´¢ä¸­**

`dart pub get`ã®ä»£ã‚ã‚Šã«`flutter pub get`ã‚’ä½¿ã†è¨­å®šã‚’è©¦ã—ã¦ã„ã‚‹ã€‚ã‚¨ãƒ©ãƒ¼è§£æ¶ˆã®ãŸã‚ã®æ‰‹é †ã‚’ç´¹ä»‹ä¸­ã€‚

**ç’°å¢ƒè¨­å®šã®è¦‹ç›´ã—**

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`pubspec.yaml`ã«`flutter`ç’°å¢ƒã‚’æ­£ã—ãè¨­å®šã—ã€ä¾å­˜é–¢ä¿‚ã®ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆã™ã‚‹æ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:15:17*

`projectPubspecPath` ã‚’ä½¿ã£ã¦ç‹¬è‡ªã® `pubspec.yaml` ã‚’æŒ‡å®šã—ã¦ã‚‚ã€ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã«

```
[INFO] openapi_generator on lib/...:Installing dependencies with generated source. [dart pub get] in dir [guild_api]
...
Got dependencies!
1 package has newer versions incompatible with dependency constraints.
...
Failed to update packages.
```

ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹å ´åˆã€**ä¸»ã«ä¸‹è¨˜2ã¤ã®å•é¡Œ**ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

1. **ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çª** ãŒã¾ã è§£æ¶ˆã§ãã¦ã„ãªã„  
2. è‡ªå‹•çš„ã« **`dart pub get`** ãŒèµ°ã£ã¦ãŠã‚Šã€Flutter SDK (flutterä¾å­˜) ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ã„ãªã„  

ä»¥ä¸‹ã€è§£æ±ºç­–ã‚’é †ç•ªã«ç´¹ä»‹ã—ã¾ã™ã€‚

---

## 1. ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çªãŒæ®‹ã£ã¦ã„ãªã„ã‹ç¢ºèª

`guild_api/pubspec.yaml` (ã‚ã‚‹ã„ã¯ `tool/openapi_pubspec.yaml` ã§æŒ‡å®šã—ãŸå†…å®¹) ã¨ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `pubspec.yaml` ã§ **é‡è¤‡ä¾å­˜** ã‚„ **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çª** ãŒæ®‹ã£ã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚  
ç‰¹ã«ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãã‚ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

- `dio`  
- `json_annotation` / `json_serializable`  
- SDK ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (`environment:` ã® `sdk:` ã‚»ã‚¯ã‚·ãƒ§ãƒ³)

ãŸã¨ãˆã°ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ `dio: ^5.8.0`ã€ç”Ÿæˆå…ˆã§ã¯ `dio: ^5.2.0` ãªã©ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ºãƒ¬ã‚‹ã¨è¡çªã—ã‚„ã™ã„ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã€ä¸‹è¨˜æ‰‹é †ã§è¡çªã‚’ç‰¹å®šã§ãã¾ã™:

1. `cd guild_api` ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•  
2. `flutter pub get` (â€»å¾Œè¿°ã®é€šã‚Šã€`dart pub get` ã§ã¯ãªãå¿…ãš `flutter pub get`) ã‚’æ‰‹å‹•ã§å®Ÿè¡Œ  
3. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã•ã‚Œã‚‹è¡çªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã‚‹ãƒ»ä¸Šã’ã‚‹ãƒ»ä¸‹ã’ã‚‹ãªã©èª¿æ•´ã™ã‚‹

> **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆ**: ç”Ÿæˆã•ã‚ŒãŸ `pubspec.yaml` ã® `environment.sdk` ã‚’ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ (`^3.6.2` ãªã©) ã«ã—ã¦ãŠãã®ãŒãŠã™ã™ã‚ã§ã™ã€‚

---

## 2. Generator ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `dart pub get` ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹å•é¡Œ

`openapi_generator` ã¯ã€ç”Ÿæˆå…ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ Flutter ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ **`dart pub get`** ã‚’ä½¿ã„ã¾ã™ã€‚  
Flutter SDK ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¦æ±‚ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆ`flutter_test` ã‚„ `flutter/material.dart` ãŒå¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ï¼‰ã‚’å«ã‚€ã¨ã€`dart pub get` ã¯æ­£ã—ãä¾å­˜è§£æ±ºã§ããšã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### 2-1. å›é¿ç­–: **`wrapper`** ã‚’æŒ‡å®šã—ã€`flutter pub get` ã‚’ä½¿ã‚ã›ã‚‹

`@Openapi` ã® `additionalProperties` ã« **`wrapper: Wrapper.flutterw`** ã‚’æŒ‡å®šã™ã‚‹ã¨ã€å†…éƒ¨ã§ **`flutter pub get`** ã‚’å‘¼ã¶ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãŸã¨ãˆã°:

```dart
@Openapi(
  generatorName: Generator.dio,
  outputDirectory: 'guild_api',
  projectPubspecPath: 'tool/openapi_pubspec.yaml',
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    wrapper: Wrapper.flutterw, // <= ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆ
  ),
  ...
)
class Example {}
```

- `wrapper: Wrapper.flutterw` ã¯ã€ã€Œ`flutterw` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä¾å­˜ã‚’è§£æ±ºã™ã‚‹ã€ã¨ã„ã†æŒ‡å®šã§ã™ãŒã€`flutterw` ãŒãªã‘ã‚Œã° `flutter` ã‚’ä½¿ã† fallback æŒ™å‹•ã«ãªã‚‹ã®ã§ã€å®Ÿè³ª **`flutter pub get`** ã‚’å‘¼ã³å‡ºã™å½¢ã«ã§ãã¾ã™ã€‚  
- ã“ã‚Œã§ã€Œ`dart pub get` ã§ã¯ãªã `flutter pub get` ã‚’å®Ÿè¡Œã™ã‚‹ã€ã‚ˆã†ã«ãªã‚Šã€Flutter SDK é–¢é€£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚æ­£å¸¸ã«è§£æ±ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ã¾ã‚Šã¾ã™ã€‚

### 2-2. ç”Ÿæˆå¾Œã«æ‰‹å‹•ã§ `flutter pub get` ã™ã‚‹

ã‚‚ã†1ã¤ã®å›é¿æ–¹æ³•ã¨ã—ã¦ã€**è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã‚’ã‚„ã‚**ã€ç”Ÿæˆå¾Œã«æ‰‹å‹•ã§ `flutter pub get` ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ãŸã¨ãˆã°ã€`@Openapi` ã«

```dart
@Openapi(
  fetchDependencies: false,   // <= è‡ªå‹•ã§ pub get ã—ãªã„
  ...
)
```

ã®ã‚ˆã†ã«ã—ã¦ã€ç”Ÿæˆå¾Œã«

```bash
cd guild_api
flutter pub get
```

ã‚’è‡ªåˆ†ã§å®Ÿè¡Œã—ã¾ã™ã€‚  
ãŸã ã— **`openapi_generator` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã£ã¦ã¯**ã€`fetchDependencies = false` ã§ã‚‚å†…éƒ¨ã§ `pub get` ãŒèµ°ã£ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šæ‰‹ãã„ã‹ãªã„å ´åˆã¯ `wrapper: Wrapper.flutterw` ã®ã»ã†ãŒç¢ºå®Ÿã§ã™ã€‚

---

## 3. ã¾ã¨ã‚

1. **ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡çª** ãŒãªã„ã‹ã‚’ã¾ãšç¢ºèª  
   - `guild_api` å´ã® `pubspec.yaml` (or `tool/openapi_pubspec.yaml`) ã¨ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `pubspec.yaml` ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã‚‹  
   - SDK ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚åŒæ§˜ã«æƒãˆã‚‹(ä¾‹: `sdk: ">=3.6.0 <4.0.0"`)  
2. **`dart pub get` ãŒåŸå› ã®å¯èƒ½æ€§** ãŒã‚ã‚‹ãªã‚‰ã€**`wrapper: Wrapper.flutterw`** ã‚’æŒ‡å®šã—ã¦ **`flutter pub get`** ã‚’ä½¿ã‚ã›ã‚‹  
   - ä¾‹:  
     ```dart
     additionalProperties: DioProperties(
       pubName: 'guild_api',
       serializationLibrary: DioSerializationLibrary.jsonSerializable,
       wrapper: Wrapper.flutterw,
     )
     ```  
3. ã“ã‚Œã§ã‚‚å¤±æ•—ã™ã‚‹å ´åˆã¯ã€**è‡ªåˆ†ã§æ‰‹å‹•ã§ `flutter pub get`** ã‚’å®Ÿè¡Œ  
   - ãã®éš›ã«å‡ºã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã¿ãªãŒã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªã‚’è§£æ¶ˆã™ã‚‹

ã“ã‚Œã‚‰ã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã§ã€å¤šãã®å ´åˆã€ŒCould not complete source generationã€ã€ŒFailed to update packagesã€ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã§ãã‚‹ã¯ãšã§ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:17:10*

fvm ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä½¿ã£ã¦ã„ã‚‹ã‚“ã 

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:17:12*

**è§£æ±ºç­–ã‚’æ¨¡ç´¢ä¸­**

fvmã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’æ¢ã—ã¦ã„ã¦ã€è¿½åŠ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«Wrapper.fvmã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆæ™‚ã«"fvm flutter pub get"ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:17:11*

`openapi_generator_annotations` ã«ã¯ã€Dart/Flutter ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã”ã¨ã«è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ`pub get`ï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ä»•çµ„ã¿ã¨ã—ã¦ **`wrapper`** ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚  
ã‚‚ã—ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ **FVM** ã‚’åˆ©ç”¨ã—ã¦ã„ã‚Œã°ã€`wrapper: Wrapper.fvm` ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã®ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ **`fvm flutter pub get`** ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«åˆ‡ã‚Šæ›¿ãˆã§ãã¾ã™ã€‚

---

## 1. è¨­å®šä¾‹

`@Openapi` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã® `additionalProperties` ã«æ¸¡ã™ `DioProperties`ï¼ˆã¾ãŸã¯ `DioAltProperties`ï¼‰ã§ `wrapper: Wrapper.fvm` ã‚’æŒ‡å®šã—ã¾ã™ã€‚ãŸã¨ãˆã°:

```dart
@Openapi(
  generatorName: Generator.dio,
  outputDirectory: 'guild_api',
  projectPubspecPath: 'tool/openapi_pubspec.yaml', // ã‚«ã‚¹ã‚¿ãƒ  pubspec ã‚’ä½¿ã†ãªã‚‰
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    wrapper: Wrapper.fvm, // ã“ã“ã‚’æŒ‡å®šã™ã‚‹ã¨ fvm ã§ pub get
  ),
  // ã»ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãŠå¥½ã¿ã§
)
class Example {}
```

ã“ã†ã™ã‚‹ã¨ã€**ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã«ä¾å­˜ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ãã€`dart pub get` ã§ã¯ãªã `fvm flutter pub get` ãŒå‘¼ã°ã‚Œã‚‹** ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## 2. å‹•ä½œç¢ºèª

1. `flutter pub run build_runner build` ã‚’å®Ÿè¡Œ  
2. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ­ã‚°ï¼ˆ`[INFO] openapi_generator...` ã®ã‚ãŸã‚Šï¼‰ã‚’è¦‹ã¦ã€  
   - ã“ã‚Œã¾ã§ `dart pub get` ãŒèµ°ã£ã¦ã„ãŸéƒ¨åˆ†ãŒã€**`fvm flutter pub get`** ã«å¤‰ã‚ã£ã¦ã„ã‚‹ã‹  
   - ã‚¨ãƒ©ãƒ¼ãªããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‹  
   ã‚’ç¢ºèªã—ã¾ã™ã€‚  

ã‚‚ã—ã€Œã¾ã  `dart pub get` ã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹ã€å ´åˆã¯ã€ãŠä½¿ã„ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® `openapi_generator_annotations` ãŒå¤ãã€`wrapper` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã€`openapi_generator_annotations` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚

---

## 3. ã†ã¾ãã„ã‹ãªã„å ´åˆã®å¯¾å‡¦

1. **`pubspec.yaml` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çª** ãŒä¾ç„¶ã¨ã—ã¦è§£æ¶ˆã•ã‚Œã¦ã„ãªã„ã¨ã€`fvm flutter pub get` ã§ã‚‚åŒã˜è¡çªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚  
2. ãã®éš›ã¯ã€ä¸€åº¦ `cd guild_api` ã—ã¦ **æ‰‹å‹•ã§ `fvm flutter pub get`** ã—ã¦ã¿ã¦ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¡çªã—ã¦ã„ã‚‹ã‹ã‚’èª¿ã¹ã‚‹ã¨è§£æ±ºãŒé€Ÿã„ã§ã™ã€‚  

æœ€çµ‚çš„ã«ã€Œ`guild_api/pubspec.yaml` å´ã¨ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã‚‹ã€ã‹ã€Œ`projectPubspecPath` ã§è¡çªã—ãªã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’äº‹å‰ã«æŒ‡å®šã€ãªã©ã§åˆã‚ã›ã¦ãŠã‘ã°ã€ç„¡äº‹ã«ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒé€šã‚‹ã¯ãšã§ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:19:48*

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Installing dependencies with generated source. [fvm pub get] in dir [guild_api]
[SEVERE] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Failed to generate content.

Install within generated sources failed. Could not find a command named "pub".
 #0      OpenapiGenerator.fetchDependencies (package:openapi_generator/src/openapi_generator_runner.dart:469:34)
&lt;asynchronous suspension&gt;
#1      OpenapiGenerator.generatorV2 (package:openapi_generator/src/openapi_generator_runner.dart:209:7)
&lt;asynchronous suspension&gt;
#2      normalizeGeneratorOutput (package:source_gen/src/output_helpers.dart:10:1)
&lt;asynchronous suspension&gt;
#3      StreamCompleter.setSourceStream (package:async/src/stream_completer.dart:76:3)
&lt;asynchronous suspension&gt;

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Found generated timestamp. Updating with 2025-03-05T15:18:40.971318
[INFO] Running build completed, took 2.2s
[INFO] Caching finalized dependency graph completed, took 99ms
[SEVERE] Failed after 2.3s
Failed to update packages.
make: *** [build] Error 1
~/git/gallusys/snpit_guild_app  â€¹feature/314-2*â€º $         


// Openapi Generator last run: : 2025-03-05T15:18:40.971318
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    wrapper: Wrapper.fvm,
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
)
class Example {}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:19:50*

Could the issue be with the wrong command or an environment problem? Maybe "fvm flutter pub get" is needed instead of "fvm pub get."

**æ¤œè¨ä¸­ã®æ–¹æ³•ã‚’æ¢ã‚‹**

ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã£ã¦ "fvm pub" ã‚’èªè­˜ã•ã›ã‚‹ã®ã¯ã©ã†ã ã‚ã†ã‹ã€‚ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚³ãƒ¼ãƒ‰ã‚’ "fvm flutter pub get" ã«å¤‰æ›´ã™ã‚‹ã®ã‚‚ä¸€ã¤ã®æ‰‹ã ã­ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:19:49*

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ã€Œ`wrapper: Wrapper.fvm` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€å†…éƒ¨ã§ **`fvm pub get`** ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€ã‚‚ã®ã®ã€**å®Ÿéš›ã«ã¯ `fvm` ã‚³ãƒãƒ³ãƒ‰ã« `pub get` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã—ãªã„** ãŸã‚ã«ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚FVM ã¯åŸºæœ¬çš„ã« **`fvm flutter <command>`** å½¢å¼ã§ Flutter ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ä»•çµ„ã¿ãªã®ã§ã€`fvm pub get` ã¯ã‚³ãƒãƒ³ãƒ‰æœªå®šç¾©ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

---

## 1. ãªãœèµ·ãã‚‹ã®ã‹

`openapi_generator_annotations` ã§ `wrapper: Wrapper.fvm` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€**`fvm pub get`** ãŒå‘¼ã°ã‚Œã‚‹å®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¨ã“ã‚ãŒã€FVM ã¯æ¨™æº–ã§ã€Œ`fvm flutter pub get`ã€ãªã‚‰ä½¿ãˆã¦ã‚‚ã€ã€Œ`fvm pub get`ã€ã¯ã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚

> å‚è€ƒ: FVM ã®åŸºæœ¬ä½¿ç”¨ä¾‹  
> - `fvm flutter pub get`  
> - `fvm flutter run`  
> - `fvm flutter build`  
>  
> ãªã©ã®ã‚ˆã†ã«ã€`flutter` ã®å‰ã« FVM ã‚’ã‹ã¶ã›ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

---

## 2. å¯¾ç­–æ–¹æ³•

### æ–¹æ³•A: è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚„ã‚ã¦ã€æ‰‹å‹•ã§ `fvm flutter pub get` ã™ã‚‹

`@Openapi` ã« **`fetchDependencies: false`** ã‚’æŒ‡å®šã™ã‚Œã°ã€ç”Ÿæˆå¾Œã®ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ãƒ„ãƒ¼ãƒ«ãŒè‡ªå‹•ã§è¡Œã‚ãªããªã‚Šã¾ã™ã€‚  
ãã®ä»£ã‚ã‚Šã«ã€ç”ŸæˆãŒå®Œäº†ã—ãŸã‚‰ **æ‰‹å‹•ã§** `fvm flutter pub get` ã™ã‚Œã°OKã§ã™ã€‚ãŸã¨ãˆã°:

```dart
@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
    // wrapper: Wrapper.fvm, // ã“ã“ã¯å‰Šé™¤ã‹ç„¡è¦–
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
  // â†“è‡ªå‹•ä¾å­˜å–å¾—ã‚’è¡Œã‚ãªã„
  fetchDependencies: false,
)
class Example {}
```

ã“ã‚Œã§ãƒ“ãƒ«ãƒ‰ï¼ˆ`flutter pub run build_runner build`ï¼‰ãŒèµ°ã‚‹ã¨ã€`guild_api/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚³ãƒ¼ãƒ‰ã¯ç”Ÿæˆã•ã‚Œã¾ã™ãŒã€`fvm pub get` ã¯å‘¼ã°ã‚Œã¾ã›ã‚“ã€‚  
**ç”ŸæˆãŒçµ‚ã‚ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§**ï¼š

```bash
cd guild_api
fvm flutter pub get
```

ã¨æ‰‹å‹•ã§ä¾å­˜ã‚’è§£æ±ºã—ã¦ãã ã•ã„ã€‚ã“ã®æ–¹æ³•ãŒä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ãã€ã‹ã¤å®‰å…¨ã§ã™ã€‚

---

### æ–¹æ³•B: `wrapper: Wrapper.flutterw` ã‚’ä½¿ã„ã€`fvm use` å¾Œã«å‘¼ã³å‡ºã™

ã‚‚ã—ã€Œè‡ªå‹•çš„ã«ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã»ã—ã„ãŒã€`fvm pub get` ã§ã¯ãªã `flutter pub get` ã‚’ä½¿ã„ãŸã„ã€å ´åˆã¯ã€**`wrapper: Wrapper.flutterw`** ã‚’æŒ‡å®šã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã“ã‚Œã§

```bash
flutter pub get
```

ã‚’å‘¼ã³å‡ºã™æŒ™å‹•ã«å¤‰ã‚ã‚Šã¾ã™ï¼ˆ`flutterw` ãŒç„¡ã‘ã‚Œã° `flutter` ã‚’ç›´æ¥å‘¼ã¶ fallback ä»•æ§˜ï¼‰ã€‚

ãã®ä¸Šã§ã€**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ**ã§ã‚ã‚‰ã‹ã˜ã‚ `fvm use <version>` ã—ã¦ãŠã‘ã°ã€`flutter` ã‚³ãƒãƒ³ãƒ‰ãŒ FVM ç®¡ç†ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡ã—ç¤ºã™çŠ¶æ…‹ã«ãªã‚Šã€åŒã˜ã FVM ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Flutter ã§ `flutter pub get` ãŒå‹•ãå ´åˆãŒã‚ã‚Šã¾ã™ã€‚  
ãŸã ã—ã€ã“ã®æ–¹æ³•ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚ˆã‚Šå‹•ã„ãŸã‚Šå‹•ã‹ãªã‹ã£ãŸã‚Šã™ã‚‹ï¼ˆ`PATH` ã®è¨­å®šãªã©ã«ä¾å­˜ã™ã‚‹ï¼‰ãŸã‚ã€**ç¢ºå®Ÿæ€§ã¯æ–¹æ³•Aã‚ˆã‚ŠåŠ£ã‚‹** ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

---

## 3. ã¾ã¨ã‚

1. **`wrapper: Wrapper.fvm`** ã¯ç¾çŠ¶ã€Œ`fvm pub get`ã€ã‚’å‘¼ã¶ã ã‘ã®ãŸã‚ã€FVM ãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹  
2. ä¸€ç•ªç¢ºå®Ÿãªã®ã¯ **`fetchDependencies: false`** ã«ã—ã¦ã€Œç”Ÿæˆå¾Œã«æ‰‹å‹•ã§ `fvm flutter pub get`ã€ã™ã‚‹æµã‚Œ  
3. ã©ã†ã—ã¦ã‚‚è‡ªå‹•åŒ–ã—ãŸã„å ´åˆã¯ã€`wrapper: Wrapper.flutterw` ã‚’ä½¿ã£ã¦å†…éƒ¨ã§ `flutter pub get` ã‚’å‘¼ã¶ã‚ˆã†ã«ã—ã€äº‹å‰ã« `fvm use` æ¸ˆã¿ã®ç’°å¢ƒã‚’æ•´ãˆã‚‹ã¨ã„ã†å›é¿ç­–ã‚‚ã‚ã‚‹ï¼ˆç’°å¢ƒä¾å­˜ã«è¦æ³¨æ„ï¼‰  

ã“ã®ã‚ˆã†ã«ã™ã‚Œã°ã€FVM ã‚’ä½¿ã£ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã—ã¤ã¤ `openapi_generator` ã®ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:21:44*

// Openapi Generator last run: : 2025-03-05T15:21:12.972362
import 'package:openapi_generator_annotations/openapi_generator_annotations.dart';

@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
  fetchDependencies: false,
)
class Example {}

[WARNING] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Skipping install step because flag was set.

[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Running source code generation.
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:flutter pub run build_runner build --delete-conflicting-outputs
[WARNING] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
===&gt; args [generate, -o=guild_api, -i=lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml, -g=dart-dio, --additional-properties=allowUnicodeIdentifiers=false,ensureUniqueParams=true,useEnumExtension=true,enumUnknownDefaultCase=false,prependFormOrBodyParameters=false,pubName=guild_api,legacyDiscriminatorBehavior=true,sortModelPropertiesByRequiredFlag=true,sortParamsByRequiredFlag=true,wrapper=none,serializationLibrary=json_serializable]
[SEVERE] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Failed to generate content.

Could not complete source generation Failed to generate source code. Build Command output: Failed to update packages.
 #0      OpenapiGenerator.runSourceGen (package:openapi_generator/src/openapi_generator_runner.dart:416:34)
&lt;asynchronous suspension&gt;
#1      OpenapiGenerator.generateSources.&lt;anonymous closure&gt; (package:openapi_generator/src/openapi_generator_runner.dart:361:7)
&lt;asynchronous suspension&gt;
#2      OpenapiGenerator.generateSources (package:openapi_generator/src/openapi_generator_runner.dart:360:12)
&lt;asynchronous suspension&gt;
#3      OpenapiGenerator.generatorV2 (package:openapi_generator/src/openapi_generator_runner.dart:210:7)
&lt;asynchronous suspension&gt;
#4      normalizeGeneratorOutput (package:source_gen/src/output_helpers.dart:10:1)
&lt;asynchronous suspension&gt;
#5      StreamCompleter.setSourceStream (package:async/src/stream_completer.dart:76:3)
&lt;asynchronous suspension&gt;
 
[INFO] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:Found generated timestamp. Updating with 2025-03-05T15:21:12.972362
[INFO] Running build completed, took 15.8s
[INFO] Caching finalized dependency graph completed, took 84ms
[SEVERE] Failed after 15.8s
Failed to update packages.
make: *** [build] Error 1

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:21:46*

**ã‚¹ã‚­ãƒƒãƒ—ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹**

ã€ŒfetchDependencies: falseã€ã‚’è¨­å®šã—ã¦ã„ã‚‹ã®ã«ã€ãƒ“ãƒ«ãƒ‰ãƒ©ãƒ³ãƒŠãƒ¼ãŒã€Œflutter pub run build_runner build --delete-conflicting-outputsã€ã‚’è©¦ã¿ã¦å¤±æ•—ã—ã¦ã„ã‚‹ã€‚ã‚ªãƒ ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”ŸæˆãŒé–¢ä¿‚ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã€‚

**è¨­å®šã‚’å¤‰æ›´ã™ã‚‹**

ã€ŒrunSourceGenOnOutputã€ã‚’falseã«è¨­å®šã—ã€ãƒ“ãƒ«ãƒ‰ãƒ©ãƒ³ãƒŠãƒ¼ã®å®Ÿè¡Œã‚’é˜²ãã€ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ“ãƒ«ãƒ‰ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»»ã›ã‚‹æ–¹æ³•ã‚’æ¢ã£ã¦ã„ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:21:45*

`fetchDependencies: false` ã‚’æŒ‡å®šã—ã¦ã‚‚ã¾ã ã€Œ**Failed to update packages**ã€ãŒå‡ºã‚‹ã®ã¯ã€OpenAPI Generator ãŒ **ç”Ÿæˆå¾Œã®ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã•ã‚‰ã« `build_runner` ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹** ã‹ã‚‰ã§ã™ã€‚  
é€šå¸¸ã€`dart-dio` ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ã¯ã€Œç”Ÿæˆå¾Œã®ã‚½ãƒ¼ã‚¹ã‚’å†åº¦ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã®ã‚½ãƒ¼ã‚¹ç”Ÿæˆã‚’è¡Œã†ã€ãƒ•ãƒ­ãƒ¼ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãã‚ŒãŒ `pub get`ï¼ˆã‚ã‚‹ã„ã¯ä¾å­˜ã®æ›´æ–°ï¼‰ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã« **`runSourceGenOnOutput: false`** ã‚‚ä½µã›ã¦è¨­å®šã™ã‚‹ã¨ã€ç”Ÿæˆç›´å¾Œã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã® `build_runner` å®Ÿè¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã€ã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

---

## 1. ä¾‹: `fetchDependencies: false` + `runSourceGenOnOutput: false`

```dart
@Openapi(
  additionalProperties: DioProperties(
    pubName: 'guild_api',
    serializationLibrary: DioSerializationLibrary.jsonSerializable,
  ),
  inputSpec: InputSpec(
    path: 'lib/infrastructure/snpit_guild_api/snpit_guild_api.openapi.yaml',
  ),
  outputDirectory: 'guild_api',
  generatorName: Generator.dio,
  skipIfSpecIsUnchanged: false,
  forceAlwaysRun: true,
  debugLogging: true,
  fetchDependencies: false,       // è‡ªå‹•ã§ pub get ã—ãªã„
  runSourceGenOnOutput: false,    // ç”Ÿæˆå¾Œã® build_runner å®Ÿè¡Œã‚‚ã‚¹ã‚­ãƒƒãƒ—
)
class Example {}
```

ã“ã†ã™ã‚‹ã¨ã€

1. ç”Ÿæˆï¼ˆOpenAPI -> Dartï¼‰  
2. `guild_api/` ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›  
3. ãã“ã§ **ä¾å­˜ã‚’è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„ & ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’å†ãƒ“ãƒ«ãƒ‰ã—ã‚ˆã†ã¨ã—ãªã„**

ã¨ã„ã†å‹•ãã«ãªã‚Šã¾ã™ã€‚  
ãã®ãŸã‚ã€ã€Œ`pub get` ã‚„ `build_runner build` ãŒè‡ªå‹•ã§èµ°ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªã—ã¦è½ã¡ã‚‹ã€çŠ¶æ…‹ã‚’å›é¿ã§ãã¾ã™ã€‚

### 1.1 ãã®å¾Œã®æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—

- å¿…è¦ã«å¿œã˜ã¦ `cd guild_api && fvm flutter pub get` ãªã©ã‚’**æ‰‹å‹•**ã§å®Ÿè¡Œã—ã€ç”Ÿæˆç‰©ã®ä¾å­˜è§£æ±ºã‚’è¡Œã†  
- ã‚‚ã—ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå´ã§ä½•ã‚‰ã‹ã®è¿½åŠ ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ãªã‚‰ã€åŒæ§˜ã« `fvm flutter pub run build_runner build` ãªã©ã‚’æ‰‹å‹•ã§å®Ÿè¡Œ  
- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªå´ã§ã¯ã€`pubspec.yaml` ã« `guild_api:` ã® path ä¾å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ä¾å­˜ï¼‰ã‚’è¿½åŠ ã—ã¦ä½¿ã†

---

## 2. ãã‚Œã§ã‚‚è¡çªãŒå‡ºã‚‹å ´åˆ

ä¸Šè¨˜è¨­å®šã§**ã¾ã **ã€ŒFailed to update packages.ã€ãŒæ®‹ã‚‹å ´åˆã¯ã€ãã‚‚ãã‚‚

- **`build_runner` è‡ªä½“ã‚’ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ãŒ `guild_api` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å†åº¦ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã„ã‚‹**  
- ã‚‚ã—ãã¯ **`openapi_generator` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**ãŒå¤ãã€`runSourceGenOnOutput: false` ãŒåŠ¹ã„ã¦ã„ãªã„

ã¨ã„ã£ãŸã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ãã®å ´åˆã€

1. `openapi_generator` / `openapi_generator_annotations` ã‚’æœ€æ–°ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã¿ã‚‹  
2. ãƒ«ãƒ¼ãƒˆã® `pubspec.yaml` ã§ `guild_api:` ã‚’ path å‚ç…§ã«ã—ãªã„çŠ¶æ…‹ï¼ˆã‚ã‚‹ã„ã¯ `dependency_overrides` ã§è¡çªã‚’å›é¿ï¼‰  
3. ç”Ÿæˆç‰©ã‚’å®Œå…¨ã«åˆ¥ãƒ•ã‚©ãƒ«ãƒ€ç®¡ç†ã—ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯åˆ¥ã«ãƒ“ãƒ«ãƒ‰

ãªã©ã‚’è©¦ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## 3. ã¾ã¨ã‚

- `fetchDependencies: false` ã ã‘ã§ã¯ **ç”Ÿæˆå¾Œã®ã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦è¡Œã‚ã‚Œã‚‹ãƒ“ãƒ«ãƒ‰ï¼ˆ`build_runner`ï¼‰** ã‚’æ­¢ã‚ã‚‰ã‚Œãªã„ãŸã‚ã€ä¾å­˜è¡çªã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹  
- **`runSourceGenOnOutput: false`** ã¨åˆã‚ã›ã¦è¨­å®šã™ã‚Œã°ã€ç”Ÿæˆå¾Œã®ãƒ“ãƒ«ãƒ‰ã‚„ä¾å­˜è§£æ±ºã‚’**è‡ªå‹•**ã§ã¯ãªã**æ‰‹å‹•**ã«ä»»ã›ã‚‹å½¢ã«ãªã‚Šã€è¡çªã‚’é¿ã‘ã‚„ã™ã„  
- ãã®éš›ã¯ã€`guild_api/` å†…ã§æ‰‹å‹•ã§ `fvm flutter pub get` ã—ã¦ä¾å­˜ã‚’å°å…¥ã™ã‚Œã°OK

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:25:22*

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã€‚ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒã‚ˆããªã„ã‚‰ã—ã„ã€‚

[SEVERE] openapi_generator on lib/infrastructure/openapi/openapi_config.dart:
Failed to format generated code.

Failed to format generated code. Could not format because the source could not be parsed:

line 80, column 6 of lib/src/model/auth_login_response_dto.dart: Expected to find ','.
   â•·
80 â”‚ n0(''0''),
/// Response code. 0 for success, -1 for failure
enum AuthLoginResponseDtoCodeEnum {
    /// Response code. 0 for success, -1 for failure
@JsonValue('0')
n0(''0''),
    /// Response code. 0 for success, -1 for failure
@JsonValue('-1')
n1(''-1'');

const AuthLoginResponseDtoCodeEnum(this.value);

final String value;

@override
String toString() =&gt; value;
}

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:25:24*

**ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã®ä¿®æ­£**

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ãŒèª¤ã£ã¦ã„ã‚‹æ§˜å­ã§ã™ã€‚è¿½åŠ ã‚¯ã‚©ãƒ¼ãƒˆã‚„èª¤ã£ãŸã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãŒè¦‹ã‚‰ã‚Œã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã“ã¨ãŒç¢ºèªã•ã‚Œã¦ã„ã¾ã™ã€‚

**ä¿®æ­£ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**

openapiãƒ•ã‚¡ã‚¤ãƒ«ã§enumã‚’æ–‡å­—åˆ—ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã‹ã€ã‚«ã‚¹ã‚¿ãƒ å‘½åã‚’ä½œæˆã—ã€x-enum-varnamesã¾ãŸã¯x-enum-namesã‚’ä½¿ç”¨ã—ã¦ä¿®æ­£ã—ã¦ã„ã‚‹ã€‚

**ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ä¿®æ­£ã®æ¤œè¨**

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨ã®ãƒã‚°ã‚’è¦‹ã¦ã€openapiãƒ•ã‚¡ã‚¤ãƒ«ã®ä»•æ§˜ã‚’èª¿æ•´ä¸­ã€‚ãƒã‚°ã‚’ä¿®æ­£ã—ã€ã‚«ã‚¹ã‚¿ãƒ æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹ã¨ã“ã‚ã€‚

**è¦‹ç›´ã—ã¨å¯¾å¿œ**

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨ã®èª¤ã‚Šã‚’ä¿®æ­£ã™ã‚‹ãŸã‚ã®èª¬æ˜ã‚’è©¦ã¿ã¦ã„ã‚‹ã€‚nameMappingsã‚„enumNameMappingsã®åˆ©ç”¨ã€openapiä»•æ§˜ã®å†ç¢ºèªã€ã¾ãŸã¯ç”Ÿæˆå™¨ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œãªã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:25:23*

OpenAPI ã®å®šç¾©ã« **æ•°å€¤ã® Enum**ï¼ˆä¾‹: `enum: [0, -1]`ï¼‰ã‚„ **æ•°å€¤ã£ã½ã„æ–‡å­—åˆ—**ï¼ˆä¾‹: `enum: ["0", "-1"]`ï¼‰ã‚’å«ã‚€ã¨ã€Dart ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆæ™‚ã«ã“ã®ã‚ˆã†ãª **é‡è¤‡ã‚¯ã‚©ãƒ¼ãƒˆ** ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚çµæœã€ä¸‹è¨˜ã®ã‚ˆã†ã«

```dart
@JsonValue('0')
n0(''0''),  // â† '0' ãŒé‡è¤‡ã‚¯ã‚©ãƒ¼ãƒˆã•ã‚Œã¦ã‚¨ãƒ©ãƒ¼
```

ã¨ã„ã†å£Šã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã€ã€Œ**Expected to find ','**ã€ãªã©ã® parse ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ã™ã€‚  
ã“ã‚Œã¯ OpenAPI Generator å´ã®æ—¢çŸ¥ã®ãƒã‚°ï¼ˆã¾ãŸã¯ Dart å´ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸å‚™ï¼‰ã®ã‚ˆã†ãªå‹•ãã§ã€ç‰¹ã«æ•°å€¤ Enum ã‚’æ–‡å­—åˆ—æ‰±ã„ã™ã‚‹å ´åˆã«èµ·ãã‚„ã™ã„ã§ã™ã€‚

ä¸‹è¨˜ã«ã„ãã¤ã‹ã®å›é¿ç­–ãƒ»è§£æ±ºç­–ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

---

## 1. OpenAPI å´ã§ **Enum ã®æ–‡å­—åˆ—** ã‚’å·¥å¤«ã™ã‚‹

### 1-1. Enum ã®å€¤ã‚’æ–‡å­—åˆ—ã«ã—ã¦ `x-enum-varnames` / `x-enum-values` ã‚’æŒ‡å®š

OpenAPI ã®è©²å½“ç®‡æ‰€ã§ã€æ•°å€¤çš„ãªæ–‡å­—åˆ—ã‚’ãã®ã¾ã¾æ›¸ãã®ã§ã¯ãªãã€**åˆ¥ã®åå‰** ã‚’å‰²ã‚Šå½“ã¦ã¦ã‚ã’ã‚‹æ–¹æ³•ã§ã™ã€‚ãŸã¨ãˆã°

```yaml
components:
  schemas:
    AuthLoginResponseDto:
      type: object
      properties:
        code:
          type: string
          enum:
            - "0"
            - "-1"
          x-enum-varnames:
            - ZERO
            - MINUS_ONE
```

ã¨ã™ã‚Œã°ã€ç”Ÿæˆã•ã‚ŒãŸ Dart ã§ã¯

```dart
/// Response code. 0 for success, -1 for failure
enum AuthLoginResponseDtoCodeEnum {
  @JsonValue('0')
  ZERO('0'),

  @JsonValue('-1')
  MINUS_ONE('-1');
  
  // ...
}
```

ã®ã‚ˆã†ã«ãªã‚Šã€äºŒé‡ã‚¯ã‚©ãƒ¼ãƒˆå•é¡ŒãŒèµ·ãã«ãããªã‚Šã¾ã™ã€‚

- `x-enum-varnames` ã¯åˆ—æŒ™å­ï¼ˆEnumã®å„å€¤ï¼‰ã«ä½¿ã† **Dartè­˜åˆ¥å­** ã‚’æ˜ç¤ºã™ã‚‹ãŸã‚ã®æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£  
- `x-enum-values` ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å ´åˆã¯ãã¡ã‚‰ã§ã‚‚æ§‹ã„ã¾ã›ã‚“ (å†…å®¹ã¯ä¼¼ã¦ã„ã¾ã™)

### 1-2. Enum ã‚’ **æ•´æ•°** ã¨ã—ã¦æ‰±ã†

ã‚‚ã—æœ¬å½“ã« `0` / `-1` ã®æ•°å€¤ã‚’ Enum ã¨ã—ã¦æ‰±ã„ãŸã„ãªã‚‰ã€OpenAPI ã§

```yaml
type: integer
format: int32
enum:
  - 0
  - -1
```

ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãŸã ã— Dart (ç‰¹ã« `json_serializable` ã‚„ `built_value`) ã§ã¯ **æ•°å€¤ã®åˆ—æŒ™å‹** ã‚’ãã®ã¾ã¾è¡¨ç¾ã§ããªã„ãŸã‚ã€

- â€œEnumâ€ ã§ã¯ãªã `int` æ‰±ã„ï¼ˆ`int? code;`ï¼‰ã«ãªã‚‹
- ã‚‚ã—ãã¯ç‹¬è‡ªã« `x-enum-varnames` ã‚’é§†ä½¿ã—ã¦ç„¡ç†ã‚„ã‚Šæ–‡å­—åˆ— `"-1"` ã¨ã‹ `"0"` ã¨å¯¾å¿œã•ã›ã‚‹  

ãªã©ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚  
å®Ÿéš›ã«ãŸã ã®ã€Œãƒ•ãƒ©ã‚°å€¤ï¼ˆ0 æˆåŠŸ, -1 å¤±æ•—ï¼‰ã€ç¨‹åº¦ãªã‚‰ã€å˜ãªã‚‹ `int` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦è¨­è¨ˆã™ã‚‹ã»ã†ãŒãƒˆãƒ©ãƒ–ãƒ«ã¯å°‘ãªã„ã§ã™ã€‚

---

## 2. Dart å´ã§ **enumNameMappings** ã‚„ **nameMappings** ã‚’ä½¿ã†

`openapi_generator_annotations` ã«ã¯ `enumNameMappings` ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚  
ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ã€å¯¾è±¡ã® enum åãŠã‚ˆã³åˆ—æŒ™å­åã‚’å†ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã€`'0'` â†’ `ZERO` ã¨ã„ã£ãŸå½¢ã«å¤‰æ›ã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

```dart
@Openapi(
  enumNameMappings: {
    'AuthLoginResponseDtoCodeEnum' : 'AuthLoginResponseCode', 
  },
  nameMappings: {
    '0': 'ZERO',
    '-1': 'MINUS_ONE'
  },
  // ...
)
class Example {}
```

ãŸã ã—ã€ã“ã®æŒ‡å®šã®ä»•æ–¹ã¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã‚ŠæŒ™å‹•ãŒç•°ãªã‚Šã€å¿…ãšå‹•ãã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚  
ã¾ãŸã€**å…ƒã® Enum å®šç¾©ãŒæ•°å€¤ or æ–‡å­—åˆ—ã‹** ã§ã‚‚å¤‰åŒ–ã™ã‚‹ãŸã‚ã€**OpenAPI ã®ã»ã†ã§ `x-enum-varnames` ã‚’ä»˜ã‘ã‚‹** ã»ã†ãŒç¢ºå®Ÿã§ã™ã€‚

---

## 3. ç”Ÿæˆå¾Œã«æ‰‹å‹•ä¿®æ­£ã™ã‚‹ï¼ˆé¿ã‘ãŸã„ãŒæš«å®šå¯¾å¿œï¼‰

ã©ã†ã—ã¦ã‚‚ OpenAPI ã‚’ä¿®æ­£ã§ããªã„å ´åˆã¯ã€

1. ã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ç®‡æ‰€ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ/å‰Šé™¤ã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’é€šã™  
2. è©²å½“ Enum ã‚’æ‰‹å‹•ä¿®æ­£ã—ã€`n0("0")`, `nMinusOne("-1")` ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹  

ã¨ã„ã†åŠ›æŠ€ã‚‚ã‚ã‚Šã¾ã™ãŒã€å†ç”Ÿæˆã®ãŸã³ã«åŒã˜ä¿®æ­£ã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãšã€**æœ¬ç•ªé‹ç”¨ã§ã¯éæ¨å¥¨** ã§ã™ã€‚

---

## 4. ã¾ã¨ã‚

- **æ•°å€¤åˆ—æŒ™å­** (ä¾‹: `0`, `-1`) ã‚’ **æ–‡å­—åˆ—ã¨ã—ã¦ Enum** å®šç¾©ã™ã‚‹ã¨ã€OpenAPI Generator (Dart) ãŒäºŒé‡ã‚¯ã‚©ãƒ¼ãƒˆã‚’æ··ãœã¦ã—ã¾ã†ä¸å…·åˆãŒã‚ã‚‹  
- å¯¾å‡¦ç­–ã¨ã—ã¦ã¯ã€**OpenAPI ã® enum ã« `x-enum-varnames` ã‚’ä¸ãˆã¦æ˜ç¤ºçš„ã«åå‰ã‚’ã¤ã‘ã‚‹** ã¨ã€Dart å´ã®åˆ—æŒ™å­åãŒé‡è¤‡ã‚¯ã‚©ãƒ¼ãƒˆã•ã‚Œãšã«æ¸ˆã‚€  
- ã‚ã‚‹ã„ã¯ã€ãã‚‚ãã‚‚ **`type: integer` + `enum: [0, -1]`** ã«ã—ã¦ã€ŒEnum ã§ã¯ãªãæ•´æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ã«ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹  
- ã©ã†ã—ã¦ã‚‚ä¿®æ­£ã§ããªã„å ´åˆã¯ã€ç”Ÿæˆå¾Œã«æ‰‹å‹•ã§äºŒé‡ã‚¯ã‚©ãƒ¼ãƒˆã‚’ç›´ã™ã‹ã€`enumNameMappings` ãªã©ã‚’è©¦ã™  
- **ä¸€ç•ªç°¡å˜ã‹ã¤ç¢ºå®Ÿãªã®ã¯ã€OpenAPI ã§ â€œ`x-enum-varnames` or x-enum-valuesâ€ ã‚’ä½¿ã£ã¦** Enum åã‚’ãã¡ã‚“ã¨æ˜è¨˜ã™ã‚‹ã“ã¨  

ã“ã†ã™ã‚‹ã“ã¨ã§ã€é‡è¤‡ã‚¯ã‚©ãƒ¼ãƒˆã®ã›ã„ã§ã‚½ãƒ¼ã‚¹ãŒãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å•é¡Œã‚’å›é¿ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/3/5 15:34:51*

enum ã‚’å¤–ã—ã¦ã†ã¾ãã„ã£ãŸãŒã“ã“ã§ãƒ“ãƒ«ãƒ‰ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸ

/git/gallusys/snpit_guild_app/guild_api  â€¹feature/314-2*â€º $ fvm flutter pub run build_runner build --delete-conflicting-outputs
Deprecated. Use `dart run` instead.
[INFO] Generating build script completed, took 127ms
[INFO] Reading cached asset graph completed, took 56ms
[INFO] Checking for updates since last build completed, took 317ms
[INFO] Running build completed, took 12ms
[INFO] Caching finalized dependency graph completed, took 43ms
[SEVERE] json_serializable on lib/src/model/create_explorer_attribute_request_admin_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_explorer_attribute_request_admin_dto.dart`
which was output to
  `lib/src/model/create_explorer_attribute_request_admin_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 32, column 43 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.attributeDescription case final value?) 'attributeDescription': value,
   â”‚                                           ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_item_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_item_request_dto.dart`
which was output to
  `lib/src/model/update_item_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 25, column 31 of .: Expected to find ')'.
   â•·
25 â”‚         if (instance.itemName case final value?) 'itemName': value,
   â”‚                               ^^^^
   â•µ
line 26, column 38 of .: Expected to find ')'.
   â•·
26 â”‚         if (instance.itemDescription case final value?) 'itemDescription': value,
   â”‚                                      ^^^^
   â•µ
line 27, column 32 of .: Expected to find ')'.
   â•·
27 â”‚         if (instance.itemImage case final value?) 'itemImage': value,
   â”‚                                ^^^^
   â•µ
line 28, column 32 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.itemPrice case final value?) 'itemPrice': value,
   â”‚                                ^^^^
   â•µ
line 29, column 78 of .: Expected to find ')'.
   â•·
29 â”‚         if (_$UpdateItemRequestDTOItemStatusEnumEnumMap[instance.itemStatus] case final value?) 'itemStatus': value,
   â”‚                                                                              ^^^^
   â•µ
line 30, column 82 of .: Expected to find ')'.
   â•·
30 â”‚         if (_$UpdateItemRequestDTOItemCategoryEnumEnumMap[instance.itemCategory] case final value?) 'itemCategory': value,
   â”‚                                                                                  ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/explorer_attribute_admin_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/explorer_attribute_admin_dto.dart`
which was output to
  `lib/src/model/explorer_attribute_admin_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 34, column 43 of .: Expected to find ')'.
   â•·
34 â”‚         if (instance.attributeDescription case final value?) 'attributeDescription': value,
   â”‚                                           ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/guild_spot_detail_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/guild_spot_detail_dto.dart`
which was output to
  `lib/src/model/guild_spot_detail_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 47, column 30 of .: Expected to find ')'.
   â•·
47 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
line 48, column 38 of .: Expected to find ')'.
   â•·
48 â”‚         if (instance.spotDescription case final value?) 'spotDescription': value,
   â”‚                                      ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/nft_attributes.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/nft_attributes.dart`
which was output to
  `lib/src/model/nft_attributes.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 23, column 39 of .: Expected to find ')'.
   â•·
23 â”‚         if (instance.traitDisplayType case final value?) 'trait_display_type': value,
   â”‚                                       ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_spot_info_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_spot_info_request_dto.dart`
which was output to
  `lib/src/model/update_spot_info_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 22, column 38 of .: Expected to find ')'.
   â•·
22 â”‚         if (instance.spotAttributeId case final value?) 'spotAttributeId': value,
   â”‚                                      ^^^^
   â•µ
line 23, column 31 of .: Expected to find ')'.
   â•·
23 â”‚         if (instance.spotName case final value?) 'spotName': value,
   â”‚                               ^^^^
   â•µ
line 24, column 38 of .: Expected to find ')'.
   â•·
24 â”‚         if (instance.spotDescription case final value?) 'spotDescription': value,
   â”‚                                      ^^^^
   â•µ
line 25, column 35 of .: Expected to find ')'.
   â•·
25 â”‚         if (instance.spotLatitude case final value?) 'spotLatitude': value,
   â”‚                                   ^^^^
   â•µ
line 26, column 36 of .: Expected to find ')'.
   â•·
26 â”‚         if (instance.spotLongitude case final value?) 'spotLongitude': value,
   â”‚                                    ^^^^
   â•µ
line 27, column 34 of .: Expected to find ')'.
   â•·
27 â”‚         if (instance.spotAddress case final value?) 'spotAddress': value,
   â”‚                                  ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/spot_photo_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/spot_photo_dto.dart`
which was output to
  `lib/src/model/spot_photo_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 29, column 39 of .: Expected to find ')'.
   â•·
29 â”‚         if (instance.photoDescription case final value?) 'photoDescription': value,
   â”‚                                       ^^^^
   â•µ
line 30, column 30 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/explorer_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/explorer_dto.dart`
which was output to
  `lib/src/model/explorer_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 46, column 42 of .: Expected to find ')'.
   â•·
46 â”‚         if (instance.explorerDescription case final value?) 'explorerDescription': value,
   â”‚                                          ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/maintenance_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/maintenance_dto.dart`
which was output to
  `lib/src/model/maintenance_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 20, column 29 of .: Expected to find ')'.
   â•·
20 â”‚         if (instance.minVer case final value?) 'minVer': value,
   â”‚                             ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_guild_member_role_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_guild_member_role_request_dto.dart`
which was output to
  `lib/src/model/update_guild_member_role_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 17, column 77 of .: Expected to find ')'.
   â•·
17 â”‚         if (_$UpdateGuildMemberRoleRequestDTORoleEnumEnumMap[instance.role] case final value?) 'role': value,
   â”‚                                                                             ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/item_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/item_dto.dart`
which was output to
  `lib/src/model/item_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 30, column 38 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.itemDescription case final value?) 'itemDescription': value,
   â”‚                                      ^^^^
   â•µ
line 31, column 34 of .: Expected to find ')'.
   â•·
31 â”‚         if (instance.itemAbility case final value?) 'itemAbility': value,
   â”‚                                  ^^^^
   â•µ
line 32, column 32 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.itemImage case final value?) 'itemImage': value,
   â”‚                                ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/nft_metadata.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/nft_metadata.dart`
which was output to
  `lib/src/model/nft_metadata.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 24, column 34 of .: Expected to find ')'.
   â•·
24 â”‚         if (instance.description case final value?) 'description': value,
   â”‚                                  ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/user_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/user_dto.dart`
which was output to
  `lib/src/model/user_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 31 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.username case final value?) 'username': value,
   â”‚                               ^^^^
   â•µ
line 29, column 36 of .: Expected to find ')'.
   â•·
29 â”‚         if (instance.walletAddress case final value?) 'walletAddress': value,
   â”‚                                    ^^^^
   â•µ
line 30, column 32 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.stpAmount case final value?) 'stpAmount': value,
   â”‚                                ^^^^
   â•µ
line 31, column 37 of .: Expected to find ')'.
   â•·
31 â”‚         if (instance.profilePicture case final value?) 'profilePicture': value,
   â”‚                                     ^^^^
   â•µ
line 32, column 30 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
line 33, column 65 of .: Expected to find ')'.
   â•·
33 â”‚         if (_$UserDtoUserStatusEnumEnumMap[instance.userStatus] case final value?) 'userStatus': value,
   â”‚                                                                 ^^^^
   â•µ
line 34, column 62 of .: Expected to find ')'.
   â•·
34 â”‚         if (instance.decks?.map((e) =&gt; e.toJson( )).toList() case final value?) 'decks': value,
   â”‚                                                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/auth_logout_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/auth_logout_request_dto.dart`
which was output to
  `lib/src/model/auth_logout_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 20, column 26 of .: Expected to find ')'.
   â•·
20 â”‚         if (instance.jwt case final value?) 'jwt': value,
   â”‚                          ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/give_item_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/give_item_request_dto.dart`
which was output to
  `lib/src/model/give_item_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 22, column 31 of .: Expected to find ')'.
   â•·
22 â”‚         if (instance.quantity case final value?) 'quantity': value,
   â”‚                               ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/flag_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/flag_dto.dart`
which was output to
  `lib/src/model/flag_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 46, column 38 of .: Expected to find ')'.
   â•·
46 â”‚         if (instance.flagDescription case final value?) 'flagDescription': value,
   â”‚                                      ^^^^
   â•µ
line 47, column 33 of .: Expected to find ')'.
   â•·
47 â”‚         if (instance.leftHandId case final value?) 'leftHandId': value,
   â”‚                                 ^^^^
   â•µ
line 48, column 32 of .: Expected to find ')'.
   â•·
48 â”‚         if (instance.rightHand case final value?) 'rightHand': value,
   â”‚                                ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_guild_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_guild_request_dto.dart`
which was output to
  `lib/src/model/create_guild_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 22, column 39 of .: Expected to find ')'.
   â•·
22 â”‚         if (instance.guildDescription case final value?) 'guildDescription': value,
   â”‚                                       ^^^^
   â•µ
line 23, column 34 of .: Expected to find ')'.
   â•·
23 â”‚         if (instance.guildAvatar case final value?) 'guildAvatar': value,
   â”‚                                  ^^^^
   â•µ
line 24, column 34 of .: Expected to find ')'.
   â•·
24 â”‚         if (instance.guildBanner case final value?) 'guildBanner': value,
   â”‚                                  ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_flag_attribute_request_admin_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_flag_attribute_request_admin_dto.dart`
which was output to
  `lib/src/model/create_flag_attribute_request_admin_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 30, column 43 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.attributeDescription case final value?) 'attributeDescription': value,
   â”‚                                           ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_item_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_item_request_dto.dart`
which was output to
  `lib/src/model/create_item_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 38 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.itemDescription case final value?) 'itemDescription': value,
   â”‚                                      ^^^^
   â•µ
line 29, column 34 of .: Expected to find ')'.
   â•·
29 â”‚         if (instance.itemAbility case final value?) 'itemAbility': value,
   â”‚                                  ^^^^
   â•µ
line 30, column 32 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.itemImage case final value?) 'itemImage': value,
   â”‚                                ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_item_box_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_item_box_request_dto.dart`
which was output to
  `lib/src/model/create_item_box_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 25, column 41 of .: Expected to find ')'.
   â•·
25 â”‚         if (instance.itemBoxDescription case final value?) 'itemBoxDescription': value,
   â”‚                                         ^^^^
   â•µ
line 26, column 87 of .: Expected to find ')'.
   â•·
26 â”‚         if (_$CreateItemBoxRequestDTOItemBoxRarityEnumEnumMap[instance.itemBoxRarity] case final value?) 'itemBoxRarity': value,
   â”‚                                                                                       ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/deck_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/deck_dto.dart`
which was output to
  `lib/src/model/deck_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 31, column 31 of .: Expected to find ')'.
   â•·
31 â”‚         if (instance.deckName case final value?) 'deckName': value,
   â”‚                               ^^^^
   â•µ
line 32, column 38 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.deckDescription case final value?) 'deckDescription': value,
   â”‚                                      ^^^^
   â•µ
line 33, column 32 of .: Expected to find ')'.
   â•·
33 â”‚         if (instance.deckImage case final value?) 'deckImage': value,
   â”‚                                ^^^^
   â•µ
line 34, column 65 of .: Expected to find ')'.
   â•·
34 â”‚         if (_$DeckDTODeckStatusEnumEnumMap[instance.deckStatus] case final value?) 'deckStatus': value,
   â”‚                                                                 ^^^^
   â•µ
line 35, column 30 of .: Expected to find ')'.
   â•·
35 â”‚         if (instance.searchQ case final value?) 'searchQ': value,
   â”‚                              ^^^^
   â•µ
line 36, column 30 of .: Expected to find ')'.
   â•·
36 â”‚         if (instance.attackE case final value?) 'attackE': value,
   â”‚                              ^^^^
   â•µ
line 37, column 28 of .: Expected to find ')'.
   â•·
37 â”‚         if (instance.luckL case final value?) 'luckL': value,
   â”‚                            ^^^^
   â•µ
line 38, column 31 of .: Expected to find ')'.
   â•·
38 â”‚         if (instance.defenseB case final value?) 'defenseB': value,
   â”‚                               ^^^^
   â•µ
line 39, column 68 of .: Expected to find ')'.
   â•·
39 â”‚         if (instance.deckCameras?.map((e) =&gt; e.toJson( )).toList() case final value?) 'deckCameras': value,
   â”‚                                                                    ^^^^
   â•µ
line 40, column 39 of .: Expected to find ')'.
   â•·
40 â”‚         if (instance.deckNftExplorers case final value?) 'deckNftExplorers': value,
   â”‚                                       ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/item_box_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/item_box_dto.dart`
which was output to
  `lib/src/model/item_box_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 31, column 41 of .: Expected to find ')'.
   â•·
31 â”‚         if (instance.itemBoxDescription case final value?) 'itemBoxDescription': value,
   â”‚                                         ^^^^
   â•µ
line 32, column 35 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.itemBoxImage case final value?) 'itemBoxImage': value,
   â”‚                                   ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_deck_camera_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_deck_camera_request_dto.dart`
which was output to
  `lib/src/model/update_deck_camera_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 17, column 34 of .: Expected to find ')'.
   â•·
17 â”‚         if (instance.deckCameras case final value?) 'deckCameras': value,
   â”‚                                  ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/user_items_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/user_items_dto.dart`
which was output to
  `lib/src/model/user_items_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 32, column 38 of .: Expected to find ')'.
   â•·
32 â”‚         if (instance.itemDescription case final value?) 'itemDescription': value,
   â”‚                                      ^^^^
   â•µ
line 33, column 34 of .: Expected to find ')'.
   â•·
33 â”‚         if (instance.itemAbility case final value?) 'itemAbility': value,
   â”‚                                  ^^^^
   â•µ
line 34, column 32 of .: Expected to find ')'.
   â•·
34 â”‚         if (instance.itemImage case final value?) 'itemImage': value,
   â”‚                                ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_flag_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_flag_request_dto.dart`
which was output to
  `lib/src/model/create_flag_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 38 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.flagDescription case final value?) 'flagDescription': value,
   â”‚                                      ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/guild_spot_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/guild_spot_dto.dart`
which was output to
  `lib/src/model/guild_spot_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 40, column 30 of .: Expected to find ')'.
   â•·
40 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/guild_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/guild_dto.dart`
which was output to
  `lib/src/model/guild_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 37, column 39 of .: Expected to find ')'.
   â•·
37 â”‚         if (instance.guildDescription case final value?) 'guildDescription': value,
   â”‚                                       ^^^^
   â•µ
line 38, column 68 of .: Expected to find ')'.
   â•·
38 â”‚         if (_$GuildDtoGuildStatusEnumEnumMap[instance.guildStatus] case final value?) 'guildStatus': value,
   â”‚                                                                    ^^^^
   â•µ
line 39, column 34 of .: Expected to find ')'.
   â•·
39 â”‚         if (instance.guildAvatar case final value?) 'guildAvatar': value,
   â”‚                                  ^^^^
   â•µ
line 40, column 34 of .: Expected to find ')'.
   â•·
40 â”‚         if (instance.guildBanner case final value?) 'guildBanner': value,
   â”‚                                  ^^^^
   â•µ
line 41, column 25 of .: Expected to find ')'.
   â•·
41 â”‚         if (instance.gp case final value?) 'gp': value,
   â”‚                         ^^^^
   â•µ
line 42, column 30 of .: Expected to find ')'.
   â•·
42 â”‚         if (instance.searchQ case final value?) 'searchQ': value,
   â”‚                              ^^^^
   â•µ
line 43, column 30 of .: Expected to find ')'.
   â•·
43 â”‚         if (instance.attackE case final value?) 'attackE': value,
   â”‚                              ^^^^
   â•µ
line 44, column 28 of .: Expected to find ')'.
   â•·
44 â”‚         if (instance.luckL case final value?) 'luckL': value,
   â”‚                            ^^^^
   â•µ
line 45, column 31 of .: Expected to find ')'.
   â•·
45 â”‚         if (instance.defenseB case final value?) 'defenseB': value,
   â”‚                               ^^^^
   â•µ
line 46, column 69 of .: Expected to find ')'.
   â•·
46 â”‚         if (instance.guildMembers?.map((e) =&gt; e.toJson( )).toList() case final value?) 'guildMembers': value,
   â”‚                                                                     ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_spot_attribute_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_spot_attribute_request_dto.dart`
which was output to
  `lib/src/model/create_spot_attribute_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 43 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.attributeDescription case final value?) 'attributeDescription': value,
   â”‚                                           ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/photo_upload_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/photo_upload_dto.dart`
which was output to
  `lib/src/model/photo_upload_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 20, column 30 of .: Expected to find ')'.
   â•·
20 â”‚         if (instance.message case final value?) 'message': value,
   â”‚                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_deck_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_deck_request_dto.dart`
which was output to
  `lib/src/model/create_deck_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 23, column 38 of .: Expected to find ')'.
   â•·
23 â”‚         if (instance.deckDescription case final value?) 'deckDescription': value,
   â”‚                                      ^^^^
   â•µ
line 24, column 39 of .: Expected to find ')'.
   â•·
24 â”‚         if (instance.deckNftExplorers case final value?) 'deckNftExplorers': value,
   â”‚                                       ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_spot_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_spot_request_dto.dart`
which was output to
  `lib/src/model/create_spot_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 38 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.spotDescription case final value?) 'spotDescription': value,
   â”‚                                      ^^^^
   â•µ
line 29, column 34 of .: Expected to find ')'.
   â•·
29 â”‚         if (instance.spotAddress case final value?) 'spotAddress': value,
   â”‚                                  ^^^^
   â•µ
line 30, column 30 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.photoId case final value?) 'photoId': value,
   â”‚                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/guild_member_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/guild_member_dto.dart`
which was output to
  `lib/src/model/guild_member_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 27, column 76 of .: Expected to find ')'.
   â•·
27 â”‚         if (_$GuildMemberDtoMemberStatusEnumEnumMap[instance.memberStatus] case final value?) 'memberStatus': value,
   â”‚                                                                            ^^^^
   â•µ
line 28, column 29 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.teamId case final value?) 'teamId': value,
   â”‚                             ^^^^
   â•µ
line 29, column 29 of .: Expected to find ')'.
   â•·
29 â”‚         if (instance.avatar case final value?) 'avatar': value,
   â”‚                             ^^^^
   â•µ
line 30, column 62 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.decks?.map((e) =&gt; e.toJson( )).toList() case final value?) 'decks': value,
   â”‚                                                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/create_explorer_request_admin_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/create_explorer_request_admin_dto.dart`
which was output to
  `lib/src/model/create_explorer_request_admin_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 28, column 42 of .: Expected to find ')'.
   â•·
28 â”‚         if (instance.explorerDescription case final value?) 'explorerDescription': value,
   â”‚                                          ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/spot_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/spot_dto.dart`
which was output to
  `lib/src/model/spot_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 38, column 30 of .: Expected to find ')'.
   â•·
38 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/spot_detail_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/spot_detail_dto.dart`
which was output to
  `lib/src/model/spot_detail_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 41, column 30 of .: Expected to find ')'.
   â•·
41 â”‚         if (instance.guildId case final value?) 'guildId': value,
   â”‚                              ^^^^
   â•µ
line 42, column 38 of .: Expected to find ')'.
   â•·
42 â”‚         if (instance.spotDescription case final value?) 'spotDescription': value,
   â”‚                                      ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/flag_attribute_admin_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/flag_attribute_admin_dto.dart`
which was output to
  `lib/src/model/flag_attribute_admin_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 30, column 43 of .: Expected to find ')'.
   â•·
30 â”‚         if (instance.attributeDescription case final value?) 'attributeDescription': value,
   â”‚                                           ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_deck_info_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_deck_info_request_dto.dart`
which was output to
  `lib/src/model/update_deck_info_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 19, column 31 of .: Expected to find ')'.
   â•·
19 â”‚         if (instance.deckName case final value?) 'deckName': value,
   â”‚                               ^^^^
   â•µ
line 20, column 38 of .: Expected to find ')'.
   â•·
20 â”‚         if (instance.deckDescription case final value?) 'deckDescription': value,
   â”‚                                      ^^^^
   â•µ
line 21, column 32 of .: Expected to find ')'.
   â•·
21 â”‚         if (instance.deckImage case final value?) 'deckImage': value,
   â”‚                                ^^^^
   â•µ
[SEVERE] json_serializable on lib/src/model/update_guild_info_request_dto.dart (cached):
An error `FormatterException` occurred while formatting the generated source for
  `package:guild_api/src/model/update_guild_info_request_dto.dart`
which was output to
  `lib/src/model/update_guild_info_request_dto.json_serializable.g.part`.
This may indicate an issue in the generator, the input source code, or in the
source formatter.
Could not format because the source could not be parsed:

line 20, column 32 of .: Expected to find ')'.
   â•·
20 â”‚         if (instance.guildName case final value?) 'guildName': value,
   â”‚                                ^^^^
   â•µ
line 21, column 39 of .: Expected to find ')'.
   â•·
21 â”‚         if (instance.guildDescription case final value?) 'guildDescription': value,
   â”‚                                       ^^^^
   â•µ
line 22, column 34 of .: Expected to find ')'.
   â•·
22 â”‚         if (instance.guildAvatar case final value?) 'guildAvatar': value,
   â”‚                                  ^^^^
   â•µ
line 23, column 34 of .: Expected to find ')'.
   â•·
23 â”‚         if (instance.guildBanner case final value?) 'guildBanner': value,
   â”‚                                  ^^^^
   â•µ
[SEVERE] Failed after 73ms
Failed to update packages.
~/git/gallusys/snpit_guild_app/guild_api  â€¹feature/314-2*â€º $                                                                                                              1 â†µ

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/3/5 15:34:54*

**æŠ½å‡ºã—æ•´ç†ã—ã¦ã„ã‚‹**

Dart 3ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ãŒã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¦ã„ã‚‹ã‚ˆã†ã ã€‚`json_serializable` 6.5.0 ã§ã®æ–°æ©Ÿèƒ½ã‹ã‚‚ã—ã‚Œãªã„ã€‚

**èª¿æŸ»ä¸­ã®ç’°å¢ƒ**

Dart 3ã®æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½ãŒã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¦ã„ã‚‹ã‚‚ã®ã®ã€ä½¿ç”¨ç’°å¢ƒãŒDart 3ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒé«˜ã„ã€‚

**ç’°å¢ƒã«é©å¿œã™ã‚‹æ–¹æ³•ã‚’æ¨¡ç´¢ä¸­**

å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®json_serializableã‚’å‚ç…§ã—ã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚Dart 3.6.2ã¯Dart 3ã«å¯¾å¿œã—ã¦ã„ã‚‹ãŒã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã€‚

**æ–°ã—ã„æ§‹æ–‡ã®ç†è§£ã¨å¯¾å¿œ**

Dart 3ã®æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€å¤ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚„ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ãŒå¯¾å¿œã§ãã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ã“ã‚Œã«ã©ã†å¯¾å¿œã™ã‚‹ã‹è€ƒãˆã¦ã„ã‚‹ã€‚

**ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’æ¢ã‚‹**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç’°å¢ƒã¯Dart 3ã®å¯èƒ½æ€§ãŒé«˜ã„ãŒã€å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰ãƒ©ãƒ³ãƒŠãƒ¼ã¾ãŸã¯ã‚³ãƒ¼ãƒ‰ãŒæ–°ã—ã„æ§‹æ–‡ã«å¯¾å¿œã—ã¦ã„ãªã„ã“ã¨ãŒåŸå› ã®å¯èƒ½æ€§ãŒé«˜ã„ã¨è¦‹ã¦ã„ã‚‹ã€‚

**æ–°æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–**

åˆ†æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã§æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã€json_serializableã‚’å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ä¸‹ã’ã¦æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãªã„ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã‚’æ¢ã‚‹ã€‚

**ç’°å¢ƒã®å¤‰å‹•ã‚’æ¢ã‚‹**

ã‚¢ãƒŠãƒªã‚·ã‚¹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°ã‚„ã€æ–°ã—ã„Dartãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ä¸Šã¸ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ã‚’è©¦ã¿ã‚‹ã€‚ã¾ãŸã¯ã€json_serializableã‚’å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™æ–¹æ³•ã‚‚æ¤œè¨ä¸­ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/3/5 15:34:52*

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€**`json_serializable` ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§è¿½åŠ ã•ã‚ŒãŸã€Œãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ã€ï¼ˆDart 3 ä»¥é™ã®æ–°æ©Ÿèƒ½ï¼‰** ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã«èµ·ãã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€

```dart
if (instance.itemName case final value?) 'itemName': value,
```

ã®ã‚ˆã†ãªã€Œ`case final value?`ã€ã¨ã„ã†è¨˜æ³•ãŒã€Dart 3 å¯¾å¿œã®æ–°ã—ã„ `json_serializable` ãŒç”Ÿæˆã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã™ãŒã€

1. **Dart/Flutter ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³** ã‚„  
2. **`dart format`ï¼ˆã‚‚ã—ãã¯ `dart_style`ï¼‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**  
3. **ãƒ“ãƒ«ãƒ‰æ™‚ã®ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**  

ãªã©ãŒå¤ã„ã¨ã€ã“ã®æ§‹æ–‡ã‚’æ­£ã—ããƒ‘ãƒ¼ã‚¹ã§ããšã€

> Expected to find ')'.

ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

---

## 1. ãªãœã€Œ`case final value?`ã€ãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã‹

`json_serializable` ã¯ null ãƒã‚§ãƒƒã‚¯ãªã©ã§ Dart 3 ã® **ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°** æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã¯ã˜ã‚ã¦ã„ã¾ã™ã€‚  
- Dart 3 ã®æ­£å¼ãƒªãƒªãƒ¼ã‚¹å¾Œã€`json_serializable` 6.5.4 ä»¥é™ã‚ãŸã‚Šã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°è¨˜æ³•ãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ  
- ã“ã®çµæœã€**Dart 3 ã«å®Œå…¨å¯¾å¿œã—ã¦ã„ãªã„ç’°å¢ƒ** ã ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚„ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãŒã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™

---

## 2. å¯¾å‡¦æ–¹æ³•

### æ–¹æ³•A: Dart/Flutter ã‚’ **Dart 3 ä»¥é™** ã®ç’°å¢ƒã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹

- Flutter 3.10.x / Dart 3.0.0 ä»¥é™ãªã©ã€æ–°ã—ã„ç’°å¢ƒã‚’ä½¿ã†  
- `fvm use 3.10.5`ï¼ˆä¾‹ï¼‰ãªã©ã§ Dart 3 ãŒå…¥ã£ã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã‚’åˆ©ç”¨  
- `analysis_options.yaml` ãªã©ã§ `enable-experiment` ãŒä¸è¦ã«ãªã‚Šã¾ã—ãŸãŒã€**è¨€èªãƒãƒ¼ã‚¸ãƒ§ãƒ³** ãŒ 3.0 ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

ã‚‚ã—ã€Œã‚‚ã†æ—¢ã« Flutter 3.10 ä»¥ä¸Šã€Dart 3.0 ä»¥ä¸Šã‚’ä½¿ã£ã¦ã„ã‚‹ã€ãªã‚‰ã€ã•ã‚‰ã« **`dart_style` (ã‚ã‚‹ã„ã¯ `dart format`) ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³** ã‚„ **`build_runner`** ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚  
- `flutter pub global deactivate dart_style` â†’ `flutter pub global activate dart_style` ã—ã¦æ›´æ–°ã™ã‚‹  
- ãƒ«ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ `guild_api/` ã® `dev_dependencies` ã§ `build_runner: ^2.4.6` ä»¥ä¸Šãªã©ã‚’æŒ‡å®šã™ã‚‹

ã“ã‚Œã«ã‚ˆã‚Šã€ŒDart 3 çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ã€ã‚’å—ã‘ä»˜ã‘ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚¨ãƒ©ãƒ¼ãŒæ¶ˆãˆã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚

---

### æ–¹æ³•B: `json_serializable` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤ã„ã‚‚ã®ã«å›ºå®šã™ã‚‹

ã‚‚ã— Dart 3 ã«ã¾ã å¯¾å¿œã§ããªã„ï¼ˆã‚‚ã—ãã¯ã‚³ãƒ¼ãƒ‰ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’ä½¿ã„ãŸããªã„ï¼‰å ´åˆã¯ã€**`json_serializable` ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³** ã«ä¸‹ã’ã‚‹ã¨ã„ã†åŠ›æŠ€ã‚‚å¯èƒ½ã§ã™ã€‚

- ä¾‹: `json_serializable: ^6.5.2` ã‚ãŸã‚Šã«å›ºå®šã™ã‚‹ã¨ã€æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ã‚’ç”Ÿæˆã—ãªã„ã¯ãšã§ã™  
- ãŸã ã—ã€ä»–ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ `build_runner` ã¨ã®å…¼ã­åˆã„ã§æ•´åˆãŒå–ã‚Œã‚‹ã‹ç¢ºèªãŒå¿…è¦  
- OpenAPI Generator ã®ç”Ÿæˆå…ˆ `pubspec.yaml` ã‚’ç·¨é›† or `projectPubspecPath` ã§ã€ŒæŒ‡å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã«åˆ‡ã‚Šæ›¿ãˆã‚‹

```yaml
# guild_api/pubspec.yaml (ã¾ãŸã¯ projectPubspecPath ã§æŒ‡å®šã—ãŸ pubspec)
dev_dependencies:
  build_runner: ^2.4.5
  json_serializable: 6.5.2
```

ã“ã†ã™ã‚‹ã¨ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ§‹æ–‡ã‚’ä½¿ã‚ãªã„ã‚³ãƒ¼ãƒ‰ãŒå‡ºåŠ›ã•ã‚Œã‚‹ãŸã‚ã€ä¸Šè¨˜ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

---

### æ–¹æ³•C: ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ã‚’ä¸Šæ›¸ã/æ‰‹å‹•ä¿®æ­£ (éæ¨å¥¨)

ä¸€å¿œã€ã€Œç”Ÿæˆå¾Œã® `.json_serializable.g.part` ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚’æ‰‹å‹•ã§ç·¨é›†ã—ã¦

```diff
- if (instance.itemName case final value?) 'itemName': value,
+ if (instance.itemName != null) 'itemName': instance.itemName,
```

ã®ã‚ˆã†ã«ç›´ã™ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€**å†ç”Ÿæˆã®ãŸã³ã«ã‚„ã‚Šç›´ã—** ã«ãªã‚‹ã®ã§éæ¨å¥¨ã§ã™ã€‚

---

## 3. ãŠã™ã™ã‚ã®æµã‚Œ

1. **Flutter / Dart ã‚’æœ€æ–° (3.x) ã«åˆã‚ã›ã‚‹** â†’ `dart --version` ç­‰ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã€3.0.0 ä»¥ä¸Šã‹ãƒã‚§ãƒƒã‚¯  
2. `build_runner` / `dart_style` / `json_serializable` ã‚’ **æœ€æ–° or äº’æ›ãƒãƒ¼ã‚¸ãƒ§ãƒ³** ã«æ›´æ–°  
3. ç”Ÿæˆå…ˆã®ã‚³ãƒ¼ãƒ‰å«ã‚ã€`fvm flutter pub get` ã‚„ `flutter pub run build_runner build` ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã‹è©¦ã™  

ã‚‚ã—ã©ã†ã—ã¦ã‚‚ Dart 3 ã«ä¸Šã’ã‚‰ã‚Œãªã„ãªã‚‰ã€**æ–¹æ³•B** ã§ `json_serializable` ã‚’å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å›ºå®šã—ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒå°å…¥ã•ã‚Œã‚‹å‰ã®ä¸–ä»£ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒç„¡é›£ã§ã™ã€‚

---
