# 削除APIのレスポンス設計

Date: 2024-10-11

---

## 👤 User
*2024-10-11 17:10:00*

削除 API 空振り null を返すべきか？

---

## 🤖 Assistant
*2024-10-11 17:10:18*

削除 API で、対象のデータが存在しない場合に何を返すかについては、設計方針や仕様に依存しますが、一般的に以下のような対応が考えられます。

### 1. **HTTP 404 Not Found を返す**
   - **理由**: リソースが見つからない場合は、そのことをクライアントに通知するのが一般的です。削除対象のリソースが存在しないことを 404 ステータスコードで伝えることで、クライアントは適切に対応できます。

   **レスポンス例**:
   ```json
   {
     "error": "Resource not found"
   }
   ```

### 2. **204 No Content を返す**
   - **理由**: 削除 API が成功し、削除対象がすでに存在しない場合も「成功」として扱いたい場合に使用されます。この場合、リソースが存在しないことはエラーではなく、削除処理が不要であったと解釈します。レスポンスボディは空にします。

   **レスポンス例**:
   ```http
   HTTP/1.1 204 No Content
   ```

### 3. **200 OK と null を返す**
   - **理由**: 既存の API 設計が常に何らかの結果（null でもよい）を返すことを要求している場合、リソースが見つからなかったことを示すために null を返すことも考えられます。

   **レスポンス例**:
   ```json
   {
     "data": null
   }
   ```

### 結論
削除対象が存在しない場合、REST API の一般的な設計では **404 Not Found** を返すことが推奨されます。ただし、削除の成功として解釈したい場合は **204 No Content** も適切です。どのような動作が求められているかによって選択するのが良いでしょう。

---
