# Swift URL ã‚¯ã‚¨ãƒªæŠ½å‡º

æ—¥ä»˜: 2023-09-05

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/9/5 14:56:04*

Swift ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®æŠ½å‡º

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/9/5 14:56:35*

Swiftã§URLã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªæ–¹æ³•ã¯ã€`URLComponents`ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã¯ã€URLã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æŠ½å‡ºã—ã€ãã‚Œã‚‰ã‚’è¾æ›¸ã¨ã—ã¦å–å¾—ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼š

```swift
import Foundation

func extractQueryParameters(from urlString: String) -> [String: String]? {
    guard let url = URL(string: urlString), let components = URLComponents(url: url, resolvingAgainstBaseURL: true), let queryItems = components.queryItems else {
        return nil
    }
    
    var parameters: [String: String] = [:]
    for queryItem in queryItems {
        if let value = queryItem.value {
            parameters[queryItem.name] = value
        }
    }
    return parameters
}

let urlString = "https://example.com/page?param1=value1&param2=value2"
if let params = extractQueryParameters(from: urlString) {
    for (key, value) in params {
        print("\(key): \(value)")
    }
}
```

ã“ã®é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æŒ‡å®šã•ã‚ŒãŸURLæ–‡å­—åˆ—ã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—ã—ã€ãã‚Œã‚‰ã‚’è¾æ›¸å½¢å¼ã§è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ã®URLæ–‡å­—åˆ—`"https://example.com/page?param1=value1&param2=value2"`ã‹ã‚‰ã€ä»¥ä¸‹ã®å‡ºåŠ›ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

```
param1: value1
param2: value2
```

ã“ã®æ–¹æ³•ã¯ã€URLãŒæ­£ã—ãå½¢æˆã•ã‚Œã¦ã„ã‚‹ã¨ä»®å®šã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã™ã‚‹éš›ã¯ã€ã•ã‚‰ãªã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/9/5 15:11:57*

ãŸã¨ãˆã°ã€param1ãŒvalue1ã§ã‚ã‚Šparam2ãŒvalue2ã§ã‚ã‚‹ã¨ã„ã†æ­£è¦è¡¨ç¾ã¯ã©ã†ã‚„ã£ã¦æ›¸ã‘ã°ã„ã„ã®ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/9/5 15:12:48*

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ­£è¦è¡¨ç¾ã‚’æ›¸ãéš›ã«ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã¨å€¤ã®æ§‹é€ ã«æ³¨ç›®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`param1=value1&param2=value2` ã®ã‚ˆã†ãªå½¢å¼ã‚’ã¨ã‚‹å ´åˆã®æ­£è¦è¡¨ç¾ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```
(?<param1>param1)=(?<value1>[^&]+)(&(?<param2>param2)=(?<value2>[^&]+))?
```

ã“ã®æ­£è¦è¡¨ç¾ã‚’è©³ã—ãè§£èª¬ã™ã‚‹ã¨ï¼š

1. `(?<param1>param1)`ï¼š`param1`ã¨ã„ã†æ–‡å­—åˆ—ã‚’ãƒãƒƒãƒã—ã€ãã‚Œã‚’`param1`ã¨ã„ã†åå‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚
2. `=`ï¼šã‚¤ã‚³ãƒ¼ãƒ«è¨˜å·ã‚’ãƒãƒƒãƒã—ã¾ã™ã€‚
3. `(?<value1>[^&]+)`ï¼šã‚¢ãƒ³ãƒ‘ãƒ¼ã‚µãƒ³ãƒ‰(&)ã¾ã§ã®ä»»æ„ã®æ–‡å­—åˆ—ã‚’ãƒãƒƒãƒã—ã€ãã‚Œã‚’`value1`ã¨ã„ã†åå‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚
4. `(&(?<param2>param2)=(?<value2>[^&]+))?`ï¼šã“ã®éƒ¨åˆ†ã¯`param2=value2`ã‚’ãƒãƒƒãƒã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ãŒã€`?`ãŒã¤ã„ã¦ã„ã‚‹ã®ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚`param2=value2`ãŒURLã«å­˜åœ¨ã—ãªã„å ´åˆã§ã‚‚ãƒãƒƒãƒã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€Swiftã§ä¸Šè¨˜ã®æ­£è¦è¡¨ç¾ã‚’ä½¿ç”¨ã—ã¦ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹æ–¹æ³•ã§ã™ï¼š

```swift
import Foundation

let urlString = "https://example.com/page?param1=value1&param2=value2"
let pattern = "(?<param1>param1)=(?<value1>[^&]+)(&(?<param2>param2)=(?<value2>[^&]+))?"

if let regex = try? NSRegularExpression(pattern: pattern, options: []) {
    let range = NSRange(urlString.startIndex..<urlString.endIndex, in: urlString)
    if let match = regex.firstMatch(in: urlString, options: [], range: range) {
        let param1Range = match.range(withName: "value1")
        if param1Range.location != NSNotFound, let range = Range(param1Range, in: urlString) {
            let param1Value = String(urlString[range])
            print("param1: \(param1Value)")
        }
        
        let param2Range = match.range(withName: "value2")
        if param2Range.location != NSNotFound, let range = Range(param2Range, in: urlString) {
            let param2Value = String(urlString[range])
            print("param2: \(param2Value)")
        }
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯`param1=value1&param2=value2`ã®å½¢å¼ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã‚‚ã®ã§ã™ã€‚é©å®œæ­£è¦è¡¨ç¾ã‚’å¤‰æ›´ã—ã¦ã€ç•°ãªã‚‹å½¢å¼ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

---
