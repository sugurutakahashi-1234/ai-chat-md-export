# アプリ起動方法設定

日付: 2025-01-12

---

## 👤 ユーザー
*2025/01/12 23:00:40*

AndoridとiOSアプリを開発しているが自分のアプリを他のアプリから直接開けるようにしたい

---

## 🤖 アシスタント
*2025/01/12 23:01:15*

他のアプリから自分のアプリを直接開けるようにするには、iOSでは「**Universal Links**」または「**カスタムURLスキーム**」、Androidでは「**Deep Links**」を設定します。それぞれのプラットフォームでの実装方法を説明します。

---

### iOS: Universal Links または カスタム URL スキーム

#### 1. **Universal Links（推奨）**
Universal Linksを使うと、特定のURLがタップされたときにSafariではなくアプリが開きます。

**設定手順:**
1. **Associated Domainsを有効化:**
   - Xcodeのプロジェクト設定で「Signing & Capabilities」タブを開き、「Associated Domains」を追加します。
   - `applinks:example.com` の形式でドメインを指定します（例: `applinks:yourdomain.com`）。

2. **`apple-app-site-association`ファイルを用意:**
   - `apple-app-site-association`という名前のJSONファイルをウェブサーバーのルートディレクトリに配置します。
   - サンプル:
     ```json
     {
       "applinks": {
         "apps": [],
         "details": [
           {
             "appID": "TEAMID.com.example.app",
             "paths": [ "/path/to/your/content/*" ]
           }
         ]
       }
     }
     ```
   - **注意:** `TEAMID`はApple DeveloperアカウントのTeam IDを使用。

3. **アプリ側で対応:**
   - `SceneDelegate`に以下のメソッドを実装します:
     ```swift
     func scene(_ scene: UIScene, continue userActivity: NSUserActivity) {
         guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
               let url = userActivity.webpageURL else { return }
         // URLを処理するロジック
     }
     ```

#### 2. **カスタムURLスキーム**
よりシンプルに設定できるが、Universal Linksより柔軟性が低い。

**設定手順:**
1. **URLスキームを追加:**
   - Xcodeの「Info.plist」に以下のキーを追加:
     ```xml
     <key>CFBundleURLTypes</key>
     <array>
       <dict>
         <key>CFBundleURLSchemes</key>
         <array>
           <string>yourapp</string>
         </array>
       </dict>
     </array>
     ```
   - ここで設定したスキーム（例: `yourapp`）が、他のアプリで`yourapp://`として呼び出せます。

2. **アプリ側で対応:**
   - AppDelegateに以下のメソッドを実装します:
     ```swift
     func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
         // URLを処理するロジック
         return true
     }
     ```

---

### Android: Deep Links または App Links

#### 1. **Deep Links**
他のアプリやブラウザからアプリを起動できます。

**設定手順:**
1. **AndroidManifest.xmlに設定:**
   ```xml
   <activity android:name=".YourActivity">
       <intent-filter>
           <action android:name="android.intent.action.VIEW" />
           <category android:name="android.intent.category.DEFAULT" />
           <category android:name="android.intent.category.BROWSABLE" />
           <data android:scheme="https" android:host="example.com" android:pathPrefix="/path" />
       </intent-filter>
   </activity>
   ```

2. **アクティビティで処理:**
   - `onCreate`でインテントを受け取る:
     ```kotlin
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         val intentData: Uri? = intent?.data
         // intentDataを使ってURLを処理
     }
     ```

#### 2. **App Links（推奨）**
Android Deep Linksのセキュアな拡張。ドメインの所有権を証明することで、Googleがアプリへのリンクを優先します。

**設定手順:**
1. **`assetlinks.json`を配置:**
   - サーバーのルートに`.well-known/assetlinks.json`を配置します。
   - サンプル:
     ```json
     [
       {
         "relation": ["delegate_permission/common.handle_all_urls"],
         "target": {
           "namespace": "android_app",
           "package_name": "com.example.app",
           "sha256_cert_fingerprints": [
             "YOUR_APP_SIGNATURE_SHA256"
           ]
         }
       }
     ]
     ```

2. **AndroidManifest.xmlでApp Linksを設定:**
   ```xml
   <activity android:name=".YourActivity">
       <intent-filter android:autoVerify="true">
           <action android:name="android.intent.action.VIEW" />
           <category android:name="android.intent.category.DEFAULT" />
           <category android:name="android.intent.category.BROWSABLE" />
           <data android:scheme="https" android:host="example.com" />
       </intent-filter>
   </activity>
   ```

---

### テスト方法
- **Universal Links / App Links:**
  - URLをタップしてアプリが起動するか確認。
- **カスタムスキーム / Deep Links:**
  - 他のアプリやブラウザから設定したスキームを使用してリンクを開く。

これで、他のアプリから自分のアプリを開けるようになります！どちらのプラットフォームでも、Universal LinksとApp Linksの使用を推奨します。

---
