# æ±ç”¨çš„ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°View

æ—¥ä»˜: 2023-05-31

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:18:35*

SwiftUIã§å…¨ã¦ã®ç”»é¢ã§ä½¿ãˆã‚‹ã‚ˆã†ãªæ±ç”¨çš„ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°Viewã‚’ä½œã‚ŠãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:19:41*

SwiftUIã‚’ä½¿ã£ã¦æ±ç”¨çš„ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°Viewã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€ã¾ãšã¯ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¯ã€`ProgressView`ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã—ã¾ã™ã€‚

```swift
import SwiftUI

struct LoadingView: View {
    var body: some View {
        ProgressView()
            .progressViewStyle(CircularProgressViewStyle(tint: .blue))
            .scaleEffect(2)
    }
}
```

ä¸Šè¨˜ã®`LoadingView`ã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã«å¯¾ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½æ€§ã¯å°‘ãªã„ã§ã™ãŒã€éå¸¸ã«ç´ æ—©ãç°¡å˜ã«ä½œæˆã§ãã‚‹ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ã¯éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚

ã•ã‚‰ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆã€è‡ªåˆ†ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã«ã€å›è»¢ã™ã‚‹ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
import SwiftUI

struct LoadingView: View {
    @State private var isAnimating: Bool = false

    var body: some View {
        GeometryReader { (geometry: GeometryProxy) in
            ForEach(0..<5) { index in
                Group {
                    Circle()
                        .frame(width: geometry.size.width / 5, height: geometry.size.height / 5)
                        .scaleEffect(!self.isAnimating ? 1 - CGFloat(index) / 5 : 0.2 + CGFloat(index) / 5)
                        .offset(y: geometry.size.width / 10 - CGFloat(index) * geometry.size.height / 5)
                }.frame(width: geometry.size.width, height: geometry.size.height)
            }
        }
        .aspectRatio(1, contentMode: .fit)
        .rotationEffect(!self.isAnimating ? .degrees(0) : .degrees(360))
        .animation(Animation.timingOut(withDuration: 2.0, curve: .linear).repeatForever(autoreverses: false))
        .onAppear {
            self.isAnimating = true
        }
    }
}
```

ä¸Šè¨˜ã®`LoadingView`ã§ã¯ã€5ã¤ã®å††ã‚’æ™‚é–“å·®ã§æ‹¡å¤§ç¸®å°ã•ã›ã€å…¨ä½“ã‚’å›è»¢ã•ã›ã‚‹ã“ã¨ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®Viewã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ã©ã®ç”»é¢ã‹ã‚‰ã§ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä½•ã‹ã®å‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹é–“ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ç¤ºã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦`LoadingView`ã‚’è¡¨ç¤ºã§ãã¾ã™ï¼š

```swift
import SwiftUI

struct ContentView: View {
    @State private var isLoading: Bool = false

    var body: some View {
        ZStack {
            // Main content
            // ...

            // Loading indicator
            if isLoading {
                LoadingView()
            }
        }
        .onAppear {
            startLoading()
        }
    }

    private func startLoading() {
        isLoading = true

        // Simulate a long running task
        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {
            isLoading = false

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:19:45*

ã¤ã¥ã

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:20:00*

```swift
        }
    }
}
```

ä¸Šè¨˜ã®`ContentView`ã§ã¯ã€`isLoading`ã¨ã„ã†`@State`å¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚ä½•ã‹ã®å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹å‰ã«`isLoading`ã‚’`true`ã«ã‚»ãƒƒãƒˆã—ã€å‡¦ç†ãŒçµ‚ã‚ã£ãŸã‚‰`false`ã«ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã§ã€å‡¦ç†ä¸­ã®ã¿ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€SwiftUIã‚’ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°Viewã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯éå¸¸ã«ç°¡å˜ã§ã€éå¸¸ã«åŠ¹ç‡çš„ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ä½“é¨“ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:20:30*

ã‚ã‚‹ç”»é¢ã®Viewã§APIãƒªã‚¯ã‚¹ãƒˆã‚’ViewModelçµŒç”±ã§è¡Œã£ãŸå ´åˆã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã›ãŸã„å ´åˆã¯ã©ã†ã‚„ã£ã¦æ›¸ãã®ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:21:17*

ViewModelã‚’ä½¿ã£ã¦APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã€ãã®é–“ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã€ã¾ãšViewModelå†…ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¤‰åŒ–ã«å¿œã˜ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã«ãã®ä¸€ä¾‹ã‚’ç¤ºã—ã¾ã™ï¼š

```swift
import SwiftUI
import Combine

// ViewModel
class ExampleViewModel: ObservableObject {
    @Published var isLoading: Bool = false
    var cancellables = Set<AnyCancellable>()
    
    func loadData() {
        isLoading = true
        // simulate API request
        Just("Data")
            .delay(for: .seconds(2), scheduler: DispatchQueue.main)
            .sink(receiveCompletion: { _ in },
                  receiveValue: { _ in
                    self.isLoading = false
            })
            .store(in: &cancellables)
    }
}

// Loading View
struct LoadingView: View {
    var body: some View {
        ProgressView()
            .progressViewStyle(CircularProgressViewStyle(tint: .blue))
            .scaleEffect(2)
    }
}

// Content View
struct ContentView: View {
    @ObservedObject var viewModel = ExampleViewModel()

    var body: some View {
        ZStack {
            // Main content
            VStack {
                Button("Load Data") {
                    viewModel.loadData()
                }
            }
            
            // Loading indicator
            if viewModel.isLoading {
                LoadingView()
            }
        }
    }
}
```

ã“ã®ä¾‹ã§ã¯ã€`ExampleViewModel`ã«`isLoading`ã¨ã„ã†`@Published`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚`loadData`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚ŒãŸæ™‚ã«`isLoading`ã‚’`true`ã«ã‚»ãƒƒãƒˆã—ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ãŸã‚‰`false`ã«ã‚»ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€`ContentView`ã§ã¯ã€ã“ã®`viewModel`ã‚’`@ObservedObject`ã¨ã—ã¦ç›£è¦–ã—ã€`isLoading`ã®å€¤ã«å¿œã˜ã¦`LoadingView`ã‚’è¡¨ç¤ºã¾ãŸã¯éè¡¨ç¤ºã«ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:22:29*

è¤‡æ•°ã®ç”»é¢ã§ã€ä½¿ã„ãŸã„å ´åˆã¯ã©ã†ã™ã‚Œã°è‰¯ã„ã‹ï¼Ÿ å„ç”»é¢ã§isLoadingã™ã‚‹ã®ã¯å¤§å¤‰ã ã¨æ€ã†

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:23:21*

ãã®ã‚ˆã†ãªå ´åˆã€`EnvironmentObject`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚`EnvironmentObject`ã‚’ä½¿ã†ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã§ãã¾ã™ã€‚

ã“ã“ã§ã¯`LoadingState`ã¨ã„ã†æ–°ãŸãªã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ï¼š

```swift
import SwiftUI
import Combine

// Loading State
class LoadingState: ObservableObject {
    @Published var isLoading: Bool = false
}

// ViewModel
class ExampleViewModel: ObservableObject {
    @EnvironmentObject var loadingState: LoadingState
    var cancellables = Set<AnyCancellable>()
    
    func loadData() {
        loadingState.isLoading = true
        // simulate API request
        Just("Data")
            .delay(for: .seconds(2), scheduler: DispatchQueue.main)
            .sink(receiveCompletion: { _ in },
                  receiveValue: { _ in
                    self.loadingState.isLoading = false
            })
            .store(in: &cancellables)
    }
}

// Loading View
struct LoadingView: View {
    @EnvironmentObject var loadingState: LoadingState

    var body: some View {
        if loadingState.isLoading {
            ProgressView()
                .progressViewStyle(CircularProgressViewStyle(tint: .blue))
                .scaleEffect(2)
        }
    }
}

// Content View
struct ContentView: View {
    @ObservedObject var viewModel = ExampleViewModel()

    var body: some View {
        ZStack {
            // Main content
            VStack {
                Button("Load Data") {
                    viewModel.loadData()
                }
            }
            
            // Loading indicator
            LoadingView()
        }
    }
}
```

ãã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•æ™‚ã«`LoadingState`ã‚’`EnvironmentObject`ã¨ã—ã¦æ³¨å…¥ã—ã¾ã™ï¼š

```swift
@main
struct MyApp: App {
    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(LoadingState())
        }
    }
}
```

ã“ã‚Œã§ã€`LoadingState`ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±æœ‰ã•ã‚Œã€ã©ã®ç”»é¢ã§ã‚‚ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®çŠ¶æ…‹ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãªãŠã€`@EnvironmentObject`ã¯ãƒ“ãƒ¥ãƒ¼ã®éšå±¤ã®ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãŸã‚ã€æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸãƒ“ãƒ¥ãƒ¼ã‚„ç•°ãªã‚‹ç”»é¢ã§ã‚‚ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®çŠ¶æ…‹ã‚’ç°¡å˜ã«å‚ç…§ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:23:25*

ObservableObject ã§ @EnvironmentObject ã¯ä½¿ãˆãªã„ã§ã—ã‚‡ã†

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:24:08*

ãŠã£ã—ã‚ƒã‚‹ã¨ãŠã‚Šã§ã€`ObservableObject`ã¯`@EnvironmentObject`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ç›´æ¥ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚ã™ã¿ã¾ã›ã‚“ã€ç§ã®èª¬æ˜ã§æ··ä¹±ã‚’æ‹›ã„ã¦ã—ã¾ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã‚’è£œæ­£ã™ã‚‹ãŸã‚ã«ã€ViewModelãŒãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’æ“ä½œã™ã‚‹ãŸã‚ã«ã€`LoadingState`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ˜ç¤ºçš„ã«æ³¨å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€`ExampleViewModel`ã¨`ContentView`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ï¼š

```swift
// ViewModel
class ExampleViewModel: ObservableObject {
    var loadingState: LoadingState
    var cancellables = Set<AnyCancellable>()

    init(loadingState: LoadingState) {
        self.loadingState = loadingState
    }
    
    func loadData() {
        loadingState.isLoading = true
        // simulate API request
        Just("Data")
            .delay(for: .seconds(2), scheduler: DispatchQueue.main)
            .sink(receiveCompletion: { _ in },
                  receiveValue: { _ in
                    self.loadingState.isLoading = false
            })
            .store(in: &cancellables)
    }
}

// Content View
struct ContentView: View {
    @EnvironmentObject var loadingState: LoadingState
    @ObservedObject var viewModel: ExampleViewModel

    init(loadingState: LoadingState) {
        self.loadingState = loadingState
        self.viewModel = ExampleViewModel(loadingState: loadingState)
    }

    var body: some View {
        ZStack {
            // Main content
            VStack {
                Button("Load Data") {
                    viewModel.loadData()
                }
            }
            
            // Loading indicator
            LoadingView()
        }
    }
}
```

ã“ã®ã‚ˆã†ã«ã€ViewModelã®åˆæœŸåŒ–æ™‚ã«`LoadingState`ã‚’æ³¨å…¥ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨`viewModel.loadData()`ã‚’å‘¼ã³å‡ºã—ã€ãã‚ŒãŒ`LoadingState`ã®`isLoading`ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å…¨ã¦ã®ç”»é¢ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®çŠ¶æ…‹ã‚’ä¸€è²«ã—ã¦ç®¡ç†ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/5/31 21:24:28*

ContentView ã® initã«loadingStateã‚’æŒã£ã¦ã“ãªã„ã¨ã„ã‘ãªã„ã®ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/5/31 21:25:33*

ã”æŒ‡æ‘˜ã®é€šã‚Šã€ContentViewã®`init`ãƒ¡ã‚½ãƒƒãƒ‰ã§`loadingState`ã‚’å—ã‘å–ã‚‹ã“ã¨ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚`@EnvironmentObject`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ã†ã¨ã€ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ãã«è‡ªå‹•çš„ã«ãã®ç’°å¢ƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ³¨å…¥ã•ã‚Œã¾ã™ã€‚ãŸã ã—ã€`ExampleViewModel`ã«`LoadingState`ã‚’æ³¨å…¥ã™ã‚‹ãŸã‚ã«ã¯ã€æ˜ç¤ºçš„ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã§ãã¾ã™ï¼š

```swift
// ViewModel
class ExampleViewModel: ObservableObject {
    var loadingState: LoadingState
    var cancellables = Set<AnyCancellable>()

    init(loadingState: LoadingState) {
        self.loadingState = loadingState
    }
    
    func loadData() {
        loadingState.isLoading = true
        // simulate API request
        Just("Data")
            .delay(for: .seconds(2), scheduler: DispatchQueue.main)
            .sink(receiveCompletion: { _ in },
                  receiveValue: { _ in
                    self.loadingState.isLoading = false
            })
            .store(in: &cancellables)
    }
}

// Content View
struct ContentView: View {
    @EnvironmentObject var loadingState: LoadingState
    @ObservedObject var viewModel: ExampleViewModel

    var body: some View {
        ZStack {
            // Main content
            VStack {
                Button("Load Data") {
                    viewModel.loadData()
                }
            }
            
            // Loading indicator
            LoadingView()
        }
    }
    
    init() {
        self.viewModel = ExampleViewModel(loadingState: LoadingState())
    }
}
```

ã—ã‹ã—ã€ã“ã®æ–¹æ³•ã§ã¯æ–°ã—ã„`LoadingState`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ãŸã‚ã€ä»–ã®ãƒ“ãƒ¥ãƒ¼ã¨å…±æœ‰ã•ã‚Œã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€`ContentView`ã®`init`ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯æ–°ã—ã„`LoadingState`ã‚’ä½œæˆã›ãšã€ä»£ã‚ã‚Šã«`EnvironmentObject`ã‹ã‚‰æ³¨å…¥ã•ã‚Œã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```swift
// ViewModel
class ExampleViewModel: ObservableObject {
    var loadingState: LoadingState
    var cancellables = Set<AnyCancellable>()

    init(loadingState: LoadingState) {
        self.loadingState = loadingState
    }
    
    func loadData() {
        loadingState.isLoading = true
        // simulate API request
        Just("Data")
            .delay(for: .seconds(2), scheduler: DispatchQueue.main)
            .sink(receiveCompletion: { _ in },
                  receiveValue: { _ in
                    self.loadingState.isLoading = false
            })
            .store(in: &cancellables)
    }
}

// Content View
struct ContentView: View {
    @EnvironmentObject var loadingState: LoadingState
    @ObservedObject var viewModel: ExampleViewModel

    var body: some View {
        ZStack {
            // Main content
            VStack {
                Button("Load Data") {
                    viewModel.loadData()
                }
            }
            
            // Loading indicator
            LoadingView()
        }
        .onAppear {
            viewModel = ExampleViewModel(loadingState: loadingState)
        }
    }
}
```

ã“ã‚Œã§ã€`ContentView`ã¨ãã®ViewModelã¯åŒã˜`LoadingState`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±æœ‰ã—ã€å…¨ã¦ã®ãƒ“ãƒ¥ãƒ¼ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®çŠ¶æ…‹ã‚’ä¸€è²«ã—ã¦ç®¡ç†ã§ãã¾ã™ã€‚

---
