# ãƒ­ã‚°ã‚¤ãƒ³å¾Œãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—

æ—¥ä»˜: 2024-12-06

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/6 18:01:52*

flutterã§ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸå¾Œã«getUsersã‚’å‘¼ã‚“ã§ã€ãƒªã‚¹ãƒˆã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«å–å¾—ã—ãŸuserã‚’ä¿æŒã—ãŸã„ã€‚

import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';

class LoginPage extends StatelessWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Login')),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€ã‚¿ãƒ–ãƒšãƒ¼ã‚¸ã¸é·ç§»
            context.go('/map');
          },
          child: const Text('Login'),
        ),
      ),
    );
  }
}
# openapi (EXPERIMENTAL)
No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)

This Dart package is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0.0
- Generator version: 7.10.0
- Build package: org.openapitools.codegen.languages.DartDioClientCodegen

## Requirements

* Dart 2.15.0+ or Flutter 2.8.0+
* Dio 5.0.0+ (https://pub.dev/packages/dio)

## Installation & Usage

### pub.dev
To use the package from [pub.dev](https://pub.dev), please include the following in pubspec.yaml
```yaml
dependencies:
  openapi: 1.0.0
```

### Github
If this Dart package is published to Github, please include the following in pubspec.yaml
```yaml
dependencies:
  openapi:
    git:
      url: https://github.com/GIT_USER_ID/GIT_REPO_ID.git
      #ref: main
```

### Local development
To use the package from your local drive, please include the following in pubspec.yaml
```yaml
dependencies:
  openapi:
    path: /path/to/openapi
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```dart
import 'package:openapi/openapi.dart';


final api = Openapi().getDefaultApi();
final int id = 56; // int | The id of the user to retrieve

try {
    final response = await api.getUserById(id);
    print(response);
} catch on DioException (e) {
    print("Exception when calling DefaultApi->getUserById: $e\n");
}

```

## Documentation for API Endpoints

All URIs are relative to *https://jsonplaceholder.typicode.com*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
[*DefaultApi*](doc/DefaultApi.md) | [**getUserById**](doc/DefaultApi.md#getuserbyid) | **GET** /users/{id} | Get a user by ID
[*DefaultApi*](doc/DefaultApi.md) | [**getUsers**](doc/DefaultApi.md#getusers) | **GET** /users | Get a list of users


## Documentation For Models

 - [Error](doc/Error.md)
 - [User](doc/User.md)
 - [UserAddress](doc/UserAddress.md)
 - [UserAddressGeo](doc/UserAddressGeo.md)
 - [UserCompany](doc/UserCompany.md)


## Documentation For Authorization

Endpoints do not require authorization.


## Author

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/6 18:02:19*

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`getUsers` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—ã—ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä¿æŒã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€Flutterã®çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª `flutter_hooks` ã‚’åˆ©ç”¨ã—ã¦çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¤ã¤ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

### å®Œæˆã‚³ãƒ¼ãƒ‰

```dart
import 'dart:math';

import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:openapi/openapi.dart';

class LoginPage extends HookConsumerWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('Login')),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            try {
              // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—
              final users = await _fetchUsers();

              // ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ
              final randomUser = _selectRandomUser(users);

              // é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’çŠ¶æ…‹ã¨ã—ã¦ä¿æŒ (ä¾‹: Providerã‚’é€šã˜ã¦ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿æŒ)
              ref.read(userProvider.notifier).state = randomUser;

              // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€ã‚¿ãƒ–ãƒšãƒ¼ã‚¸ã¸é·ç§»
              context.go('/map');
            } catch (e) {
              // ã‚¨ãƒ©ãƒ¼å‡¦ç†
              ScaffoldMessenger.of(context).showSnackBar(
                SnackBar(content: Text('Failed to fetch users: $e')),
              );
            }
          },
          child: const Text('Login'),
        ),
      ),
    );
  }

  Future<List<User>> _fetchUsers() async {
    final api = Openapi().getDefaultApi();
    final response = await api.getUsers();
    return response.data ?? [];
  }

  User _selectRandomUser(List<User> users) {
    final randomIndex = Random().nextInt(users.length);
    return users[randomIndex];
  }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ç®¡ç†ç”¨ã®Provider
final userProvider = StateProvider<User?>((ref) => null);
```

### è§£èª¬

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã®å–å¾—**:
   - OpenAPI Generatorã§ç”Ÿæˆã•ã‚ŒãŸ`DefaultApi`ã‚¯ãƒ©ã‚¹ã®`getUsers`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`https://jsonplaceholder.typicode.com/users`ï¼‰ã‚’å©ãã¾ã™ã€‚

2. **ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ**:
   - Dartã®`Random`ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€å–å¾—ã—ãŸãƒªã‚¹ãƒˆã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’é¸æŠã—ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–ã‚Šå‡ºã—ã¾ã™ã€‚

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã®ä¿æŒ**:
   - `flutter_hooks`ã®`StateProvider`ã‚’ä½¿ç”¨ã—ã¦ã€é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿æŒã—ã¾ã™ã€‚ã“ã®çŠ¶æ…‹ã¯ä»–ã®ãƒšãƒ¼ã‚¸ã§ã‚‚å‚ç…§å¯èƒ½ã§ã™ã€‚

4. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
   - APIå‘¼ã³å‡ºã—ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã«å‚™ãˆã€`try-catch`ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’SnackBarã§è¡¨ç¤ºã—ã¾ã™ã€‚

5. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é·ç§»**:
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£å¸¸ã«é¸æŠã•ã‚Œã‚‹ã¨ã€`context.go('/map')`ã§æ¬¡ã®ãƒšãƒ¼ã‚¸ã«é·ç§»ã—ã¾ã™ã€‚

ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸå¾Œã«ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—ã—ã¦ä¿æŒã—ã€æ¬¡ã®ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹å‡¦ç†ãŒå®Ÿç¾ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/6 18:02:38*

dioã‚’ä½¿ã£ã¦ã»ã—ã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/6 18:03:03*

ä»¥ä¸‹ã¯ã€Dioã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã€ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦ä¿æŒã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

### å®Œæˆã‚³ãƒ¼ãƒ‰

```dart
import 'dart:math';

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:dio/dio.dart';
import 'package:go_router/go_router.dart';

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ç®¡ç†ç”¨ã®Provider
final userProvider = StateProvider<Map<String, dynamic>?>((ref) => null);

class LoginPage extends ConsumerWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: const Text('Login')),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            try {
              // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—
              final users = await _fetchUsers();

              // ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ
              final randomUser = _selectRandomUser(users);

              // é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’çŠ¶æ…‹ã¨ã—ã¦ä¿æŒ
              ref.read(userProvider.notifier).state = randomUser;

              // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€ã‚¿ãƒ–ãƒšãƒ¼ã‚¸ã¸é·ç§»
              context.go('/map');
            } catch (e) {
              // ã‚¨ãƒ©ãƒ¼å‡¦ç†
              ScaffoldMessenger.of(context).showSnackBar(
                SnackBar(content: Text('Failed to fetch users: $e')),
              );
            }
          },
          child: const Text('Login'),
        ),
      ),
    );
  }

  Future<List<Map<String, dynamic>>> _fetchUsers() async {
    try {
      final dio = Dio();
      final response = await dio.get('https://jsonplaceholder.typicode.com/users');

      if (response.statusCode == 200) {
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’è¿”ã™
        return List<Map<String, dynamic>>.from(response.data);
      } else {
        throw Exception('Failed to fetch users: ${response.statusCode}');
      }
    } catch (e) {
      throw Exception('Error fetching users: $e');
    }
  }

  Map<String, dynamic> _selectRandomUser(List<Map<String, dynamic>> users) {
    final randomIndex = Random().nextInt(users.length);
    return users[randomIndex];
  }
}
```

---

### ä¸»ãªå¤‰æ›´ç‚¹ã¨ãƒã‚¤ãƒ³ãƒˆ

1. **Dioã®ä½¿ç”¨**:
   - `Dio`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã€`https://jsonplaceholder.typicode.com/users`ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®`statusCode`ã‚’ç¢ºèªã—ã¦ã€æˆåŠŸæ™‚ã®ã¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã®å‹**:
   - Dioã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’`List<Map<String, dynamic>>`ã«å¤‰æ›ã—ã¦æ‰±ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ“ä½œãŒå¯èƒ½ã§ã™ã€‚

3. **ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã®ç®¡ç†**:
   - ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’Riverpodã®`StateProvider`ã§ç®¡ç†ã—ã¾ã™ã€‚ä»–ã®ãƒšãƒ¼ã‚¸ã§ã‚‚é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å‚ç…§å¯èƒ½ã§ã™ã€‚

4. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
   - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚„ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã«å‚™ãˆã€`try-catch`ã§ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼å†…å®¹ã¯SnackBarã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã—ã¾ã™ã€‚

---

### ã“ã®ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

ä»¥ä¸‹ã‚’`pubspec.yaml`ã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```yaml
dependencies:
  dio: ^5.0.0
  flutter_riverpod: ^2.0.0
  go_router: ^5.0.0
```

---

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
- ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç”»é¢ï¼ˆ`/map`ï¼‰ã§é¸æŠã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€`userProvider`ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚

---
