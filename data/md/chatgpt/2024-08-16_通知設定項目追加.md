# é€šçŸ¥è¨­å®šé …ç›®è¿½åŠ 

æ—¥ä»˜: 2024-08-16

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/08/16 18:17:48*

æ–°ç€æŠ•ç¨¿ ã®ã¿å®Ÿè£…ã—ãŸãŒåŒæ§˜ã«ä»–ã®è¨­å®šé …ç›®ã‚‚è¿½åŠ ã—ã¦ã»ã—ã„

// MARK: - View

public struct NotificationSettingView: View {
    @StateObject private var presenter: NotificationSettingPresenter

    public init() {
        _presenter = .init(wrappedValue: NotificationSettingPresenter())
    }

    public var body: some View {
        List {
            VStack(alignment: .leading) {
                Toggle(isOn: $presenter.isEnableNewPost) {
                    Text("æ–°è¦æŠ•ç¨¿")
                }
                .padding(.bottom, 4)
                Text("åŒã˜ãƒœãƒƒã‚¯ã‚¹ã®å‚åŠ è€…ãŒæ–°è¦æŠ•ç¨¿ã‚’ã—ãŸéš›ã«é€šçŸ¥ã•ã‚Œã¾ã™")
                    .font(.callout)
                    .foregroundStyle(.secondary)
            }
        }
        .navigationTitle("é€šçŸ¥è¨­å®š")
        .task {
            await presenter.onAppear()
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}

#Preview {
    NotificationSettingView()
}

@MainActor
final class NotificationSettingPresenter: ObservableObject {
    @Published var isEnableNewPost: Bool = true
    
    private let logDriver: any LogDriverProtocol

    init(logDriver: any LogDriverProtocol = LogDriver()) {
        self.logDriver = logDriver

        logDriver.initLog()
    }

    deinit {
        logDriver.deinitLog()
    }

    func onAppear() async {
        logDriver.onAppearLog()
    }

    func onDisappear() {
        logDriver.onDisappearLog()
    }
}


- æ–°ç€æŠ•ç¨¿
    - åŒã˜ãƒœãƒƒã‚¯ã‚¹ã®å‚åŠ è€…ãŒæ–°è¦æŠ•ç¨¿ã‚’ã—ãŸéš›ã«é€šçŸ¥ã•ã‚Œã¾ã™
- éŸ³å£°ãƒªãƒ—ãƒ©ã‚¤
    - éŸ³å£°ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    - ã‚¹ã‚¿ãƒ³ãƒ—ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™
- ãƒœãƒƒã‚¯ã‚¹å‚åŠ /é€€å‡º
    - ãƒœãƒƒã‚¯ã‚¹ã¸ã®å‚åŠ /é€€å‡ºãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™
- èª•ç”Ÿæ—¥é€šçŸ¥
    - ãƒœãƒƒã‚¯ã‚¹å‚åŠ è€…ã®èª•ç”Ÿæ—¥ã«é€šçŸ¥ã•ã‚Œã¾ã™
- é‹å–¶ã‹ã‚‰ãŠçŸ¥ã‚‰ã›
    - dayã‹ã‚‰æ–°æ©Ÿèƒ½ãªã©ã«é–¢ã™ã‚‹ãŠçŸ¥ã‚‰ã›ãŒé€šçŸ¥ã•ã‚Œã¾ã™

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/08/16 18:18:15*

User is working on implementing notification settings for various types, including "æ–°ç€æŠ•ç¨¿", "éŸ³å£°ãƒªãƒ—ãƒ©ã‚¤", "ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "ãƒœãƒƒã‚¯ã‚¹å‚åŠ /é€€å‡º", "èª•ç”Ÿæ—¥é€šçŸ¥", and "é‹å–¶ã‹ã‚‰ãŠçŸ¥ã‚‰ã›" in a SwiftUI view.

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2024/08/16 18:18:15*

Model set context updated.

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/08/16 18:18:15*

Hereâ€™s how you can extend your `NotificationSettingView` to include the additional notification settings:

```swift
// MARK: - View

public struct NotificationSettingView: View {
    @StateObject private var presenter: NotificationSettingPresenter

    public init() {
        _presenter = .init(wrappedValue: NotificationSettingPresenter())
    }

    public var body: some View {
        List {
            notificationToggleSection(
                isOn: $presenter.isEnableNewPost,
                title: "æ–°ç€æŠ•ç¨¿",
                description: "åŒã˜ãƒœãƒƒã‚¯ã‚¹ã®å‚åŠ è€…ãŒæ–°è¦æŠ•ç¨¿ã‚’ã—ãŸéš›ã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )
            
            notificationToggleSection(
                isOn: $presenter.isEnableVoiceReply,
                title: "éŸ³å£°ãƒªãƒ—ãƒ©ã‚¤",
                description: "éŸ³å£°ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            notificationToggleSection(
                isOn: $presenter.isEnableReaction,
                title: "ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
                description: "ã‚¹ã‚¿ãƒ³ãƒ—ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            notificationToggleSection(
                isOn: $presenter.isEnableJoinLeave,
                title: "ãƒœãƒƒã‚¯ã‚¹å‚åŠ /é€€å‡º",
                description: "ãƒœãƒƒã‚¯ã‚¹ã¸ã®å‚åŠ /é€€å‡ºãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            notificationToggleSection(
                isOn: $presenter.isEnableBirthday,
                title: "èª•ç”Ÿæ—¥é€šçŸ¥",
                description: "ãƒœãƒƒã‚¯ã‚¹å‚åŠ è€…ã®èª•ç”Ÿæ—¥ã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            notificationToggleSection(
                isOn: $presenter.isEnableAdminNotice,
                title: "é‹å–¶ã‹ã‚‰ãŠçŸ¥ã‚‰ã›",
                description: "dayã‹ã‚‰æ–°æ©Ÿèƒ½ãªã©ã«é–¢ã™ã‚‹ãŠçŸ¥ã‚‰ã›ãŒé€šçŸ¥ã•ã‚Œã¾ã™"
            )
        }
        .navigationTitle("é€šçŸ¥è¨­å®š")
        .task {
            await presenter.onAppear()
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }

    private func notificationToggleSection(isOn: Binding<Bool>, title: String, description: String) -> some View {
        VStack(alignment: .leading) {
            Toggle(isOn: isOn) {
                Text(title)
            }
            .padding(.bottom, 4)
            Text(description)
                .font(.callout)
                .foregroundStyle(.secondary)
        }
    }
}

// MARK: - Presenter

@MainActor
final class NotificationSettingPresenter: ObservableObject {
    @Published var isEnableNewPost: Bool = true
    @Published var isEnableVoiceReply: Bool = true
    @Published var isEnableReaction: Bool = true
    @Published var isEnableJoinLeave: Bool = true
    @Published var isEnableBirthday: Bool = true
    @Published var isEnableAdminNotice: Bool = true
    
    private let logDriver: any LogDriverProtocol

    init(logDriver: any LogDriverProtocol = LogDriver()) {
        self.logDriver = logDriver

        logDriver.initLog()
    }

    deinit {
        logDriver.deinitLog()
    }

    func onAppear() async {
        logDriver.onAppearLog()
    }

    func onDisappear() {
        logDriver.onDisappearLog()
    }
}

#Preview {
    NotificationSettingView()
}
```

This code adds the additional notification settings by creating a reusable `notificationToggleSection` function that handles the toggle and description text for each setting. The `NotificationSettingPresenter` is extended to include the properties for each notification type.

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/08/16 18:18:29*

notificationToggleSection ã¯ struct View ã«ã—ã¦ã»ã—ã„ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/08/16 18:18:39*

Hereâ€™s how you can refactor the `notificationToggleSection` into a separate `NotificationToggleSectionView` struct:

```swift
// MARK: - View

public struct NotificationSettingView: View {
    @StateObject private var presenter: NotificationSettingPresenter

    public init() {
        _presenter = .init(wrappedValue: NotificationSettingPresenter())
    }

    public var body: some View {
        List {
            NotificationToggleSectionView(
                isOn: $presenter.isEnableNewPost,
                title: "æ–°ç€æŠ•ç¨¿",
                description: "åŒã˜ãƒœãƒƒã‚¯ã‚¹ã®å‚åŠ è€…ãŒæ–°è¦æŠ•ç¨¿ã‚’ã—ãŸéš›ã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )
            
            NotificationToggleSectionView(
                isOn: $presenter.isEnableVoiceReply,
                title: "éŸ³å£°ãƒªãƒ—ãƒ©ã‚¤",
                description: "éŸ³å£°ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            NotificationToggleSectionView(
                isOn: $presenter.isEnableReaction,
                title: "ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
                description: "ã‚¹ã‚¿ãƒ³ãƒ—ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            NotificationToggleSectionView(
                isOn: $presenter.isEnableJoinLeave,
                title: "ãƒœãƒƒã‚¯ã‚¹å‚åŠ /é€€å‡º",
                description: "ãƒœãƒƒã‚¯ã‚¹ã¸ã®å‚åŠ /é€€å‡ºãŒã‚ã£ãŸå ´åˆã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            NotificationToggleSectionView(
                isOn: $presenter.isEnableBirthday,
                title: "èª•ç”Ÿæ—¥é€šçŸ¥",
                description: "ãƒœãƒƒã‚¯ã‚¹å‚åŠ è€…ã®èª•ç”Ÿæ—¥ã«é€šçŸ¥ã•ã‚Œã¾ã™"
            )

            NotificationToggleSectionView(
                isOn: $presenter.isEnableAdminNotice,
                title: "é‹å–¶ã‹ã‚‰ãŠçŸ¥ã‚‰ã›",
                description: "dayã‹ã‚‰æ–°æ©Ÿèƒ½ãªã©ã«é–¢ã™ã‚‹ãŠçŸ¥ã‚‰ã›ãŒé€šçŸ¥ã•ã‚Œã¾ã™"
            )
        }
        .navigationTitle("é€šçŸ¥è¨­å®š")
        .task {
            await presenter.onAppear()
        }
        .onDisappear {
            presenter.onDisappear()
        }
    }
}

// MARK: - Notification Toggle Section View

struct NotificationToggleSectionView: View {
    @Binding var isOn: Bool
    let title: String
    let description: String

    var body: some View {
        VStack(alignment: .leading) {
            Toggle(isOn: $isOn) {
                Text(title)
            }
            .padding(.bottom, 4)
            Text(description)
                .font(.callout)
                .foregroundStyle(.secondary)
        }
    }
}

// MARK: - Presenter

@MainActor
final class NotificationSettingPresenter: ObservableObject {
    @Published var isEnableNewPost: Bool = true
    @Published var isEnableVoiceReply: Bool = true
    @Published var isEnableReaction: Bool = true
    @Published var isEnableJoinLeave: Bool = true
    @Published var isEnableBirthday: Bool = true
    @Published var isEnableAdminNotice: Bool = true
    
    private let logDriver: any LogDriverProtocol

    init(logDriver: any LogDriverProtocol = LogDriver()) {
        self.logDriver = logDriver

        logDriver.initLog()
    }

    deinit {
        logDriver.deinitLog()
    }

    func onAppear() async {
        logDriver.onAppearLog()
    }

    func onDisappear() {
        logDriver.onDisappearLog()
    }
}

#Preview {
    NotificationSettingView()
}
```

In this refactored code:

- The `NotificationToggleSectionView` struct is created to encapsulate the toggle and description for each notification setting.
- The `NotificationSettingView` uses instances of `NotificationToggleSectionView` for each setting.

---
