# æ”¹å–„ã•ã‚ŒãŸGitãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

æ—¥ä»˜: 2023-11-13

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2023/11/14 0:30:00*

ä¿®æ­£ã—ãŸæ–¹ãŒã„ã„æ‰€ã‚’ä¿®æ­£ã—ã¦ã»ã—ã„ã€‚

# zsh prompt (git)
function rprompt-git-current-branch {
  local branch\_name st branch\_status

  if \[ ! -e  ".git" \]; then
    return
  fi

  branch\_name=`git rev-parse --abbrev-ref HEAD 2&gt; /dev/null`
  st=`git status 2&gt; /dev/null`

  if \[\[ -n `echo "$st" | grep "^nothing to"` \]\]; then
    branch\_status="${fg\[green\]}"
  elif \[\[ -n `echo "$st" | grep "^Untracked files"` \]\]; then
    branch\_status="${fg\[red\]}?"
  elif \[\[ -n `echo "$st" | grep "^Changes not staged for commit"` \]\]; then
    branch\_status="${fg\[red\]}+"
  elif \[\[ -n `echo "$st" | grep "^Changes to be committed"` \]\]; then
    branch\_status="${fg\[yellow\]}!"
  elif \[\[ -n `echo "$st" | grep "^rebase in progress"` \]\]; then
    echo "${fg\[red\]}!(no branch)"
    return
  else
    branch\_status="${fg\[blue\]}"
  fi

  echo "%{${branch\_status}%}\[$branch\_name\]%{${reset\_color}%}"
}

setopt prompt\_subst

RPROMPT='`rprompt-git-current-branch`'
PROMPT="%{${fg\[green\]}%}%m %n %~ $ %{${reset\_color}%}"

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2023/11/14 0:33:10*

ã“ã® `zsh` ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–¢æ•°ã®ã‚³ãƒ¼ãƒ‰ã¯ã€Gitãƒªãƒã‚¸ãƒˆãƒªã®çŠ¶æ…‹ã«å¿œã˜ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¡¨ç¤ºã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ãŒã€ã„ãã¤ã‹ã®æ”¹å–„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£æ¡ˆã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

1. **`.git` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒã‚§ãƒƒã‚¯æ–¹æ³•ã®æ”¹å–„**: ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ Git ãƒªãƒã‚¸ãƒˆãƒªã§ã‚ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€`.git` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å­˜åœ¨ç¢ºèªã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã‚Œã¯ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯æ­£ã—ãæ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã« `git rev-parse --is-inside-work-tree` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ Git ãƒªãƒã‚¸ãƒˆãƒªå†…ã‹ã©ã†ã‹ã‚’ã‚ˆã‚Šæ­£ç¢ºã«åˆ¤æ–­ã§ãã¾ã™ã€‚

2. **ã‚³ãƒãƒ³ãƒ‰ç½®æ›ã®æ”¹å–„**: ç¾åœ¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯å¤ã„ãƒãƒƒã‚¯ã‚¯ã‚ªãƒ¼ãƒˆ(`)ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒãƒ³ãƒ‰ç½®æ›ã‚’è¡Œã£ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ãƒã‚¹ãƒˆãŒè¤‡é›‘ã«ãªã‚‹ã¨èª­ã¿ã«ãããªã‚Šã¾ã™ã€‚ä»£ã‚ã‚Šã«ã€`$(...)` æ§‹æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€èª­ã¿ã‚„ã™ãã€ãƒã‚¹ãƒˆã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

3. **å¼•ç”¨ç¬¦ã®ä½¿ç”¨**: `git status` ã®å‡ºåŠ›ã‚’è§£æã™ã‚‹éš›ã«ã€å¼•ç”¨ç¬¦ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ãŸã‚ã€ç‰¹å®šã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¤‡æ•°ã®å˜èªã‚’å«ã‚€å ´åˆã«å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å‡ºåŠ›ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

4. **ã‚·ã‚§ãƒ«ã®å¤‰æ•°å±•é–‹**: ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãªã©ã®å¤‰æ•°ã‚’å±•é–‹ã™ã‚‹ãŸã‚ã« `%{...%}` æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯æ­£ã—ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä»£ã‚ã‚Šã« `${...}` æ§‹æ–‡ã‚’ä½¿ã†ã¹ãã§ã™ã€‚

ä»¥ä¸‹ã«ã€ä¸Šè¨˜ã®æ”¹å–„ç‚¹ã‚’åæ˜ ã—ãŸä¿®æ­£ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

```zsh
# zsh prompt (git)
function rprompt-git-current-branch {
  local branch_name st branch_status

  if [[ "$(git rev-parse --is-inside-work-tree 2> /dev/null)" != "true" ]]; then
    return
  fi

  branch_name=$(git rev-parse --abbrev-ref HEAD 2> /dev

---
