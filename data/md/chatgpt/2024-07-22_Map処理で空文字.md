# Mapå‡¦ç†ã§ç©ºæ–‡å­—

æ—¥ä»˜: 2024-07-22

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/22 18:35:53*

ã‹ã‚‰æ–‡å­—ã‚’è¿”ã—ã¦ã»ã—ã„

        // é›»è©±ç•ªå·ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        $rawPhoneNumber
            .debounce(for: 0.2, scheduler: RunLoop.main) // ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¾Œã€å°‘ã—å¾…æ©Ÿã™ã‚‹
            .removeDuplicates() // é‡è¤‡å€¤ã‚’å‰Šé™¤
            .map { \[weak self\] rawPhoneNumber in
                // å›½éš›é›»è©±ç•ªå·ã«å¤‰æ›ã§ããªã„å½¢å¼ã§ã‚ã‚Œã° nil ã¨ã™ã‚‹
                try? self?.dependency.phoneNumberDriver.formatRawPhoneNumberAsInternational(country: .japan, rawPhoneNumber: rawPhoneNumber)
            }
            .assign(to: &$validatedPhoneNumber)

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/22 18:36:03*

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯Swiftã®Combineãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦ã€é›»è©±ç•ªå·ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡Œã†å‡¦ç†ã§ã™ã€‚ä»¥ä¸‹ã¯ãã®ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã®è§£èª¬ã§ã™ã€‚

```swift
// é›»è©±ç•ªå·ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
$rawPhoneNumber
    .debounce(for: 0.2, scheduler: RunLoop.main) // ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¾Œã€0.2ç§’å¾…æ©Ÿã™ã‚‹
    .removeDuplicates() // é‡è¤‡ã™ã‚‹å€¤ã‚’å‰Šé™¤
    .map { [weak self] rawPhoneNumber in
        // å›½éš›é›»è©±ç•ªå·ã«å¤‰æ›ã§ããªã„å½¢å¼ã§ã‚ã‚Œã° nil ã¨ã™ã‚‹
        try? self?.dependency.phoneNumberDriver.formatRawPhoneNumberAsInternational(country: .japan, rawPhoneNumber: rawPhoneNumber)
    }
    .assign(to: &$validatedPhoneNumber) // çµæœã‚’ $validatedPhoneNumber ã«å‰²ã‚Šå½“ã¦ã‚‹
```

### è©³ç´°ãªè§£èª¬:

1. **$rawPhoneNumber**
    - ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸç”Ÿã®é›»è©±ç•ªå·ã‚’ä¿æŒã™ã‚‹ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã§ã™ã€‚

2. **debounce(for: 0.2, scheduler: RunLoop.main)**
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã‚’å®Œäº†ã™ã‚‹ã¾ã§0.2ç§’å¾…æ©Ÿã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã‚’å®Œäº†

---
