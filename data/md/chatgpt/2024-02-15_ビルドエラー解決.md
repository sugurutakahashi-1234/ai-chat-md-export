# ビルドエラー解決

日付: 2024-02-15

---

## 👤 ユーザー
*2024/2/16 1:31:44*

ビルドが通らないので間違えを探してほしい


import PackageDescription

// Ref: 【Swift】Package.swiftのdependenciesをタイプセーフに扱う https://qiita.com/SNQ-2001/items/ed068414747e28999415
private extension PackageDescription.Target.Dependency {
    /// Third party SDK
    static let playbook: Self = .product(name: "Playbook", package: "playbook-ios")
    static let playbookUI: Self = .product(name: "PlaybookUI", package: "playbook-ios")

    // TODO: PlaybookSnapshot によるテスト
    // static let playbookSnapshot: Self = .product(name: "PlaybookSnapshot", package: "playbook-ios")
    
    /// DISample target
    static let domainLayer: Self = "DomainLayer"
    static let presentationLayerDependencies: [Self] = [
        "LicensePresentation",
    ]
}

private extension PackageDescription.Target.PluginUsage {
    static let licensesPlugin: Self = .plugin(name: "LicensesPlugin", package: "LicensesPlugin")
}

private enum SourcesPath {
    static let appLayer = "./Sources/App/"
    static let domainLayer = "./Sources/Domain/"
    static let presentationLayer = "./Sources/Presentation/"
    static let frameworkLayer = "./Sources/Framework/"
}

let package = Package(
    name: "DISampleAppPackage",
    defaultLocalization: "ja",
    platforms: [
        .iOS(.v17),
        .macOS(.v14),
    ],
    products: [
        // App
        .library(name: "Production", targets: ["ProductionApp"]),
        .library(name: "Develop", targets: ["DevelopApp"]),
        .library(name: "UICatalog", targets: ["UICatalogApp"]),
    ],
    dependencies: [
        // Libraries
        .package(url: "https://github.com/playbook-ui/playbook-ios.git", from: "0.3.5"),

        // Plugins
        .package(url: "https://github.com/maiyama18/LicensesPlugin", from: "0.1.6"),
    ],
    targets: [
        // App layer
        .target(
            name: "ProductionApp",
            dependencies: [],
            path: SourcesPath.appLayer + "Production"
        ),
        .target(
            name: "DevelopApp",
            dependencies: [],
            path: SourcesPath.appLayer + "Develop"
        ),
        .target(
            name: "UICatalogApp",
            dependencies: [
                .playbook,
                .playbookUI,
            ],
            path: SourcesPath.appLayer + "UICatalog"
        ),
        
        // Domain layer
        .target(
            name: "DomainLayer",
            dependencies: [],
            path: SourcesPath.domainLayer
        ),

        // Presentation layer
        .target(
            name: "CorePresentation",
            dependencies: [
                .domainLayer,
            ],
            path: SourcesPath.presentationLayer + "Core"
        ),
        
        .target(
            name: "LicensePresentation",
            dependencies: [
                .domainLayer,
                "LoggerFramework",
                "LicenseFramework",
            ],
            path: SourcesPath.presentationLayer + "License"
        ),

        // Framework layer
        .target(
            name: "CoreFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "Core",
            plugins: [
                .licensesPlugin,
            ]
        ),

        .target(
            name: "LoggerFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "Logger"
        ),
        
        .target(
            name: "LicenseFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "License",
            plugins: [
                .licensesPlugin,
            ]
        ),
    ]
)

---

## 🤖 アシスタント
*2024/2/16 1:32:40*

Swiftの`Package.swift`ファイルを見ると、正しく構成されているように見えますが、ビルドが通らない原因を特定するには、ビルド時のエラーメッセージが必要です。ただし、コードを確認して気づいた点についてフィードバックを提供できます。

1. **依存関係の指定**: `dependencies`に`playbook-ios`と`LicensesPlugin`が正しく記載されています。これらのバージョンがプロジェクトの要件を満たしているか確認してください。

2. **ターゲットの依存関係**: `.playbook`と`.playbookUI`は`UICatalogApp`ターゲットで正しく使用されています。`DomainLayer`や他のフレームワーク層とプレゼンテーション層のターゲットの依存関係も適切に設定されているように見えます。

3. **プラグインの使用**: `LicensesPlugin`は`CoreFramework`と`LicenseFramework`ターゲットでプラグインとして使用されています。これは正しい使用法ですが、プラグインが正しく設定されているか、またプロジェクトで期待通りに動作するかを確認してください。

4. **パスの指定**: ソースファイルのパスは明確に指定されています。これらのパスが実際のディレクトリ構造と一致しているかを確認してください。特に、`SourcesPath`で指定されたパスが正しいかどうかを見直してください。

5. **コメントアウトされた依存関係**: `PlaybookSnapshot`の依存関係がコメントアウトされています。もしこれが必要な依存関係であれば、コメントアウトを解除し、適切に設定する必要があります。

6. **Swiftのバージョンとプラットフォームの互換性**: `.iOS(.v17), .macOS(.v14)`で指定されたプラットフォームのバージョンが、使用しているSwiftのバージョンと互換性があるかを確認してください。また、これらのバージョンがプロジェクトの要件に合っているかも確認してください。

エラーメッセージを共有していただければ、より具体的な解決策を提供できるかもしれません。ビルドエラーの詳細に基づいて、特定の問題点に対処するためのアドバイスを提供できます。

---
