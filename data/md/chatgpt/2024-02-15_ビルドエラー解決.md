# ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼è§£æ±º

æ—¥ä»˜: 2024-02-15

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/2/16 1:31:44*

ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‰ãªã„ã®ã§é–“é•ãˆã‚’æ¢ã—ã¦ã»ã—ã„


import PackageDescription

// Ref: ã€Swiftã€‘Package.swiftã®dependenciesã‚’ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ã«æ‰±ã† https://qiita.com/SNQ-2001/items/ed068414747e28999415
private extension PackageDescription.Target.Dependency {
    /// Third party SDK
    static let playbook: Self = .product(name: "Playbook", package: "playbook-ios")
    static let playbookUI: Self = .product(name: "PlaybookUI", package: "playbook-ios")

    // TODO: PlaybookSnapshot ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ
    // static let playbookSnapshot: Self = .product(name: "PlaybookSnapshot", package: "playbook-ios")
    
    /// DISample target
    static let domainLayer: Self = "DomainLayer"
    static let presentationLayerDependencies: [Self] = [
        "LicensePresentation",
    ]
}

private extension PackageDescription.Target.PluginUsage {
    static let licensesPlugin: Self = .plugin(name: "LicensesPlugin", package: "LicensesPlugin")
}

private enum SourcesPath {
    static let appLayer = "./Sources/App/"
    static let domainLayer = "./Sources/Domain/"
    static let presentationLayer = "./Sources/Presentation/"
    static let frameworkLayer = "./Sources/Framework/"
}

let package = Package(
    name: "DISampleAppPackage",
    defaultLocalization: "ja",
    platforms: [
        .iOS(.v17),
        .macOS(.v14),
    ],
    products: [
        // App
        .library(name: "Production", targets: ["ProductionApp"]),
        .library(name: "Develop", targets: ["DevelopApp"]),
        .library(name: "UICatalog", targets: ["UICatalogApp"]),
    ],
    dependencies: [
        // Libraries
        .package(url: "https://github.com/playbook-ui/playbook-ios.git", from: "0.3.5"),

        // Plugins
        .package(url: "https://github.com/maiyama18/LicensesPlugin", from: "0.1.6"),
    ],
    targets: [
        // App layer
        .target(
            name: "ProductionApp",
            dependencies: [],
            path: SourcesPath.appLayer + "Production"
        ),
        .target(
            name: "DevelopApp",
            dependencies: [],
            path: SourcesPath.appLayer + "Develop"
        ),
        .target(
            name: "UICatalogApp",
            dependencies: [
                .playbook,
                .playbookUI,
            ],
            path: SourcesPath.appLayer + "UICatalog"
        ),
        
        // Domain layer
        .target(
            name: "DomainLayer",
            dependencies: [],
            path: SourcesPath.domainLayer
        ),

        // Presentation layer
        .target(
            name: "CorePresentation",
            dependencies: [
                .domainLayer,
            ],
            path: SourcesPath.presentationLayer + "Core"
        ),
        
        .target(
            name: "LicensePresentation",
            dependencies: [
                .domainLayer,
                "LoggerFramework",
                "LicenseFramework",
            ],
            path: SourcesPath.presentationLayer + "License"
        ),

        // Framework layer
        .target(
            name: "CoreFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "Core",
            plugins: [
                .licensesPlugin,
            ]
        ),

        .target(
            name: "LoggerFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "Logger"
        ),
        
        .target(
            name: "LicenseFramework",
            dependencies: [
                .domainLayer
            ],
            path: SourcesPath.frameworkLayer + "License",
            plugins: [
                .licensesPlugin,
            ]
        ),
    ]
)

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/2/16 1:32:40*

Swiftã®`Package.swift`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã¨ã€æ­£ã—ãæ§‹æˆã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‰ãªã„åŸå› ã‚’ç‰¹å®šã™ã‚‹ã«ã¯ã€ãƒ“ãƒ«ãƒ‰æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¿…è¦ã§ã™ã€‚ãŸã ã—ã€ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦æ°—ã¥ã„ãŸç‚¹ã«ã¤ã„ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã§ãã¾ã™ã€‚

1. **ä¾å­˜é–¢ä¿‚ã®æŒ‡å®š**: `dependencies`ã«`playbook-ios`ã¨`LicensesPlugin`ãŒæ­£ã—ãè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

2. **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ä¾å­˜é–¢ä¿‚**: `.playbook`ã¨`.playbookUI`ã¯`UICatalogApp`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§æ­£ã—ãä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚`DomainLayer`ã‚„ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å±¤ã¨ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ä¾å­˜é–¢ä¿‚ã‚‚é©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚

3. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½¿ç”¨**: `LicensesPlugin`ã¯`CoreFramework`ã¨`LicenseFramework`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯æ­£ã—ã„ä½¿ç”¨æ³•ã§ã™ãŒã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã€ã¾ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æœŸå¾…é€šã‚Šã«å‹•ä½œã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

4. **ãƒ‘ã‚¹ã®æŒ‡å®š**: ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯æ˜ç¢ºã«æŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ‘ã‚¹ãŒå®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ç‰¹ã«ã€`SourcesPath`ã§æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ãŒæ­£ã—ã„ã‹ã©ã†ã‹ã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚

5. **ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸä¾å­˜é–¢ä¿‚**: `PlaybookSnapshot`ã®ä¾å­˜é–¢ä¿‚ãŒã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã—ã“ã‚ŒãŒå¿…è¦ãªä¾å­˜é–¢ä¿‚ã§ã‚ã‚Œã°ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã—ã€é©åˆ‡ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

6. **Swiftã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®äº’æ›æ€§**: `.iOS(.v17), .macOS(.v14)`ã§æŒ‡å®šã•ã‚ŒãŸãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã€ä½¿ç”¨ã—ã¦ã„ã‚‹Swiftã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨äº’æ›æ€§ãŒã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã¾ãŸã€ã“ã‚Œã‚‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«åˆã£ã¦ã„ã‚‹ã‹ã‚‚ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…±æœ‰ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€ã‚ˆã‚Šå…·ä½“çš„ãªè§£æ±ºç­–ã‚’æä¾›ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã«åŸºã¥ã„ã¦ã€ç‰¹å®šã®å•é¡Œç‚¹ã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã§ãã¾ã™ã€‚

---
