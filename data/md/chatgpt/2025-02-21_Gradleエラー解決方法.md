# Gradleã‚¨ãƒ©ãƒ¼è§£æ±ºæ–¹æ³•

æ—¥ä»˜: 2025-02-21

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2025/02/21 19:04:41*

fvm flutter run ã‚’å®Ÿè¡Œã—ãŸã‚‰Androidã¯ã“ã†ãªã£ãŸã€‚
è§£æ±ºæ–¹æ³•ã‚’ã•ãŒã—ã¦ã»ã—ã„

1: Task failed with an exception.
-----------
* Where:
Build file '/Users/sugurutakahashi/git/gallusys/snpit_guild_app/android/app/build.gradle' line: 43

* What went wrong:
A problem occurred evaluating project ':app'.
&gt; path may not be null or empty string. path='null'

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.
&gt; Get more help at https://help.gradle.org.
==============================================================================

2: Task failed with an exception.
-----------
* Where:
Build file '/Users/sugurutakahashi/git/gallusys/snpit_guild_app/android/app/build.gradle' line: 43

* What went wrong:
A problem occurred evaluating project ':app'.
&gt; path may not be null or empty string. path='null'

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.
&gt; Get more help at https://help.gradle.org.
==============================================================================

BUILD FAILED in 506ms
Running Gradle task 'assembleDebug'...                             621ms
Error: Gradle task assembleDebug failed with exit code 1


```
import com.github.triplet.gradle.androidpublisher.ReleaseStatus

plugins {
    id "com.android.application"
    id "kotlin-android"
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id "dev.flutter.flutter-gradle-plugin"
    id "com.github.triplet.play"
}

def keystorePropertiesFile = rootProject.file("keystore.properties")
def keystoreProperties = new Properties()
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

android {
    namespace = "ae.zealnova.snpitguild"
    compileSdk = 35
    // Ref: https://developer.android.com/build/releases/gradle-plugin
    ndkVersion = "27.0.12077973"

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdk = flutter.minSdkVersion
        targetSdk = 35 // for image_cropper
        versionCode = flutter.versionCode
        versionName = flutter.versionName
    }

    signingConfigs {
        release {
            keyAlias keystoreProperties['keyAlias']
            keyPassword keystoreProperties['keyPassword']
            storeFile file(keystoreProperties['storeFile'])
            storePassword keystoreProperties['storePassword']
        }
    }

    flavorDimensions "env"
    productFlavors {
        prod {
            applicationId "ae.zealnova.snpitguild"
            dimension "env"
            resValue "string", "app_name", "SNPIT Guild"
            manifestPlaceholders = [mapsApiKey: "AIzaSyBFJYhvOgi2n_QFnNzldylSsNSzOIbDV0A"]
        }
        dev {
            applicationId "ae.zealnova.snpitguild.dev"
            dimension "env"
            resValue "string", "app_name", "Guild dev"
            manifestPlaceholders = [mapsApiKey: "AIzaSyCiB4_g4T__x5ZyhD3Dt4f6Prs-Spls9q8"]
        }
    }

    buildTypes {
        release {
            signingConfig = signingConfigs.release
        }
    }

    play {
        releaseStatus.set(ReleaseStatus.DRAFT)
        serviceAccountCredentials = rootProject.file(keystoreProperties['serviceAccountFile'])
    }
}

flutter {
    source = "../.."
}
```

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2025/02/21 19:04:58*

**ä¿®æ­£ã®æ¤œè¨**

flutter runãŒãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¦ã„ã‚‹ã€‚`serviceAccountCredentials`ã®å€¤ãŒ`null`ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚`keystoreProperties['serviceAccountFile']`ã®å€¤ã‚’`null`ã«ã™ã‚‹ã¨ã€`path`ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã€‚è§£æ±ºç­–ã¯ã€`serviceAccountCredentials`ã®å‰Šé™¤ã¾ãŸã¯`keystore.properties`ã®æ­£ã—ã„ãƒ‘ã‚¹è¨­å®šã€‚

**ãƒ‘ã‚¹è¨­å®šã®è¦‹ç›´ã—**

`serviceAccountPath`ã‚’å®šç¾©ã—ã€å­˜åœ¨ã™ã‚‹å ´åˆã¯`serviceAccountCredentials`ã‚’æ›´æ–°ã—ã¦ã„ã‚‹ã€‚å¿…è¦ãªã„å ´åˆã¯å‚ç…§ã‚’å‰Šé™¤ã—ã€`keystore.properties`ã§ç›´æ¥è¨­å®šã™ã‚‹æ–¹æ³•ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã€‚

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2025/02/21 19:04:58*

Gradle ã®ã‚¨ãƒ©ãƒ¼ã€Œpath may not be null or empty string. path='null'ã€ã¯ã€åŸºæœ¬çš„ã«

```gradle
serviceAccountCredentials = rootProject.file(keystoreProperties['serviceAccountFile'])
```

ã§æ¸¡ã—ã¦ã„ã‚‹ãƒ‘ã‚¹ãŒ nullï¼ˆã¾ãŸã¯ç©ºæ–‡å­—åˆ—ï¼‰ã«ãªã£ã¦ã„ã‚‹ã‹ã‚‰ç™ºç”Ÿã—ã¾ã™ã€‚  
ã¤ã¾ã‚Š `keystoreProperties['serviceAccountFile']` ãŒæ­£ã—ãèª­ã¿è¾¼ã‚ã¦ã„ãªã„ï¼ˆå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ï¼‰ã“ã¨ãŒåŸå› ã§ã™ã€‚

---

## ç¢ºèªã™ã‚‹ãƒã‚¤ãƒ³ãƒˆ

1. **`keystore.properties` ã« `serviceAccountFile` ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ**  
   ä»¥ä¸‹ã®ã‚ˆã†ã« `serviceAccountFile` ã®ã‚­ãƒ¼ãŒå­˜åœ¨ã—ãªã„ã¨ã€ä¸Šè¨˜ã®ã‚ˆã†ã« `null` ãŒè¿”ã£ã¦ã—ã¾ã„ã¾ã™ã€‚
   ```properties
   # keystore.properties ã®ä¸€ä¾‹
   storeFile=../app.jks
   storePassword=******
   keyAlias=******
   keyPassword=******
   
   # ã“ã‚ŒãŒãªã„ã¨ serviceAccountFile ãŒ null ã«ãªã‚‹
   serviceAccountFile=path/to/your-service-account.json
   ```
   ã‚‚ã—ã¾ã ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ã—ã¦ãŠã‚‰ãšã€Play ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¨ã®é€£æºãŒä¸è¦ã§ã‚ã‚Œã°ã€`build.gradle` å´ã® `play` ãƒ–ãƒ­ãƒƒã‚¯è‡ªä½“ã‚’å‰Šé™¤ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã†ã®ã‚‚ã‚¢ãƒªã§ã™ã€‚

2. **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã«èª¤ã‚ŠãŒãªã„ã‹ï¼Ÿ**  
   çµ¶å¯¾ãƒ‘ã‚¹ã‚‚ã—ãã¯ç›¸å¯¾ãƒ‘ã‚¹ãŒæ­£ã—ã„ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚  
   `serviceAccountFile=../..` ã®ã‚ˆã†ã«ã—ã¦ã„ã‚‹å ´åˆã€ãã®ãƒ‘ã‚¹ãŒæœ¬å½“ã« `rootProject.file(...)` ã«ã¨ã£ã¦æ­£ã—ã„å ´æ‰€ã‹ã©ã†ã‹è¦ãƒã‚§ãƒƒã‚¯ã§ã™ã€‚

3. **åˆ¥ç’°å¢ƒã§å®šç¾©ã•ã‚Œã¦ã„ãŸã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¤–ã«ãªã£ã¦ã„ãªã„ã‹ï¼Ÿ**  
   ä¾‹ãˆã° `.gitignore` ã§ `keystore.properties` ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–ã—ã¦ã„ã‚‹å ´åˆã€ä»–ã®ç’°å¢ƒã‚„ä»–ã®äººãŒ clone ã—ãŸã¨ãã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªãã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  

---

## å¯¾å‡¦æ³•

### 1. keystore.properties ã«æ­£ã—ã„ serviceAccountFile ã‚’è¨­å®šã™ã‚‹

ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```properties
serviceAccountFile=../path/to/service-account.json
```

ãã—ã¦ `build.gradle` ã®

```gradle
serviceAccountCredentials = rootProject.file(keystoreProperties['serviceAccountFile'])
```

ã‚’ãã®ã¾ã¾ã«ã—ã¦ãŠã‘ã° OK ã§ã™ã€‚

### 2. ã¨ã‚Šã‚ãˆãš Play Publishing Plugin ã‚’ç„¡åŠ¹åŒ–ã—ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹

ã‚‚ã—ã¾ã  Play Store ã¸ã®å…¬é–‹ãªã©ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã†äºˆå®šãŒãªã„å ´åˆã¯ã€`build.gradle` ã® `play` ãƒ–ãƒ­ãƒƒã‚¯ã‚„ `com.github.triplet.play` ã‚’å‰Šé™¤/ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ãªã©ã—ã¦ã€ãã‚‚ãã‚‚ `serviceAccountCredentials` ã‚’è¨­å®šã—ãªã„ã‚ˆã†ã«ã™ã‚Œã°ãƒ“ãƒ«ãƒ‰ã¯é€šã‚Šã¾ã™ã€‚  
æœ€çµ‚çš„ã«å¿…è¦ã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ `keystore.properties` ã¨ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ­£ã—ãç”¨æ„ã—ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ã‚‡ã†ã€‚

---

## ã¾ã¨ã‚

- ã€Œpath may not be null or empty string. path='null'ã€ã¯ `rootProject.file(...)` ã«æ¸¡ã™ãƒ‘ã‚¹ãŒ `null` ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€‚  
- `keystoreProperties['serviceAccountFile']` ãŒæ­£ã—ã„ãƒ‘ã‚¹ã‚’è¿”ã™ã‚ˆã†ã« `keystore.properties` ã‚’æ•´å‚™ã™ã‚‹ã‹ã€Play Publisher ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®šã‚’ä¸€æ™‚çš„ã«å¤–ã™/ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’å›é¿ã™ã‚‹ã€‚

---
