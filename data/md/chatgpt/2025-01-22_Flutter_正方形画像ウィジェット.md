# Flutter 正方形画像ウィジェット

日付: 2025-01-22

---

## 👤 ユーザー
*2025/1/22 21:24:55*

FlutterでString?とsizeを渡して以下のような正方形のImageのウィジェットを返す共通のウィジェットを作りたい。96は固定ではなく比率で計算してほしい

imageUrl == null
                      ? CachedNetworkImage(
                          imageUrl: imageUrl!,
                          height: 120,
                          width: 120,
                          fit: BoxFit.cover,
                          progressIndicatorBuilder: (context, url, progress) =&gt;
                              const Center(
                            child: CircularProgressIndicator(),
                          ),
                          errorWidget: (context, url, error) {
                            return Container(
                              width: 120,
                              height: 120,
                              color: ColorToken.bgDark,
                              child: const Icon(
                                Icons.broken\_image\_outlined,
                                size: 96,
                                color: ColorToken.text,
                              ),
                            );
                          },
                        )
                      : Container(
                          width: 120,
                          height: 120,
                          color: ColorToken.bgDark,
                          child: const Icon(
                            Icons.hide\_image\_outlined,
                            size: 96,
                            color: ColorToken.text,
                          ),
                        ),

---

## 🤖 アシスタント
*2025/1/22 21:25:25*

以下のような共通ウィジェットを作成できます。このウィジェットでは、`size`を基にアイコンサイズやその他の比率が計算されます。

---

## 🤖 アシスタント
*2025/1/22 21:25:25*

{"name": "square\_image\_widget", "type": "code/dart", "content": "import 'package:flutter/material.dart';\\nimport 'package:cached\_network\_image/cached\_network\_image.dart';\\n\\nclass SquareImage extends StatelessWidget {\\n  final String? imageUrl;\\n  final double size;\\n\\n  const SquareImage({\\n    Key? key,\\n    required this.imageUrl,\\n    required this.size,\\n  }) : super(key: key);\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return imageUrl != null\\n        ? CachedNetworkImage(\\n            imageUrl: imageUrl!,\\n            height: size,\\n            width: size,\\n            fit: BoxFit.cover,\\n            progressIndicatorBuilder: (context, url, progress) =&gt; const Center(\\n              child: CircularProgressIndicator(),\\n            ),\\n            errorWidget: (context, url, error) {\\n              return \_placeholderContainer(size, Icons.broken\_image\_outlined);\\n            },\\n          )\\n        : \_placeholderContainer(size, Icons.hide\_image\_outlined);\\n  }\\n\\n  Widget \_placeholderContainer(double size, IconData icon) {\\n    return Container(\\n      width: size,\\n      height: size,\\n      color: ColorToken.bgDark,\\n      child: Icon(\\n        icon,\\n        size: size \* 0.8, // アイコンサイズを比率で計算\\n        color: ColorToken.text,\\n      ),\\n    );\\n  }\\n}\\n\\nclass ColorToken {\\n  static const Color bgDark = Colors.grey; // 背景色\\n  static const Color text = Colors.white; // アイコンの色\\n}"}

---

## 🔧 ツール
*2025/1/22 21:25:25*

{"result": "Successfully created text document 'square\_image\_widget' which will be referenced in all future messages with the unique identifier textdoc\_id: '6790e3ab17d0819196233d20decbdc98'", "textdoc\_id": "6790e3ab17d0819196233d20decbdc98", "name": "square\_image\_widget"}

---

## 🤖 アシスタント
*2025/1/22 21:25:25*

この共通ウィジェット `SquareImage` では、以下の点を考慮しています：

1. \*\*`size`を基にアイコンサイズを調整\*\*: `size \* 0.8`のように比率で計算しています。
2. \*\*`imageUrl`が`null`の場合\*\*: `Icons.hide\_image\_outlined`が表示されるプレースホルダーを返します。
3. \*\*エラーハンドリング\*\*: `CachedNetworkImage`の`errorWidget`でエラー発生時にアイコンを表示します。
4. \*\*色のカスタマイズ\*\*: `ColorToken`でテーマに合わせた背景色とアイコン色を定義。

`SquareImage`を使うと、`size`を簡単に変更して異なる大きさの正方形画像ウィジェットを再利用可能にできます。

---
