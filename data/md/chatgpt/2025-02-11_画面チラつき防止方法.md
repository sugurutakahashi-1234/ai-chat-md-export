# ÁîªÈù¢„ÉÅ„É©„Å§„ÅçÈò≤Ê≠¢ÊñπÊ≥ï

Êó•‰ªò: 2025-02-11

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:03:06*

‰ª•‰∏ã„ÅÆÈÉ®ÂàÜ„ÅÆÊõ¥Êñ∞„ÅßÁîªÈù¢„Åå„ÉÅ„É©„Å§„Åè„ÅÆ„Çí„ÇÑ„ÇÅ„Åü„ÅÑ‚Ä®‚Ä®final walletDate = data.$1;
            final nftsData = data.$2;
            if (nftsData == null || walletDate == null) {
              return const SizedBox.shrink();
            }
‚Ä®import 'package:auto_size_text/auto_size_text.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/design/color_pallet.dart';
import 'package:snpit_guild_app/domain/design/color_token.dart';
import 'package:snpit_guild_app/domain/nft.dart';
import 'package:snpit_guild_app/domain/nft_type.dart';
import 'package:snpit_guild_app/gen/assets.gen.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/users/nfts/get_nfts.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/wallet/get_wallet.dart';
import 'package:snpit_guild_app/presentation/widgets/square_image.dart';
import 'package:snpit_guild_app/utils/snack_bar_utils.dart';

final combinedWalletDataProvider = FutureProvider.autoDispose&lt;
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?,
    )&gt;((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});

class WalletPage extends HookConsumerWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    Future&lt;void&gt; onTapNft(Nft nft) async {
      // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑Áßª
    }

    Future&lt;void&gt; onTapWalletAddress(String walletAddress) async {
      await Clipboard.setData(ClipboardData(text: walletAddress));

      if (context.mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('$walletAddress copied to clipboard')),
        );
      }
    }

    Future&lt;void&gt; onRefresh() async {
      try {
        await ref.read(getNftsNotifierProvider.notifier).getNfts();
        await ref.read(getWalletNotifierProvider.notifier).getWallet();
      } on Exception catch (error) {
        if (context.mounted) {
          showErrorSnackBar(context, error);
        }
      }
    }

    final combinedWalletAsyncValue = ref.watch(combinedWalletDataProvider);

    useEffect(
      () {
        Future.microtask(() async {
          await onRefresh();
        });
        return null;
      },
      [],
    );

    return Scaffold(
      appBar: AppBar(title: const Text('Wallet')),
      body: RefreshIndicator(
        onRefresh: () async {
          await onRefresh();
        },
        color: ColorToken.primary,
        backgroundColor: ColorToken.bgLight,
        child: combinedWalletAsyncValue.when(
          data: (data) {
            final walletDate = data.$1;
            final nftsData = data.$2;
            if (nftsData == null || walletDate == null) {
              return const SizedBox.shrink();
            }

            final stpValue = walletDate.stpAmount ?? 0;
            final tmpWalletAddress = walletDate.walletAddress ?? '';
            final walletAddress =
                (tmpWalletAddress.isNotEmpty) ? tmpWalletAddress : 'No Address';

            final explorers = nftsData.explorers ?? [];
            final flags = nftsData.flags ?? [];

            final explorerNfts = explorers.map((explorer) {
              final nameParts = explorer.explorerName?.split(' #') ?? ['', ''];
              final name = nameParts[0];
              final number = nameParts.length &gt; 1 ? '#${nameParts[1]}' : '';

              return Nft(
                nftId: explorer.explorerId ?? '',
                tokenId: explorer.tokenId ?? '',
                name: name,
                number: number,
                imageUrl: explorer.explorerImage ?? '',
                nftType: NftType.explorer,
                explorer: explorer,
              );
            }).toList();

            final flagNfts = flags.map((flag) {
              final nameParts = flag.flagName?.split(' #') ?? ['', ''];
              final name = nameParts[0];
              final number = nameParts.length &gt; 1 ? '#${nameParts[1]}' : '';

              return Nft(
                nftId: flag.flagId ?? '',
                tokenId: flag.tokenId ?? '',
                name: name,
                number: number,
                imageUrl: flag.flagImage ?? '',
                nftType: NftType.flag,
                flag: flag,
              );
            }).toList();

            final allNfts = [
              ...explorerNfts,
              ...flagNfts,
            ];

            return SingleChildScrollView(
              physics: const AlwaysScrollableScrollPhysics(),
              child: Padding(
                padding: const EdgeInsets.all(24),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Column(
                      children: [
                        DecoratedBox(
                          decoration: BoxDecoration(
                            color: ColorToken.bg,
                            borderRadius: BorderRadius.circular(8),
                            border: Border.all(
                              color: ColorToken.border,
                            ),
                          ),
                          child: Padding(
                            padding: const EdgeInsets.all(24),
                            child: Column(
                              children: [
                                Image.asset(
                                  Assets.images.stpCoinIcon.path,
                                  width: 32,
                                  height: 32,
                                ),
                                const SizedBox(height: 14),
                                Row(
                                  mainAxisAlignment: MainAxisAlignment.center,
                                  crossAxisAlignment:
                                      CrossAxisAlignment.baseline,
                                  textBaseline: TextBaseline.alphabetic,
                                  children: [
                                    Flexible(
                                      child: AutoSizeText(
                                        stpValue.toString(),
                                        style: const TextStyle(
                                          fontSize: 32,
                                          fontWeight: FontWeight.bold,
                                        ),
                                        maxLines: 1,
                                        minFontSize: 1,
                                        overflow: TextOverflow.ellipsis,
                                      ),
                                    ),
                                    const SizedBox(width: 6),
                                    const Text(
                                      'STP',
                                      style: TextStyle(
                                        fontSize: 16,
                                      ),
                                    ),
                                  ],
                                ),
                                const SizedBox(height: 24),
                                GestureDetector(
                                  onTap: () async {
                                    await onTapWalletAddress(walletAddress);
                                  },
                                  child: Container(
                                    padding: const EdgeInsets.symmetric(
                                      horizontal: 10,
                                      vertical: 5,
                                    ),
                                    decoration: BoxDecoration(
                                      color: ColorPallet.gray800,
                                      borderRadius: BorderRadius.circular(4),
                                    ),
                                    child: Text(
                                      walletAddress,
                                      maxLines: 1,
                                      overflow: TextOverflow.ellipsis,
                                      style: const TextStyle(
                                        fontSize: 13,
                                        color: ColorToken.primaryDark,
                                      ),
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 16),

                    // NFTs
                    const Text(
                      'NFTs',
                      style: TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 16),

                    if (allNfts.isEmpty)
                      const Center(child: Text('No NFTs owned')),

                    Column(
                      children: allNfts.map((nft) {
                        return Padding(
                          padding: const EdgeInsets.only(bottom: 8),
                          child: ClipRRect(
                            borderRadius: BorderRadius.circular(8),
                            // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑ÁßªÔºà„É™„ÉÉ„Éó„É´„Å´Â§âÊõ¥„Åô„ÇãÔºâ
                            // child: Ink(
                            child: DecoratedBox(
                              decoration: BoxDecoration(
                                color: ColorToken.bg,
                                borderRadius: BorderRadius.circular(8),
                                border: Border.all(
                                  color: ColorToken.border,
                                ),
                              ),
                              child: InkWell(
                                borderRadius: BorderRadius.circular(8),
                                onTap: () async {
                                  await onTapNft(nft);
                                },
                                child: Padding(
                                  padding: const EdgeInsets.all(16),
                                  child: Row(
                                    children: [
                                      ClipRRect(
                                        borderRadius: BorderRadius.circular(4),
                                        child: SquareImage(
                                          imageUrl: nft.imageUrl,
                                          size: 56,
                                        ),
                                      ),
                                      const SizedBox(width: 16),
                                      Expanded(
                                        child: Column(
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: [
                                            Row(
                                              children: [
                                                Expanded(
                                                  child: Text(
                                                    nft.name,
                                                    maxLines: 1,
                                                    overflow:
                                                        TextOverflow.ellipsis,
                                                    style: const TextStyle(
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.bold,
                                                    ),
                                                  ),
                                                ),
                                                const SizedBox(width: 4),
                                                Text(
                                                  nft.number,
                                                  maxLines: 1,
                                                  overflow:
                                                      TextOverflow.ellipsis,
                                                  style: const TextStyle(
                                                    fontSize: 12,
                                                    fontWeight: FontWeight.bold,
                                                    color: ColorPallet.gray300,
                                                  ),
                                                ),
                                              ],
                                            ),
                                            const SizedBox(height: 12),
                                            Text(
                                              'TokenID: ${nft.tokenId}',
                                              maxLines: 1,
                                              overflow: TextOverflow.ellipsis,
                                              style: const TextStyle(
                                                fontSize: 12,
                                              ),
                                            ),
                                          ],
                                        ),
                                      ),
                                      // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑Áßª
                                      // const Icon(
                                      //   Icons.chevron_right,
                                      //   size: 32,
                                      //   color: ColorToken.text,
                                      // ),
                                    ],
                                  ),
                                ),
                              ),
                            ),
                          ),
                        );
                      }).toList(),
                    ),
                    const SizedBox(height: 24),
                  ],
                ),
              ),
            );
          },
          loading: () {
            return const Center(
              child: CircularProgressIndicator(),
            );
          },
          error: (error, _) {
            return Center(
              child: Text('Error: $error'),
            );
          },
        ),
      ),
    );
  }
}

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:04:08*

**Ëß£Ê±∫Á≠ñ„ÇíÊ§úË®é„Åô„Çã**

ÁêÜÁî±„ÇíÊé¢„Çä„Å§„Å§„ÄÅ„Ç≥„Éº„Éâ„ÇíË¶ãÁõ¥„Åó„ÄÅÂ∞ÜÊù•„ÅÆÂà©Áî®ËÄÖ„ÅÆ„Åü„ÇÅ„Å´„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÅÑ„Çã„ÄÇflutter„ÅÆÊßãÈÄ†„Å®‰Ωø„ÅÑÊñπ„ÇíÂ≠¶„Å∂ËâØ„ÅÑÊ©ü‰ºö„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÄÇ

**ÊñπÊ≥ï„ÇíÊ®°Á¥¢‰∏≠**

„ÄåFutureProvider„Äç„ÅÆËá™ÂãïÂªÉÊ£Ñ„ÇíËß£Èô§„Åó„Å¶„ÅÑ„Çã„ÄÇ„Éá„Éº„ÇøÁ¢∫Ë™ç„ÇíÂèñ„ÇäÈô§„Åç„ÄÅ„É≠„Éº„Ç´„É´„Çπ„ÉÜ„Éº„Éà„Å´„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å§„Å§„ÄÅÊñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÅåË™≠„ÅøËæº„Åæ„Çå„ÇãÈñì„Å´Êóß„Éá„Éº„Çø„ÇíË°®Á§∫„Åô„ÇãÊñπÊ≥ï„ÇíÊ§úË®é‰∏≠„ÄÇ

**„Éá„Éº„Çø„ÅÆÂèñ„ÇäÊâ±„ÅÑ„ÇíË¶ãÁõ¥„Åô**

`useEffect`„ÅÆ‰ΩøÁî®„Åå„Å°„Çâ„Å§„Åç„ÅÆÂéüÂõ†„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„Å®ÊÑü„Åò„ÄÅ`AsyncValue`„Çí‰Ωø„Å£„Å¶„Éê„ÉÉ„ÇØ„Ç∞„É©„Ç¶„É≥„Éâ„ÅßÊñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„ÇãÈñì„Å´ÊúÄÂæå„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„Åô„ÇãÊñπÊ≥ï„ÇíÊ§úË®é‰∏≠„ÄÇ

**„Éá„Éº„Çø„ÅÆÂèñ„ÇäÊâ±„ÅÑ„ÇíÂ∑•Â§´„Åô„Çã**

„Éá„Éº„Çø„ÅåÂ§â„Çè„Çâ„Å™„ÅÑÂ†¥Âêà„ÅØ„É°„É¢„É™„Å´‰øùÊåÅ„Åó„ÄÅ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Éî„Éä„Éº„ÇíË°®Á§∫„Åó„Å™„ÅÑ„Å™„Å©„ÅÆÂ∑•Â§´„ÇíÈÄö„Åò„Å¶„Å°„Çâ„Å§„Åç„ÇíÊúÄÂ∞èÈôê„Å´Êäë„Åà„Å§„Å§„ÄÅ„É≠„Éº„Éá„Ç£„É≥„Ç∞Âæå„ÅÆ„É¨„Ç§„Ç¢„Ç¶„Éà„ÇíË¶ãÁõ¥„Åó„Å¶„ÅÑ„Çã„ÄÇ

**ÊîπÂñÑÊñπÊ≥ï„ÇíÊ®°Á¥¢‰∏≠**

„Éá„Éº„Çø„Åå„É≠„Éº„Éâ‰∏≠„Å´Âè§„ÅÑ„Éá„Éº„Çø„ÇíË°®Á§∫„Åó„ÄÅÊñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÇíÈùûÂêåÊúü„ÅßË™≠„ÅøËæº„ÇÄ`AsyncValueWidget`„ÅÆ‰ΩøÁî®„Åå„Å°„Çâ„Å§„Åç„ÇíËªΩÊ∏õ„Åó„ÄÅ„É¶„Éº„Ç∂„Éº‰ΩìÈ®ì„ÇíÂêë‰∏ä„Åï„Åõ„ÇãÂä©„Åë„Å´„Å™„Çã„ÄÇ

**Êñ∞„Åó„ÅÑÊñπÊ≥ï„ÇíÊ®°Á¥¢‰∏≠**

Âè§„ÅÑ„Éá„Éº„Çø„Çí`useState`„ÇÑ`cacheTime`„ÄÅ`keepAlive`Â±ûÊÄß„Åß‰øùÊåÅ„Åó„ÄÅ„Å°„Çâ„Å§„Åç„ÇíÊ∏õ„Çâ„Åô„Åü„ÇÅ„ÅÆÊñ∞„Åó„ÅÑÊñπÊ≥ï„ÇíÊ§úË®é„Åó„Å¶„ÅÑ„Çã„ÄÇ

**Áä∂ÊÖã„Çí‰øùÊåÅ„Åô„ÇãÊñπÊ≥ï**

`keepAlive: true`„ÇÑ`autoDispose`„ÅÆ`maintainState: true`„ÇíÊ¥ªÁî®„Åó„Å¶„ÄÅ„Ç§„Éô„É≥„Éà„ÇÑ„Çø„Çπ„ÇØ„ÅåÂÆå‰∫Ü„Åô„Çã„Åæ„Åß„ÅÆÁä∂ÊÖã„ÇíÁ∂≠ÊåÅ„Åô„ÇãÊñπÊ≥ï„ÇíÊ§úË®é„Åó„Å¶„ÅÑ„Çã„ÄÇ

**Áä∂ÊÖã„ÇíÁ∂≠ÊåÅ„Åô„ÇãÂ∑•Â§´**

`useRef`„ÇíÁî®„ÅÑ„Å¶„Éá„Éº„Çø„ÇíÁ∂≠ÊåÅ„Åó„ÄÅ„É≠„Éº„Éâ‰∏≠„ÅÆUI„ÇíÂ∑•Â§´„Åô„Çã„Åì„Å®„Åß„Å°„Çâ„Å§„Åç„ÇíÊ∏õ„Çâ„Åó„Å¶„ÅÑ„Çã„ÄÇ

**„Ç™„Éó„Ç∑„Éß„É≥„ÇíË¶ãÊ•µ„ÇÅ„Çã**

`autoDispose`„ÇíÂ§ñ„Åô„Åã„ÄÅ`keepAlive`„Çí‰Ωø„Å£„Å¶Âè§„ÅÑ„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åô„ÇãÊñπÊ≥ï„ÇíËÄÉ„Åà„Å¶„ÅÑ„Çã„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„É™„É≠„Éº„Éâ‰∏≠„ÅÆ„É¶„Éº„Ç∂„Éº„ÅÆ‰ΩìÈ®ì„ÅåÊîπÂñÑ„Åï„Çå„Çã„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„ÄÇ

**„Éá„Éº„Çø„ÅÆÂãï„Åç„ÇíËøΩË∑°**

`useEffect`„ÇíÂ§ñ„Åô„Åã„ÄÅ„Ç™„É≥„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÅÆÂëº„Å≥Âá∫„Åó„ÇíÂà∂Âæ°„Åô„Çã„Åì„Å®„Åß„ÄÅ„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆ„Éá„Éº„Çø„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÊ∏õ„Çâ„ÅôÊñπÊ≥ï„ÇíÊ®°Á¥¢„Åó„Å¶„ÅÑ„Çã„ÄÇ

**„Å°„Çâ„Å§„Åç„ÅÆÂõûÈÅø**

„É¶„Éº„Ç∂„Éº„Åå`asyncValue`„ÅÆ`when`„Çí‰Ωø„Å£„Å¶„ÅÑ„Çã„Åë„Å©„ÄÅÂè§„ÅÑ„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åã„Çâ„ÄÅ`maybeWhen`„ÅÆÂà•„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíÊèêÊ°à„Åó„Å¶„ÅÑ„Çã„ÄÇ

**ÊèêÊ°à„Çí„Åæ„Å®„ÇÅ„Çã**

`autoDispose`„ÇíÂ§ñ„Åó„ÄÅ`useEffect`„ÇíÂèñ„ÇäÈô§„ÅÑ„Å¶„Éá„Éº„Çø„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÊ∏õ„Çâ„ÅôÊñπÊ≥ï„ÇíÊèêÊ°à„Åó„Å¶„ÅÑ„Çã„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„Éá„Éº„Çø„ÅÆ„É≠„Éº„Éâ„Å®„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÅÆÁÆ°ÁêÜ„Åå„Çà„ÇäÂäπÁéáÁöÑ„Å´„Å™„Çã„ÄÇ

**„Å°„Çâ„Å§„Åç„ÇíÊäë„Åà„Çã**

„Éá„Éº„Çø„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÊäë„Åà„Çã„Åü„ÇÅ„ÄÅ`useState`„ÇíÊ¥ªÁî®„Åó„Å¶„É≠„Éº„Ç´„É´Áä∂ÊÖãÂ§âÊï∞„Å´„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åó„ÄÅË™≠„ÅøËæº„Åø‰∏≠„Å´UI„ÇíÂ∑•Â§´„Åô„ÇãÊñπÊ≥ï„ÇíÊèêÊ°à„Åó„Å¶„ÅÑ„Çã„ÄÇ

**„Å°„Çâ„Å§„Åç„ÇíÊäë„Åà„ÇãÊñπÊ≥ï**

„É¶„Éº„Ç∂„Éº„ÅåUI„ÅÆÂÜçÊßãÁØâ„ÅåÂéüÂõ†„Åß„Å°„Çâ„Å§„Åç„ÇíÂøÉÈÖç„Åó„Å¶„ÅÑ„Çã„Åì„Å®„Å´Ê∞ó„Å•„ÅÑ„Å¶„ÅÑ„Çã„ÄÇÈÉ®ÂàÜÂÜçÊßãÁØâ„ÇíÁî®„ÅÑ„Çã„Åì„Å®„Åß„ÄÅ„Å°„Çâ„Å§„Åç„ÇíÊ∏õÂ∞ë„Åï„Åõ„Å¶„ÅÑ„Çã„ÄÇ

**ÊúüÈôêË®≠ÂÆö„ÇíË¶ãÁõ¥„Åô**

„Ç§„Éô„É≥„Éà„Åå„É°„Ç§„ÇØ„Ç¢„ÉÉ„ÉóÊúüÈñì„ÇíÁü≠„Åè„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅÊúàÊõúÊó•„ÅÆÊ¨°„ÅÆÈÄ±„ÇíÁ∑†„ÇÅÂàá„ÇäÊó•„Å®„Åó„Å¶Ë®≠ÂÆö„Åô„Çã„Åì„Å®„Å´„Åó„Å¶„ÅÑ„Çã„ÄÇÂºÅË≠∑Â£´„Å´ÈÄ£Áµ°„Åó„Å¶„ÅÑ„Çã„Å®„Åì„Çç„Å†„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:04:08*

RiverpodÔºàÁâπ„Å´ `FutureProvider`Ôºâ„ÅßÁîªÈù¢„Çí„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åô„ÇãÈöõ„Å´„Äå‰ª•Ââç„ÅÆÂÄ§„Åå‰∏ÄÁû¨Ê∂à„Åà„Å¶„Åã„ÇâÊñ∞„Åó„ÅÑÂÄ§„ÅåË°®Á§∫„Åï„Çå„Çã„Äç„ÅÑ„Çè„ÇÜ„Çã‚ÄúÁîªÈù¢„ÉÅ„É©„Å§„Åç‚Äù„ÅåËµ∑„Åç„Çã‰∏ª„Å™ÂéüÂõ†„ÅØ„ÄÅ**Êñ∞„Åó„ÅÑÂÄ§„ÇíÂèñÂæó„Åó„Å¶„ÅÑ„ÇãÊúÄ‰∏≠„Å´ `loading` Áä∂ÊÖã„Å´„Å™„Çä„ÄÅUI ‰∏ä„Åß‰∏ÄÊôÇÁöÑ„Å´„Åæ„Å£„Åü„Åè‰Ωï„ÇÇË°®Á§∫„Åó„Å™„ÅÑÔºà„ÇÇ„Åó„Åè„ÅØ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å†„ÅëË°®Á§∫„Åô„ÇãÔºâÁä∂ÊÖã„ÅåÊåü„Åæ„Å£„Å¶„Åó„Åæ„ÅÜ**„Åì„Å®„Åß„Åô„ÄÇ

„Åù„Åì„Åß„ÄÅ„ÉÅ„É©„Å§„Åç„ÇíÈò≤„Åê„Åü„ÇÅ„ÅÆÂü∫Êú¨ÁöÑ„Å™ÊñπÊ≥ï„ÅØ‰ª•‰∏ã„ÅÆ„ÅÑ„Åö„Çå„Åã„ÄÅ„ÅÇ„Çã„ÅÑ„ÅØË§áÊï∞„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Çã„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ

1. **autoDispose „Çí„ÇÑ„ÇÅ„Çã„Åã„ÄÅ„ÇÇ„Åó„Åè„ÅØ keepAlive „Çí‰Ωø„ÅÜ**  
   - `autoDispose` „Çí‰Ωø„Å£„Å¶„ÅÑ„Çã„Å®„ÄÅWidget „ÉÑ„É™„Éº„Åã„ÇâÂ§ñ„Çå„Åü„Çø„Ç§„Éü„É≥„Ç∞„Åß Provider „ÅåÁ†¥Ê£Ñ„Åï„Çå„ÄÅÊàª„Å£„Å¶„Åç„Åü„Å®„Åç„Å´ÂàùÊúüÁä∂ÊÖãÔºà`loading`Ôºâ„Å´Êàª„Çã„Åü„ÇÅ„ÄÅ„Éá„Éº„Çø„ÇíÂÜçÂèñÂæó„ÅóÁõ¥„Åó ‚Üí UI „Åå‰∏ÄÁû¨„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´Âàá„ÇäÊõø„Çè„Çã ‚Üí „ÉÅ„É©„Å§„Åç„ÅÆÂéüÂõ†„Å´„Å™„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ  
   - „ÇÇ„Åó„Äå„Éö„Éº„Ç∏„ÇíÈõ¢„Çå„ÅüÂæå„ÇÇÂâçÂõû„ÅÆ„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÊåÅ„Åó„Åü„ÅÑ„Äç„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ`autoDispose` „ÇíÂ§ñ„Åô„ÄÅ„Åæ„Åü„ÅØ `autoDispose` „ÅÆ„Åæ„Åæ `keepAlive` „Çí‰Ωø„Å£„Å¶„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÊåÅ„Åô„Çã„Åì„Å®„ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

2. **„É≠„Éº„Éâ‰∏≠„Åß„ÇÇ‰ª•Ââç„ÅÆ„Éá„Éº„Çø„Çí‰∏ÄÁû¨„Åß„ÇÇË°®Á§∫„ÅóÁ∂ö„Åë„ÇãÔºà‚ÄúÊ•ΩË¶≥ÁöÑ UI‚ÄùÔºâ**  
   - Riverpod „ÅÆ `AsyncValue` „ÅØÊ®ôÊ∫ñ„Å†„Å® `loading` „Å´ÂÖ•„Å£„ÅüÊôÇÁÇπ„Åß„ÄåÂâçÂõû„Éá„Éº„Çø„ÇíÊè°„Å£„Å¶„ÅÑ„Å™„ÅÑ„ÄçÊâ±„ÅÑ„Å´„Å™„Çã„Åü„ÇÅ„ÄÅ„É≠„Éº„Éá„Ç£„É≥„Ç∞ÊôÇ„Å´ `CircularProgressIndicator` „Å™„Å©„ÇíË°®Á§∫„Åô„Çã„Å®„ÄÅÁµêÊûúÁöÑ„Å´‰∏ÄÁû¨ÁîªÈù¢„Åå„Ç¨„É©„ÉÉ„Å®Â§â„Çè„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ  
   - ÂâçÂõû„ÅÆ„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Åü„Åæ„Åæ„Å´„Åô„Çã„Å´„ÅØ„ÄÅ`when` „Åß„ÅØ„Å™„Åè `maybeWhen` „ÇÑ `whenData` „Çí‰Ωø„Å£„Åü„Çä„ÄÅ„ÅÇ„Çã„ÅÑ„ÅØ `asData?.value` „Çí‰Ωø„Å£„Å¶„ÄåÁèæÂú®Ë™≠„ÅøËæº„Åø‰∏≠„Åß„ÇÇÂâçÂõû„ÅÆ„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å™„Çâ„Åù„Å°„Çâ„ÇíË°®Á§∫„Åô„Çã„ÄçÂÆüË£Ö„Å´„Åô„ÇãÊñπÊ≥ï„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

3. **‰∏çË¶Å„Å™ÂàùÊúü„É™„Éï„É¨„ÉÉ„Ç∑„É•ÔºàuseEffect „Å™„Å©„ÅßÂº∑Âà∂„É™„Éï„É¨„ÉÉ„Ç∑„É•Ôºâ„ÇíÈÅø„Åë„Çã**  
   - ÂàùÂõû„Éì„É´„ÉâÊôÇ„Å´„Åô„Åê `onRefresh()` „ÇíÂëº„Çì„Åß„Åó„Åæ„ÅÜ„Å®„ÄÅ„Åõ„Å£„Åã„Åè Provider ÂÅ¥„Åß„Ç≠„É£„ÉÉ„Ç∑„É•„Åó„Å¶„ÅÑ„Å¶„ÇÇ„ÄÅ„Åæ„Åü„Åô„Åê `loading` ‚Üí `data` „ÅåÂàá„ÇäÊõø„Çè„Çä UI „Åå„ÉÅ„É©„Å§„ÅèÂéüÂõ†„Å´„Å™„Çä„Åæ„Åô„ÄÇ  
   - „Éö„Éº„Ç∏„Å´ÂÖ•„Å£„Åü„ÇâËá™Âãï„Åß„Éá„Éº„Çø„ÇíÊúÄÊñ∞Âåñ„Åó„Åü„ÅÑÂ†¥Âêà„Åß„ÇÇ„ÄÅ„Äå„Åô„Åß„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å®„Åç„ÅØ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´„ÅØ„Åó„Å™„ÅÑ„Äç„Å®„ÅÑ„ÅÜÂ∑•Â§´„ÅåÂøÖË¶Å„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

‰ª•‰∏ã„Åß„ÅØ„ÄÅ**„Äå„É≠„Éº„Éâ‰∏≠„ÇÇÂâçÂõû„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„Åó„Å§„Å§„ÄÅÂèñÂæóÂÆå‰∫Ü„Åó„Åü„ÇâÂ∑Æ„ÅóÊõø„Åà„Çã„Äç** „Å®„ÅÑ„ÅÜ„Éë„Çø„Éº„É≥„ÅÆ„Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇ  
- `autoDispose` „ÅØÊÆã„Åó„Åü„Åæ„Åæ„Åß„ÄÅÂâçÂõû„Éá„Éº„Çø„Çí‰Ωø„ÅÜÂΩ¢„Åß„Åô„ÄÇ  
- „ÇÇ„Åó„ÄåÁîªÈù¢„ÇíÈõ¢„Çå„Å¶Êàª„Å£„Åü„Å®„Åç„Å´ÂÜçË™≠Ëæº„ÅØ„Åó„Å¶„Åª„Åó„Åè„Å™„ÅÑ„Äç„Å®„ÅÑ„ÅÜ„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ`autoDispose` „ÇíÂ§ñ„Åô„Åã„ÄÅ`keepAlive` „ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

### 1. „Éó„É≠„Éê„Ç§„ÉÄÂë®„Çä„ÅÆË®≠ÂÆö

```dart
final combinedWalletDataProvider =
    FutureProvider.autoDispose<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>(
  (ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
  },
);
```

`autoDispose` ‰ªò„Åç„Åß„ÇÇÂïèÈ°å„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅ  
- „Äå„Éö„Éº„Ç∏Èõ¢ËÑ±Âæå„ÇÇ„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÊåÅ„Åó„Åü„ÅÑ„Äç„ÄåÊàª„Å£„Å¶„ÇÇ„ÉÅ„É©„Å§„ÅÑ„Å¶„Åª„Åó„Åè„Å™„ÅÑ„Äç  
- „Äå„É¶„Éº„Ç∂„Éº„Åå„Éö„Éº„Ç∏„ÇíÈõ¢„Çå„Çã„Åü„Å≥„Å´ÂÜçÂèñÂæó„Åó„Å™„Åè„Å¶„Çà„ÅÑ„Äç  

„Å®„ÅÑ„Å£„ÅüÂ†¥Âêà„ÅØ„ÄÅ`autoDispose` „ÇíÂ§ñ„Åô„Åã‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ `keepAlive` „Ç™„Éó„Ç∑„Éß„É≥„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàRiverpod v2 Á≥ª„ÅÆÂ†¥ÂêàÔºâ:

```dart
final combinedWalletDataProvider =
    FutureProvider.autoDispose
        .keepAlive()    // ‚Üê „Åì„Çå„Çí‰ªò„Åë„Çã
        .<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>(
  (ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
  },
);
```

### 2. Widget ÂÅ¥„Åß„ÄåÂâçÂõû„Éá„Éº„Çø„ÇíÊè°„ÇäÁ∂ö„Åë„Çã„ÄçÂÆüË£Ö‰æã

`build` „É°„ÇΩ„ÉÉ„ÉâÂÜÖ„Åß `ref.watch(combinedWalletDataProvider)` „Åó„Å¶Âèó„ÅëÂèñ„Çã `AsyncValue` „Çí‰Ωø„ÅÑ„ÄÅ**„Äå„Åô„Åß„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åü„Çâ„É≠„Éº„Éâ‰∏≠„Åß„ÇÇÂâç„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã„Äç**„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ  
„ÇÇ„Å£„Å®„ÇÇÁ∞°Âçò„Å™„ÅÆ„ÅØ„ÄÅHook „ÅÆ `useState` „ÇÑ `useRef` „Å™„Å©„Å´ÂâçÂõû„ÅÆ„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åó„Å¶„Åä„Åç„ÄÅ`loading` „Å´ÂÖ•„Å£„Å¶„ÇÇ„Åù„Å°„Çâ„ÇíÂèÇÁÖß„Åô„Çã„Éë„Çø„Éº„É≥„Åß„Åô„ÄÇ

```dart
class WalletPage extends HookConsumerWidget {
  const WalletPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // ‚ë† Provider „ÅÆÁä∂ÊÖã„ÇíÁõ£Ë¶ñ
    final combinedWalletAsyncValue = ref.watch(combinedWalletDataProvider);

    // ‚ë° Áõ¥Ëøë„ÅÆÊàêÂäü„Éá„Éº„Çø„Çí‰øùÁÆ°„Åô„Çã„Åü„ÇÅ„ÅÆ State
    final prevData = useState<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)?>(null);

    // ‚ë¢ ÁîªÈù¢„ÇíÂºï„Å£Âºµ„Å£„Å¶Êõ¥Êñ∞„Åô„ÇãÂá¶ÁêÜ
    Future<void> onRefresh() async {
      try {
        // „Åì„Åì„Åß„ÅØ getNftsNotifierProvider „Å® getWalletNotifierProvider „Çí
        // ÂÜçÂ∫¶Ë™≠„ÅøËæº„ÇÄÂΩ¢„Åß„Åô„Åå„ÄÅ„Åù„ÅÆ„Åæ„Åæ„Åß„ÇÇ OK„ÄÇÊîπ‰øÆ„ÅØ‰ªªÊÑè„Åß„Åô„ÄÇ
        await ref.read(getNftsNotifierProvider.notifier).getNfts();
        await ref.read(getWalletNotifierProvider.notifier).getWallet();
      } catch (error) {
        if (context.mounted) {
          showErrorSnackBar(context, error);
        }
      }
    }

    // ‚ë£ when „ÅßÁä∂ÊÖã„Å´Âøú„Åò„Å¶ UI „ÇíÂàÜÂ≤ê
    //    „É≠„Éº„Éâ‰∏≠„Åß„ÇÇÂâçÂõû„Éá„Éº„Çø (prevData.value) „Åå„ÅÇ„Çå„Å∞„Åù„Çå„ÇíË°®Á§∫„Åô„Çã„Çà„ÅÜ„Å´„Åô„Çã
    Widget child;
    child = combinedWalletAsyncValue.when(
      data: (data) {
        // „Éá„Éº„Çø„ÇíÊ≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åü„Çâ prevData „Å´‰øùÂ≠ò
        prevData.value = data;
        return _buildBody(context, ref, data, onRefresh);
      },
      loading: () {
        // „É≠„Éº„Éâ‰∏≠„Å†„Åë„Å©ÂâçÂõû„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å™„Çâ„ÄÅ„Åù„Çå„Çí‰Ωø„Å£„Å¶ÁîªÈù¢„ÇíÊßãÁØâ
        final cached = prevData.value;
        if (cached != null) {
          return _buildBody(context, ref, cached, onRefresh);
        }
        // „Ç≠„É£„ÉÉ„Ç∑„É•„ÇÇ„Å™„ÅÑ„Å™„Çâ„ÄÅ„Åæ„Å†‰∏ÄÂ∫¶„ÇÇÊàêÂäü„Éá„Éº„Çø„ÇíÂèó„ÅëÂèñ„Å£„Å¶„ÅÑ„Å™„ÅÑ„Å®„ÅÑ„ÅÜ„Åì„Å®„Å™„ÅÆ„Åß
        // „Å®„Çä„ÅÇ„Åà„Åö„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å†„ÅëË°®Á§∫
        return const Center(child: CircularProgressIndicator());
      },
      error: (error, stackTrace) {
        // „Ç®„É©„ÉºÊôÇ„ÇÇ„ÄÅ„ÇÇ„ÅóÂâçÂõû„Éá„Éº„Çø„Åå„ÅÇ„Çå„Å∞Ë°®Á§∫„ÅóÁ∂ö„Åë„Å¶„ÇÇ„ÅÑ„ÅÑ„Åó
        // „ÅÇ„Çã„ÅÑ„ÅØ„Ç®„É©„ÉºÁîªÈù¢„Å´Â§â„Åà„Å¶„ÇÇ„Çà„ÅÑ
        return Center(child: Text('Error: $error'));
      },
    );

    return Scaffold(
      appBar: AppBar(title: const Text('Wallet')),
      body: RefreshIndicator(
        onRefresh: onRefresh,
        color: ColorToken.primary,
        backgroundColor: ColorToken.bgLight,
        child: child,
      ),
    );
  }

  // ÂÆüÈöõ„ÅÆÊèèÁîªÈÉ®ÂàÜÔºàchild „ÅÆ‰∏≠Ë∫´Ôºâ„ÇíÂà•„É°„ÇΩ„ÉÉ„Éâ„Å´Âàá„ÇäÂá∫„Åô
  // „Åì„Çå„Å´„Çà„Çä„ÄÅ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Åß„ÇÇ„Ç≠„É£„ÉÉ„Ç∑„É•„Åß„ÇÇÂêå„ÅòUIÊßãÁØâÊâãÊÆµ„ÇíÂëº„Åπ„Çã
  Widget _buildBody(
    BuildContext context,
    WidgetRef ref,
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?
    ) data,
    Future<void> Function() onRefresh,
  ) {
    final walletData = data.$1;
    final nftsData = data.$2;

    // „Éá„Éº„Çø„Åå null „Å™„Çâ‰Ωï„ÇÇ„Åó„Å™„ÅÑÂ†¥Âêà
    if (walletData == null || nftsData == null) {
      return const SizedBox.shrink();
    }

    // ‰ª•‰∏ã„ÄÅÂÖÉ„ÅÆ„Ç≥„Éº„Éâ„Å®ÂêåÊßò„Å´ UI „Çí‰Ωú„Çã
    final stpValue = walletData.stpAmount ?? 0;
    final tmpWalletAddress = walletData.walletAddress ?? '';
    final walletAddress = tmpWalletAddress.isNotEmpty ? tmpWalletAddress : 'No Address';
    final explorers = nftsData.explorers ?? [];
    final flags = nftsData.flags ?? [];

    // Áï•: explorers, flags „Çí Nft „Å´Â§âÊèõ„Åô„Çã„Å®„Åì„Çç„ÅØÂêå„Åò
    final explorerNfts = explorers.map((explorer) {
      final nameParts = explorer.explorerName?.split(' #') ?? ['', ''];
      final name = nameParts[0];
      final number = nameParts.length > 1 ? '#${nameParts[1]}' : '';
      return Nft(
        nftId: explorer.explorerId ?? '',
        tokenId: explorer.tokenId ?? '',
        name: name,
        number: number,
        imageUrl: explorer.explorerImage ?? '',
        nftType: NftType.explorer,
        explorer: explorer,
      );
    }).toList();

    final flagNfts = flags.map((flag) {
      final nameParts = flag.flagName?.split(' #') ?? ['', ''];
      final name = nameParts[0];
      final number = nameParts.length > 1 ? '#${nameParts[1]}' : '';
      return Nft(
        nftId: flag.flagId ?? '',
        tokenId: flag.tokenId ?? '',
        name: name,
        number: number,
        imageUrl: flag.flagImage ?? '',
        nftType: NftType.flag,
        flag: flag,
      );
    }).toList();

    final allNfts = [
      ...explorerNfts,
      ...flagNfts,
    ];

    return SingleChildScrollView(
      physics: const AlwaysScrollableScrollPhysics(),
      child: Padding(
        padding: const EdgeInsets.all(24),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // STPÊÆãÈ´òË°®Á§∫
            DecoratedBox(
              decoration: BoxDecoration(
                color: ColorToken.bg,
                borderRadius: BorderRadius.circular(8),
                border: Border.all(color: ColorToken.border),
              ),
              child: Padding(
                padding: const EdgeInsets.all(24),
                child: Column(
                  children: [
                    Image.asset(
                      Assets.images.stpCoinIcon.path,
                      width: 32,
                      height: 32,
                    ),
                    const SizedBox(height: 14),
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      crossAxisAlignment: CrossAxisAlignment.baseline,
                      textBaseline: TextBaseline.alphabetic,
                      children: [
                        Flexible(
                          child: AutoSizeText(
                            stpValue.toString(),
                            style: const TextStyle(
                              fontSize: 32,
                              fontWeight: FontWeight.bold,
                            ),
                            maxLines: 1,
                            minFontSize: 1,
                            overflow: TextOverflow.ellipsis,
                          ),
                        ),
                        const SizedBox(width: 6),
                        const Text(
                          'STP',
                          style: TextStyle(fontSize: 16),
                        ),
                      ],
                    ),
                    const SizedBox(height: 24),
                    GestureDetector(
                      onTap: () async {
                        // „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„ÅÆ„Ç≥„Éî„Éº
                        await Clipboard.setData(ClipboardData(text: walletAddress));
                        if (context.mounted) {
                          ScaffoldMessenger.of(context).showSnackBar(
                            SnackBar(content: Text('$walletAddress copied to clipboard')),
                          );
                        }
                      },
                      child: Container(
                        padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 5),
                        decoration: BoxDecoration(
                          color: ColorPallet.gray800,
                          borderRadius: BorderRadius.circular(4),
                        ),
                        child: Text(
                          walletAddress,
                          maxLines: 1,
                          overflow: TextOverflow.ellipsis,
                          style: const TextStyle(
                            fontSize: 13,
                            color: ColorToken.primaryDark,
                          ),
                        ),
                      ),
                    ),
                  ],
                ),
              ),
            ),

            const SizedBox(height: 16),

            // NFTs
            const Text(
              'NFTs',
              style: TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 16),

            if (allNfts.isEmpty) const Center(child: Text('No NFTs owned')),

            Column(
              children: allNfts.map((nft) {
                return Padding(
                  padding: const EdgeInsets.only(bottom: 8),
                  child: ClipRRect(
                    borderRadius: BorderRadius.circular(8),
                    child: DecoratedBox(
                      decoration: BoxDecoration(
                        color: ColorToken.bg,
                        borderRadius: BorderRadius.circular(8),
                        border: Border.all(color: ColorToken.border),
                      ),
                      child: InkWell(
                        borderRadius: BorderRadius.circular(8),
                        onTap: () async {
                          // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑Áßª
                        },
                        child: Padding(
                          padding: const EdgeInsets.all(16),
                          child: Row(
                            children: [
                              ClipRRect(
                                borderRadius: BorderRadius.circular(4),
                                child: SquareImage(
                                  imageUrl: nft.imageUrl,
                                  size: 56,
                                ),
                              ),
                              const SizedBox(width: 16),
                              Expanded(
                                child: Column(
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Row(
                                      children: [
                                        Expanded(
                                          child: Text(
                                            nft.name,
                                            maxLines: 1,
                                            overflow: TextOverflow.ellipsis,
                                            style: const TextStyle(
                                              fontSize: 14,
                                              fontWeight: FontWeight.bold,
                                            ),
                                          ),
                                        ),
                                        const SizedBox(width: 4),
                                        Text(
                                          nft.number,
                                          maxLines: 1,
                                          overflow: TextOverflow.ellipsis,
                                          style: const TextStyle(
                                            fontSize: 12,
                                            fontWeight: FontWeight.bold,
                                            color: ColorPallet.gray300,
                                          ),
                                        ),
                                      ],
                                    ),
                                    const SizedBox(height: 12),
                                    Text(
                                      'TokenID: ${nft.tokenId}',
                                      maxLines: 1,
                                      overflow: TextOverflow.ellipsis,
                                      style: const TextStyle(
                                        fontSize: 12,
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                            ],
                          ),
                        ),
                      ),
                    ),
                  ),
                );
              }).toList(),
            ),
            const SizedBox(height: 24),
          ],
        ),
      ),
    );
  }
}
```

„Éù„Ç§„É≥„Éà„ÅØ‰ª•‰∏ã„ÅÆ„Å®„Åä„Çä„Åß„Åô„ÄÇ

- `final prevData = useState<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)?>(null);`
  - **ÂâçÂõûÊàêÂäüÊôÇ„ÅÆÂÄ§** „Çí‰øùÊåÅ„Åô„Çã„Åü„ÇÅ„ÅÆ„Çπ„ÉÜ„Éº„Éà„Åß„Åô„ÄÇ  
- `combinedWalletAsyncValue.when(‚Ä¶)` „ÅÆ `loading` „Éñ„É≠„ÉÉ„ÇØ„Åß„ÄÅ  
  - `prevData.value`ÔºàÂâçÂõû„ÅÆÂÄ§Ôºâ„Åå„ÅÇ„Çå„Å∞„Åù„Çå„Çí‰Ωø„Å£„Å¶ `_buildBody` „ÇíÂëº„Å∂  
  - „Å™„Åë„Çå„Å∞„É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢„ÇíË°®Á§∫„Åô„Çã  
- `data` „ÅåÊù•„Åü„Çâ `prevData.value = data;` „Å®„Åó„Å¶Êõ¥Êñ∞

„Åì„ÅÜ„Åô„Çã„Å®„ÄÅ„ÅÑ„Å£„Åü„Çì„Éá„Éº„Çø„ÇíÂèñÂæó„Åó„ÅüÂæå„ÅØ**ÂÜçÂ∫¶„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åå„Åã„Åã„Å£„Å¶ `loading` Áä∂ÊÖã„Å´„Å™„Å£„Å¶„ÇÇ**Âç≥Â∫ß„Å´Âè§„ÅÑ„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã„Åü„ÇÅ„ÄÅ**ÁîªÈù¢„ÅåÁ©∫„Å£„ÅΩ„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÜÁû¨ÈñìÔºà„ÉÅ„É©„Å§„ÅçÔºâ** „ÅåÁÑ°„Åè„Å™„Çä„Åæ„Åô„ÄÇ

### 3. ÂàùÂõû„Éû„Ç¶„É≥„ÉàÊôÇ„Å´ onRefresh() „ÇíÂëº„Å∂„Åã„Å©„ÅÜ„Åã

Ë≥™ÂïèÊñá„ÅÆ„Ç≥„Éº„Éâ„ÅÆ‰∏≠„Åß

```dart
useEffect(
  () {
    Future.microtask(() async {
      await onRefresh();
    });
    return null;
  },
  [],
);
```

„ÅÆ„Çà„ÅÜ„Å´ **ÂàùÂõû„Éì„É´„ÉâÊôÇ„Å´ÂøÖ„Åö„É™„Éï„É¨„ÉÉ„Ç∑„É•„Çí„Åã„Åë„Çã** ÂÆüË£Ö„Å´„Å™„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ  
- Provider „Åå `loading` ‚Üí `data` „Å®Â§â„Çè„ÇãÈñì„Å´ÁîªÈù¢„Åå„ÉÅ„É©„Å§„Åè  
- ‰∏äË®ò„ÅÆ„Äå„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰Ωø„ÅÜ„ÄçÂÆüË£Ö„Çí„Åó„Å¶„ÅÑ„Å™„Åë„Çå„Å∞‰∏ÄÁû¨Á©∫„ÅÆÁîªÈù¢„Å´„Å™„Çã  

„Å®„ÅÑ„ÅÜÂïèÈ°å„ÅåËµ∑„Åì„Çä„Åæ„Åô„ÄÇ  
‰ªäÂõû„ÅÆ„Çà„ÅÜ„Å´ **`FutureProvider` „ÅåÊúÄÂàù„Å´Ë™≠„ÅøËæº„Åæ„Çå„ÅüÊôÇÁÇπ„Åß„Éá„Éº„Çø„Çí„Éï„Çß„ÉÉ„ÉÅ** „Åô„Çã„Å™„Çâ„ÄÅ„Çè„Åñ„Çè„ÅñÂàùÂõû„Å´ `onRefresh()` „ÇíÂëº„Å∞„Å™„Åè„Å¶„ÇÇÂÆüË≥™Âêå„ÅòÊåôÂãï„Å´„Å™„Çã„Åü„ÇÅ„ÄÅ`useEffect` ÂÜÖ„ÅÆ `onRefresh()` Âëº„Å≥Âá∫„Åó„ÇíÂâäÈô§„Åó„Å¶„Åó„Åæ„Å£„Å¶ÂïèÈ°å„Å™„ÅÑ„Ç±„Éº„Çπ„ÅåÂ§ö„ÅÑ„Åß„Åô„ÄÇ

„ÇÇ„Åó„ÄåÁîªÈù¢„Å´ÂÖ•„Å£„Åü„ÇâÂøÖ„ÅöÊúÄÊñ∞„ÅÆ„Éá„Éº„Çø„ÇíÂèñ„Çä„Å´Ë°å„Åç„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜË¶ÅÊúõ„Åå„ÅÇ„Çã„Å™„Çâ„ÄÅ`FutureProvider` ÂÅ¥„ÇÑ Notifier ÂÅ¥„Åß `init` ÁöÑ„Å´Ëá™ÂãïÂèñÂæó„Åô„ÇãÂÆüË£Ö„Çí„Åó„Å¶„Åä„Åë„Å∞„ÄÅ„Çè„Åñ„Çè„ÅñÁîªÈù¢ÂÅ¥„Åß `onRefresh()` „ÇíÂëº„Å∞„Å™„Åè„Å¶„ÇÇÂêåÁ≠â„ÅÆÂãï„Åç„Çí„Åó„Åæ„Åô„ÄÇ

---

## „Åæ„Å®„ÇÅ

- **„ÉÅ„É©„Å§„Åç„ÅÆÂéüÂõ†**  
  1) `autoDispose` „Å´„Çà„Å£„Å¶„Éö„Éº„Ç∏„ÇíÈõ¢„Çå„Çã„Åü„Å≥„Å´„Éó„É≠„Éê„Ç§„ÉÄ„ÅåÁ†¥Ê£Ñ ‚Üí ÂÜçÂèñÂæó„Åß„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫ ‚Üí „ÉÅ„É©„Å§„Åç  
  2) „É≠„Éº„Éá„Ç£„É≥„Ç∞ÊôÇ„Å´ÁîªÈù¢„Çí‰∏∏„Åî„Å®Á©∫„Å£„ÅΩ„ÇÑ `CircularProgressIndicator` „Å´Âàá„ÇäÊõø„Åà„Å¶„Åó„Åæ„ÅÑ„ÄÅÊó¢Â≠òË°®Á§∫„ÅåÊ∂à„Åà„Å¶„ÅÑ„Çã  
  3) ÂàùÂõû„Éû„Ç¶„É≥„ÉàÊôÇ„Å´ÁÑ°ÈßÑ„Å´„É™„Éï„É¨„ÉÉ„Ç∑„É•ÔºàÂÜçÂèñÂæóÔºâ„Çí„Åã„Åë„Å¶„ÅÑ„Çã  

- **ÊîπÂñÑÁ≠ñ**  
  - `autoDispose` „ÇíÂ§ñ„Åô„Åã„ÄÅ`keepAlive` „Çí‰Ωø„ÅÑÂøÖË¶Å„Å´Âøú„Åò„Å¶„Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÊÆã„Åô  
  - „É≠„Éº„Éâ‰∏≠„Åß„ÇÇÂâçÂõû„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã (‚ÄúÊ•ΩË¶≥ÁöÑ UI‚Äù)  
  - ÂàùÂõû„ÅÆÂº∑Âà∂„É™„Éï„É¨„ÉÉ„Ç∑„É•„Çí„ÇÑ„ÇÅ„ÇãÔºàProvider „ÇÑ Notifier ÂÅ¥„ÅßÂàùÂõû„Éá„Éº„ÇøÂèñÂæó„ÇíÁÆ°ÁêÜÔºâ

„Åì„Çå„Çâ„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Çã„Åì„Å®„Åß„ÄÅ„É¶„Éº„Ç∂„Éº„ÅåÁîªÈù¢„Å´Êàª„Å£„Å¶„Åç„Åü„Å®„Åç„ÇÑ„Éó„É´„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åó„Åü„Å®„Åç„Å´„ÄÅ**ÂâçÂõû„ÅÆ„Éá„Éº„Çø„Åå‰∏ÄÁû¨„Åß„ÇÇÊ∂à„Åà„Çã**„ÅÆ„ÇíÈò≤„Åé„ÄÅ„Çπ„É†„Éº„Ç∫„Å´Êõ¥Êñ∞ÔºàÔºù„ÉÅ„É©„Å§„Åç„ÅÆËªΩÊ∏õÔºâ„ÅåÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:07:34*

„Åù„ÇÇ„Åù„ÇÇif (nftsData == null || walletDate == null) {„Å®„Å™„ÇãÊù°‰ª∂„Åßdata„ÇíÊõ¥Êñ∞„Åô„ÇãÂøÖË¶Å„Åå„Å™„ÅÑ„Çì„Å†

@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  @override
  Future&lt;WalletBalanceResponseDTOData?&gt; build() async =&gt; null;

  Future&lt;WalletBalanceResponseDTOData&gt; getWallet() async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(walletApiProvider.future);
        final response = await api.walletControllerGetBalance();
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        checkForApiError(response.data);
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        debugPrintDioException(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception {
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}

@Riverpod(keepAlive: true)
class GetNftsNotifier extends _$GetNftsNotifier {
  @override
  Future&lt;GetUserNftsResponseDTOData?&gt; build() async =&gt; null;

  Future&lt;GetUserNftsResponseDTOData&gt; getNfts() async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(usersApiProvider.future);
        final response = await api.userControllerGetUserNfts();
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        checkForApiError(response.data);
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        debugPrintDioException(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception {
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:08:04*

UI„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÊäë„Åà„Çã„Åü„ÇÅ„ÄÅnftsData„ÇÑwalletDate„Åånull„ÅÆ„Å®„Åç„ÅØUIÊõ¥Êñ∞„ÇíÁúÅÁï•„Åô„ÇãÂ∑•Â§´„ÅåÂøÖË¶Å„Å™„Çì„Å†„ÄÇËæ∞„ÅÆnull„ÉÅ„Çß„ÉÉ„ÇØ„ÇíÂ§ñ„ÅôÊñπÊ≥ï„ÇÑ„ÄÅÂè§„ÅÑ„Éá„Éº„Çø„Çí‰øù„Å§ÊñπÊ≥ï„ÇÇÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

UI„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÈò≤„Åê„Åü„ÇÅ„Å´„ÄÅnull„ÅÆÂ†¥Âêà„ÅÆËøîÂç¥„ÇíÁúÅÁï•„Åô„ÇãÊñπÊ≥ï„ÇíÊ®°Á¥¢„Åó„Å¶„ÅÑ„Çã„Çì„Å†„ÄÇÂè§„ÅÑ„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å§„Å§„ÄÅÊñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„ÇíÂæÖ„Å§„ÅÆ„ÅåËâØ„Åï„Åù„ÅÜ„Å†„Å≠„ÄÇ

UI„ÅÆ„Å°„Çâ„Å§„Åç„ÇíÈò≤„Åê„Åü„ÇÅ„ÄÅ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Éì„É´„ÉâÊôÇ„Å´null„ÇíËøî„Åï„Å™„ÅÑ„Çà„ÅÜ„Å´„Åó„ÄÅÂè§„ÅÑ„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å§„Å§Êñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„ÇíÂæÖ„Å§ÊñπÊ≥ï„ÇíÊ®°Á¥¢„Åó„Å¶„ÅÑ„Çã„ÄÇ

ÎèÑÏ†ÄÌûà nullÏùÑ Î∞òÌôòÌïòÏßÄ ÏïäÍ∏∞ ÏúÑÌï¥ `build` Î©îÏÑúÎìúÎ•º Ïò§Î≤ÑÎùºÏù¥Îìú ÌïòÍ±∞ÎÇò Í∏∞Î≥∏ Í∞ùÏ≤¥Î•º Î∞òÌôòÌïòÎäî Î∞©Î≤ïÏùÑ ÏÇ¥Ìé¥Î≥¥Î©∞, Ïû¨Í∑Ä Ìò∏Ï∂ú Î¨∏Ï†úÎ•º ÌîºÌïòÍ∏∞ ÏúÑÌïú Îã§ÏñëÌïú Ï†ëÍ∑º Î∞©ÏãùÏùÑ Í≥†ÎØºÌïòÍ≥† ÏûàÏñ¥.

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:08:04*

„Åæ„ÅöÂ§ßÂâçÊèê„Å®„Åó„Å¶„ÄÅ‰ªäÂõû„ÅÆ„Çà„ÅÜ„Å´

```dart
@override
Future<WalletBalanceResponseDTOData?> build() async => null;
```

„Å®„ÅÑ„ÅÜÂÆüË£Ö„Çí„Åó„Å¶„ÅÑ„Çã„Å®„ÄÅ**„Éó„É≠„Éê„Ç§„ÉÄÂàùÊúüÂåñÊôÇ„ÅØÂøÖ„Åö `null`** „ÅåËøî„Çã‰ªïÊßò„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ  
„Åù„ÅÆ„Åü„ÇÅ„ÄÅÁîªÈù¢ÔºàUIÔºâÂÅ¥„Åß `ref.watch(...)` „Åó„Åü„Å®„Åç„Å´ÊúÄÂàù„ÅØ„Äå`null` „ÅåÂÖ•„Å£„Å¶„Åè„Çã„Äç‚Üí `if (walletData == null || nftsData == null)` „Å®„ÅÑ„ÅÜÊù°‰ª∂„Å´ÂÖ•„Çä„ÄÅ`SizedBox.shrink()` Á≠â„ÅåËøî„ÇãÂ†¥Âêà„Åå„ÅÇ„Çã„ÄÅ„Å®„ÅÑ„ÅÜÊµÅ„Çå„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

## „Äånull „Éá„Éº„Çø„ÅØ„Åù„ÇÇ„Åù„ÇÇ‰∏çË¶Å„Äç„Å™„ÅÆ„Åß„ÅÇ„Çå„Å∞

„ÇÇ„Åó„ÄåÂàùÊúüÂÄ§„Å®„Åó„Å¶ `null` „ÇíËøî„Åó„Å¶„ÄÅ„Åù„Çå„Çí UI „Å´ÂèçÊò†„Åô„ÇãÂøÖË¶Å„Åå„Å™„ÅÑ„Äç„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ**„Çè„Åñ„Çè„Åñ `build` „Åß `null` „ÇíËøî„Åï„Å™„Åè„Å¶„ÇÇ„Çà„ÅÑ**„Åß„Åô„ÄÇ  
Riverpod „ÅÆ `@Riverpod` (Code-gen) „Å™ Notifier „Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ÂÆüË£Ö„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ

### „Éë„Çø„Éº„É≥A: build() ÂÜÖ„ÅßÂÆüÈöõ„Å´ÊúÄÂàù„ÅÆ„Éï„Çß„ÉÉ„ÉÅÂá¶ÁêÜ„Çí„Åô„Çã

```dart
@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  @override
  Future<WalletBalanceResponseDTOData?> build() async {
    // build„ÅåÂëº„Å∞„Çå„ÅüÊÆµÈöé„Åß„ÄÅAPI„ÇíÂè©„ÅÑ„Å¶ÊúÄÂàù„ÅÆ„Éá„Éº„Çø„ÇíÂèñÂæó„Åó„Å¶Ëøî„Åô
    // null „Å´„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´„Ç®„É©„ÉºÂá¶ÁêÜ„ÇÇÂÖ•„Çå„Å¶„Åä„Åè
    final api = await ref.watch(walletApiProvider.future);
    final response = await api.walletControllerGetBalance();
    checkForApiError(response.data);
    final data = response.data?.data;
    if (data == null) {
      throw Exception('No data found');
    }
    return data;
  }

  /// ÂÜçÂèñÂæó„Åó„Åü„ÅÑÊôÇ„Å´Âëº„Å≥Âá∫„Åô„É°„ÇΩ„ÉÉ„Éâ
  Future<WalletBalanceResponseDTOData> getWallet() async {
    // ‚Äª„Çπ„ÉÜ„Éº„Éà„ÅØ„Åô„Åß„Å´ `build()` „ÅÆÊôÇÁÇπ„Åß„Éá„Éº„ÇøÊåÅ„Å£„Å¶„ÅÑ„Çã
    //   „Åü„Å†„ÅóÂÜçÂèñÂæó„Åó„Åü„ÅÑ„Ç±„Éº„Çπ„Åß„ÅØÊòéÁ§∫ÁöÑ„Å´„É™„É≠„Éº„ÉâÂá¶ÁêÜ„ÇíË°å„ÅÜ
    // ‰æã: „Éú„Çø„É≥Êäº‰∏ãÊôÇ„ÇÑRefreshIndicator„Åß‰ΩøÁî®„Åô„Çã
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(walletApiProvider.future);
      final response = await api.walletControllerGetBalance();
      checkForApiError(response.data);
      final data = response.data?.data;
      if (data == null) {
        throw Exception('No data found');
      }
      state = AsyncValue.data(data);
      return data;
    } catch (error, stack) {
      state = AsyncValue.error(error, stack);
      rethrow;
    }
  }
}
```

‰∏äË®ò„ÅÆ„Çà„ÅÜ„Å´„Åô„Çã„Å®„ÄÅ**„Éó„É≠„Éê„Ç§„ÉÄÂàùÊúüÂåñÊôÇÁÇπ** (Ôºù `build()` „ÅåÂëº„Å∞„Çå„ÅüÊôÇÁÇπ) „Åß„Éá„Éº„Çø„ÇíÂèñÂæó„Åô„Çã„Åü„ÇÅ„ÄÅÂàùÂõû„Å´ `null` „ÅåËøî„Çã„Çø„Ç§„Éü„É≥„Ç∞„Åå„Å™„Åè„Å™„Çä„Åæ„Åô„ÄÇ  
UI „Åã„Çâ„Åø„Çå„Å∞„ÄÅÂàùÊúüÁä∂ÊÖã„Åå `AsyncValue.loading()` ‚Üí ÂèñÂæóÊàêÂäüÂæå„Å´ `AsyncValue.data(...)` „Å®„Å™„Çã„Åü„ÇÅ„ÄÅ`nftsData == null` „Å®„ÅÑ„Å£„ÅüÊù°‰ª∂ÂàÜÂ≤ê„ÅåÂü∫Êú¨ÁöÑ„Å´„ÅØ‰∏çË¶Å„Å´„Å™„Çä„Åæ„Åô„ÄÇ

&gt; ‚Äª „Å©„ÅÜ„Åó„Å¶„ÇÇ„ÄåÊúÄÂàù„ÅØ„Åæ„Å†„É™„ÇØ„Ç®„Çπ„Éà„Åó„Å¶„Åä„Çâ„Åö„ÄÅÊú¨ÂΩì„Å´ÂÄ§„Åå„Å™„ÅÑ„Å®„Åç„Å´ `null` „ÇíËøî„Åó„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜÁâπÊÆä„Å™Â†¥Âêà„ÅØÂà•„Åß„Åô„Åå„ÄÅÂ§ö„Åè„ÅÆ„Ç±„Éº„Çπ„Åß„ÅØ„ÄåÂàùÂõû„Åã„ÇâAPI„Åß„Éá„Éº„Çø„ÇíÂèñ„Çä„Å´Ë°å„Å£„Å¶„Åª„Åó„ÅÑ„Äç„Åì„Å®„ÅåÂ§ö„ÅÑ„ÅÆ„Åß„ÄÅ`build` „Åß fetch „Åô„Çã„Åª„ÅÜ„ÅåËá™ÁÑ∂„Åß„Åô„ÄÇ

---

### „Éë„Çø„Éº„É≥B: build() „ÅØ‰Ωø„Çè„Åö„ÄÅÂ§ñÈÉ®„Åã„ÇâÊòéÁ§∫ÁöÑ„Å´„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Çì„Åßfetch„Åô„ÇãÔºàStateControllerÁöÑ„Å´‰Ωø„ÅÜÔºâ

„ÇÇ„Åó„Äå„Éó„É≠„Éê„Ç§„ÉÄÁîüÊàêÊôÇ„Å´„ÅØÂç≥„Éï„Çß„ÉÉ„ÉÅ„Åó„Å™„ÅÑ„ÄÇÂøÖË¶Å„Å´„Å™„Å£„ÅüÊôÇÁÇπ„Åß `getWallet()` „ÇíÂëº„Å≥Âá∫„Åó„Å¶„Éá„Éº„Çø„ÇíÂèñ„Å£„Å¶„Åç„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜ„ÉØ„Éº„ÇØ„Éï„É≠„Éº„Å™„Çâ„ÄÅ`build` „ÅØ‰Ωø„Çè„Åö„Å´‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Êõ∏„Åè„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ

#### 1) Notifier „É°„ÇΩ„ÉÉ„Éâ„Å†„Åë„ÇíÂÆöÁæ©„Åô„Çã

```dart
@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  /// build„Åß„ÅØ‰Ωï„ÇÇ„Åõ„Åö„ÄÅ„Éá„Éï„Ç©„É´„Éà„Åß„Åæ„Å†ÂÄ§„ÅåÁÑ°„ÅÑ(=null)Áä∂ÊÖã„Å®„Åó„Å¶„Åä„Åè
  @override
  FutureOr<WalletBalanceResponseDTOData?> build() async {
    // „Åì„Åì„Åß„ÅØÁâπ„Å´ÂàùÊúü„Éï„Çß„ÉÉ„ÉÅ„ÇíË°å„Çè„Å™„ÅÑ
    return null; 
  }

  /// ÂÆüÈöõ„Å´„Éá„Éº„Çø„ÇíÂèñ„Çä„Å´„ÅÑ„ÅèÂá¶ÁêÜ
  Future<WalletBalanceResponseDTOData> getWallet() async {
    // „Åô„Åß„Å´ÊåÅ„Å£„Å¶„ÅÑ„Çã„Éá„Éº„Çø„Åå„ÅÇ„Çå„Å∞loading„Å´„Åó„Å™„ÅÑ „Å™„Å©„ÅÆÂà§ÂÆö„ÅØËá™Áî±
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      final api = await ref.watch(walletApiProvider.future);
      final response = await api.walletControllerGetBalance();
      checkForApiError(response.data);
      final data = response.data?.data;
      if (data == null) {
        throw Exception('No data found');
      }
      state = AsyncValue.data(data);
      return data;
    } catch (error, stackTrace) {
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}
```

#### 2) UI ÂÅ¥„ÅÆ‰Ωø„ÅÑÊñπ

„Åì„ÅÜ„Åô„Çã„Å®„ÄÅ„ÄåUI „ÅßÊúÄÂàù„Å´Ë°®Á§∫„Åï„Çå„ÅüÊôÇÁÇπ„Åß„ÅØ `state.valueOrNull == null`„Äç„Åß„Åô„Åå„ÄÅ  
„É¶„Éº„Ç∂„ÅåÁîªÈù¢„ÇíÈñã„ÅÑ„Åü„Çø„Ç§„Éü„É≥„Ç∞„ÇÑ PullToRefresh „Çí„Åó„Åü„Çø„Ç§„Éü„É≥„Ç∞„Å™„Å©„ÄÅÂøÖË¶Å„Å™„Å®„Åç„Å´ `getWallet()` „ÇíÂëº„Çì„Åß„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø„Åæ„Åô„ÄÇ  
‰æã„Åà„Å∞

```dart
final walletAsync = ref.watch(getWalletNotifierProvider);

@override
Widget build(BuildContext context, WidgetRef ref) {
  useEffect(() {
    // ÂàùÂõû„Éû„Ç¶„É≥„ÉàÊôÇ„Å´„Éá„Éº„Çø„ÇíÂèñ„Çä„Åü„ÅÑ„Å™„Çâ
    Future.microtask(() async {
      await ref.read(getWalletNotifierProvider.notifier).getWallet();
    });
    return null;
  }, []);

  return walletAsync.when(
    data: (walletData) {
      if (walletData == null) {
        // ÂèñÂæó„Åó„Å¶„ÅÑ„Å™„ÅÑ or ÂèñÂæóÂ§±ÊïóÂæå„ÅÆ„Åæ„Åæ „Å™„Å©
        return const Text('No data yet');
      }
      // „Åì„Åì„ÅßwalletData„Çí‰Ωø„Å£„Å¶UI„ÇíÊèèÁîª
      return Text('STP = ${walletData.stpAmount}');
    },
    loading: () => const CircularProgressIndicator(),
    error: (e, st) => Text('Error: $e'),
  );
}
```

„Åì„ÅÆ„Çà„ÅÜ„Å™‰ªïÁµÑ„Åø„Å´„Åô„Çå„Å∞„ÄÅ**‚ÄúÂøÖË¶Å„Å´„Å™„Å£„Åü„Çâ„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Çì„Åß„Éá„Éº„Çø„ÇíÂèñ„Å£„Å¶„Åè„Çã‚Äù** „Å®„ÅÑ„ÅÜÊµÅ„Çå„Åß„ÄÅ`null` „Å´„Å™„Å£„Å¶„ÅÑ„Çã„Åã„Å©„ÅÜ„Åã„ÅØ„ÅÇ„Å™„Åü„ÅÆ„Ç≥„É≥„Éà„É≠„Éº„É´Ê¨°Á¨¨„Å®„ÅÑ„ÅÜÂΩ¢„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

## null„ÉÅ„Çß„ÉÉ„ÇØ„Çí„Åó„Å™„Åè„Å¶Ê∏à„ÇÄ„Çà„ÅÜ„Å´„Åô„Çã„Åã„ÄÅ„ÇÇ„Åó„Åè„ÅØ„Äånull„Å™„ÇâÂâçÂõû„ÅÆÂÄ§„Çí‰Ωø„ÅÜ„Äç„Åã

„ÅÑ„Åö„Çå„Å´„Åõ„Çà„ÄÅ**UI „Åß„Äånull„Å†„Å£„Åü„Çâ `SizedBox.shrink()`„Äç„ÅÆ„Çà„ÅÜ„Å´Êõ∏„ÅÑ„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅ„Åù„Åì„Åå„ÉÅ„É©„Å§„Åç„ÅÆÂéüÂõ†„Å´„Å™„Çã**„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ  
ÂØæÁ≠ñ„Å®„Åó„Å¶„ÅØ:

1. **ÊúÄÂàù„Åã„Çâ `null` „ÇíËøî„Åï„Å™„ÅÑË®≠Ë®à„Å´„Åô„Çã**  
   - ‰∏äË®ò„Éë„Çø„Éº„É≥A „ÅÆ„Çà„ÅÜ„Å´ `build()` „Åß„Å°„ÇÉ„Çì„Å® fetch „Åó„Å¶ ‚ÄúÊúÄÂàù„Åã„ÇâÂøÖ„Åö `AsyncValue.data(...)` „Åã `AsyncValue.error(...)` „Å´„Å™„Çã„Çà„ÅÜ„Å´„Åô„Çã‚Äù  
   - ‚Üí „Åì„ÅÜ„Åô„Çã„Å® `null` Áî®„ÅÆÂàÜÂ≤ê„Åå‰∏çË¶Å„Å´„Å™„Çä„ÄÅ„ÉÅ„É©„Å§„Åç„ÅØÊ∏õ„Çä„Åæ„Åô„ÄÇ

2. **„É≠„Éº„Éâ‰∏≠„Éª„Ç®„É©„ÉºÊôÇ„Éª„ÅÇ„Çã„ÅÑ„ÅØ `null` „ÅÆÂ†¥Âêà„Åß„ÇÇ„ÄÅÂâçÂõûË°®Á§∫„Åó„Å¶„ÅÑ„Åü„Éá„Éº„Çø„ÇíÊÆã„Åô**  
   - UI ÂÅ¥„Åß„Ç≠„É£„ÉÉ„Ç∑„É•„Åó„Å¶„Åä„Åç„ÄÅ`loading`/`error` „Åß„ÇÇ„ÄåÂè§„ÅÑ„Éá„Éº„Çø„Çí‰Ωø„ÅÜ„Äç„Çà„ÅÜ„Å´„Åô„Çã  
   - „Åì„Çå„Å´„Çà„Çä„ÄåÁîªÈù¢„Åå„Åæ„Å£„Åï„Çâ„Å´Ê∂à„Åà„ÇãÁû¨Èñì„Äç„Çí„Å™„Åè„Åó„Åæ„Åô„ÄÇ  
   - „Åü„Å®„Åà„Å∞ÂâçÂõû„ÅÆÂõûÁ≠î„ÅÆ„Çà„ÅÜ„Å´„ÄÅ`useState` „Å™„Å©„ÅßÂâçÂõû„ÅÆ `data` „ÇíË¶ö„Åà„Å¶„Åä„Åè ‚Üí „É≠„Éº„Éá„Ç£„É≥„Ç∞Áä∂ÊÖã„Å´„Å™„Å£„Å¶„ÇÇ `prevData` „ÇíË°®Á§∫„Åô„Çã  
   - „Åù„ÇÇ„Åù„ÇÇ `build` „ÅßÊó¢„Å´ÂÄ§„ÇíËøî„Åó„Å¶„ÅÑ„Çå„Å∞„ÄÅÂàùÂõû„Åã„Çâ„É≠„Éº„Éâ‰∏≠„ÇÇÂÄ§„Åå `AsyncValue.data` „ÅÆ„Åæ„Åæ„Å™„ÅÆ„Åß‚ÄúUI„Åå„Åæ„Å£„Åï„Çâ„Å´Ê∂à„Åà„Çã‚Äù„Åì„Å®„ÅØ„Å™„ÅÑ„ÄÅ„Å®„ÅÑ„ÅÜË®≠Ë®à„Å´„Åß„Åç„Åæ„Åô„ÄÇ

---

## „Åæ„Å®„ÇÅ

- „Äå`if (nftsData == null || walletDate == null)` „Å´„Å™„ÇãÊù°‰ª∂„Å™„Çì„Å¶„ÄÅÂøÖË¶Å„Å™„ÅÑ„ÅóÁô∫Áîü„Åï„Åõ„Åü„Åè„Å™„ÅÑ„Äç„Å®„ÅÑ„ÅÜ„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ  
  **Notifier „ÅÆÂàùÊúüÂÆüË£ÖÔºà`build()` „ÅÆÊàª„ÇäÂÄ§Ôºâ„Çí `null` „Å´„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã** „Åã„ÄÅ**UI ÂÅ¥„Åß„Äånull „Å´„Å™„Å£„Åü„ÇâÂâç„ÅÆ„Éá„Éº„Çø„Çí‰Ωø„ÅÜ„Äç** „Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ  
- Riverpod „ÅÆ `@Riverpod` Notifier „ÅØ„ÄÅ`build()` „Çí‰Ωø„Å£„Å¶ÂàùÊúü„Éï„Çß„ÉÉ„ÉÅ„Çí„Åô„ÇãÂÆüË£Ö„ÅåÁéãÈÅì„Éë„Çø„Éº„É≥„Åß„Åô„ÄÇ  
  - „Åì„ÅÜ„Åô„Çã„Å®ÂàùÊúüÂÄ§„Åß `null` „ÇíËøî„Åô„Åì„Å®„Åå„Å™„Åè„Å™„Çã„Åü„ÇÅ„ÄÅUI „Åß„Çè„Åñ„Çè„Åñ `null` „ÉÅ„Çß„ÉÉ„ÇØ„Çí„Åõ„Åö„Å´Ê∏à„ÇÄÂ†¥Èù¢„ÅåÂ¢ó„Åà„Åæ„Åô„ÄÇ  

„Äå**UI „Åß `null` Âà§ÂÆö„Åô„Çã„ÅÆ„ÅåÈù¢ÂÄí**„Äç„Å®ÊÑü„Åò„Å¶„ÅÑ„Çã„Å™„Çâ„ÄÅ„Åæ„Åö„ÅØ **Notifier ÂÅ¥„ÅßÂàùÊúü„Éï„Çß„ÉÉ„ÉÅ„Åó„Å¶ÂàùÊúüÁä∂ÊÖã„Çí `null` „Å´„Åó„Å™„ÅÑ** ÂÆüË£Ö„Å´Âàá„ÇäÊõø„Åà„Çã„ÅÆ„ÅåÊúÄ„ÇÇ„Çπ„ÉÉ„Ç≠„É™„Åô„ÇãÊñπÊ≥ï„Åß„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:10:41*

„Åì„Åì„ÇínullË®±ÂÆπ„Åó„Å™„ÅÑÊäÄ„ÅßÂØæÂøú„Åß„Åç„Å™„ÅÑ„ÅãÔºü

final combinedWalletDataProvider = FutureProvider.autoDispose&lt;
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?,
    )&gt;((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:11:05*

„Ç®„É©„ÉºÈÄöÁü•„ÅÆÊñπÊ≥ï„ÇíÊ§úË®é„Åó„Å¶„ÅÑ„Çã„ÄÇ

„Ç´„Çπ„Çø„É†„Ç®„É©„Éº„Éè„É≥„Éâ„É©„Éº„ÇíËÄÉÊÖÆ„Åô„Çã

„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„ÅÆÊèêÊ°à„ÇíÊ§úË®é‰∏≠

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:11:05*

ÁµêË´ñ„Åã„ÇâË®Ä„ÅÜ„Å®„ÄÅ**„ÄåcombinedWalletDataProvider „Åß `null` Ë®±ÂÆπ„Åó„Å™„ÅÑÂΩ¢ `(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)` „ÇíËøî„Åó„Åü„ÅÑ„Äç**„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ**„Äå„Åù„ÇÇ„Åù„ÇÇ Notifier ÂÅ¥„Åß„ÇÇ `null` „ÇíËøî„Åï„Å™„ÅÑ (Ôºù `throw Exception` Á≠â„Çí‰Ωø„Å£„Å¶„Ç®„É©„Éº„Å´„Åô„Çã)„Äç**„Å®„ÅÑ„ÅÜÂÆüË£Ö„Å´Â§â„Åà„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

---

# ÂÆüÁèæ„ÅÆ„Åü„ÇÅ„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó

1. **`GetWalletNotifier` / `GetNftsNotifier` „ÅÆÊàª„ÇäÂÄ§„Çí ‚ÄúÂøÖ„ÅöÈùû null‚Äù „Å´„Åô„Çã**  
   - ÂÖ∑‰ΩìÁöÑ„Å´„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ `build()` „É°„ÇΩ„ÉÉ„Éâ„ÇÑ `getXXX()` „É°„ÇΩ„ÉÉ„ÉâÂÜÖ„Åß„Äå„ÇÇ„Åó `data == null` „Å™„Çâ„Ç®„É©„Éº„Çí throw„Äç„Åó„Å¶„ÄÅ„Åù„ÅÆ„Åæ„Åæ `WalletBalanceResponseDTOData` / `GetUserNftsResponseDTOData` „ÇíËøî„ÅôÂΩ¢„Å´„Åó„Åæ„Åô„ÄÇ  
   - „Åù„ÅÜ„Åô„Çã„Åì„Å®„Åß„ÄÅNotifier „ÅåËøî„ÅôÂûã„Çí `Future<WalletBalanceResponseDTOData>` / `Future<GetUserNftsResponseDTOData>` „Å´Â§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ

2. **`combinedWalletDataProvider` „ÅßÂèó„ÅëÂèñ„ÇãÂûã„Çí `(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)` „Å´„Åô„Çã**  
   - „Åì„Çå„Å´„Çà„Çä„ÄÅ„Äå`null` „ÅåÊ∑∑„Åò„Å£„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Äç„Å®„ÅÑ„ÅÜÂâçÊèê„ÅåÊ∂à„Åà„Çã„Åü„ÇÅ„ÄÅUI ÂÅ¥„ÅÆ `if (nftsData == null || walletData == null)` „ÅÆ„Çà„ÅÜ„Å™ÂàÜÂ≤ê„Çí„Åó„Å™„Åè„Å¶Ê∏à„Åø„Åæ„Åô„ÄÇ  
   - ‰ª£„Çè„Çä„Å´„ÄÅ„ÇÇ„Åó API „É¨„Çπ„Éù„É≥„Çπ„Åå `null`Ôºà„Éá„Éº„ÇøÁÑ°„ÅóÔºâ„Å†„Å£„ÅüÂ†¥Âêà„ÅØ throw „Åï„Çå„Çã ‚Üí „Å§„Åæ„Çä `combinedWalletDataProvider` „ÅØ `AsyncValue.error(...)` „Å´„Å™„Çã„Åã„ÄÅ`AsyncValue.data(...)` „Å´„Å™„Çã„Åã„ÄÅ„ÅÆ„Å©„Å°„Çâ„Åã„Å´„Å™„Çã„Ç§„É°„Éº„Ç∏„Åß„Åô„ÄÇ

---

## ÂÖ∑‰Ωì‰æã

### 1. `GetWalletNotifier` „Çí„ÄåÂøÖ„ÅöÈùû null „ÅßËøî„Åô„Äç„Çà„ÅÜ„Å´„Åô„Çã

```dart
@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  // build() „ÅßÂàùÊúü„Éï„Çß„ÉÉ„ÉÅ„ÇíË°å„ÅÜ„Åã„ÄÅË°å„Çè„Å™„ÅÑ„Åã„ÅØ„ÅäÂ•Ω„Åø„Åß„ÄÇ
  // „Åì„Åì„Åß„ÅØ‰æã„Å®„Åó„Å¶„Äåbuild()ÊôÇÁÇπ„ÅßÂç≥ÂèñÂæó„Äç„Åô„Çã„Éë„Çø„Éº„É≥„ÇíÁ§∫„Åô
  @override
  Future<WalletBalanceResponseDTOData> build() async {
    return _fetchWallet();
  }

  Future<WalletBalanceResponseDTOData> getWallet() async {
    // state„ÇíÂÜç„É≠„Éº„Éâ‰∏≠„Å´„Åó„Åü„ÅÑÂ†¥Âêà
    state = const AsyncValue.loading();
    try {
      final data = await _fetchWallet();
      // ÂèñÂæó„Åó„Åü data „Åå null „Å™„Çâ throw ‚Üí „Å§„Åæ„ÇäÂøÖ„Åö non-null „ÅßËøî„Åô
      state = AsyncValue.data(data);
      return data;
    } catch (error, stackTrace) {
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }

  Future<WalletBalanceResponseDTOData> _fetchWallet() async {
    // ÂÆüÈöõ„ÅÆ API Âëº„Å≥Âá∫„Åó
    final api = await ref.watch(walletApiProvider.future);
    final response = await api.walletControllerGetBalance();
    checkForApiError(response.data);

    final data = response.data?.data;
    if (data == null) {
      // „Åì„Åì„ÅßÂøÖ„Åö‰æãÂ§ñ„Å´„Åó„Å¶„ÅÑ„Çã
      throw Exception('No wallet data found');
    }
    return data; // data „ÅØ non-null
  }
}
```

#### „Éù„Ç§„É≥„Éà
- `WalletBalanceResponseDTOData?` (nullable) „Åß„ÅØ„Å™„Åè `WalletBalanceResponseDTOData` (non-nullable) „ÇíÊâ±„ÅÜ„Çà„ÅÜ„Å´Â§âÊõ¥  
- „Äå„Éá„Éº„Çø„Åå null „Å†„Å£„Åü„Çâ„Å©„ÅÜ„Åô„Çã„Åã„Äç„ÅØ„ÄÅ**‰æãÂ§ñ„Å®„Åó„Å¶Êäï„Åí„Çã (ÔºùÂèñÂæóÂ§±ÊïóÊâ±„ÅÑ)**  
- „Åì„Çå„Å´„Çà„Çä„ÄåNotifier „ÅÆÊàª„ÇäÂÄ§„ÅØÁµ∂ÂØæ„Å´Èùû null„Äç„Å™„ÅÆ„Åß„ÄÅUI ÂÅ¥„Åß `null` „ÉÅ„Çß„ÉÉ„ÇØ„ÇíÊõ∏„ÅèÂøÖË¶Å„Åå„Å™„Åè„Å™„Çã

### 2. `GetNftsNotifier` „ÇÇÂêåÊßò„Å´Êõ∏„ÅçÊèõ„Åà„Çã

```dart
@Riverpod(keepAlive: true)
class GetNftsNotifier extends _$GetNftsNotifier {
  @override
  Future<GetUserNftsResponseDTOData> build() async {
    return _fetchNfts();
  }

  Future<GetUserNftsResponseDTOData> getNfts() async {
    state = const AsyncValue.loading();
    try {
      final data = await _fetchNfts();
      state = AsyncValue.data(data);
      return data;
    } catch (error, stackTrace) {
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }

  Future<GetUserNftsResponseDTOData> _fetchNfts() async {
    final api = await ref.watch(usersApiProvider.future);
    final response = await api.userControllerGetUserNfts();
    checkForApiError(response.data);

    final data = response.data?.data;
    if (data == null) {
      throw Exception('No user NFT data found');
    }
    return data;
  }
}
```

### 3. `combinedWalletDataProvider` „ÇíÈùû null „ÅÆ„Çø„Éó„É´„Å´„Åô„Çã

Notifier ÂÅ¥„Åå„ÄåÂøÖ„ÅöÈùû null„Äç„Å´„Å™„Å£„Åü„ÅÆ„Åß„ÄÅÁµêÂêà„Åô„ÇãÊñπ„Åß„ÇÇ `?` „ÇíÂ§ñ„Åó„Åæ„Åô„ÄÇ

```dart
final combinedWalletDataProvider = FutureProvider.autoDispose<
    (WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)
>((ref) async {
  // „Åì„Åì„Åß„Åù„Çå„Åû„Çå non-null „Å´„Å™„Å£„Åü Notifier „Çí .future „ÅßÂæÖ„Å°Âèó„Åë„Çã
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);
  // „Çø„Éó„É´„Å´„Åó„Å¶Ëøî„Åô„Åå„ÄÅ„ÇÇ„ÅÜ‰∏°Êñπ„Å®„ÇÇ non-null
  return (wallet, nfts);
});
```

### 4. UI ÂÅ¥„Åß `null` „ÉÅ„Çß„ÉÉ„ÇØ„Çí„Åó„Å™„Åè„Å¶Ê∏à„ÇÄ

```dart
final combinedWalletAsyncValue = ref.watch(combinedWalletDataProvider);

return combinedWalletAsyncValue.when(
  data: (data) {
    // „Åô„Åß„Å´ null „Åß„ÅØ„Å™„ÅÑ„ÅÆ„Åß„ÄÅ„Åì„ÅÜÊõ∏„Åë„Çã
    final walletData = data.$1;
    final nftsData = data.$2;

    // „Åì„Åì„Åß `if (walletData == null || nftsData == null)` „ÅÆÂàÜÂ≤ê„ÅØ‰∏çË¶Å
    // „Éá„Éº„Çø„Çí‰Ωø„Å£„Å¶UI„ÇíÊßãÁØâ
    return _buildBody(walletData, nftsData);
  },
  loading: () => const CircularProgressIndicator(),
  error: (e, st) => Text('Error: $e'),
);
```

„Åì„Çå„Åß„ÄåÂàùÊúüÁä∂ÊÖã„Åå null ‚Üí `SizedBox.shrink()` „ÇíËøî„Åô„Äç„Å®„ÅÑ„Å£„ÅüÂàÜÂ≤ê„ÅØÂøÖË¶Å„Å™„Åè„Å™„Çä„Åæ„Åô„ÄÇ  
„ÇÇ„Åó API ÂÅ¥„Åß„Éá„Éº„Çø„ÅåÂæó„Çâ„Çå„Å™„ÅÑÂ†¥Âêà„ÅØ `throw Exception('No data found')` „Å´„Çà„Å£„Å¶ `AsyncValue.error(...)` „Å´„Å™„Çä„ÄÅ`error` „Éñ„É≠„ÉÉ„ÇØ„Å´ÂÖ•„Çã„Å†„Åë„Åß„Åô„ÄÇ

---

# „Åæ„Å®„ÇÅ

- **Notifier ÂÅ¥„Åß `WalletBalanceResponseDTOData?` „Åã„Çâ `WalletBalanceResponseDTOData` „Å´Â§â„Åà„Çã**  
  - `data == null` „ÅÆ„Å®„Åç„ÅØ `throw Exception(...)` „Åô„Çã  
- **`combinedWalletDataProvider` „ÇÇ `?` „ÇíÂ§ñ„Åó„Å¶ ‚ÄúÈùû null „Çø„Éó„É´‚Äù „Å´Êõ∏„ÅçÊèõ„Åà„Çã**  
- „Åì„ÅÜ„Åô„Çã„Åì„Å®„Åß„ÄÅUI ÂÅ¥„Åß„ÅØ `null` „ÉÅ„Çß„ÉÉ„ÇØ„Çí„Åó„Å™„Åè„Å¶Ê∏à„Åø„ÄÅ`if (nftsData == null || walletData == null)` „ÅØ‰∏çË¶Å„Å´„Å™„Çã  
- „Éá„Éº„Çø„ÅåÂèñÂæó„Åß„Åç„Å™„Åã„Å£„Åü„Çä null „Å†„Å£„ÅüÂ†¥Âêà„ÅØ„Äå**„Ç®„É©„Éº„Å®„Åó„Å¶„Éè„É≥„Éâ„É™„É≥„Ç∞**„Äç„Åï„Çå„Çã„Åü„ÇÅ„ÄÅUI ÂÅ¥„Åß„ÅØ `error:` „Éñ„É≠„ÉÉ„ÇØ„Å´ÂàÜÂ≤ê„ÅåÈ£õ„Çì„Åß„ÉÅ„É©„Å§„Åç„Å´„Åè„Åè„Å™„Çã  

„Åì„Çå„Åå„Äå**`null` Ë®±ÂÆπ„Åó„Å™„ÅÑÊäÄ„ÅßÂØæÂøú„Åô„Çã**„Äç„ÅÆÂü∫Êú¨ÁöÑ„Å™ÂÆüË£ÖÊñπÈáù„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:12:17*

Notifier ÂÅ¥„Åß„ÅØnull„ÇíË®±ÂÆπ„Åó„Åü„ÅÑ„Çì„Å†

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:12:48*

Ok, let's think this through. The user is considering having `null` on the Notifier side to indicate something not yet loaded. The aim is to avoid UI disruption with a strange "null" screen.

**Êâ±„ÅÜ„Éá„Éº„Çø„ÇíÁâπÂÆö„Åô„Çã**

`combinedWalletDataProvider`„ÅØ„ÄÅ`WalletBalanceResponseDTOData`„Å®`GetUserNftsResponseDTOData`„ÅÆ„Çø„Éó„É´„ÇíËøî„Åô„ÄÇUI„Åß„ÅØ„ÄÅnull„ÅÆÂá¶ÁêÜ„ÅåÂøÖË¶Å„Å®„Å™„Çã„Åå„ÄÅ`maybeWhen`„ÇÑÈùûnull„Éá„Éº„Çø„ÅÆÂá¶ÁêÜÊñπÊ≥ï„ÇíÊ§úË®é‰∏≠„ÄÇ

**Áä∂ÊÖã„ÇíÂêà‰Ωµ„Åô„Çã**

`getWalletNotifier`„Å®`getNftsNotifier`„ÅÆÁä∂ÊÖã„ÇíÁµ±Âêà„Åó„ÄÅnull„Éá„Éº„Çø„ÇíÁâπÂÆö„ÄÅ‰æãÂ§ñ„Çí„Çπ„É≠„Éº„Åó„Å¶„Ç®„É©„Éº„ÇíÈÄöÁü•„Åô„ÇãÊñπÊ≥ï„ÇíË™¨Êòé„Åó„Å¶„ÅÑ„Çã„ÄÇ

**Ë°®Á§∫„ÅÆË™øÊï¥**

„Éá„Éº„Çø„Åå„É≠„Éº„Éâ‰∏≠„ÇÑ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÄÅÁµ±Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅØ„Åù„Çå„ÇíÁ§∫„Åô„ÄÇ„Éá„Éº„Çø„Åånull„Å™„Çâ„Ç®„É©„Éº„ÇíË°®Á§∫„ÄÇNotifierÂÅ¥„ÅØnull„ÇíË®±ÂÆπ„Åô„Çã„Åå„ÄÅÁµ±ÂêàÂÅ¥„Åß„ÅØnull„ÇíË®±ÂÆπ„Åó„Å™„ÅÑ„ÄÇ

**Áµ±ÂêàÁä∂ÊÖã„ÇíÁÆ°ÁêÜ**

`getWalletNotifier`„Å®`getNftsNotifier`„ÅÆÁä∂ÊÖã„ÇíÁµ±Âêà„Åó„ÄÅ„É≠„Éº„Éâ‰∏≠„ÇÑ„Ç®„É©„ÉºÊôÇ„Å´„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÂèñ„Çä„ÄÅnull„Éá„Éº„Çø„ÅÆÂ†¥Âêà„ÅØ„Ç®„É©„Éº„Çí„Çπ„É≠„Éº„Åô„Çã„Ç≥„Éº„Éâ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„ÄÇ

**Áä∂ÊÖãÁÆ°ÁêÜ„ÅÆÂ∑•Â§´**

„Éá„Éº„Çø„Åå„É≠„Éº„Éâ‰∏≠„ÄÅ„Ç®„É©„Éº„ÄÅ„Åæ„Åü„ÅØnull„ÅÆÂ†¥Âêà„Å´ÈÅ©Âàá„Å´Âá¶ÁêÜ„Åó„ÄÅUI„ÅßË¶ñË¶öÁöÑ„Å´Ë°®Á§∫„Åô„ÇãÊñπÊ≥ï„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇNotifierÂÅ¥„Çínull„Å®„Åó„Å¶Êâ±„ÅÜ„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíÊèêÊ°à„Åó„Å¶„ÅÑ„Çã„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:12:48*

„Äå**Notifier ÂÅ¥„ÅØ `null` „ÇíË®±ÂÆπ„Åó„Åü„ÅÑ**ÔºàÔºù `build()` „ÇÑ `state` „Åå `null` „ÇíÊåÅ„Å§ÂèØËÉΩÊÄß„Åå„ÅÇ„ÇãÔºâ„Åë„Å©„ÄÅ**ÊúÄÁµÇÁöÑ„Å™ÂêàÊàêÁµêÊûúÔºàcombinedWalletDataProviderÔºâ„Åß„ÅØ `null` „ÉÅ„Çß„ÉÉ„ÇØ„Çí„Åó„Åü„Åè„Å™„ÅÑ**„Äç„Å®„ÅÑ„ÅÜÂ†¥Âêà„ÅØ„ÄÅ

1. **Notifier ÂÅ¥„ÅØ„ÅÇ„Åè„Åæ„Åß ‚Äú`AsyncValue<„Éá„Éº„Çø?>`‚Äù „ÇíËøî„Åô**  
2. **ÂêàÊàêÁî®„ÅÆ ProviderÔºà`combinedWalletDataProvider`Ôºâ„Åß„ÅØ„ÄÅÂêÑ Notifier „ÅÆÁä∂ÊÖã„Çí„Åæ„Å®„ÇÅ„Å¶ ‚ÄúÊúÄÁµÇÁöÑ„Å´ `null` „Å™„Åó„ÅÆ `AsyncValue<data>` „Å´Â§âÊèõ„Åô„Çã‚Äù**  

„Å®„ÅÑ„ÅÜ‰∫åÊÆµÊßã„Åà„ÅßÂØæÂøú„Åô„Çã„ÅÆ„Åå„Çπ„ÉÉ„Ç≠„É™„Åó„Åæ„Åô„ÄÇ

---

# „Åñ„Å£„Åè„Çä„Åó„Åü‰ªïÁµÑ„Åø

Notifier ÂÅ¥:

```dart
@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  /// build() „Åå null „ÇíËøî„Åô
  @override
  FutureOr<WalletBalanceResponseDTOData?> build() async => null;

  /// ‰æã: getWallet() Âëº„Å∂„Å®ÂÜÖÈÉ®ÁöÑ„Å´ state = AsyncValue<WalletBalanceResponseDTOData?>
  Future<WalletBalanceResponseDTOData?> getWallet() async {
    // ÁúÅÁï•
  }
}
```

ÂêàÊàê Provider ÂÅ¥ (‰æã: `combinedWalletDataProvider`):

```dart
/// „ÄåWallet + Nfts„Äç„ÇíÂêàÊàê„Åó„Å¶ÂøÖ„Åö non-null „Éá„Éº„Çø„ÇíËøî„Åô„Åü„ÇÅ„ÅÆ Provider„ÄÇ
/// „Åü„Å†„ÅóÂÆüÈöõ„ÅØ `AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>` Âûã„ÄÇ
///
/// „Åì„Åì„Åß„ÅØ `Provider<AsyncValue<...>>` „Åã `FutureProvider<...>` „ÅÆ„ÅÑ„Åö„Çå„Åã„ÅßË®≠Ë®à„Åß„Åç„Åæ„Åô„Åå„ÄÅ
/// „ÄåÂÜÖÈÉ®„Åß„Åæ„Å®„ÇÅ„Å¶ÂÖ®ÈÉ®ÂæÖ„Å£„Å¶„Åã„ÇâËøî„Åô„Äç„Çà„Çä„ÅØ„ÄåÁä∂ÊÖã„Çí„Éû„Éº„Ç∏„Åó„Å¶„ÅÇ„Åí„Çã„ÄçÊñπ„ÅåÊüîËªü„Å´Êõ∏„Åë„Åæ„Åô„ÄÇ
final combinedWalletDataProvider = Provider.autoDispose<
    AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>
>((ref) {
  // 1) Notifier „ÅÆÁä∂ÊÖã„Çí„Åù„Çå„Åû„ÇåÂèñÂæó (AsyncValue<„Éá„Éº„Çø?>)
  final walletAsync = ref.watch(getWalletNotifierProvider);
  final nftsAsync = ref.watch(getNftsNotifierProvider);

  // 2) „Åù„Çå„Çâ„Çí„Éû„Éº„Ç∏„Åó„Å¶„ÄÅÊúÄÁµÇÁöÑ„Å´
  //    AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)> „Çí‰Ωú„Çã

  // -- 2-1) „Å©„Å°„Çâ„Åã„Åå loading ‰∏≠„Å™„Çâ loading „Å´„Åô„Çã
  if (walletAsync.isLoading || nftsAsync.isLoading) {
    return const AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>.loading();
  }

  // -- 2-2) „Å©„Å°„Çâ„Åã„Åå error „Å™„Çâ error „Å´„Åô„Çã
  if (walletAsync.isError) {
    return AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>.error(
      walletAsync.error!,
      walletAsync.stackTrace,
    );
  }
  if (nftsAsync.isError) {
    return AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>.error(
      nftsAsync.error!,
      nftsAsync.stackTrace,
    );
  }

  // -- 2-3) „Åì„Åì„Åæ„ÅßÊù•„Åü„Çâ‰∏°Êñπ„Å®„ÇÇ data Êâ±„ÅÑ„ÄÇ
  //         „Åó„Åã„Åó‰∏≠Ë∫´„ÅØ„Äå„Éá„Éº„Çø or null„Äç(WalletBalanceResponseDTOData? / GetUserNftsResponseDTOData?)„ÄÇ
  final walletData = walletAsync.value;
  final nftsData = nftsAsync.value;

  // -- 2-4) „Åì„Åì„Åß null „Å†„Å£„ÅüÂ†¥Âêà„Å©„ÅÜ„Åô„Çã„Åã„ÇíÊ±∫„ÇÅ„Çã
  if (walletData == null || nftsData == null) {
    // „Äånull „ÇíÈùûË®±ÂÆπ„Å´„Åó„Åü„ÅÑ„Äç„Å™„Çâ Error Êâ±„ÅÑ„Å´„Åó„Å¶„Åó„Åæ„ÅÜ„Åã„ÄÅ
    // „Äå„Åæ„Å†‰Ωï„ÇÇÂèñÂæó„Åó„Å¶„ÅÑ„Å™„ÅÑÔºù„É≠„Éº„Éá„Ç£„É≥„Ç∞Êâ±„ÅÑ„Å´„Åó„Åü„ÅÑ„Äç„Å™„Çâ loading „Å´„Åó„Å¶„ÇÇOK„ÄÇ
    // ‰æã: Error „Å´„Åó„Å¶„Åó„Åæ„ÅÜ
    return AsyncValue<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>.error(
      Exception('No data found'),
    );
  }

  // -- 2-5) null „Åß„Å™„ÅÑ„Åì„Å®„Åå‰øùË®º„Åï„Çå„Åü„Çâ„ÄÅ„Åù„ÅÆ„Åæ„Åæ data „Å®„Åó„Å¶Ëøî„Åô
  return AsyncValue.data((walletData, nftsData));
});
```

„Åì„Çå„Å´„Çà„Çä„ÄÅ

- **Notifier ÂÅ¥** „ÅØ„ÄåÂàùÊúüÂÄ§„Å®„Åó„Å¶ `null` „ÇíËøî„Åô / `null` „ÇíË®±ÂÆπ„Åô„Çã„ÄçË®≠Ë®à„ÅÆ„Åæ„Åæ„Åß OK„ÄÇ  
- **ÂêàÊàê Provider ÂÅ¥** „Åß„ÅØ„Äå`null` „ÅÆÂ†¥Âêà„ÅØ `AsyncValue.error(...)` „Å™„Å©„Å´„Åô„Çã ‚Üí **UI „Å´Ê∏°„Åô„Å®„Åç„Å´„ÅØ `null` „ÅåÁôªÂ†¥„Åó„Å™„ÅÑ**„ÄçË®≠Ë®à„Å´„Åô„Çã„ÄÇ  

### UI ÂÅ¥„Åß„ÅÆÊõ∏„ÅçÊñπ

„Åü„Å®„Åà„Å∞ `WalletPage` „ÅßÂêàÊàê„Éá„Éº„Çø„Çí‰Ωø„ÅÑ„Åü„ÅÑÂ†¥Âêà:

```dart
class WalletPage extends HookConsumerWidget {
  const WalletPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final combinedAsync = ref.watch(combinedWalletDataProvider);

    return Scaffold(
      appBar: AppBar(title: const Text('Wallet')),
      body: combinedAsync.when(
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (err, st) => Center(child: Text('Error: $err')),
        data: (data) {
          // data „ÅØ (WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)
          final wallet = data.$1;
          final nfts = data.$2;

          // „Åì„Åì„Åß„ÅØ„ÇÇ„ÅÜ null „ÉÅ„Çß„ÉÉ„ÇØ‰∏çË¶ÅÔºÅ
          // Notifier ÂÅ¥„Åß null „ÇíËøî„Åó„Å¶„ÅÑ„ÅüÂ†¥Âêà„Åß„ÇÇ„ÄÅ„Åì„Åì„Å´Êù•„Çã„ÅÆ„ÅØ„Äånull „Åò„ÇÉ„Å™„ÅÑ„Äç„Éë„Çø„Éº„É≥„Å†„Åë

          return Text('STP: ${wallet.stpAmount} / NFTs count: ${nfts.explorers?.length ?? 0}');
        },
      ),
    );
  }
}
```

„Åì„ÅÜ„Åô„Çã„Å® **UI ÂÅ¥** „Åß„ÅØ  
- `null` „ÉÅ„Çß„ÉÉ„ÇØ (`if (something == null)`) „ÅØ‰∏çË¶Å  
- „Äå„Åæ„Å†ÂèñÂæó„Åó„Å¶„Å™„ÅÑ„Äç„Äå„Éá„Éº„Çø„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„ÄçÂ†¥Âêà„ÅØ **`loading:` „Åæ„Åü„ÅØ `error:`** „Å´ÂàÜÂ≤ê„Åï„Çå„Çã  
- ÂÆüË≥™ `(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)` „Å®„Åó„Å¶ÂÆâÂÖ®„Å´Êâ±„Åà„Çã  

„Å®„ÅÑ„ÅÜÊµÅ„Çå„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---

# „Éù„Ç§„É≥„Éà„Åæ„Å®„ÇÅ

1. **„ÄåNotifier ÂÅ¥„Åß null „ÇíË®±ÂÆπ„Åó„Åü„ÅÑ„Äç**  
   - „Åü„Å®„Åà„Å∞„ÄÅ„Åæ„Å†‰∏ÄÂ∫¶„ÇÇ„Éï„Çß„ÉÉ„ÉÅ„Åó„Å¶„ÅÑ„Å™„ÅÑ„Å®„Åç„ÅØ `null` „Å´„Åó„Å¶„Åä„Åè„ÄÅ„Ç®„É©„Éº„ÅåËµ∑„Åç„Åü„ÇâÂÜç„Å≥ `null` „Å´Êàª„Åô etc.  
   - „Åì„Çå„ÅØÂÖ®„ÅèÂïèÈ°å„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÂ•Ω„Åç„Å´ `null` „ÇíÊåÅ„Å§Ë®≠Ë®à„Å´„Åó„Å¶ OK„ÄÇ

2. **„ÄåUI ÂÅ¥„Åß„ÅØ„Åß„Åç„Çã„Å†„Åë `null` Âà§ÂÆö„ÇíÊõ∏„Åç„Åü„Åè„Å™„ÅÑ„Äç**  
   - „Åß„ÅÇ„Çå„Å∞„ÄÅ**ÂêàÊàêÊÆµÈöé„Åß ‚ÄúÊúÄÁµÇÁöÑ„Å´Èùû null „Å´Â§âÊèõ‚Äù** „Åó„Å¶„Åó„Åæ„ÅÜÊñπÊ≥ï„Åå„Ç™„Çπ„Çπ„É°„ÄÇ  
   - „Äå`null` „ÅåÂÖ•„Å£„Å¶„ÅÑ„Åü„Çâ `Exception` „ÇíÊäï„Åí„Å¶ `AsyncValue.error` „Å´„Åô„Çã„Äç„Äå„Åæ„Å†„Éï„Çß„ÉÉ„ÉÅ‰∏≠„Å™„Çâ `AsyncValue.loading` „Å´„Åô„Çã„Äç„Å™„Å©„ÄÅ**UI „ÅåÊâ±„ÅÑ„ÇÑ„Åô„ÅÑÂΩ¢ (loading / error / data) „Å´ÊèÉ„Åà„Çã** „Åì„Å®„Åß„ÄÅUI „ÅØ `when` ÂàÜÂ≤ê„Å†„Åë„ÅßÂÆåÁµê„Åó„ÄÅ`null` „ÉÅ„Çß„ÉÉ„ÇØ„ÅåÊ∂à„Åà„Åæ„Åô„ÄÇ

3. **„ÄåÂÆåÂÖ®„Å´ null ÈùûË®±ÂÆπ„Å´„Åô„Çã„Äç„Åã„ÅØ„Ç¢„Éó„É™„ÅÆ‰ªïÊßòÊ¨°Á¨¨**  
   - ÂêàÊàê Provider „Åß„ÅØ„Äå`null` „Å™„Çâ `AsyncValue.error` „Å´„Åó„Å°„ÇÉ„ÅÜ„Äç„Åß„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åó„ÄÅ  
   - „Äå`null` „Å™„Çâ„Åæ„Å†‰Ωï„ÇÇÂèñÂæó„Åß„Åç„Å¶„Å™„ÅÑÔºùloading Êâ±„ÅÑ„Å´„Åô„Çã„Äç„Åß„ÇÇ OK„ÄÇ  
   - „ÅÑ„Åö„Çå„Å´„Åõ„Çà„Äå**UI „Å´Ê∏°„ÅôÊúÄÁµÇÊÆµÈöé**„Äç„Åß ‚ÄúÈùû null or ÊòéÁ§∫ÁöÑ„Å´ error/loading‚Äù „ÇíË°®Áèæ„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÅÇ„Åí„Çã„Å®„ÄÅ„ÉÅ„É©„Å§„Åç„ÇÑÁÖ©Èõë„Å™ `if (xxx == null)` „Åå„Å™„Åè„Å™„Çã„ÄÅ„Å®„ÅÑ„ÅÜ„Çè„Åë„Åß„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:16:17*

‰ª•‰∏ã„ÇíkeepAlive„Å´„Åó„Å¶„ÄÅ„Åö„Å£„Å®„Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÊåÅ„Å°Á∂ö„Åë„Çã„Åì„Å®„Å´„ÅØ„Åß„Åç„Å™„ÅÑ„ÅÆ„ÅãÔºü

final combinedWalletDataProvider = FutureProvider&lt;
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?,
    )&gt;((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:16:32*

**‰øùÊåÅ„Éá„Éº„Çø„Ç¢„ÇØ„Çª„Çπ„ÅÆÁ¢∫ÂÆüÊÄß„ÇíÈ´ò„ÇÅ„ÇãÊñπÊ≥ï„ÇíËÄÉ„Åà„Çã**

`combinedWalletDataProvider`„Çí„Éö„Éº„Ç∏Â§âÊõ¥ÊôÇ„Å´„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å™„Åå„ÇâÂÜçÂÆüË°å„Åó„Å™„ÅÑ„Çà„ÅÜ‰øù„Å§ÊñπÊ≥ï„ÇíÊ§úË®é‰∏≠„ÄÇ`FutureProvider`„Å´`.keepAlive()`„ÇíËøΩÂä†„Åô„Çã„Åã„ÄÅ`ref.keepAlive()`„Çí‰Ωø„ÅÜ„Ç¢„Ç§„Éá„Ç¢„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

**„Éá„Éº„Çø‰øùÊåÅ„ÅÆÊñπÊ≥ï„ÇíÊé¢„Çã**

`autoDispose`„ÇíÂ§ñ„Åó„Å¶„Åù„ÅÆ„Åæ„Åæ„Å´„Åô„Çã„ÄÅ„Åæ„Åü„ÅØ`ref.keepAlive()`„ÇíÂà©Áî®„Åô„Çã„Åì„Å®„Åß„ÄÅ„Éá„Éº„Çø„Çí„É°„É¢„É™„Å´‰øùÊåÅ„Åó„Å¶‰øùÊåÅ„ÅóÁ∂ö„Åë„ÇãÊñπÊ≥ï„ÇíÊ§úË®é‰∏≠„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:16:32*

ÁµêË´ñ„Åã„ÇâË®Ä„ÅÜ„Å®„ÄÅ**„Åß„Åç„Åæ„Åô**„ÄÇ  
`FutureProvider` „Åß„ÇÇ„ÄÅ**autoDispose „ÇíÂ§ñ„Åô**„Åã„ÄÅ„ÅÇ„Çã„ÅÑ„ÅØ **`autoDispose.keepAlive()`** „Çí‰Ωø„ÅÜ„Åì„Å®„Åß„Äå„Éó„É≠„Éê„Ç§„ÉÄ„ÅåÂ∏∏„Å´„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÊåÅ„ÅóÁ∂ö„Åë„Çã„Äç„Çà„ÅÜ„Å´„Åß„Åç„Åæ„Åô„ÄÇ

---

## 1. `autoDispose` „ÇíÂ§ñ„Åô

‰∏ÄÁï™„Ç∑„É≥„Éó„É´„Å™„ÅÆ„ÅØ„ÄÅÂçò„Å´ `autoDispose` „Çí‰ªò„Åë„Å™„ÅÑ„Åì„Å®„Åß„Åô„ÄÇ
```dart
final combinedWalletDataProvider = FutureProvider<
  (
    WalletBalanceResponseDTOData?,
    GetUserNftsResponseDTOData?,
  )>((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});
```

„Åì„Çå„Å†„Åë„Åß„Äå‰øùÊåÅ„ÅóÁ∂ö„Åë„Çã (dispose „Åï„Çå„Å™„ÅÑ)„ÄçÊåôÂãï„Å´„Å™„Çä„Åæ„Åô„ÄÇ  
- Riverpod 2.x „Åã„Çâ„ÅØ„ÄÅ`autoDispose` „ÅåÊòéÁ§∫ÁöÑ„Å´ÁÑ°„ÅÑÂ†¥Âêà„ÅØ„Äå‰Ωø„Çè„Çå„Å™„Åè„Å™„Å£„Å¶„ÇÇËá™ÂãïÁ†¥Ê£Ñ„Åó„Å™„ÅÑ„Äç(= **keepAlive** ÂêåÊßò) „ÅÆ„Éá„Éï„Ç©„É´„ÉàÊåôÂãï„Åß„Åô„ÄÇ

---

## 2. `autoDispose.keepAlive()` „Çí‰Ωø„ÅÜ

„ÇÇ„Åó„ÄåÂü∫Êú¨„ÅØ `autoDispose` „Çí‰Ωø„ÅÑ„Åü„ÅÑ„Åå„ÄÅ„Åì„ÅÆ Provider „ÅØ‰æãÂ§ñÁöÑ„Å´„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÊåÅ„ÅóÁ∂ö„Åë„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜÂ†¥Âêà„ÅØ„ÄÅRiverpod 2.x „ÅÆ„Äå„Éì„É´„ÉÄ„ÉºÊã°Âºµ„ÄçÊ©üËÉΩ„Åß `.autoDispose.keepAlive()` „Çí„ÉÅ„Çß„Éº„É≥„Åß„Åç„Åæ„Åô„ÄÇ

```dart
final combinedWalletDataProvider = FutureProvider
    .autoDispose
    .keepAlive()
    .<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>(
  (ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
  },
);
```

- „Åì„Çå„Åß„Äå‰∏ÄÂøú `autoDispose` „Å®„Åó„Å¶Êõ∏„ÅÑ„Å¶„ÅÑ„Çã„Åå„ÄÅÂÆüÈöõ„Å´„ÅØ„Äé„Åö„Å£„Å® keepAlive„Äè„Äç„Å®„ÅÑ„ÅÜÊåôÂãï„Å´„Å™„Çä„Åæ„Åô„ÄÇ  
- „Å§„Åæ„Çä„ÄÅ**autoDispose „ÅÆÁ†¥Ê£ÑÂØæË±°„Å´„ÅØ„Å™„Çâ„Åö**„ÄÅ„Éó„É≠„Éê„Ç§„ÉÄ„ÅÆÂÄ§„Çí„Ç≠„É£„ÉÉ„Ç∑„É•„ÅóÁ∂ö„Åë„Åæ„Åô„ÄÇ

---

## 3. „Éó„É≠„Ç∞„É©„É†‰∏≠„Åß `ref.keepAlive()` „ÇíÂëº„Å∂

„Åï„Çâ„Å´Á¥∞„Åã„ÅÑÂà∂Âæ°„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØ„ÄÅ„Éó„É≠„Éê„Ç§„ÉÄÊú¨‰Ωì„ÅÆ„Éì„É´„Éâ‰∏≠„Åß `final link = ref.keepAlive();` „Çí‰Ωø„ÅÑ„ÄÅ**‰ªªÊÑè„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞„Åß `link.close()` „ÇíÂëº„Å∂„Å® dispose „Åô„Çã**„ÄÅ„Å®„ÅÑ„ÅÜÊâãÊ≥ï„ÇÇ„ÅÇ„Çä„Åæ„ÅôÔºà‰Ωø„Çè„Å™„Åë„Çå„Å∞Ê∞∏ÈÅ†„Å´„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÊÆã„ÇãÔºâ„ÄÇ

```dart
final combinedWalletDataProvider = FutureProvider.autoDispose<
    (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>((ref) async {
  // ÊòéÁ§∫ÁöÑ„Å´keepAlive
  final link = ref.keepAlive();

  // „ÇÇ„Åó„Äå‰Ωï„Çâ„Åã„ÅÆÊù°‰ª∂„ÅßÁ†¥Ê£Ñ„Åó„Åü„ÅÑ„Äç„Å™„Çâ„ÄÅ„ÅÇ„Å®„Åß link.close() „ÇíÂëº„Å∂
  // ‰æã:
  // Future.delayed(const Duration(minutes: 10), () => link.close());

  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);
  return (wallet, nfts);
});
```

‰∏äË®ò„ÅÆ„Çà„ÅÜ„Å´Êõ∏„Åë„Å∞„ÄÅ**ÁâπÂÆö„ÅÆ„Ç§„Éô„É≥„Éà„ÇÑ„Çø„Ç§„Éü„É≥„Ç∞„ÅßÊâãÂãï `dispose` „Åó„Åü„ÅÑ**„Å®„ÅÑ„ÅÜÊüîËªü„Å™ÂÆüË£Ö„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ  
„Åù„ÅÜ„Åß„Å™„Åë„Çå„Å∞„ÄÅÂçòÁ¥î„Å´ `.keepAlive()` „Çí‰ªò„Åë„Çã„Å†„ÅëÔºà„Åæ„Åü„ÅØ `autoDispose` „ÇíÂ§ñ„Åô„Å†„ÅëÔºâ„Åß OK „Åß„Åô„ÄÇ

---

# „Åæ„Å®„ÇÅ

- **„Åö„Å£„Å®„Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÊåÅ„Å°Á∂ö„Åë„Åü„ÅÑ** ‚Üí `autoDispose` „Çí‰ªò„Åë„Å™„ÅÑ„Åã„ÄÅ`autoDispose.keepAlive()` „Çí‰Ωø„ÅÜ„ÄÇ  
- ÂÖ∑‰ΩìÁöÑ„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÑ„Åö„Çå„Åã„ÅÆÊõ∏„ÅçÊñπ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

### ÔºàAÔºâ`autoDispose` „ÇíÂ§ñ„Åô

```dart
final combinedWalletDataProvider = FutureProvider<
  (
    WalletBalanceResponseDTOData?,
    GetUserNftsResponseDTOData?,
  )>((ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
});
```

### ÔºàBÔºâ`autoDispose.keepAlive()` „Çí‰Ωø„ÅÜÔºàRiverpod 2.x„ÅÆÊõ∏„ÅçÊñπÔºâ

```dart
final combinedWalletDataProvider = FutureProvider
    .autoDispose
    .keepAlive()
    .<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>(
  (ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
  },
);
```

„Åì„ÅÜ„Åô„Çå„Å∞„ÄÅ**„ÄåÂ∏∏„Å´„Ç≠„É£„ÉÉ„Ç∑„É•„Åï„Çå„ÅüÂÄ§„Çí‰øùÊåÅ„Äç** „Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„ÄÅ  
ÁîªÈù¢„ÇíÈõ¢„Çå„Å¶Êàª„Çã„Åü„Å≥„Å´ÂÜçÂèñÂæó„Åó„Å¶„ÉÅ„É©„Å§„Åè„Çà„ÅÜ„Å™ÊåôÂãï„ÇíÈò≤„Åí„Åæ„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:21:23*

„ÉÅ„É©„Å§„ÅÑ„Å¶„ÅÑ„ÇãÂéüÂõ†„Åå„Çè„Åã„Å£„Åü„ÄÇ‰ª•‰∏ã„ÅßAsyncValue.loading();„ÅÆÁä∂ÊÖã„Å´„Å™„Å£„Å¶„ÅÑ„Çã„Åã„Çâ„Å†„ÄÇ
ÊúÄÂàù„ÅÆ‰∏ÄÂõû„Åó„Åã„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´„Å™„Çâ„Å™„ÅÑÊßò„Å´„ÅØ„Åß„Åç„Å™„ÅÑ„ÅÆ„ÅãÔºü

final combinedWalletDataProvider = FutureProvider&lt;
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?,
    )&gt;((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:21:53*

**ÂØæÂøúÊñπÊ≥ï„ÇíÊ®°Á¥¢‰∏≠**

combinedWalletDataProvider„ÅågetWalletNotifierProvider.future„Å®getNftsNotifierProvider.future„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„ÇãÂïèÈ°å„ÇíË¶ã„Å§„Åë„Å¶„ÅÑ„Çã„ÄÇ„Åì„Çå„Çâ„ÅåË™≠„ÅøËæº„Åø‰∏≠„Å´„Å™„Çã„Å®ÂÜçË™≠„ÅøËæº„Åø„ÇÑÂÜç‰ΩúÊàê„ÅåË°å„Çè„Çå„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅÂàùÂõû„ÅÆË™≠„ÅøËæº„ÅøÊôÇ„Å´„ÅÆ„Åø„Åù„ÅÜ„Å™„Çã„Çà„ÅÜ„Å´„Åó„Åü„ÅÑ„Å®ËÄÉ„Åà„Å¶„ÅÑ„Çã„ÄÇ

**Êñ∞„Åó„ÅÑË™≠„ÅøËæº„Åø„ÇíË¶ãÈÄÅ„ÇãÊñπÊ≥ï„ÇíÊé¢„Çã**

ÂàùÂõû‰ª•Â§ñ„ÅÆË™≠„ÅøËæº„Åø„Çí„Çπ„Ç≠„ÉÉ„Éó„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÁä∂ÊÖã„ÇíÁõ£Ë¶ñ„Åô„Çã„Ç´„Çπ„Çø„É†„Éó„É≠„Éê„Ç§„ÉÄ„ÇíÂÆöÁæ©„Åó„ÄÅÂè§„ÅÑ„Éá„Éº„Çø„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅØ„Éá„Éº„Çø„ÇíËøî„Åó„ÄÅ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÅØ„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„ÇíË°å„ÅÜÊñπÊ≥ï„ÇíÊ®°Á¥¢„Åó„Å¶„ÅÑ„Çã„ÄÇ

**„Éá„Éº„Çø„ÅÆÂèñ„ÇäÊâ±„ÅÑ„ÇíÊ≥®Ë¶ñ**

Âè§„ÅÑ„Éá„Éº„Çø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØË™≠„ÅøËæº„Åø„Çí„Çπ„Ç≠„ÉÉ„Éó„Åó„ÄÅ„Å™„ÅÑÂ†¥Âêà„ÅØË™≠„ÅøËæº„Åø„ÇíË°å„ÅÜ„ÄÇ„Åü„Å†„Åó„ÄÅ‰∫åÂõûÁõÆ‰ª•Èôç„ÅÆ„Éá„Éº„ÇøÂèñÂæó„Åß„ÅØÁä∂ÊÖã„ÇíË™≠„ÅøËæº„Åø„Å´„Åó„Å™„ÅÑÊñπÊ≥ï„ÇíÊé¢„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

**ÂÜçËµ∑Âãï„ÇíÂà∂Âæ°„Åô„ÇãÊñπÊ≥ï„ÅÆÊ®°Á¥¢**

Êñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÅÆÂèñÂæó„Å®Êó¢Â≠ò„Éá„Éº„Çø„ÅÆÂà©Áî®„ÇíÂà∂Âæ°„Åó„ÄÅÁπ∞„ÇäËøî„Åó„ÅÆÂÜçËµ∑Âãï„ÇíÊäëÂà∂„Åô„ÇãÊñπÊ≥ï„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

**ÂêåÊúü„ÇíË¶ãÂÆà„Çã**

Êñ∞„Åó„ÅÑ„Éá„Éº„Çø„ÅÆÂèñÂæó‰∏≠„ÄÅÂè§„ÅÑ„Éá„Éº„Çø„Çí„Åù„ÅÆ„Åæ„Åæ„Å´„Åó„Å¶„Åä„Åè„Åü„ÇÅ„Å´„ÅØ„ÄÅÁä∂ÊÖã„ÇíAsyncValue„Å®„Åó„Å¶Áõ£Ë¶ñ„ÅóÁõ¥„Åô„Åì„Å®„ÅåÂøÖË¶Å„Å†„Å≠„ÄÇ

**„Çπ„ÉÜ„Éº„Çø„Çπ„ÅÆÁõ£Ë¶ñ„Å®„Éá„Éº„Çø„ÅÆÁ∂≠ÊåÅ**

ÈÄöË≤®ÊÆãÈ´ò„Å®NFT„ÅÆÁä∂ÊÖã„ÇíAsyncValue„ÅßÁõ£Ë¶ñ„Åó„ÄÅ„É≠„Éº„Éâ‰∏≠„Åß„ÇÇÊó¢Â≠ò„Éá„Éº„Çø„ÇíÁ∂≠ÊåÅ„Åô„ÇãÊñπÊ≥ï„ÇíÊ®°Á¥¢„Åó„Å¶„ÅÑ„Çã„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:21:53*

„ÉÅ„É©„Å§„Åç„ÅÆÂéüÂõ†„Åå„ÄåÂÜç„Éï„Çß„ÉÉ„ÉÅ„Åô„ÇãÈöõ„Å´ `AsyncValue.loading()` Áä∂ÊÖã„Å´„Å™„Çä„ÄÅUI ‰∏ä„Åß‰∏ÄÁû¨„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„Å∏Âàá„ÇäÊõø„Çè„Å£„Å¶„Åó„Åæ„ÅÜ„Åã„Çâ„Äç„Å™„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ**„ÄåÊó¢„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Çã„Å®„Åç„ÅØ„ÄÅÂÜç„Éï„Çß„ÉÉ„ÉÅ‰∏≠„ÇÇ `loading` „Å´„Åó„Å™„ÅÑ„Äç**„Å®„ÅÑ„ÅÜÂÆüË£Ö„Å´„Åô„Çå„Å∞„ÉÅ„É©„Å§„Åç„ÇíÊäë„Åà„Çâ„Çå„Åæ„Åô„ÄÇ

---

## ËÉåÊôØ

`combinedWalletDataProvider` „Åå

```dart
final combinedWalletDataProvider = FutureProvider<
    (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);
  return (wallet, nfts);
});
```

„ÅÆ„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ**ÂÜÖÈÉ®„Åß `getWalletNotifierProvider.future` / `getNftsNotifierProvider.future` „Åå ‚ÄúÂÜçÂèñÂæó‚Äù „Åï„Çå„Çã** „Å®„ÄÅ  
- `Notifier` ÂÅ¥„Åß `state = AsyncValue.loading();` „Å´Âàá„ÇäÊõø„Åà ‚Üí  
- `combinedWalletDataProvider` „ÇÇ„Äå‰æùÂ≠òÂÖà„Åå `loading` „Å´„Å™„Å£„Åü„Äç„Å®Âà§Êñ≠„Åó `AsyncValue.loading()` ‚Üí  
- UI ÂÅ¥„Åå‰∏ÄÁû¨„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„Å´Â§â„Çè„ÇãÔºà„ÉÅ„É©„Å§„ÅèÔºâ  

„Å®„ÅÑ„ÅÜÊµÅ„Çå„Å´„Å™„Çä„Åæ„Åô„ÄÇ  

---

## Ëß£Ê±∫Á≠ñ„ÅÆÊ¶ÇË¶Å

### „Éù„Ç§„É≥„Éà1: „ÄåÂè§„ÅÑ„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å™„Çâ `loading` „Å´„Åó„Å™„ÅÑ„Äç

`Notifier` ÂÅ¥„ÅÆ `getWallet()` / `getNfts()` „É°„ÇΩ„ÉÉ„Éâ„Åß„ÄÅ

```dart
final oldData = state.valueOrNull;
if (oldData == null) {
  // ÂàùÂõûÂèñÂæó„ÅÆ„Å®„Åç„Å†„Åë„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´
  state = const AsyncValue.loading();
}
```

„ÅÆ„Çà„ÅÜ„Å™ÂàÜÂ≤ê„ÇíÂÖ•„Çå„Å¶„Åä„Åç„ÄÅ**„Åô„Åß„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Çã„Å™„Çâ `loading` „Å´Âàá„ÇäÊõø„Åà„Å™„ÅÑ** „Çà„ÅÜ„Å´„Åô„Çã„ÄÇ  
„Åì„Çå„Å´„Çà„Çä„Äå‰∏ÄÂ∫¶„Éá„Éº„Çø„ÇíÂèñÂæó„Åó„Å¶„Åã„Çâ„ÅØ„ÄÅÂÜçÂèñÂæó‰∏≠„Åß„ÇÇ `state` „Åå `loading` „Å´‰∏äÊõ∏„Åç„Åï„Çå„Å™„ÅÑ„Äç„Åü„ÇÅ„ÄÅ**UI ÂÅ¥„Åß„ÅØ ‚ÄúÂâç„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã‚Äù** „Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

#### ‰æã: `GetWalletNotifier`

```dart
@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  @override
  Future<WalletBalanceResponseDTOData?> build() async => null;

  Future<WalletBalanceResponseDTOData?> getWallet() async {
    // Êó¢„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Çã„Å™„Çâ„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„Å´„Åó„Å™„ÅÑ
    if (!state.hasValue) {
      state = const AsyncValue.loading();
    }

    try {
      final api = await ref.watch(walletApiProvider.future);
      final response = await api.walletControllerGetBalance();
      checkForApiError(response.data);
      final data = response.data?.data;
      if (data == null) {
        throw Exception('No data found');
      }
      state = AsyncValue.data(data);
      return data;
    } catch (error, stack) {
      state = AsyncValue.error(error, stack);
      rethrow;
    }
  }
}
```

ÂêåÊßò„Å´ `GetNftsNotifier` „ÇÇ

```dart
@Riverpod(keepAlive: true)
class GetNftsNotifier extends _$GetNftsNotifier {
  @override
  Future<GetUserNftsResponseDTOData?> build() async => null;

  Future<GetUserNftsResponseDTOData?> getNfts() async {
    // Êó¢„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Çã„Å™„Çâ„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„Å´„Åó„Å™„ÅÑ
    if (!state.hasValue) {
      state = const AsyncValue.loading();
    }

    try {
      final api = await ref.watch(usersApiProvider.future);
      final response = await api.userControllerGetUserNfts();
      checkForApiError(response.data);
      final data = response.data?.data;
      if (data == null) {
        throw Exception('No data found');
      }
      state = AsyncValue.data(data);
      return data;
    } catch (error, stack) {
      state = AsyncValue.error(error, stack);
      rethrow;
    }
  }
}
```

„ÅÆ„Çà„ÅÜ„Å´Êõ∏„Åè„Åì„Å®„Åß„ÄÅ**2ÂõûÁõÆ‰ª•Èôç„ÅÆ `getNfts()` / `getWallet()` Âëº„Å≥Âá∫„Åó„Åß„ÅØ„ÄÅ„Åô„Åß„Å´ `state` „Å´„Éá„Éº„Çø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„Å´Âàá„ÇäÊõø„Åà„Å™„ÅÑ** „Çà„ÅÜ„Å´„Åß„Åç„Åæ„Åô„ÄÇ

---

### „Éù„Ç§„É≥„Éà2: `combinedWalletDataProvider` „Çí `autoDispose.keepAlive` „Åæ„Åü„ÅØ `autoDispose` „ÇíÂ§ñ„Åô

„ÇÇ„Åó„ÄåÁîªÈù¢„ÇíÈõ¢„Çå„Å¶Êàª„Å£„Å¶„Åç„Å¶„ÇÇ„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÊÆã„Å£„Å¶„ÅÑ„Å¶„Åª„Åó„ÅÑ„Äç„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ

- `autoDispose` „ÇíÂ§ñ„Åô ‚Üí `FutureProvider`  
- „ÇÇ„Åó„Åè„ÅØ `autoDispose.keepAlive()` „Çí‰Ωø„ÅÜ ‚Üí `FutureProvider.autoDispose.keepAlive()`

„Å®„Åô„Çå„Å∞„ÄÅ**„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÁ†¥Ê£Ñ„Åï„Çå„Åö**„ÄÅ**ÂÜç„Éì„É´„ÉâÊôÇ„Å´„ÇÇÂâçÂõû„ÅÆ„Éá„Éº„Çø„Åå‰Ωø„Çè„Çå„Çã** „Åü„ÇÅ„ÄÅ„Åï„Çâ„Å´„ÉÅ„É©„Å§„Åç„ÅåÊ∏õ„Çä„Åæ„Åô„ÄÇ

```dart
final combinedWalletDataProvider = FutureProvider
    .autoDispose
    .keepAlive()
    .<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>(
  (ref) async {
    final wallet = await ref.watch(getWalletNotifierProvider.future);
    final nfts = await ref.watch(getNftsNotifierProvider.future);
    return (wallet, nfts);
  },
);
```

„Åì„Çå„Å´„Çà„Å£„Å¶„Äå„Éö„Éº„Ç∏„Åã„ÇâÈõ¢„Çå„Å¶„ÇÇ„Éó„É≠„Éê„Ç§„ÉÄ„ÅØÁ†¥Ê£Ñ„Åï„Çå„Å™„ÅÑ„ÄçÊåôÂãï„Å´„Å™„Çä„ÄÅ  
Êàª„Å£„Å¶„Åç„Åü„Å®„Åç„ÇÇÁõ¥Ââç„ÅÆ„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

---

### UI ‰æã: PullToRefresh (onRefresh) „ÅßÂÜçÂèñÂæó„Åó„Å¶„ÇÇ„ÉÅ„É©„Å§„Åã„Å™„ÅÑ

```dart
class WalletPage extends HookConsumerWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final combinedValue = ref.watch(combinedWalletDataProvider);

    Future<void> onRefresh() async {
      try {
        // „Åì„Åì„Åß Notifier „ÅÆ getNfts/getWallet „ÇíÂëº„Å≥Âá∫„Åô
        // ‰æã: pull to refresh
        await ref.read(getNftsNotifierProvider.notifier).getNfts();
        await ref.read(getWalletNotifierProvider.notifier).getWallet();
      } catch (e) {
        if (context.mounted) {
          ScaffoldMessenger.of(context).showSnackBar(SnackBar(
            content: Text('Error: $e'),
          ));
        }
      }
    }

    return Scaffold(
      body: RefreshIndicator(
        onRefresh: onRefresh,
        child: combinedValue.when(
          data: (data) {
            final walletData = data.$1;
            final nftsData = data.$2;
            // „Åì„Åì„Åß null „ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã„Åã„Å©„ÅÜ„Åã„ÅØ‰ªïÊßòÊ¨°Á¨¨„Å†„Åå„ÄÅ
            // „Åô„Åß„Å´2„Å§„ÅÆ Notifier „Åå„Äånull„ÅÇ„Çã„Åã„ÇÇ„Äç„Å®„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅÂà§ÂÆö„Åô„ÇãÂ†¥Âêà„ÇÇ„ÄÇ
            if (walletData == null || nftsData == null) {
              return const Center(child: Text('No data'));
            }
            // „Åì„Åì„ÅßUIÊßãÁØâ
            return ListView(...);
          },
          loading: () => const Center(child: CircularProgressIndicator()),
          error: (e, st) => Center(child: Text('Error: $e')),
        ),
      ),
    );
  }
}
```

„Åì„ÅÆÁä∂ÊÖã„Åß„ÄåÊó¢„Å´‰∏ÄÂ∫¶„Éá„Éº„ÇøÂèñÂæóÊ∏à„Åø„Äç„ÅÆ„Å®„Åç„Å´ `onRefresh()` „ÇíÂëº„Çì„Åß„ÇÇ„ÄÅ  
**Notifier ÂÅ¥„Åß„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´„Åó„Å™„ÅÑ ‚Üí `combinedWalletDataProvider` „ÇÇ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´Âàá„ÇäÊõø„Çè„Çâ„Å™„ÅÑ ‚Üí ÁîªÈù¢„Å´Ë°®Á§∫„Åï„Çå„Å¶„ÅÑ„Çã„Éá„Éº„Çø„ÅØ„Åù„ÅÆ„Åæ„Åæ**  
‚Ä¶„Å®„Å™„Çã„Åü„ÇÅ„ÄÅ**„ÉÅ„É©„Å§„ÅçÔºàÁîªÈù¢ÂÖ®‰Ωì„Åå„É™„Çª„ÉÉ„Éà„Åï„Çå„Çã„Çà„ÅÜ„Å™ÊåôÂãïÔºâ** „ÅåÁô∫Áîü„Åó„Å™„Åè„Å™„Çä„Åæ„Åô„ÄÇ

---

## Ê≥®ÊÑè: „É¶„Éº„Ç∂‰ΩìÈ®ì‰∏ä„ÄÅÊú¨ÂΩì„Å´„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÂÖ®„ÅèÂá∫„Åï„Å™„ÅÑ„ÅÆ„ÅãÔºü

- „ÄåÂÖ®„Åè„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫„ÇíÂá∫„Åï„Å™„ÅÑ„Äç„Å®„Å™„Çã„Å®„ÄÅ„É¶„Éº„Ç∂„ÅØ„ÄåÂÜçÂèñÂæó‰∏≠„Åã„Å©„ÅÜ„Åã„ÄçÂàÜ„Åã„Çâ„Å™„ÅÑ„ÅÆ„Åß„ÄÅ**„Å©„Åì„Åã„Å´ ‚ÄúÊõ¥Êñ∞‰∏≠‚Äù „ÇíÁ§∫„Åô„Ç§„É≥„Ç∏„Ç±„Éº„Çø„ÇíÂá∫„Åô** „Å™„Å©„ÅÆÂ∑•Â§´„ÇÇÂøÖË¶Å„Å™Â†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ  
- „Åü„Å®„Åà„Å∞„ÄåÁîªÈù¢ÂÖ®‰Ωì„Çí„É≠„Éº„Éá„Ç£„É≥„Ç∞„Å´„Åó„Å™„ÅÑ„Äç„Åë„Å©„ÄÅ**‰∏ÄÈÉ®„Å´„Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„ÇÑ„É≠„Éº„Éá„Ç£„É≥„Ç∞„Ç¢„Ç§„Ç≥„É≥„ÇíÈáç„Å≠„Çã** (Shimmer UI „ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö) „Å™„Å©„Åå‰∏ÄËà¨ÁöÑ„Åß„Åô„ÄÇ  
- „ÅÇ„Çã„ÅÑ„ÅØ„ÄåPullToRefresh „ÅÆ„Ç§„É≥„Ç∏„Ç±„Éº„ÇøÔºà„Åê„Çã„Åê„ÇãÔºâ„ÅåÂõû„Å£„Å¶„ÅÑ„ÇãÈñì„ÅØ„ÄÅ„É™„Çπ„ÉàËá™‰Ωì„ÅØÂâç„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã„Äç„Å®„ÅÑ„ÅÜ„ÇÑ„ÇäÊñπ„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ

**„Äå„ÉÅ„É©„Å§„Åç (‰∏ÄÁû¨ÁîªÈù¢„ÅåÁôΩ„ÇÑÁ©∫„Å´„Å™„Çã)„Äç„ÇíÈò≤„Åê** „ÅÆ„Å®„ÄÅ**„ÄåÂÖ®„Åè„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÂá∫„Åï„Åö„Å´Èö†„Çå„Åü„Å®„Åì„Çç„Åß„Éï„Çß„ÉÉ„ÉÅ„Äç** „ÅØÂæÆÂ¶ô„Å´Áï∞„Å™„Çã„ÅÆ„Åß„ÄÅ„Ç¢„Éó„É™„ÅÆË¶Å‰ª∂„Å´„ÅÇ„Çè„Åõ„Å¶Âà∂Âæ°„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

---

# „Åæ„Å®„ÇÅ

- **„ÉÅ„É©„Å§„Åç„ÅÆÂéüÂõ†** ‚Üí Notifier „Åå„ÄåÂÜç„Éï„Çß„ÉÉ„ÉÅ„ÅÆ„Åü„Å≥„Å´ `state = AsyncValue.loading()`„Äç‚Üí ‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã `combinedWalletDataProvider` „ÇÇ `loading` ‚Üí UI „Åå„É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢„Å´Â§â„Çè„Çã  
- **Ëß£Ê±∫Á≠ñ**  
  1. **Notifier „ÅÆ `getWallet()/getNfts()` ÂÜÖ„Åß„ÄåÊó¢„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å™„Çâ `loading` „Å´„Åó„Å™„ÅÑ„Äç** ÂÆüË£Ö„Å´„Åô„Çã  
     ```dart
     if (!state.hasValue) {
       state = const AsyncValue.loading();
     }
     ```  
  2. **`combinedWalletDataProvider` „Çí `autoDispose.keepAlive()` „Å™„Å©„Åß„Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÊÆã„Åô**  
  3. **UI „ÅØ„ÄåÂâç„ÅÆ„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„Çã„Äç** „Åì„Å®„Åå„Åß„Åç„Çã„ÅÆ„Åß„ÄÅÂÜçÂèñÂæó‰∏≠„Å´ÁîªÈù¢„Åå‰∏ÄÁû¨Ê∂à„Åà„ÇãÁèæË±°Ôºà„ÉÅ„É©„Å§„ÅçÔºâ„ÅåËµ∑„Åç„Å™„Åè„Å™„Çã  

„Åì„Çå„Å´„Çà„Å£„Å¶„ÄÅ**„ÄåÊúÄÂàù„ÅÆ‰∏ÄÂõû„Å†„Åë„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíË°®Á§∫„Åó„ÄÅ2ÂõûÁõÆ‰ª•Èôç„ÅÆ„Éï„Çß„ÉÉ„ÉÅ„Åß„ÅØ„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíË°®Á§∫„Åó„Å™„ÅÑ„Äç** ÊåôÂãï„ÇíÂÆüÁèæ„Åß„Åç„Åæ„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:23:30*

„Åù„Çå„ÅØ„ÇÇ„ÅÜ„ÇÑ„Å£„Å¶„ÅÑ„Çã„Çì„Å†„ÄÇ
„Å™„Åú„Åã„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÂäπ„Åã„ÅöÂøÖ„Åö„É≠„Éº„Éá„Ç£„É≥„Ç∞„Åå2ÂõûËµ∞„Å£„Å¶„ÅÑ„ÇãÊßò„Å™ÊåôÂãï„Å´„Å™„Çã„ÄÇ

import 'package:dio/dio.dart';
import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/domain/api_error.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/api_provider.dart';
import 'package:snpit_guild_app/utils/api_handling_utils.dart';

part 'get_nfts.g.dart';

@Riverpod(keepAlive: true)
class GetNftsNotifier extends _$GetNftsNotifier {
  @override
  Future&lt;GetUserNftsResponseDTOData?&gt; build() async =&gt; null;

  Future&lt;GetUserNftsResponseDTOData&gt; getNfts() async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(usersApiProvider.future);
        final response = await api.userControllerGetUserNfts();
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        checkForApiError(response.data);
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        debugPrintDioException(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception {
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}

import 'package:dio/dio.dart';
import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:snpit_guild_app/domain/api_error.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/api_provider.dart';
import 'package:snpit_guild_app/utils/api_handling_utils.dart';

part 'get_wallet.g.dart';

@Riverpod(keepAlive: true)
class GetWalletNotifier extends _$GetWalletNotifier {
  @override
  Future&lt;WalletBalanceResponseDTOData?&gt; build() async =&gt; null;

  Future&lt;WalletBalanceResponseDTOData&gt; getWallet() async {
    final oldData = state.valueOrNull;
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    try {
      try {
        final api = await ref.watch(walletApiProvider.future);
        final response = await api.walletControllerGetBalance();
        debugPrint('Response Body: ${response.data}');
        debugPrint('Response Body.data: ${response.data?.data}');
        checkForApiError(response.data);
        final data = response.data?.data;
        if (data == null) {
          throw Exception('No data found');
        }
        state = AsyncValue.data(data);
        return data;
      } on DioException catch (error) {
        debugPrintDioException(error);
        checkForApiError(error.response?.data);
        rethrow;
      } on Exception {
        rethrow;
      }
    } on ApiError catch (error, stackTrace) {
      apiErrorHandling(error, ref);
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    } on Exception catch (error, stackTrace) {
      debugPrint('Error: $error');
      state = AsyncValue.error(error, stackTrace);
      rethrow;
    }
  }
}

import 'package:auto_size_text/auto_size_text.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_hooks/flutter_hooks.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/design/color_pallet.dart';
import 'package:snpit_guild_app/domain/design/color_token.dart';
import 'package:snpit_guild_app/domain/nft.dart';
import 'package:snpit_guild_app/domain/nft_type.dart';
import 'package:snpit_guild_app/gen/assets.gen.dart';
import 'package:snpit_guild_app/infrastructure/snapit_guild_api/snapit_guild_api.openapi.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/users/nfts/get_nfts.dart';
import 'package:snpit_guild_app/presentation/providers/api_client/wallet/get_wallet.dart';
import 'package:snpit_guild_app/presentation/widgets/square_image.dart';
import 'package:snpit_guild_app/utils/snack_bar_utils.dart';

final combinedWalletDataProvider = FutureProvider&lt;
    (
      WalletBalanceResponseDTOData?,
      GetUserNftsResponseDTOData?,
    )&gt;((ref) async {
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});

class WalletPage extends HookConsumerWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    Future&lt;void&gt; onTapNft(Nft nft) async {
      // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑Áßª
    }

    Future&lt;void&gt; onTapWalletAddress(String walletAddress) async {
      await Clipboard.setData(ClipboardData(text: walletAddress));

      if (context.mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('$walletAddress copied to clipboard')),
        );
      }
    }

    Future&lt;void&gt; onRefresh() async {
      try {
        await ref.read(getNftsNotifierProvider.notifier).getNfts();
        await ref.read(getWalletNotifierProvider.notifier).getWallet();
      } on Exception catch (error) {
        if (context.mounted) {
          showErrorSnackBar(context, error);
        }
      }
    }

    final combinedWalletAsyncValue = ref.watch(combinedWalletDataProvider);

    useEffect(
      () {
        Future.microtask(() async {
          await onRefresh();
        });
        return null;
      },
      [],
    );

    return Scaffold(
      appBar: AppBar(title: const Text('Wallet')),
      body: RefreshIndicator(
        onRefresh: () async {
          await onRefresh();
        },
        color: ColorToken.primary,
        backgroundColor: ColorToken.bgLight,
        child: combinedWalletAsyncValue.when(
          data: (data) {
            final walletDate = data.$1;
            final nftsData = data.$2;
            if (nftsData == null || walletDate == null) {
              return const SizedBox.shrink();
            }

            final stpValue = walletDate.stpAmount ?? 0;
            final tmpWalletAddress = walletDate.walletAddress ?? '';
            final walletAddress =
                (tmpWalletAddress.isNotEmpty) ? tmpWalletAddress : 'No Address';

            final explorers = nftsData.explorers ?? [];
            final flags = nftsData.flags ?? [];

            final explorerNfts = explorers.map((explorer) {
              final nameParts = explorer.explorerName?.split(' #') ?? ['', ''];
              final name = nameParts[0];
              final number = nameParts.length &gt; 1 ? '#${nameParts[1]}' : '';

              return Nft(
                nftId: explorer.explorerId ?? '',
                tokenId: explorer.tokenId ?? '',
                name: name,
                number: number,
                imageUrl: explorer.explorerImage ?? '',
                nftType: NftType.explorer,
                explorer: explorer,
              );
            }).toList();

            final flagNfts = flags.map((flag) {
              final nameParts = flag.flagName?.split(' #') ?? ['', ''];
              final name = nameParts[0];
              final number = nameParts.length &gt; 1 ? '#${nameParts[1]}' : '';

              return Nft(
                nftId: flag.flagId ?? '',
                tokenId: flag.tokenId ?? '',
                name: name,
                number: number,
                imageUrl: flag.flagImage ?? '',
                nftType: NftType.flag,
                flag: flag,
              );
            }).toList();

            final allNfts = [
              ...explorerNfts,
              ...flagNfts,
            ];

            return SingleChildScrollView(
              physics: const AlwaysScrollableScrollPhysics(),
              child: Padding(
                padding: const EdgeInsets.all(24),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Column(
                      children: [
                        DecoratedBox(
                          decoration: BoxDecoration(
                            color: ColorToken.bg,
                            borderRadius: BorderRadius.circular(8),
                            border: Border.all(
                              color: ColorToken.border,
                            ),
                          ),
                          child: Padding(
                            padding: const EdgeInsets.all(24),
                            child: Column(
                              children: [
                                Image.asset(
                                  Assets.images.stpCoinIcon.path,
                                  width: 32,
                                  height: 32,
                                ),
                                const SizedBox(height: 14),
                                Row(
                                  mainAxisAlignment: MainAxisAlignment.center,
                                  crossAxisAlignment:
                                      CrossAxisAlignment.baseline,
                                  textBaseline: TextBaseline.alphabetic,
                                  children: [
                                    Flexible(
                                      child: AutoSizeText(
                                        stpValue.toString(),
                                        style: const TextStyle(
                                          fontSize: 32,
                                          fontWeight: FontWeight.bold,
                                        ),
                                        maxLines: 1,
                                        minFontSize: 1,
                                        overflow: TextOverflow.ellipsis,
                                      ),
                                    ),
                                    const SizedBox(width: 6),
                                    const Text(
                                      'STP',
                                      style: TextStyle(
                                        fontSize: 16,
                                      ),
                                    ),
                                  ],
                                ),
                                const SizedBox(height: 24),
                                GestureDetector(
                                  onTap: () async {
                                    await onTapWalletAddress(walletAddress);
                                  },
                                  child: Container(
                                    padding: const EdgeInsets.symmetric(
                                      horizontal: 10,
                                      vertical: 5,
                                    ),
                                    decoration: BoxDecoration(
                                      color: ColorPallet.gray800,
                                      borderRadius: BorderRadius.circular(4),
                                    ),
                                    child: Text(
                                      walletAddress,
                                      maxLines: 1,
                                      overflow: TextOverflow.ellipsis,
                                      style: const TextStyle(
                                        fontSize: 13,
                                        color: ColorToken.primaryDark,
                                      ),
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 16),

                    // NFTs
                    const Text(
                      'NFTs',
                      style: TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 16),

                    if (allNfts.isEmpty)
                      const Center(child: Text('No NFTs owned')),

                    Column(
                      children: allNfts.map((nft) {
                        return Padding(
                          padding: const EdgeInsets.only(bottom: 8),
                          child: ClipRRect(
                            borderRadius: BorderRadius.circular(8),
                            // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑ÁßªÔºà„É™„ÉÉ„Éó„É´„Å´Â§âÊõ¥„Åô„ÇãÔºâ
                            // child: Ink(
                            child: DecoratedBox(
                              decoration: BoxDecoration(
                                color: ColorToken.bg,
                                borderRadius: BorderRadius.circular(8),
                                border: Border.all(
                                  color: ColorToken.border,
                                ),
                              ),
                              child: InkWell(
                                borderRadius: BorderRadius.circular(8),
                                onTap: () async {
                                  await onTapNft(nft);
                                },
                                child: Padding(
                                  padding: const EdgeInsets.all(16),
                                  child: Row(
                                    children: [
                                      ClipRRect(
                                        borderRadius: BorderRadius.circular(4),
                                        child: SquareImage(
                                          imageUrl: nft.imageUrl,
                                          size: 56,
                                        ),
                                      ),
                                      const SizedBox(width: 16),
                                      Expanded(
                                        child: Column(
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: [
                                            Row(
                                              children: [
                                                Expanded(
                                                  child: Text(
                                                    nft.name,
                                                    maxLines: 1,
                                                    overflow:
                                                        TextOverflow.ellipsis,
                                                    style: const TextStyle(
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.bold,
                                                    ),
                                                  ),
                                                ),
                                                const SizedBox(width: 4),
                                                Text(
                                                  nft.number,
                                                  maxLines: 1,
                                                  overflow:
                                                      TextOverflow.ellipsis,
                                                  style: const TextStyle(
                                                    fontSize: 12,
                                                    fontWeight: FontWeight.bold,
                                                    color: ColorPallet.gray300,
                                                  ),
                                                ),
                                              ],
                                            ),
                                            const SizedBox(height: 12),
                                            Text(
                                              'TokenID: ${nft.tokenId}',
                                              maxLines: 1,
                                              overflow: TextOverflow.ellipsis,
                                              style: const TextStyle(
                                                fontSize: 12,
                                              ),
                                            ),
                                          ],
                                        ),
                                      ),
                                      // TODO: [„Éï„Çß„Éº„Ç∫2] NFT Ë©≥Á¥∞ÁîªÈù¢„Å∏„ÅÆÈÅ∑Áßª
                                      // const Icon(
                                      //   Icons.chevron_right,
                                      //   size: 32,
                                      //   color: ColorToken.text,
                                      // ),
                                    ],
                                  ),
                                ),
                              ),
                            ),
                          ),
                        );
                      }).toList(),
                    ),
                    const SizedBox(height: 24),
                  ],
                ),
              ),
            );
          },
          loading: () {
            return const Center(
              child: CircularProgressIndicator(),
            );
          },
          error: (error, _) {
            return Center(
              child: Text('Error: $error'),
            );
          },
        ),
      ),
    );
  }
}

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:24:26*

**„Éá„Éº„ÇøÂèñÂæó„ÅÆÂïèÈ°å„ÇíÁâπÂÆö„Åô„Çã**

2„Å§„ÅÆ Notifier „Åå Future&lt;Dto?&gt; „ÇíËøî„Åó„ÄÅÂ∏∏„Å´Ë™≠„ÅøËæº„Åø„Åå2ÂõûË°®Á§∫„Åï„Çå„ÇãÂïèÈ°å„ÇíÊä±„Åà„Å¶„ÅÑ„Çã„ÄÇcombineProvider „Åß„ÅØ„ÄÅwallet „Å® nfts „ÅÆFutureProvider„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„ÄÇ„Éá„Éº„Çø„ÅåÊõ¥Êñ∞„Åï„Çå„Çã„Åü„Å≥„Å´„ÄÅÁä∂ÊÖã„ÇíË™≠„ÅøËæº„Åø„Å´Ë®≠ÂÆö„Åó„ÄÅfetch„Åó„Å¶„Éá„Éº„Çø„ÇíÊ†ºÁ¥ç„Åó„Å¶„ÅÑ„Çã„ÄÇcache„ÅåÊ≠£„Åó„ÅèÂãï‰Ωú„Åó„Å¶„ÅÑ„Å™„ÅÑÂèØËÉΩÊÄß„ÅåÈ´ò„ÅÑ„ÄÇ

**„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÅÆÂõûÊï∞„ÇíÁ¢∫Ë™ç**

`onRefresh`„Åå`useEffect`„ÅßÂëº„Å≥Âá∫„Åï„Çå„ÄÅRefreshIndicator„ÅåÂºï„Å£Âºµ„Çâ„Çå„Çã„Å®„ÄÅ„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åå‰∫åÈáç„Å´„Éà„É™„Ç¨„Éº„Åï„Çå„Å¶„ÅÑ„Çã„Çà„ÅÜ„Å†„ÄÇ„Åì„Çå„Åå2Âõû„ÅÆË™≠„ÅøËæº„Åø„ÇíÂºï„ÅçËµ∑„Åì„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇ

**ÂÜçÂ∏∞ÁöÑ„Å™„Éà„É™„Ç¨„ÉºÁ¢∫Ë™ç**

combinedWalletAsyncValue „Åå `FutureProvider` „Åã„Çâ„ÅÆ `AsyncValue` „Åß„ÄÅ`.future` „Ç¶„Ç©„ÉÉ„ÉÅ„É£„Éº„ÅåÂÜçÂÆüË°å„Åï„Çå„Çã„Åü„Å≥„Å´Êñ∞„Åó„ÅÑ `Future` „Åå„Éà„É™„Ç¨„Éº„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ

**„Éá„Éº„Çø‰øùÊåÅ„ÅÆÁä∂Ê≥Å**

`useEffect`„Çí‰Ωø„Å£„Å¶`onRefresh()`„ÅåÂëº„Å≥Âá∫„Åï„Çå„ÄÅÂÜçÂª∫ÊôÇ„Å´ÂøÖ„Åö„Éá„Éº„Çø„ÅåÊúÄÊñ∞„ÅÆÁä∂ÊÖã„Å´Êõ¥Êñ∞„Åï„Çå„Çã„ÄÇ„Éá„Éº„Çø„ÅØ‰øùÊåÅ„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ

**„Éá„Éº„Çø„ÅÆÁ∂≠ÊåÅ„ÇíÊÑèË≠ò„Åô„Çã**

initial `Notifier`„ÅØ`AsyncValue.data(null)`„Åß„ÄÅ`getNfts()`„ÅåÂëº„Å≥Âá∫„Åï„Çå„Çã„Å®Áä∂ÊÖã„ÅØ`loading`„Å´Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ

**ÈáçË§áÂëº„Å≥Âá∫„Åó„ÅÆÂèØËÉΩÊÄß**

`FutureProvider`„Å®ÊâãÂãï„Åß`getNfts`„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã„Åå„ÄÅÈáçË§á„Åó„Å¶„ÅÑ„Çã„Çà„ÅÜ„Å†„ÄÇ2ÂõûÁõÆ„ÅÆÂëº„Å≥Âá∫„ÅóÂæå„Å´`loading`Áä∂ÊÖã„Å´Êàª„Çã„Åì„Å®„ÅØ„Å™„ÅÑ„ÄÇ

**„É™„Éï„É¨„ÉÉ„Ç∑„É•„Å®„Éá„Éº„ÇøÂèçÊò†**

`useEffect`„ÅÆ`onRefresh()`Âëº„Å≥Âá∫„Åó„Åß`getNftsNotifierProvider`„ÅåË™≠„ÅøËæº„Åø„ÄÅ„Éá„Éº„Çø„ÅåÊàª„Çã„Å®ÂêåÊôÇ„Å´„ÄÅ`RefreshIndicator`„Åã„ÇâÂÜçÂ∫¶`onRefresh()`„ÅåÊâãÂãï„ÅßÂëº„Å≥Âá∫„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ

**ÂÜçÊßãÁØâ„Å®ÊâãÂãïÂëº„Å≥Âá∫„Åó„ÇíÁñë„ÅÜ**

`getNftsNotifierProvider`„ÇÑ`getWalletNotifierProvider`„ÅÆÂÜçÊßãÁØâ„ÅåË°å„Çè„Çå„Å¶„ÅÑ„Çã„Åã„ÄÅ„É¶„Éº„Ç∂„Éº„ÅåÊâãÂãï„ÅßÁä∂ÊÖã„Çí`loading`„Å´Ë®≠ÂÆö„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

**ÂàùÊúüÁä∂ÊÖã„ÅÆÊ§úË®é**

`AsyncValue.data(null)`„Å®`AsyncValue<Dto?>`„ÅÆÈÅï„ÅÑ„ÇíË¶ã„Å¶„ÅÑ„Çã„ÄÇ`oldData`„Åå`null`„Åß„ÇÇ`hasValue`„Åå`true`„Å™„Çâ„ÄÅ`loading`„Å´„ÅØ„Å™„Çâ„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇ

**„Éá„Éº„Çø„ÅÆÂàùÊúüÂåñ„ÇíË¶ãÊ•µ„ÇÅ„Çã**

`oldData`„Åå`null`„ÅÆÂ†¥Âêà„ÅØ`loading`„ÇíË®≠ÂÆö„Åó„ÄÅ2ÂõûÁõÆ„ÅÆÂëº„Å≥Âá∫„ÅóÊôÇ„Å´`oldData`„Åå`null`„Åß„Å™„ÅÑ„Å®„ÄÅ`loading`„ÅØË®≠ÂÆö„Åï„Çå„Å™„ÅÑ„ÄÇ

**Á¢∫Ë™ç„Å®„É™„Éï„É¨„ÉÉ„Ç∑„É•**

`useEffect`„ÅÆ`onRefresh()`Âëº„Å≥Âá∫„Åó„Åå`getNftsNotifierProvider`„ÅÆÂÜçÂëº„Å≥Âá∫„Åó„ÇíÂºï„ÅçËµ∑„Åì„Åó„ÄÅ„Åù„Çå„Åå`loading`Áä∂ÊÖã„Å´Âàá„ÇäÊõø„Çè„Å£„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

**‰∏çË¶Å„ÅÆÈÅ∏ÊäûËÇ¢„ÇíË¶ã„Å§„Åë„Çã**

`useEffect()`ÂÜÖ„ÅÆ`onRefresh()`„ÇíÂâäÈô§„Åô„Çã„Åã„ÄÅ`getNftsNotifierProvider.future`„ÅÆÁõ£Ë¶ñ„ÇíÂ§ñ„Åô„Åì„Å®„Åß„ÄÅ2ÂõûÁõÆ„ÅÆ`loading`Ë®≠ÂÆö„ÇíÈÅø„Åë„ÇãÊñπÊ≥ï„ÇíÊé¢„Å£„Å¶„ÅÑ„Çã„ÄÇ

**ÊâãÂãïÊõ¥Êñ∞„ÅÆÈÅ∏ÊäûËÇ¢**

„É¶„Éº„Ç∂„Éº„ÅåÂºï„ÅçÂá∫„ÅôÈöõ„Å´ÊâãÂãï„ÅßÊõ¥Êñ∞„ÇíË°å„Å£„Å¶„ÅÑ„Çã„Å®„ÄÅ`combinedWalletDataProvider`„Åå`build()`„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åó„ÄÅ2„Å§ÁõÆ„ÅÆ„Çπ„Éî„Éä„Éº„ÅåË°®Á§∫„Åï„Çå„ÇãÂèØËÉΩÊÄß„ÇíÊ§úË®é„Åó„Å¶„ÅÑ„Çã„ÄÇ

**Âçò‰∏Ä„Éá„Éº„ÇøÂèñÂæó„ÅÆÊìç‰Ωú„ÇíËÄÉÊÖÆ**

`combinedWalletDataProvider`„Åå„Éá„Éº„Çø„ÅÆ‰∏ªË¶Å„ÇΩ„Éº„Çπ„Å®„Å™„Çã„Çà„ÅÜ„Å´„ÄÅ`notifiers`„ÅÆ`build`„É°„ÇΩ„ÉÉ„Éâ„ÇíÂÆöÁæ©„Åó„ÄÅÂÆüÈöõ„ÅÆ„Éá„Éº„ÇøÂèñÂæó„Çí`combined provider`„Å´‰ªª„Åõ„ÇãÊñπÊ≥ï„ÇíÊ§úË®é„Åó„Å¶„ÅÑ„Çã„ÄÇ

**ÊâãÂãïÊõ¥Êñ∞„ÅÆÂ∞éÂÖ•**

„É¶„Éº„Ç∂„Éº„Åå`combined provider`„Çí„Éá„Éº„Çø„ÅÆ‰∏ª„Å™ÂèñÂæóÊ∫ê„Å®„Åó„ÄÅ`notifiers`„ÅåÊâãÂãï„Åß`onRefresh()`„ÇíÂëº„Å≥Âá∫„Åó„Å¶Êõ¥Êñ∞„Åô„ÇãÊñπÊ≥ï„Çí„ÄÅÂãïÁöÑ„Å™Êõ¥Êñ∞„Åå‰∏çË¶Å„Å™Â†¥Âêà„Å´ÈáçË¶ñ„Åó„Å¶„ÅÑ„Çã„ÄÇ

**ÊâãÂãïÊõ¥Êñ∞„ÅÆ‰ªïÊßòÂ§âÊõ¥**

„É¶„Éº„Ç∂„Éº„ÅÆ„Éã„Éº„Ç∫„Å´Âêà„ÅÜ„Çà„ÅÜ„ÄÅ`combined provider`„ÅÆ`.future`„ÇíÁúÅ„Åç„ÄÅ`getNftsNotifierProvider`„Å®`getWalletNotifierProvider`„Çí`AsyncValue`„Å®„Åó„Å¶Áõ£Ë¶ñ„Åó„ÄÅ`when`„ÅßÁµêÂêà„Åô„ÇãÊñπÊ≥ï„ÇíÂèñ„ÇäÂÖ•„Çå„Å¶„ÅÑ„Çã„ÄÇ

**‰æùÂ≠òÈñ¢‰øÇ„ÅÆË¶ãÁõ¥„Åó**

`useEffect(() => onRefresh())`„ÇíÂ§ñ„Åó„ÄÅ`combinedWalletDataProvider`„ÅÆËá™ÂãïÂèñÂæó„Çí„Å™„Åè„ÅôÊñπÊ≥ï„Åå„ÄÅÊúÄÈÅ©„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„Å®„Åó„Å¶Ë©ï‰æ°„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ

**ÂõûËª¢ÁèæË±°„ÅÆËß£Èáà**

„É¶„Éº„Ç∂„Éº„Åå`onRefresh()`„ÇíÂëº„Å≥Âá∫„Åô„Å®„ÄÅ`getWalletNotifierProvider.notifier.getWallet()`„Åå„Éà„É™„Ç¨„Éº„Åï„Çå„ÄÅ`combined provider`„ÅåË™≠„ÅøËæº„ÅøÁä∂ÊÖã„Å´Êàª„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Å®ËÄÉ„Åà„Å¶„ÅÑ„Çã„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:24:26*

ÊúÄ„ÇÇÂ§ö„ÅÑÂéüÂõ†„Å®„Åó„Å¶„ÅØ„ÄÅ**„Äå`FutureProvider` ÂÅ¥„Åß‰æùÂ≠òÂÖà„ÅÆ Notifier „Çí `.future` „ÅßÂæÖ„Å°Âèó„Åë„Çã„É≠„Ç∏„ÉÉ„ÇØ„Äç„Å®„ÄåÁîªÈù¢„ÅÆÂàùÊúüÂåñ„ÇÑ„É™„Éï„É¨„ÉÉ„Ç∑„É•ÊôÇ„Å´ÊâãÂãï„Åß `getNfts()` / `getWallet()` „ÇíÂëº„Å∂„É≠„Ç∏„ÉÉ„ÇØ„Äç„ÅÆ‰∏°Êñπ„ÅåËµ∞„Å£„Å¶„ÅÑ„Çã** „Åì„Å®„Åß„ÄÅ„Äå‰∫åÈáç„Å´ÂÜç„Éï„Çß„ÉÉ„ÉÅ ‚Üí 2ÂõûÁõÆ„ÅÆ `loading` Ë°®Á§∫„Äç„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„ÅåÈ´ò„ÅÑ„Åß„Åô„ÄÇ

Âä†„Åà„Å¶„ÄÅ**Notifier „ÅÆÂàùÊúüÁä∂ÊÖã„Åå `AsyncValue.data(null)`** „Åß„ÅÇ„ÇãÂ†¥Âêà„ÄÅ`oldData == null` Âà§ÂÆö„ÅåÁúü„Å®„Å™„Çä„ÄÅ„Åæ„Åü `loading` „Å´Âàá„ÇäÊõø„Çè„Å£„Å¶„Åó„Åæ„ÅÜ‚Äï‚Äï„Å§„Åæ„Çä„Äå„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÂäπ„ÅÑ„Å¶„ÅÑ„Å™„ÅÑ„Çà„ÅÜ„Å´Ë¶ã„Åà„Çã„ÄçÂãï„Åç„Å´„Å™„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ

‰ª•‰∏ã„Å´„ÄÅ„Çà„Åè„ÅÇ„Çã„Äå‰∫åÈáç„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÅåËµ∑„Åç„Çã„Äç„Éë„Çø„Éº„É≥„Å®„Åù„ÅÆÂØæÁ≠ñ„Çí„Åæ„Å®„ÇÅ„Åæ„Åô„ÄÇ

---

# „Å™„Åú `loading` „Åå2ÂõûËµ∞„Çã„ÅÆ„ÅãÔºü

### 1. `FutureProvider` „Åå„Äå‰æùÂ≠òÂÖà Notifier „ÅÆ Future„Äç„ÇíËá™ÂãïÂÆüË°å„Åó„Å¶„ÅÑ„Çã

```dart
final combinedWalletDataProvider = FutureProvider<
    (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>((ref) async {
  // „Åì„Çå„Åå„ÄåNotfier „ÅÆ Future„Äç„ÇíÂæÖ„Å°„ÄÅ„Éá„Éº„ÇøÂèñÂæó„ÇíËá™Âãï„Éà„É™„Ç¨„Éº„Åó„Å¶„ÅÑ„Çã
  final wallet = await ref.watch(getWalletNotifierProvider.future);
  final nfts = await ref.watch(getNftsNotifierProvider.future);

  return (wallet, nfts);
});
```

`ref.watch(XxxNotifierProvider.future)` „ÅØ„Äå`build()` „ÅåËøî„Åô Future „Çí `await` „Åô„Çã„Äç‰ªïÁµÑ„Åø„Åß„Åô„ÄÇ  
- Notifier „Åß `build() => null;` „Å®„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ**ÊúÄÂàù„ÅØ ‚Äúnull „ÇíÂç≥Â∫ß„Å´Ëøî„Åô Future‚Äù ‚Üí 2Âõû„ÇÅ‰ª•Èôç„Å´ `getNfts()`/`getWallet()` „ÅåÂëº„Å∞„Çå„Åü„Å®„Åç„Å´„Åæ„ÅüÂ§âÂåñ** „Å®„ÅÑ„ÅÜÊåôÂãï„Å´„Å™„Çä„Åå„Å°„Åß„Åô„ÄÇ  
- „Åì„Çå„Å´Âä†„Åà„Å¶ **UI ÂÅ¥„Åß `onRefresh()` „ÇíÂëº„Çì„Åß `getNfts()` / `getWallet()` „Çí„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÂÆüË°å** „Åó„Å¶„ÅÑ„Çã„Å®„ÄÅ**2ÂõûÂàÜ„ÅÆÂÜç„Éï„Çß„ÉÉ„ÉÅ** „ÅåËµ∞„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ

### 2. `useEffect` „ÅßÁîªÈù¢ÂàùÊúüÂåñÊôÇ„Å´ `onRefresh()` „ÇíÂëº„Çì„Åß„ÅÑ„Çã

```dart
useEffect(
  () {
    Future.microtask(() async {
      await onRefresh();
    });
    return null;
  },
  [],
);
```

„Åì„Çå„Åå„ÅÇ„Çã„Å®„ÄÅ**ÁîªÈù¢„Åå„Éû„Ç¶„É≥„Éà„Åï„Çå„ÅüÁõ¥Âæå„Å´** `ref.read(getNftsNotifierProvider.notifier).getNfts()` / `ref.read(getWalletNotifierProvider.notifier).getWallet()` „ÅåÂëº„Å∞„Çå„ÄÅNotifier ÂÅ¥„ÅØ `oldData == null` „Åß„ÅÇ„Çå„Å∞ `loading` „Å´„ÄÇ  
„Åù„Åó„Å¶Âêå„Åò„Çø„Ç§„Éü„É≥„Ç∞„Åß `combinedWalletDataProvider` „ÇÇ‰æùÂ≠òÂÖà„ÅÆ `.future` „ÇíÂæÖ„Å£„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ**ÈáçË§á„Åó„Å¶ÂÜç„Éï„Çß„ÉÉ„ÉÅ„ÅåËµ∞„Çã** „Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

---

# ‰∫åÈáç„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÈò≤„Åê„Åü„ÇÅ„ÅÆ‰ª£Ë°®ÁöÑ„Å™ÊñπÊ≥ï

## ÊñπÊ≥ïA: **`combinedWalletDataProvider` „Çí„ÄåÂêàÊàêÁî®„ÅÆÊôÆÈÄö„ÅÆ `Provider`„Äç„Å´Â§â„Åà„Çã**  
Notifier „ÅÆÂèñÂæóÔºàfetchÔºâ„ÅØÊâãÂãï or Notifier „ÅÆ‰∏≠„ÅßË°å„ÅÑ„ÄÅ`combinedWalletDataProvider` „ÅØ **Âçò„Å´2„Å§„ÅÆ AsyncValue „Çí„Éû„Éº„Ç∏** „Åó„Å¶Ëøî„Åô„Å†„Åë„Å´„Åô„Çã„ÄÇ  
„Åì„ÅÜ„Åô„Çå„Å∞ `combinedWalletDataProvider` ÂÅ¥„Åß„ÅØ **Ëá™Âãï„Åß Future „ÇíËµ∞„Çâ„Åõ„Å™„ÅÑ** „ÅÆ„Åß„ÄÅ„ÉÅ„É©„Å§„Åç„ÅåÊ∏õ„Çä„Åæ„Åô„ÄÇ

```dart
/// 1) Notifier „ÅØ "ÂøÖË¶Å„Å™„Å®„Åç„Å´ getNfts()" / "ÂøÖË¶Å„Å™„Å®„Åç„Å´ getWallet()" „ÇíÂëº„Å∂" „Çπ„Çø„Ç§„É´
@Riverpod(keepAlive: true)
class GetNftsNotifier extends _$GetNftsNotifier {
  @override
  FutureOr<GetUserNftsResponseDTOData?> build() => null;

  Future<GetUserNftsResponseDTOData?> getNfts() async {
    final oldData = state.valueOrNull;
    // Êó¢„Å´„Éá„Éº„Çø„ÇíÊåÅ„Å£„Å¶„ÅÑ„Çå„Å∞loading„Å´„Åó„Å™„ÅÑ
    if (oldData == null) {
      state = const AsyncValue.loading();
    }
    // ‰ª•ÈôçAPIÂëº„Å≥Âá∫„Åó
    // ...
  }
}

// ÂêåÊßò„Å´GetWalletNotifier„ÇÇ

/// 2) ÂêàÊàêProvider„ÅØ„Äå2„Å§„ÅÆ AsyncValue „Çí watch„Äç„Åó„Å¶„ÄÅUIÁî®„Å´„Åæ„Å®„ÇÅ„Çã„Å†„Åë
final combinedWalletDataProvider = Provider.autoDispose(
  (ref) {
    final walletState = ref.watch(getWalletNotifierProvider);
    final nftsState = ref.watch(getNftsNotifierProvider);

    // „Åì„Åì„Åß„Åæ„Å®„ÇÅ„Å¶UI„ÅåÊâ±„ÅÑ„ÇÑ„Åô„ÅÑÂΩ¢„Å´„Åô„Çã (AsyncValue „Åß„É©„ÉÉ„Éó„Åó„Åü„Çä)
    // ‰æã„Åà„Å∞:
    if (walletState.isLoading || nftsState.isLoading) {
      return const AsyncValue<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>.loading();
    }
    if (walletState.hasError) {
      return AsyncValue<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>.error(
        walletState.error!,
        walletState.stackTrace,
      );
    }
    if (nftsState.hasError) {
      return AsyncValue<(WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>.error(
        nftsState.error!,
        nftsState.stackTrace,
      );
    }

    // dataÂêåÂ£´„Å™„Çâ„Çø„Éó„É´„Åß„Åæ„Å®„ÇÅ„Çã
    return AsyncValue.data(
      (walletState.valueOrNull, nftsState.valueOrNull),
    );
  },
);
```

### UI ÂÅ¥

```dart
final combinedWalletAsyncValue = ref.watch(combinedWalletDataProvider);

Widget build(BuildContext context, WidgetRef ref) {
  useEffect(() {
    // ÂàùÂõû„Å†„Åë„Éá„Éº„ÇøÂèñÂæó„Åó„Åü„ÅÑ„Å™„Çâ„Åì„Åì„ÅßÂëº„Å∂
    Future.microtask(() => onRefresh());
    return null;
  }, []);

  return combinedWalletAsyncValue.when(
    data: (data) {
      final walletData = data.$1;
      final nftsData = data.$2;
      if (walletData == null || nftsData == null) {
        return const SizedBox.shrink();
      }
      // ...
    },
    loading: () => const Center(child: CircularProgressIndicator()),
    error: (e, st) => Center(child: Text('Error: $e')),
  );
}

Future<void> onRefresh() async {
  await ref.read(getNftsNotifierProvider.notifier).getNfts();
  await ref.read(getWalletNotifierProvider.notifier).getWallet();
}
```

„Åì„ÅÆÂΩ¢„Å™„Çâ„ÄÅ**`combinedWalletDataProvider` „ÅØ„ÅÇ„Åè„Åæ„Åß„ÄåÁä∂ÊÖã„Çí„Åæ„Å®„ÇÅ„Çã„Å†„Åë„Äç** „Åß **Ëá™Ââç„ÅÆ Future „ÇíËµ∞„Çâ„Åõ„Å™„ÅÑ**„ÄÇ  
„Çà„Å£„Å¶„ÄåÁîªÈù¢ÂàùÊúüÂåñ or PullToRefresh „ÅßÊâãÂãïÂëº„Å≥Âá∫„Åó ‚Üí Notifier „ÅåÂÜç„Éï„Çß„ÉÉ„ÉÅ ‚Üí state „ÅåÂ§â„Çè„Çã ‚Üí `combinedWalletDataProvider` „Åå„Åù„ÅÆÁµêÊûú„Çí„Éû„Éº„Ç∏„Äç„Å®„ÅÑ„ÅÜ„Ç∑„É≥„Éó„É´„Å™Âãï„Åç„Å´„Å™„Çä„ÄÅ**ÈáçË§á„Éï„Çß„ÉÉ„ÉÅ** „ÅåËµ∑„Åì„Çä„Å´„Åè„Åè„Å™„Çä„Åæ„Åô„ÄÇ

---

## ÊñπÊ≥ïB: **`combinedWalletDataProvider` „Å†„Åë„ÅßÂÆåÁµê„Åô„ÇãÂÆüË£Ö„Å´„Åó„Å¶„ÄÅUI „Åã„Çâ `onRefresh()` „ÇíÊ∂à„Åô**

ÈÄÜ„Å´„ÄÅ**`combinedWalletDataProvider` „Çí `FutureProvider` „ÅÆ„Åæ„ÅæÊ¥ª„Åã„Åô** „Å™„Çâ„ÄÅ**UI „ÅßÊâãÂãï `onRefresh()` „ÇíÂëº„Çì„Åß `getNfts()` / `getWallet()` „ÇíÂè©„ÅèÂøÖË¶Å„ÅØÂü∫Êú¨ÁöÑ„Å´„ÅÇ„Çä„Åæ„Åõ„Çì**„ÄÇ  
„Å™„Åú„Å™„Çâ `FutureProvider` Ëá™‰Ωì„Åå„Äå„Éó„É≠„Éê„Ç§„ÉÄ„ÅåÂàù„ÇÅ„Å¶ `watch` „Åï„Çå„Åü„Å®„Åç„Å´Ëá™Âãï„Åß Future „ÇíËµ∞„Çâ„Åõ„Çã„Äç‰ªïÁµÑ„Åø„Å†„Åã„Çâ„Åß„Åô„ÄÇ

```dart
final combinedWalletDataProvider = FutureProvider
    .autoDispose
    .keepAlive()
    .<(WalletBalanceResponseDTOData, GetUserNftsResponseDTOData)>(
  (ref) async {
    // „Åì„Åì„Åß‰∏ÄÂ∫¶„Å†„Åë fetch „Åó„Å¶Ëøî„Åô
    // ÈÄ£Á∂ö„Åßfetch„Åô„Çã„Çè„Åë„Åß„ÅØ„Å™„Åè„ÄÅÊú¨ÂΩì„Å´"1Â∫¶„Å†„Åë"„ÅÆ‰Ωø„ÅÑÊñπ„Çí„Åô„Çã„Å™„Çâ„Åì„Çå„ÅßOK
    final apiWallet = await ref.watch(walletApiProvider.future);
    final walletRes = await apiWallet.walletControllerGetBalance();
    final walletData = walletRes.data?.data ?? (throw Exception('No wallet data'));

    final apiNfts = await ref.watch(usersApiProvider.future);
    final nftRes = await apiNfts.userControllerGetUserNfts();
    final nftsData = nftRes.data?.data ?? (throw Exception('No nfts data'));

    return (walletData, nftsData);
  },
);
```

### UI ÂÅ¥

```dart
class WalletPage extends ConsumerWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final combinedAsync = ref.watch(combinedWalletDataProvider);

    return Scaffold(
      appBar: AppBar(...),
      body: combinedAsync.when(
        data: (data) {
          final (walletData, nftsData) = data;
          // ...
        },
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (e, st) => Center(child: Text('Error: $e')),
      ),
    );
  }
}
```

„Åì„Çå„Å™„Çâ„ÄåÂàùÂõûË°®Á§∫ÊôÇ„Å´1Âõû„Å†„Åë API „ÇíÂè©„Åè ‚Üí ÂèñÂæóÂÆå‰∫Ü„Åó„Åü„ÇâÁîªÈù¢„Å´Ë°®Á§∫ ‚Üí ‰ª•Âæå„ÅØ keepAlive „Åï„Çå„Å¶„ÅÑ„Çã„ÅÆ„Åß„Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÊÆã„Çã„Äç„Åü„ÇÅ„ÄÅ**ÂÜç„Éì„É´„Éâ„Åó„Å¶„ÇÇ‰∫åÈáç„Åß„Éï„Çß„ÉÉ„ÉÅ„ÅåËµ∞„Çâ„Åö** „ÉÅ„É©„Å§„Åç„ÅØ„Åª„ÅºÊ∂à„Åà„Åæ„Åô„ÄÇ  
PullToRefresh ÁöÑ„Å™„É™„É≠„Éº„ÉâÊ©üËÉΩ„ÅåÊú¨ÂΩì„Å´ÂøÖË¶Å„Å™„Çâ„ÄÅ`combinedWalletDataProvider` „ÅÆ `invalidate` „Çí‰Ωø„ÅÜ„Åã„ÄÅÂà•ÈÄî„ÄåÂÜçÂèñÂæóÁî®„Å´ÂÜçÂ∫¶ `Future` „ÇíËµ∞„Çâ„Åõ„Çã„É≠„Ç∏„ÉÉ„ÇØ„Äç„ÇíÊõ∏„ÅèÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

---

## ÊñπÊ≥ïC: „ÄåNotifier ÂÅ¥„Åß„Ç≠„É£„ÉÉ„Ç∑„É•ÔºãÂÜç„Éï„Çß„ÉÉ„ÉÅÂà∂Âæ°„ÇíË°å„ÅÑ„ÄÅ`combinedWalletDataProvider` „ÅØ‚ÄúÂæÖ„Å§„Å†„Åë‚Äù„ÄçÔºã„ÄåUI „Åß„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åô„Çã„Å®„Åç„ÅØ `loading` „Å´„Åó„Å™„ÅÑ„Äç

‰ªä„ÅÆÊßãÊàê„ÅÆ„Åæ„Åæ‰∫åÈáç„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÊäë„Åà„Åü„ÅÑÂ†¥Âêà„ÅØ„ÄÅÊ¨°„ÅÆ„Çà„ÅÜ„Å™Êâã„Çí‰Ωø„ÅÑ„Åæ„Åô:

1. **`combinedWalletDataProvider` „Åß `.future` „ÇíÂæÖ„Åü„Å™„ÅÑ**  
   ‰ª£„Çè„Çä„Å´ÊôÆÈÄö„Å´ `ref.watch(getWalletNotifierProvider)` / `ref.watch(getNftsNotifierProvider)` „Çí‰Ωø„Å£„Å¶„Äå„Éá„Éº„Çø„Åã `loading` „Åã `error` „Åã„Äç„ÇíÂêàÊàê„Åó„Åæ„ÅôÔºàÂÖàËø∞„ÅÆÊñπÊ≥ïA„Å®„Åª„ÅºÂêå„ÅòÔºâ„ÄÇ  

2. **`Notifier` ÂÅ¥„Åß„ÄåÊó¢„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çã„Å™„Çâ `loading` „Å´„Åó„Å™„ÅÑ„Äç„Å†„Åë„Åß„Å™„Åè„ÄÅ„ÄåÂàùÊúüÁä∂ÊÖã„ÇÇ `AsyncValue.loading()` „Å´„Åô„Çã„Äç**  
   - „Åü„Å®„Åà„Å∞ `build()` „Åß `return null;` „Åß„ÅØ„Å™„Åè„ÄÅ„ÅÑ„Åç„Å™„Çä `return await fetch...;` „ÅÆ„Çà„ÅÜ„Å´ÂàùÂõû„Åã„ÇâÂèñÂæó„Åô„Çã  
   - „Åù„ÅÜ„Åô„Çå„Å∞ÂàùÂõû„Å†„Åë `loading` ‚Üí 2ÂõûÁõÆ‰ª•Èôç„ÅØ `oldData != null` „Å™„ÅÆ„Åß `loading` „Å´„Åó„Å™„ÅÑ  
   - „ÇÇ„Åó„Åè„ÅØ„Äå`build()` „Åß `AsyncValue.loading()` „Å´„Åó„Å¶„Åä„ÅÑ„Å¶„ÄÅÂæå„Åã„ÇâÊâãÂãï„Åß fetch „Åô„Çã„Äç„Å™„Å©Â∑•Â§´„Åô„Çã

3. **ÁîªÈù¢ÂÅ¥„Åß `useEffect(() => onRefresh())` „ÇíÊ∂à„Åô„Åã„ÄÅ`combinedWalletDataProvider` „Å´Ëá™Âãï„Éï„Çß„ÉÉ„ÉÅ„Åï„Åõ„Å™„ÅÑ**  
   - „ÇÇ„Åó„Å©„ÅÜ„Åó„Å¶„ÇÇ„ÄåÂàùÂõû„Éû„Ç¶„É≥„ÉàÊôÇ„Å´Âº∑Âà∂ÂÜç„Éï„Çß„ÉÉ„ÉÅ„Äç„Åó„Åü„ÅÑ„Å™„Çâ„ÄÅ`Notifier` ÂÜÖ„ÅÆ `build()` „ÅßÊúÄÂàù„Å´ fetch „Åô„Çã„Åª„ÅÜ„ÅåËá™ÁÑ∂„Åß„Åô„ÄÇ  
   - „Äå`combinedWalletDataProvider` „Åß `.future` „ÇíÂëº„Çì„Åß„ÅÑ„Çã„ÄçÔºã„ÄåÁîªÈù¢„Éû„Ç¶„É≥„ÉàÊôÇ„Å´ `onRefresh()` „ÇÇÂëº„Å∂„Äç„ÅÆ„Çà„ÅÜ„Å´‰∫åÈáçÂëº„Å≥Âá∫„Åó„Åô„Çã„Å®„ÄÅÈ´òÁ¢∫Áéá„ÅßÂÜç„Éï„Çß„ÉÉ„ÉÅ„Åå2ÂõûËµ∞„Çä„Åæ„Åô„ÄÇ

---

# „Åæ„Å®„ÇÅ

- **‰∫åÈáç„Åß„É≠„Éº„Éá„Ç£„É≥„Ç∞„ÅåËµ∞„Çã‰∏ªË¶ÅÂõ†**  
  1. `FutureProvider` „Åå `.future` „Çí‰ªã„Åó„Å¶ Notifier „ÅÆ fetch „ÇíËá™Âãï„Åß„Éà„É™„Ç¨„Éº  
  2. ÁîªÈù¢ÂÅ¥„ÅÆ `useEffect(() => onRefresh())` „ÇÑ `RefreshIndicator` „Åß„ÇÇÊâãÂãï„Åß `getNfts()` / `getWallet()` „ÇíÂëº„Å∂  
  3. „Åï„Çâ„Å´ Notifier „ÅÆ `build() => null;` „ÅåÂéüÂõ†„Åß„ÄåÊúÄÂàù„ÅÆÁä∂ÊÖã„Åå `AsyncValue.data(null)` ‚Üí `oldData == null` ‚Üí `loading`„Äç„ÅåÊåü„Åæ„Çã  
- **„ÉÅ„É©„Å§„ÅçÔºàÂÜç„É≠„Éº„Éá„Ç£„É≥„Ç∞Ôºâ„ÇíÊ∏õ„Çâ„Åó„Åü„ÅÑ**  
  - **Notifier „Åß„Äå„Éá„Éº„Çø„ÇíÊó¢„Å´ÊåÅ„Å£„Å¶„ÅÑ„Çã„Å®„Åç„ÅØ `loading` „Å´„Åó„Å™„ÅÑ„Äç**ÔºàÊóß„Éá„Éº„Çø„ÇíË°®Á§∫„ÅóÁ∂ö„Åë„ÇãÔºâ  
  - **`useEffect` „Åß„ÅÆÂàùÂõûÂÜç„Éï„Çß„ÉÉ„ÉÅ„Å® `FutureProvider` „ÅÆËá™Âãï„Éï„Çß„ÉÉ„ÉÅ„ÅåÈáçË§á„Åó„Å™„ÅÑ„Çà„ÅÜÊï¥ÁêÜ„Åô„Çã**  
    - Notifier/Provider „Å©„Å°„Çâ„Åã‰∏ÄÊñπ„Åß„ÄåÊúÄÂàù„ÅÆAPI„Ç≥„Éº„É´„Äç„ÇíË°å„ÅÑ„ÄÅ„ÇÇ„ÅÜ‰∏ÄÊñπ„ÅØ„ÄåÂøÖË¶ÅÊôÇ„ÅÆ„Åø„Äç„ÄÇ  
  - **`autoDispose` „ÇíÂ§ñ„Åô or `keepAlive()`** „Å´„Åó„Å¶„ÄÅ**ÂèñÂæóÊ∏à„Åø„Éá„Éº„Çø„ÇíÁ†¥Ê£Ñ„Åó„Å™„ÅÑ** ‚Üí Ê¨°Âõû„Éì„É´„ÉâÊôÇ„Å´ÂÜç„Éï„Çß„ÉÉ„ÉÅ„ÇíËµ∑„Åì„Åï„Å™„ÅÑ„ÄÇ  

Áâπ„Å´„Äå**`combinedWalletDataProvider` „ÅØÊâãÂãï `onRefresh()` „Å´‰ªª„Åõ„Åü„ÅÑ**„Äç„ÅÆ„Åß„ÅÇ„Çå„Å∞„ÄÅ  
- `FutureProvider` „Çí„ÇÑ„ÇÅ„Å¶ÊôÆÈÄö„ÅÆ `Provider`Ôºàor `StateProvider`) „Åß„Äå2„Å§„ÅÆ Notifier „ÅÆÁä∂ÊÖã„ÇíÂêàÊàê„Äç„Åô„Çã„Å†„Åë„Å´„Åô„Çã  
- ÁîªÈù¢„Åß `onRefresh()` „ÇíÂëº„Å∂„ÅÆ„ÅØ1Âõû„Å†„Åë„Å´„Åó„Å¶„ÄÅ**`useEffect` „Å™„Å©„ÅßÈáçË§á„Ç≥„Éº„É´„Åå„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã**  

„Åì„Çå„Åß„Äå1Âõû„Åó„Åã `loading` „ÇíÊåü„Åæ„Åö„ÄÅ‰ª•Âæå„ÅØÂè§„ÅÑ„Éá„Éº„Çø„ÅåÂÜçÂà©Áî®„Åï„Çå„Çã„ÄçÂãï‰Ωú„Å´„Åß„Åç„Åæ„Åô„ÄÇ

---

## üë§ „É¶„Éº„Ç∂„Éº
*2025/02/11 10:28:01*

„Åì„Çå„Åß„ÅÑ„ÅÑ„ÅÆ„Åã„Å™Ôºü

final combinedWalletDataProvider = Provider(
  (ref) {
    final walletState = ref.watch(getWalletNotifierProvider);
    final nftsState = ref.watch(getNftsNotifierProvider);

    if (walletState.isLoading || nftsState.isLoading) {
      return const AsyncValue&lt;
          (
            WalletBalanceResponseDTOData?,
            GetUserNftsResponseDTOData?
          )&gt;.loading();
    }
    if (walletState.hasError) {
      return AsyncValue&lt;
          (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)&gt;.error(
        walletState.error ?? Exception('Unknown error'),
        walletState.stackTrace ?? StackTrace.current,
      );
    }
    
    if (nftsState.hasError) {
      return AsyncValue&lt;
          (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)&gt;.error(
        nftsState.error ?? Exception('Unknown error'),
        nftsState.stackTrace ?? StackTrace.current,
      );
    }

    return AsyncValue.data(
      (walletState.valueOrNull, nftsState.valueOrNull),
    );
  },
);

---

## üîß „ÉÑ„Éº„É´
*2025/02/11 10:28:17*

**„Éá„Éº„Çø„ÅÆÁµ±Âêà„Å®Á¢∫Ë™ç**

walletState„Å®nftsState„ÅÆÁä∂ÊÖã„ÇíÁµêÂêà„Åó„ÄÅ„É≠„Éº„Éâ‰∏≠„ÄÅ„Ç®„É©„Éº„ÄÅ„Éá„Éº„Çø„ÅÆÂêÑÁä∂ÊÖã„ÇíÂá¶ÁêÜ„Åó„Å¶„ÅÑ„Çã„ÄÇ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÄÅÊúÄÂàù„Å´Ë¶ã„Å§„Åã„Å£„Åü„Ç®„É©„Éº„ÅÆ„Åø„ÇíË°®Á§∫„Åô„Çã„ÄÇ

---

## ü§ñ „Ç¢„Ç∑„Çπ„Çø„É≥„Éà
*2025/02/11 10:28:17*

„ÅØ„ÅÑ„ÄÅ„Åù„ÅÆÊõ∏„ÅçÊñπ„ÅßÂïèÈ°å„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ**„ÄåË§áÊï∞„ÅÆ Notifier „ÇíÂçò„Å´„Éû„Éº„Ç∏„Åó„Å¶ `AsyncValue` „Å®„Åó„Å¶Ëøî„Åô„Å†„Åë„Äç** „Å®„ÅÑ„ÅÜÂÖ∏ÂûãÁöÑ„Å™ÂÆüË£Ö‰æã„Åß„ÄÅ„ÉÅ„É©„Å§„Åç„ÇíÊäë„Åà„ÇÑ„Åô„ÅÑÊßãÊàê„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```dart
final combinedWalletDataProvider = Provider(
  (ref) {
    final walletState = ref.watch(getWalletNotifierProvider);
    final nftsState = ref.watch(getNftsNotifierProvider);

    if (walletState.isLoading || nftsState.isLoading) {
      return const AsyncValue<
          (
            WalletBalanceResponseDTOData?,
            GetUserNftsResponseDTOData?
          )>.loading();
    }
    if (walletState.hasError) {
      return AsyncValue<
          (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>.error(
        walletState.error ?? Exception('Unknown error'),
        walletState.stackTrace ?? StackTrace.current,
      );
    }
    if (nftsState.hasError) {
      return AsyncValue<
          (WalletBalanceResponseDTOData?, GetUserNftsResponseDTOData?)>.error(
        nftsState.error ?? Exception('Unknown error'),
        nftsState.stackTrace ?? StackTrace.current,
      );
    }

    return AsyncValue.data(
      (walletState.valueOrNull, nftsState.valueOrNull),
    );
  },
);
```

## „Åì„ÅÆÂÆüË£Ö„Åß„ÅÆ„Éù„Ç§„É≥„Éà

1. **`Provider`Ôºà„Åæ„Åü„ÅØ `autoDispose` „Å™„Åó/„ÅÇ„Çä„ÅÆ `Provider`Ôºâ„Åß2„Å§„ÅÆ Notifier „ÇíÂêàÊàê**  
   - `walletState` / `nftsState` „Çí„Åù„Çå„Åû„Çå `ref.watch(...)` „Åó„Å¶„ÄÅÁä∂ÊÖã„ÅåÊèÉ„Å£„Åü„Çâ `AsyncValue.data(...)` „ÇíËøî„Åô  
   - „Å©„Å°„Çâ„Åã‰∏ÄÊñπ„Åå `loading` „Å™„ÇâÂêàÊàêÁµêÊûú„ÇÇ `loading`„ÄÅ„Å©„Å°„Çâ„Åã‰∏ÄÊñπ„Åå `error` „Å™„ÇâÂêàÊàêÁµêÊûú„ÇÇ `error` „Å®„Åô„Çã  
   - „ÉÅ„É©„Å§„Åç„ÇíÊ∏õ„Çâ„Åõ„ÇãÂ§ß„Åç„Å™ÁêÜÁî±„ÅØ„ÄÅ„Äå`combinedWalletDataProvider` Ëá™‰Ωì„Åå **Ëá™Âãï„ÅßÂÜç„Éï„Çß„ÉÉ„ÉÅ„Åó„Å™„ÅÑ**„Äç„Åã„Çâ„Åß„Åô„ÄÇ**„ÅÇ„Åè„Åæ„Åß `Notifier` „ÅåÊõ¥Êñ∞„Åï„Çå„Åü„Å®„Åç„Å´ UI „Å∏Áä∂ÊÖã„ÇíÂèçÊò†„Åô„Çã„Å†„Åë**„ÄÇ  

2. **Notifier ÂÅ¥„ÅØ„Äå„Éá„Éº„Çø„ÇíÂèñÂæó„Åô„Çã„Åü„ÇÅ„ÅÆ„É°„ÇΩ„ÉÉ„Éâ„Äç„Å†„Åë„ÇíÊåÅ„Å§Ôºà„Éì„É´„ÉâÊôÇ„Å´„Éï„Çß„ÉÉ„ÉÅ„Åó„Å™„ÅÑÔºâ**  
   - ‰æãÔºö `getWallet()` / `getNfts()` „Çí„Ç≥„Éº„É´„Åó„Å¶Âàù„ÇÅ„Å¶ API ÂèñÂæó„Åó„ÄÅÁµêÊûú„Çí `state` „Å´ÂèçÊò†„Åô„Çã„Çπ„Çø„Ç§„É´  
   - `build()` „Åß„ÅØÂàùÊúüÂÄ§„Å®„Åó„Å¶ `null` „ÇíËøî„Åó„Å¶„ÅÑ„Çã (`=> null;`) „Åü„ÇÅ„ÄÅ„ÄåËá™Âãï„Åß„ÅØÂèñÂæó„Åó„Å™„ÅÑ„Éª„ÅÇ„Åè„Åæ„ÅßÊâãÂãï„ÅßÂëº„Å∂„ÄçË®≠Ë®à  

3. **UI ÂÅ¥„Åß„ÅØ `combinedWalletDataProvider` „ÇíÁõ£Ë¶ñ„Åó„Å¶ÁîªÈù¢„Çí‰Ωú„Çä„ÄÅ`PullToRefresh` „ÇÑ `useEffect` Á≠â„Åß `getWallet()` / `getNfts()` „ÇíÂëº„Å∂**  
   - „Åô„Åß„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çå„Å∞ `oldData != null` „Å™„ÅÆ„Åß `AsyncValue.loading()` „Å´‰∏äÊõ∏„Åç„Åó„Å™„ÅÑ ‚Üí Ââç„ÅÆ„Éá„Éº„Çø„ÅåË°®Á§∫„Åï„ÇåÁ∂ö„Åë„Çã  
   - ÁµêÊûú„Å®„Åó„Å¶„ÄÅ‰ΩïÂ∫¶ÁîªÈù¢„Çí rebuild „Åó„Å¶„ÇÇ„ÄåÂøÖË¶Å‰ª•‰∏ä„Å´„É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢„Å´„Å™„Çâ„Å™„ÅÑ„Äç ‚Üí „ÉÅ„É©„Å§„Åç„ÅåÊ∏õ„Çã  

---

## ËøΩÂä†„ÅßËÄÉÊÖÆ„Åô„Çã„Å®ËâØ„ÅÑÁÇπ

- „Äå‰∏°Êñπ„Åå `error` „Å†„Å£„ÅüÂ†¥Âêà„ÄÅ„Å©„Å°„Çâ„ÅÆ„Ç®„É©„Éº„ÇíË°®Á§∫„Åï„Åõ„Çã„ÅãÔºü„Äç  
  - ÁèæÂú®„ÅÆÂÆüË£Ö„Åß„ÅØ„Äå`walletState` „Åå„Ç®„É©„Éº„Å™„Çâ„Åù„Å°„Çâ„ÇíËøî„Åô„ÄÇ„Åù„ÅÆ„ÅÇ„Å®„Å´ `nftsState` „ÅÆ„Ç®„É©„Éº„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã„Äç„Å®„ÅÑ„ÅÜÈ†ÜÂ∫è„Å™„ÅÆ„Åß„ÄÅ‰∏°ÊñπÂêåÊôÇ„Å´„Ç®„É©„Éº„Åß„ÇÇÂÖà„Å´„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Åü„Åª„ÅÜ„Åó„ÅãË°®Á§∫„Åï„Çå„Åæ„Åõ„Çì„ÄÇ  
  - Ê∞ó„Å´„Å™„Çâ„Å™„Åë„Çå„Å∞„Åì„ÅÆ„Åæ„Åæ„Åß„ÇÇ OK „Åß„Åô„Åå„ÄÅ„Äå‰∏°Êñπ„ÅÆ„Ç®„É©„Éº„Çí„Åæ„Å®„ÇÅ„Å¶Ë°®Á§∫„Åó„Åü„ÅÑ„Äç„Å™„Å©„ÅÆË¶ÅÊúõ„Åå„ÅÇ„Çå„Å∞„ÄÅ„Åù„ÅÆÈÉ®ÂàÜ„Å†„Åë„É≠„Ç∏„ÉÉ„ÇØ„ÇíÂ∑•Â§´„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ  

- „Äå`hasError` „Å†„Åë„Å©ÂÆü„ÅØÂâçÂõû„ÅÆ„Éá„Éº„Çø„ÅåÊÆã„Å£„Å¶„ÅÑ„Çã„Äç„Å®„ÅÑ„ÅÜÂèØËÉΩÊÄß„ÇíËÄÉÊÖÆ„Åô„Çã„Åã„Å©„ÅÜ„Åã  
  - „Éá„Éº„ÇøÂèñÂæó„Å´Â§±Êïó„Åó„Å¶„ÇÇ„ÄåÂâçÂõû„ÅÆ„Éá„Éº„Çø„ÅßÁîªÈù¢„ÇíÁ∂ôÁ∂öË°®Á§∫„Åó„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜÂ†¥Âêà„ÅØ„ÄÅ`Notifier` ÂÅ¥„Åß `state = AsyncValue.data(oldData!)` „Å´Êàª„Åô„Å™„Å©„ÅÆÂ∑•Â§´„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ  
  - „ÇÇ„Åó„Åù„Åì„Åæ„Åß„Åó„Å™„ÅÑ„Å™„Çâ„ÄÅ‰ªäÂõû„ÅÆÂÆüË£Ö„ÅÆ„Çà„ÅÜ„Å´ÂçòÁ¥î„Å´„Äå`hasError` ‚Üí `AsyncValue.error(...)`„Äç„Å´„Åó„Å¶ÁîªÈù¢„Å´„Ç®„É©„Éº„ÇíÂá∫„Åô„ÄÅ„Å®„ÅÑ„ÅÜÂãï„Åç„ÅßÂçÅÂàÜ„Åß„Åô„ÄÇ  

„Åì„Çå„Çâ„ÇíË∏è„Åæ„Åà„Å¶„ÇÇ„ÄÅ**Ë≥™Âïè„ÅÆ„Ç≥„Éº„Éâ„ÅØ„ÄåÂêàÊàêÁî® Provider „Éë„Çø„Éº„É≥„Äç„Å®„Åó„Å¶„ÅØ„Åæ„Å£„Åü„ÅèÂïèÈ°å„ÅÆ„Å™„ÅÑÂÆüË£Ö** „Åß„Åô„ÄÇ„ÅÇ„Å®„ÅØÂÆüÈöõ„Å´‰Ωø„ÅÑ„Å™„Åå„ÇâÂøÖË¶Å„Å´Âøú„Åò„Å¶ÂæÆË™øÊï¥„Åó„Å¶„ÅÑ„ÅèÂΩ¢„Å´„Å™„Çä„Åæ„Åô„ÄÇ

---
