# ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜æ–¹æ³•

Date: 2025-01-12

---

## ğŸ‘¤ User
*2025-01-12 20:49:38*

Flutterã§flutter_secure_storageã‚’ä½¿ã£ã¦accessãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ãŸã„ã€‚

---

## ğŸ”§ Tool
*2025-01-12 20:49:45*

æ¨™æº–çš„ãªæ‰‹æ³•ã‚’æ¨¡ç´¢ä¸­

---

## ğŸ¤– Assistant
*2025-01-12 20:49:45*

`flutter_secure_storage` ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãªã©ã®ç§˜å¯†æƒ…å ±ã‚’ä¿å­˜ã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ãã®æ‰‹é †ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

---

### 1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `pubspec.yaml` ã« `flutter_secure_storage` ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®ã‚‚ã®ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_secure_storage: ^8.0.0  # â€» æœ€æ–°ç‰ˆã«æ›´æ–°ã—ã¦ãã ã•ã„
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
flutter pub get
```

---

### 2. ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¿å­˜ã¨å–å¾—

ä»¥ä¸‹ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã€èª­ã¿è¾¼ã¿ã€å‰Šé™¤ã™ã‚‹åŸºæœ¬çš„ãªä¾‹ã§ã™ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  // FlutterSecureStorage ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
  final _storage = const FlutterSecureStorage();

  // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
  Future<void> _saveAccessToken(String token) async {
    await _storage.write(key: 'access_token', value: token);
  }

  // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’èª­ã¿è¾¼ã‚€ãƒ¡ã‚½ãƒƒãƒ‰
  Future<String?> _readAccessToken() async {
    return await _storage.read(key: 'access_token');
  }

  // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
  Future<void> _deleteAccessToken() async {
    await _storage.delete(key: 'access_token');
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Secure Storage Demo',
      home: Scaffold(
        appBar: AppBar(
          title: const Text('Secure Storage Sample'),
        ),
        body: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              ElevatedButton(
                child: const Text('ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜'),
                onPressed: () async {
                  const token = "your_access_token_here";
                  await _saveAccessToken(token);
                  ScaffoldMessenger.of(context).showSnackBar(
                    const SnackBar(content: Text('ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸ')),
                  );
                },
              ),
              ElevatedButton(
                child: const Text('ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—'),
                onPressed: () async {
                  String? token = await _readAccessToken();
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(content: Text('å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³: $token')),
                  );
                },
              ),
              ElevatedButton(
                child: const Text('ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å‰Šé™¤'),
                onPressed: () async {
                  await _deleteAccessToken();
                  ScaffoldMessenger.of(context).showSnackBar(
                    const SnackBar(content: Text('ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸ')),
                  );
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

---

### 3. è£œè¶³

- **éåŒæœŸå‡¦ç†**: `read`, `write`, `delete` ã¯éåŒæœŸé–¢æ•°ãªã®ã§ã€`await` ã‚’ä½¿ã£ã¦å‘¼ã³å‡ºã—ã¾ã™ã€‚
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: `flutter_secure_storage` ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¿œã˜ãŸé©åˆ‡ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰‹æ³•ï¼ˆä¾‹: iOS ã® Keychainã€Android ã® EncryptedSharedPreferencesï¼‰ã‚’åˆ©ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–ã—ã¾ã™ã€‚
- **æ³¨æ„ç‚¹**:  
  - ã‚¢ãƒ—ãƒªã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ä¿å­˜æ–¹æ³•ã«ååˆ†æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚  
  - ãƒ‡ãƒãƒƒã‚°æ™‚ã«ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹å ´åˆã¯ã€è©²å½“ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é–‹ç™ºè€…å‘ã‘ãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚

---

ã“ã‚Œã§ã€`flutter_secure_storage` ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å®‰å…¨ã«ä¿å­˜ã—ã€å¿…è¦ã«å¿œã˜ã¦å–å¾—ã‚„å‰Šé™¤ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã€è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹é€ ã«åˆã‚ã›ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ã—ã¦ãã ã•ã„ã€‚

---
