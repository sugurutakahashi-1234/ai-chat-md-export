# „ÉÜ„Çπ„ÉàÂÖ±ÈÄöÂåñ„ÅÆÊäΩË±°Âåñ

Date: 2024-02-23

---

## üë§ User
*2024-02-23 13:50:50*

„ÉÜ„Çπ„Éà„ÅÆÁπ∞„ÇäËøî„Åó„ÅÆÂá¶ÁêÜ„ÇíÂÖ±ÈÄöÂåñ„Åó„Åü„ÅÑ

extension String {
    var testRemoveNamed: String {
        self.replacingOccurrences(of: "test", with: "")
    }
}

final class SnapshotTests: XCTestCase {
    func testAppRootView() {
        SnapshotConfig.DeviceType.allCases.forEach { device in
            AppRootView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: device.viewImageConfig)),
                named: device.rawValue,
                testName: #function.testRemoveNamed
            )
        }

        SnapshotConfig.ContentSizeType.allCases.forEach { contentSizeType in
            AppRootView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.minDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.minDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
            
            AppRootView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.maxDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.maxDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
        }
    }
    
    func testLicenseListView() {
        SnapshotConfig.DeviceType.allCases.forEach { device in
            LicenseListView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: device.viewImageConfig)),
                named: device.rawValue,
                testName: #function.testRemoveNamed
            )
        }

        SnapshotConfig.ContentSizeType.allCases.forEach { contentSizeType in
            LicenseListView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.minDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.minDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
            
            LicenseListView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.maxDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.maxDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
        }
    }
    
    func testLicenseDetailView() {
        SnapshotConfig.DeviceType.allCases.forEach { device in
            LicenseDetailView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: device.viewImageConfig)),
                named: device.rawValue,
                testName: #function.testRemoveNamed
            )
        }

        SnapshotConfig.ContentSizeType.allCases.forEach { contentSizeType in
            LicenseDetailView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.minDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.minDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
            
            LicenseDetailView_Previews.snapshots.assertSnapshots(
                as: .image(precision: SnapshotConfig.precision, layout: .device(config: SnapshotConfig.DeviceType.maxDevice.viewImageConfig), traits: .init(preferredContentSizeCategory: contentSizeType.size)),
                named: "\(SnapshotConfig.DeviceType.maxDevice.rawValue)-\(contentSizeType.rawValue)",
                testName: #function.testRemoveNamed
            )
        }
    }
}

enum SnapshotConfig {
    static let precision: Float = 0.95
    
    enum DeviceType: String, CaseIterable {
        case iPhoneSe = "iPhone-SE"
        case iPhone8 = "iPhone-8"
        case iPhone8Plus = "iPhone-8-Plus"
        case iPhoneX = "iPhone-X"
        case iPhoneXsMax = "iPhone-Xs-Max"
        case iPhoneXr = "iPhone-XR"
        case iPadPro11Portrait = "iPad-Pro-11-portrait"
        case iPadPro11Landscape = "iPad-Pro-11-landscape"
        
        static let minDevice: Self = .iPhoneSe
        static let maxDevice: Self = .iPadPro11Portrait
        
        var viewImageConfig: ViewImageConfig {
            switch self {
            case .iPhoneSe:
                return .iPhoneSe
            case .iPhone8:
                return .iPhone8
            case .iPhone8Plus:
                return .iPhone8Plus
            case .iPhoneX:
                return .iPhoneX
            case .iPhoneXsMax:
                return .iPhoneXsMax
            case .iPhoneXr:
                return .iPhoneXr
            case .iPadPro11Portrait:
                return .iPadPro11(.portrait)
            case .iPadPro11Landscape:
                return .iPadPro11(.landscape)
            }
        }
    }

    enum ContentSizeType: String, CaseIterable {
        case extraSmall = "extra-small"
        case small = "small"
        case medium = "medium"
        case large = "large"
        case extraLarge = "extra-large"
        case extraExtraLarge = "extra-extra-large"
        case extraExtraExtraLarge = "extra-extra-extra-large"
        case accessibilityMedium = "accessibility-medium"
        case accessibilityLarge = "accessibility-large"
        case accessibilityExtraLarge = "accessibility-extra-large"
        case accessibilityExtraExtraLarge = "accessibility-extra-extra-large"
        case accessibilityExtraExtraExtraLarge = "accessibility-extra-extra-extra-large"
        
        var size: UIContentSizeCategory {
            switch self {
            case .extraSmall:
                return .extraSmall
            case .small:
                return .small
            case .medium:
                return .medium
            case .large:
                return .large
            case .extraLarge:
                return .extraLarge
            case .extraExtraLarge:
                return .extraExtraLarge
            case .extraExtraExtraLarge:
                return .extraExtraExtraLarge
            case .accessibilityMedium:
                return .accessibilityMedium
            case .accessibilityLarge:
                return .accessibilityLarge
            case .accessibilityExtraLarge:
                return .accessibilityExtraLarge
            case .accessibilityExtraExtraLarge:
                return .accessibilityExtraExtraLarge
            case .accessibilityExtraExtraExtraLarge:
                return .accessibilityExtraExtraExtraLarge
            }
        }
    }
}

---
