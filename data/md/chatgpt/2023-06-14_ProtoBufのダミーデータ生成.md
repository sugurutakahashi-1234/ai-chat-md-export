# ProtoBufのダミーデータ生成

Date: 2023-06-14

---

## 👤 User
*2023-06-14 23:36:45*

Swiftのコードで以下のprotoで生成されるAnchor、Emotions、Interaction を適当に生成する static var dummy のコンピューテッドプロパティーのextension を作って欲しい

syntax = "proto3";

import "google/protobuf/timestamp.proto";

message Anchor {
  // 作成日時
  google.protobuf.Timestamp timestamp = 1;
  oneof type {
    EyeMovement eye_movement = 2;
    Blink blink = 3;
  }
}

message EyeMovement {
  // 目線のx座標
  double left = 1;
  // 目線のy座標
  double top = 2;
  // 眼球運動状態
  EyeMovementState eye_movement_state = 3;
}

enum EyeMovementState {
  FIXATION = 0;
  SACCADE = 1;
  UNKNOWN = 2;
}

message Blink {
  // 右目の瞬き
  bool blink_right = 1;
  // 左目の瞬き
  bool blink_left = 2;
  // TODO(rnarkk)
  // double eye_openness = 3;
}


syntax = "proto3";

import "google/protobuf/timestamp.proto";

message Emotions {
  // 作成日時
  google.protobuf.Timestamp timestamp = 1;
  // 中立
  double neutral = 2;
  // 喜び
  double happy = 3;
  // 悲しみ
  double sad = 4;
  // 怒り
  double angry = 5;
  // 驚き
  double surprised = 6;
  // 嫌悪
  double disgusted = 7;
  // 恐れ
  double fear = 8;
  // 
  double contempt = 9;
}

syntax = "proto3";

import "google/protobuf/timestamp.proto";

message Interaction {
  google.protobuf.Timestamp timestamp = 1;
  oneof event {
    PageViewEvent page_view = 2;
    ClickEvent click = 3;
    ScrollEvent scroll = 4;
  }
}

message PageViewEvent {
  string url = 1;
  string title = 2;
  string referrer = 3;
}

message ClickEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}

message ScrollEvent {
  string target = 1;
  double left = 2;
  double top = 3;
}

---

## 🤖 Assistant
*2023-06-14 23:38:09*

ProtoBufのクラスをSwiftで使用するには、ProtoBufコンパイラを使用してSwiftのコードに変換する必要があります。Swiftでは、公式にサポートされているライブラリはありませんが、SwiftProtobufというライブラリがあり、これを使用することでprotoファイルからSwiftのコードに変換できます。

しかしながら、ここでは要求に従いダミーデータを生成するSwiftのextensionを提供します。具体的なコード生成にはSwiftProtobufの使用を推奨します。

以下に各messageの`dummy`コンピューテッドプロパティを示します。各構造体が既にSwiftのクラスまたは構造体として存在していると仮定しています。

```swift
import Foundation

extension Anchor {
    static var dummy: Anchor {
        var anchor = Anchor()
        anchor.timestamp = Google_Protobuf_Timestamp(date: Date())
        var eyeMovement = EyeMovement()
        eyeMovement.left = 1.0
        eyeMovement.top = 1.0
        eyeMovement.eyeMovementState = .fixation
        anchor.eyeMovement = eyeMovement
        return anchor
    }
}

extension Emotions {
    static var dummy: Emotions {
        var emotions = Emotions()
        emotions.timestamp = Google_Protobuf_Timestamp(date: Date())
        emotions.neutral = 0.1
        emotions.happy = 0.2
        emotions.sad = 0.3
        emotions.angry = 0.4
        emotions.surprised = 0.5
        emotions.disgusted = 0.6
        emotions.fear = 0.7
        emotions.contempt = 0.8
        return emotions
    }
}

extension Interaction {
    static var dummy: Interaction {
        var interaction = Interaction()
        interaction.timestamp = Google_Protobuf_Timestamp(date: Date())
        var pageViewEvent = PageViewEvent()
        pageViewEvent.url = "https://www.example.com"
        pageViewEvent.title = "Example"
        pageViewEvent.referrer = "https://www.google.com"
        interaction.pageView = pageViewEvent
        return interaction
    }
}
```

この例では、簡単のためにInteractionのpageViewイベントのみを生成していますが、clickやscrollのダミーデータも同様に生成することができます。また、Google_Protobuf_Timestampの初期化についても適切に設定する必要があります。

---

## 👤 User
*2023-06-14 23:38:52*

enumで複数あるケースもdummyXXX というコンピューテットプロパティーで全パターン生成してほしい

---

## 🤖 Assistant
*2023-06-14 23:40:15*

アンカーとインタラクションの各タイプの`dummy`コンピューテッドプロパティを追加します。一部、タイプを代表する特定の値を設定するために、以下のダミー値を使用します。

```swift
extension Anchor {
    static var dummyEyeMovement: Anchor {
        var anchor = Anchor()
        anchor.timestamp = Google_Protobuf_Timestamp(date: Date())
        var eyeMovement = EyeMovement()
        eyeMovement.left = 1.0
        eyeMovement.top = 1.0
        eyeMovement.eyeMovementState = .fixation
        anchor.eyeMovement = eyeMovement
        return anchor
    }

    static var dummyBlink: Anchor {
        var anchor = Anchor()
        anchor.timestamp = Google_Protobuf_Timestamp(date: Date())
        var blink = Blink()
        blink.blinkRight = true
        blink.blinkLeft = false
        anchor.blink = blink
        return anchor
    }
}

extension Interaction {
    static var dummyPageViewEvent: Interaction {
        var interaction = Interaction()
        interaction.timestamp = Google_Protobuf_Timestamp(date: Date())
        var pageViewEvent = PageViewEvent()
        pageViewEvent.url = "https://www.example.com"
        pageViewEvent.title = "Example"
        pageViewEvent.referrer = "https://www.google.com"
        interaction.pageView = pageViewEvent
        return interaction
    }

    static var dummyClickEvent: Interaction {
        var interaction = Interaction()
        interaction.timestamp = Google_Protobuf_Timestamp(date: Date())
        var clickEvent = ClickEvent()
        clickEvent.target = "button"
        clickEvent.left = 100.0
        clickEvent.top = 200.0
        interaction.click = clickEvent
        return interaction
    }

    static var dummyScrollEvent: Interaction {
        var interaction = Interaction()
        interaction.timestamp = Google_Protobuf_Timestamp(date: Date())
        var scrollEvent = ScrollEvent()
        scrollEvent.target = "list"
        scrollEvent.left = 300.0
        scrollEvent.top = 400.0
        interaction.scroll = scrollEvent
        return interaction
    }
}
```
このコードでは、アンカーとインタラクションの異なるタイプに対してそれぞれの`dummy`プロパティを提供します。EyeMovementとBlinkの場合、また、PageViewEvent、ClickEvent、ScrollEventの場合でそれぞれのダミーデータを生成します。これらのプロパティはすべてコンピューテッドプロパティで、それぞれのタイプのデフォルト値を返します。

---
