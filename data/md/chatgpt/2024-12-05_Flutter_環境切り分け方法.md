# Flutter ç’°å¢ƒåˆ‡ã‚Šåˆ†ã‘æ–¹æ³•

æ—¥ä»˜: 2024-12-05

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/5 22:12:35*

2024å¹´ç¾åœ¨ã€flutter ã§ã‚‚ã£ã¨ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªç’°å¢ƒã®åˆ‡ã‚Šåˆ†ã‘ã‚’æ–¹æ³•ã‚’æ•™ãˆã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/5 22:13:17*

2024å¹´ç¾åœ¨ã€Flutterã§ç’°å¢ƒï¼ˆä¾‹ãˆã°ã€é–‹ç™ºã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã€æœ¬ç•ªãªã©ï¼‰ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§ã™ã€‚Flutterã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«è¤‡é›‘ã•ã‚’å¢—ã‚„ã•ãšã€æŸ”è»Ÿæ€§ã‚’ä¿ã¡ãªãŒã‚‰ç’°å¢ƒã‚’ç®¡ç†ã§ãã¾ã™ã€‚

---

### 1. **ç’°å¢ƒã”ã¨ã« `main.dart` ã‚’åˆ†ã‘ã‚‹**
Flutterã§ã¯ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹ `main.dart` ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§ç’°å¢ƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

#### ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆä¾‹:
```
lib/
â”œâ”€â”€ main_dev.dart
â”œâ”€â”€ main_staging.dart
â”œâ”€â”€ main_prod.dart
â”œâ”€â”€ app.dart
```

- `app.dart`: å…±é€šã®ã‚¢ãƒ—ãƒªãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã€‚
- `main_dev.dart`: é–‹ç™ºç’°å¢ƒã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚
- `main_staging.dart`: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚
- `main_prod.dart`: æœ¬ç•ªç’°å¢ƒã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚

#### å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹

`app.dart`:
```dart
import 'package:flutter/material.dart';

class MyApp extends StatelessWidget {
  final String environment;

  MyApp({required this.environment});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter App - $environment',
      home: Scaffold(
        appBar: AppBar(title: Text('Environment: $environment')),
        body: Center(child: Text('Running in $environment environment')),
      ),
    );
  }
}
```

`main_dev.dart`:
```dart
import 'package:flutter/material.dart';
import 'app.dart';

void main() {
  runApp(MyApp(environment: 'Development'));
}
```

`main_staging.dart`:
```dart
import 'package:flutter/material.dart';
import 'app.dart';

void main() {
  runApp(MyApp(environment: 'Staging'));
}
```

`main_prod.dart`:
```dart
import 'package:flutter/material.dart';
import 'app.dart';

void main() {
  runApp(MyApp(environment: 'Production'));
}
```

#### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
`main.dart` ã‚’æŒ‡å®šã—ã¦ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œã—ã¾ã™ã€‚

- é–‹ç™ºç’°å¢ƒ:  
  ```bash
  flutter run -t lib/main_dev.dart
  ```
- ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ:  
  ```bash
  flutter run -t lib/main_staging.dart
  ```
- æœ¬ç•ªç’°å¢ƒ:  
  ```bash
  flutter run -t lib/main_prod.dart
  ```

---

### 2. **ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã†**
Flutterã§ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã« `--dart-define` ã‚’ä½¿ã£ã¦ç’°å¢ƒå¤‰æ•°ã‚’æ¸¡ã™æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®åˆ†å‰²ã‚’å¿…è¦æœ€å°é™ã«æŠ‘ãˆãŸã„å ´åˆã¯ã“ã¡ã‚‰ãŒä¾¿åˆ©ã§ã™ã€‚

#### å®Ÿè¡Œä¾‹
```bash
flutter run --dart-define=ENVIRONMENT=development
```

#### ã‚³ãƒ¼ãƒ‰ä¾‹

`main.dart`:
```dart
import 'package:flutter/material.dart';

void main() {
  const environment = String.fromEnvironment('ENVIRONMENT', defaultValue: 'Production');
  runApp(MyApp(environment: environment));
}

class MyApp extends StatelessWidget {
  final String environment;

  MyApp({required this.environment});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter App - $environment',
      home: Scaffold(
        appBar: AppBar(title: Text('Environment: $environment')),
        body: Center(child: Text('Running in $environment environment')),
      ),
    );
  }
}
```

---

### 3. **Flavorã‚’ä½¿ã†æ–¹æ³•**
è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚„ç’°å¢ƒå¤‰æ•°ã‚’ã‚ˆã‚Šçµ„ç¹”åŒ–ã—ã¦ç®¡ç†ã—ãŸã„å ´åˆã¯ã€**flavorï¼ˆãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ï¼‰** ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã®æ–¹æ³•ã¯å…¬å¼ã® `flutter` ãƒ„ãƒ¼ãƒ«ã§ã¯ç›´æ¥ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãŸã‚ã€Androidã¨iOSãã‚Œãã‚Œã«å°‘ã—è¨­å®šãŒå¿…è¦ã§ã™ã€‚

ã‚‚ã—è©³ç´°ãŒå¿…è¦ã§ã‚ã‚Œã°ã€å…·ä½“çš„ãªè¨­å®šæ–¹æ³•ã‚’ã”æ¡ˆå†…ã—ã¾ã™ï¼

---

ã©ã¡ã‚‰ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’ä¿ã¡ãªãŒã‚‰ç’°å¢ƒã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã‚„è¤‡é›‘ã•ã«å¿œã˜ã¦é©åˆ‡ãªæ–¹æ³•ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚

---
