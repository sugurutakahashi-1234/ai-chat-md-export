# å‰Šé™¤å‡¦ç†ã®è¿½åŠ 

æ—¥ä»˜: 2024-12-24

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/12/24 15:11:38*

import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'package:snpit_guild_app/presentation/providers/api_client/guild_api_provider.dart';

part 'delete_guild.g.dart';

@riverpod
class DeleteGuildNotifier extends _$DeleteGuildNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; executeRequest(String guildId) async {
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerDeleteGuild(guildId: guildId);
      debugPrint('Response Body: ${response.data}');
      state = AsyncValue.data(response.data?.data);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'package:snpit_guild_app/presentation/providers/api_client/guild_api_provider.dart';

part 'delete_guild.g.dart';

@riverpod
class DeleteGuildNotifier extends _$DeleteGuildNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; executeRequest(String guildId) async {
    state = const AsyncValue.loading();
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerDeleteGuild(guildId: guildId);
      debugPrint('Response Body: ${response.data}');
      state = AsyncValue.data(response.data?.data);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e');
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace);
    }
  }
}

å‰Šé™¤å‡¦ç†ã‚’å…¥ã‚Œã¦æ¬²ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/12/24 15:11:49*

å‰Šé™¤å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€`executeRequest`ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å‰Šé™¤å‡¦ç†ãŒæˆåŠŸã—ãŸå ´åˆã«ã€ä½•ã‹ã—ã‚‰ã®ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆä¾‹ãˆã°ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’é™¤å¤–ã™ã‚‹ãªã©ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€å‰Šé™¤å‡¦ç†ã®çµæœã‚’é©åˆ‡ã«åæ˜ ã™ã‚‹ãŸã‚ã®å¤‰æ›´ã‚’å«ã‚“ã§ã„ã¾ã™ï¼š

```dart
import 'package:flutter/foundation.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';

import 'package:snpit_guild_app/presentation/providers/api_client/guild_api_provider.dart';

part 'delete_guild.g.dart';

@riverpod
class DeleteGuildNotifier extends _$DeleteGuildNotifier {
  @override
  Future&lt;String?&gt; build() async =&gt; null;

  Future&lt;void&gt; executeRequest(String guildId) async {
    state = const AsyncValue.loading(); // çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ãƒ‰ä¸­ã«è¨­å®š
    try {
      final api = await ref.watch(guildApiProvider.future);
      final response = await api.guildControllerDeleteGuild(guildId: guildId);

      // å‰Šé™¤æˆåŠŸæ™‚ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›
      debugPrint('Response Body: ${response.data}');

      // çŠ¶æ…‹ã‚’ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°
      state = AsyncValue.data(response.data?.data);

      // å¿…è¦ã«å¿œã˜ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§å‰Šé™¤å‡¦ç†ã‚’è¿½åŠ 
      await _removeFromLocalCache(guildId);
    } on Exception catch (e, stackTrace) {
      debugPrint('Error: $e'); // ã‚¨ãƒ©ãƒ¼ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›
      debugPrint('StackTrace: $stackTrace');
      state = AsyncValue.error(e, stackTrace); // çŠ¶æ…‹ã‚’ã‚¨ãƒ©ãƒ¼ã«è¨­å®š
    }
  }

  // ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å‰Šé™¤ã™ã‚‹å‡¦ç†ï¼ˆä¾‹ï¼‰
  Future&lt;void&gt; _removeFromLocalCache(String guildId) async {
    // å‰Šé™¤å¾Œã®ãƒªã‚¹ãƒˆæ›´æ–°ãªã©ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°
    debugPrint('Removing guildId: $guildId from local cache.');
    // å¿…è¦ãªã‚‰ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚„ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’æ›´æ–°

---
