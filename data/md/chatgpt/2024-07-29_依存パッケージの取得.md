# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å–å¾—

æ—¥ä»˜: 2024-07-29

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:40:49*

xcodebuild ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:41:05*

`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ã¯ç›´æ¥ã¯ã§ãã¾ã›ã‚“ãŒã€`swift package` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### æ‰‹é †

1. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’è¡¨ç¤º**
   - `Package.swift` ãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   swift package show-dependencies
   ```

   ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ä¾å­˜é–¢ä¿‚ã‚’ãƒ„ãƒªãƒ¼å½¢å¼ã§è¡¨ç¤ºã—ã¾ã™ã€‚

2. **JSONå½¢å¼ã§ä¾å­˜é–¢ä¿‚ã‚’è¡¨ç¤º**
   - JSONå½¢å¼ã§è¡¨ç¤ºã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   swift package show-dependencies --format json
   ```

   ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ä¾å­˜é–¢ä¿‚ã‚’JSONå½¢å¼ã§è¡¨ç¤ºã—ã¾ã™ã€‚

3. **`xcodebuild` ã‚’ä½¿ç”¨ã—ã¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¢ºèª**
   - Xcodeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -resolvePackageDependencies
   ```

   ã“ã‚Œã«ã‚ˆã‚Šã€ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è§£æ±ºãŒè¡Œã‚ã‚Œã¾ã™ã€‚ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æƒ…å ±ã¯ã€Xcodeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `xcworkspace/xcshareddata/swiftpm/Package.resolved` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ä¾‹

ä»¥ä¸‹ã¯ã€`Package.resolved` ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ã§ã™ã€‚

```json
{
  "object": {
    "pins": [
      {
        "package": "Alamofire",
        "repositoryURL": "https://github.com/Alamofire/Alamofire.git",
        "state": {
          "branch": null,
          "revision": "5c3a473a04ff7f4b5bb620a225cb77a3ff01e85a",
          "version": "5.4.3"
        }
      },
      {
        "package": "SwiftyJSON",
        "repositoryURL": "https://github.com/SwiftyJSON/SwiftyJSON.git",
        "state": {
          "branch": null,
          "revision": "a6d09d39ae21a93dc1aa8439c7973f8c4b6ff936",
          "version": "5.0.0"
        }
      }
    ]
  },
  "version": 1
}
```

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

ä»¥ä¸Šã®æ‰‹é †ã§ã€`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚„ `swift package` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:41:15*

ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã—ãŸã„ã‚“ã 

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:41:28*

`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ Xcode ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã„ã¾ã™ã€‚

### æ‰‹é †

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—**
   - Xcode ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -project <YourProjectName>.xcodeproj
   ```

   ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -project MyApp.xcodeproj
   ```

2. **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—**
   - Xcode ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace
   ```

   ä¾‹ãˆã°ã€`MyWorkspace` ã¨ã„ã†åå‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -workspace MyWorkspace.xcworkspace
   ```

### ä¾‹

ä»¥ä¸‹ã¯ã€`MyApp` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ã§ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
Information about project "MyApp":
    Targets:
        MyApp
        MyAppTests
        MyAppUITests

    Build Configurations:
        Debug
        Release

    Schemes:
        MyApp
        MyApp-Release
        MyApp-Debug
```

ä¸Šè¨˜ã®å‡ºåŠ›ä¾‹ã§ã¯ã€`MyApp` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ¼ãƒãŒ `MyApp`, `MyApp-Release`, `MyApp-Debug` ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã“ã‚Œã§ã€`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:42:56*

Schemes ã®é …ç›®ã®ã¿ã‚’å‡ºåŠ›ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:43:10*

`xcodebuild -list` ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã‹ã‚‰ `Schemes` ã®é …ç›®ã®ã¿ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã«ã€`grep` ã‚„ `awk` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’æŠ½å‡ºã—ã¾ã™ã€‚

### æ‰‹é †

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—**
   - Xcode ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
   ```

   ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
   ```

2. **ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—**
   - Xcode ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d'
   ```

   ä¾‹ãˆã°ã€`MyWorkspace` ã¨ã„ã†åå‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

   ```bash
   xcodebuild -list -workspace MyWorkspace.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d'
   ```

### ä¾‹

ä»¥ä¸‹ã¯ã€`MyApp` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’æŠ½å‡ºã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ã§ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
    MyApp
    MyApp-Release
    MyApp-Debug
```

ã“ã‚Œã§ã€`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã‹ã‚‰ `Schemes` ã®é …ç›®ã®ã¿ã‚’æŠ½å‡ºã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:43:37*

ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã«ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:43:49*

ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å‡ºåŠ›ã™ã‚‹ãŸã‚ã«ã¯ã€`xcodebuild` ã®å‡ºåŠ›ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã€çµæœã‚’é©åˆ‡ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ãŸã‚ã«ã€`awk` ã‚„ `sed` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã§ãã¾ã™ã€‚

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—

ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

### ä¾‹

ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
MyApp-MyApp-Release-MyApp-Debug
```

ã“ã‚Œã§ã€ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:44:20*

ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã ã£ãŸ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:44:28*

ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

### ä¾‹

ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
MyApp MyApp-Release MyApp-Debug
```

ã“ã‚Œã§ã€ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 14:45:17*

ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã”ã„ä½™ç™½ãŒã‚ã‚‹ã®ã§ä¸€ã¤ã®ã‚¹ãƒšãƒ¼ã‚¹ã«åã¾ã‚‹ã‚ˆã†ã«ã—ãŸã„

        DependencyInjectionLayer         Development         DeviceFramework         DomainLayer         DriverTest         FirebaseFramework         InteractorTest         LicenseFramework         OpenAPIFramework         PhoneNumberFramework         PresentationLayer         PresenterTest         Production         SimpleToast         SpeechToTextFramework         Staging         UICatalog         UICatalogLayer         ViewSnapshotTest

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 14:45:25*

ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã—ã€ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’å–ã‚Šé™¤ããŸã‚ã«ã¯ã€`xargs` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿç¾ã§ãã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã—ã¦æ•´å½¢

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã—ã¦æ•´å½¢

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

### ä¾‹

ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚ŒãŸã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
MyApp MyApp-Release MyApp-Debug
```

ã“ã‚Œã§ã€ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§å–å¾—ã—ã€ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 15:49:41*

æ–‡æœ«ãŒ"Framework"ã¨ãªã‚‹ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒ ã®ã¿ã«çµã‚ŠãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 15:49:55*

æ–‡æœ«ãŒ "Framework" ã¨ãªã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã«çµã‚Šè¾¼ã‚€ã«ã¯ã€`grep` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿç¾ã§ãã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’å–å¾—ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

### ä¾‹

ä¾‹ãˆã°ã€`MyApp` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ–‡æœ«ãŒ "Framework" ã¨ãªã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ã¿ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```plaintext
DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework
```

ã“ã‚Œã§ã€æ–‡æœ«ãŒ "Framework" ã¨ãªã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã«çµã‚Šè¾¼ã‚€æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€å¿…è¦ãªã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 15:51:21*

$ xcodebuild -list -workspace SmallTalk.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs ã‚’ä½¿ã£ã¦ã€framework_targets="DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework" ã®å†…å®¹ã‚’æ¯å›æ›¸ãæ›ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚

ã©ã†ã™ã‚Œã°ã„ã„ã‹ï¼Ÿ

```
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer ã¯ DependencyInjectionLayer ã«ä¾å­˜ã—ã¦ã„ãªã„ãŸã‚å…¥ã‚Œã‚‰ã‚Œãªã„
# TODO: ã€Peripheryã€‘è‡ªå‹•çš„ã« RootDIContainer ã‹ã‚‰ Packageå ã‚’æŠ½å‡ºã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å°å…¥ã™ã‚‹ #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"
framework_targets="DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework"

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ é…ä¸‹ã« build_path ã‚’è¨­å®š ã‹ã¤ Xcode ã§å‚ç…§ãƒ•ã‚©ãƒ«ãƒ€ã«ã™ã‚‹ã¨ãªãœã‹ãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã™ã‚‹ã®ã§ã€ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«é…ç½®ã—ã¦ã„ã‚‹
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€å‰Šé™¤ã™ã‚‹ï¼ˆé€Ÿåº¦çš„ã«ã¯é…ããªã‚‹ãŒ scheme ã‚’å¢—ã‚„ã—ãŸã¨ãã« periphery ãŒå¤±æ•—ã—ã¦ã€åŸå› ç©¶æ˜ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§æ¯å›å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ï¼‰
rm -rf "$periphery_build_path"

# periphery ã‚’å®Ÿè¡Œã™ã‚‹ã¨ MacOS ã§ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†ãŒã€ã‚¢ãƒ—ãƒªå†…éƒ¨ã§ UIKit ãªã©ã€iOS ä¾å­˜ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã§ããªã„ãŸã‚ã€ä¸€æ—¦ xcodebuild ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æŒ‡å®šã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
# å¤±æ•—ã™ã‚‹å ´åˆã¯ periphery/build ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€ã¾ãŸã€make ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery ã®ä»•æ§˜ãªã®ã‹ã€Package.swift ãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•ã—ãªã„ã¨ SwiftPM ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã‹ã¤ Workspace ã§æ§‹æˆã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ periphery scan ãŒã†ã¾ãå‹•ã„ã¦ãã‚Œãªã„
cd "${product_package_path}"

# Swift ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡å®šã—ãŸãƒ‘ã‚¹ã§å®Ÿè¡Œã—ã€periphery ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒ£ãƒ³
# --skip-build: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—
# --index-store-path: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã®ã§ã€xcodebuild ã§ãƒ“ãƒ«ãƒ‰ã—ãŸindex-store-pathã®æŒ‡å®š
# --retain-swift-ui-previews: SwiftUI ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
# --retain-public: ä¸è¦ãª Public å®£è¨€ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# å‡ºåŠ›ã«ç’°å¢ƒä¾å­˜ãª root_path ãŒoutputãƒ•ã‚¡ã‚¤ãƒ«ã«ä»˜ä¸ã•ã‚Œã‚‹ãŸã‚ã€ãã‚Œã‚’å‰Šé™¤ã™ã‚‹
sed -i '' "s|${root_path}/||g" $output_file

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€å‰Šé™¤ã™ã‚‹
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# æ¯å›å®Œå…¨ã«clean buildã—ãŸã„ãŸã‚ã€å‰Šé™¤ã™ã‚‹ã€ã¾ãŸå‰Šé™¤ã—ãªã„ã¨ Xcode ã§æ¤œç´¢ã‹ã‘ãŸã¨ãã«ä¸€è‡´ã™ã‚‹å¯¾è±¡ãŒå¢—ãˆã¦ã—ã¾ã†ãŸã‚
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 15:51:59*

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­ã§ `xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãã®çµæœã‚’ `framework_targets` å¤‰æ•°ã«å‹•çš„ã«è¨­å®šã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ä»¥ä¸‹ã«ã€ä¿®æ­£ã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç¤ºã—ã¾ã™ã€‚æ–°ã—ã„éƒ¨åˆ†ã¯ `framework_targets` å¤‰æ•°ã‚’å‹•çš„ã«è¨­å®šã™ã‚‹éƒ¨åˆ†ã§ã™ã€‚

```bash
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer ã¯ DependencyInjectionLayer ã«ä¾å­˜ã—ã¦ã„ãªã„ãŸã‚å…¥ã‚Œã‚‰ã‚Œãªã„
# TODO: ã€Peripheryã€‘è‡ªå‹•çš„ã« RootDIContainer ã‹ã‚‰ Packageå ã‚’æŠ½å‡ºã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å°å…¥ã™ã‚‹ #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"

# å‹•çš„ã« framework_targets ã‚’è¨­å®š
framework_targets=$(xcodebuild -list -workspace SmallTalk.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs)

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ é…ä¸‹ã« build_path ã‚’è¨­å®š ã‹ã¤ Xcode ã§å‚ç…§ãƒ•ã‚©ãƒ«ãƒ€ã«ã™ã‚‹ã¨ãªãœã‹ãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã™ã‚‹ã®ã§ã€ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«é…ç½®ã—ã¦ã„ã‚‹
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€å‰Šé™¤ã™ã‚‹ï¼ˆé€Ÿåº¦çš„ã«ã¯é…ããªã‚‹ãŒ scheme ã‚’å¢—ã‚„ã—ãŸã¨ãã« periphery ãŒå¤±æ•—ã—ã¦ã€åŸå› ç©¶æ˜ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§æ¯å›å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ï¼‰
rm -rf "$periphery_build_path"

# periphery ã‚’å®Ÿè¡Œã™ã‚‹ã¨ MacOS ã§ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†ãŒã€ã‚¢ãƒ—ãƒªå†…éƒ¨ã§ UIKit ãªã©ã€iOS ä¾å­˜ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã§ããªã„ãŸã‚ã€ä¸€æ—¦ xcodebuild ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æŒ‡å®šã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
# å¤±æ•—ã™ã‚‹å ´åˆã¯ periphery/build ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€ã¾ãŸã€make ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery ã®ä»•æ§˜ãªã®ã‹ã€Package.swift ãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•ã—ãªã„ã¨ SwiftPM ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã‹ã¤ Workspace ã§æ§‹æˆã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ periphery scan ãŒã†ã¾ãå‹•ã„ã¦ãã‚Œãªã„
cd "${product_package_path}"

# Swift ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡å®šã—ãŸãƒ‘ã‚¹ã§å®Ÿè¡Œã—ã€periphery ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒ£ãƒ³
# --skip-build: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—
# --index-store-path: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã®ã§ã€xcodebuild ã§ãƒ“ãƒ«ãƒ‰ã—ãŸindex-store-pathã®æŒ‡å®š
# --retain-swift-ui-previews: SwiftUI ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
# --retain-public: ä¸è¦ãª Public å®£è¨€ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# å‡ºåŠ›ã«ç’°å¢ƒä¾å­˜ãª root_path ãŒoutputãƒ•ã‚¡ã‚¤ãƒ«ã«ä»˜ä¸ã•ã‚Œã‚‹ãŸã‚ã€ãã‚Œã‚’å‰Šé™¤ã™ã‚‹
sed -i '' "s|${root_path}/||g" $output_file

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€å‰Šé™¤ã™ã‚‹
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# æ¯å›å®Œå…¨ã«clean buildã—ãŸã„ãŸã‚ã€å‰Šé™¤ã™ã‚‹ã€ã¾ãŸå‰Šé™¤ã—ãªã„ã¨ Xcode ã§æ¤œç´¢ã‹ã‘ãŸã¨ãã«ä¸€è‡´ã™ã‚‹å¯¾è±¡ãŒå¢—ãˆã¦ã—ã¾ã†ãŸã‚
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ã€`xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒªã‚¹ãƒˆã—ã€`grep` ã¨ `xargs` ã‚’ä½¿ã£ã¦æ–‡æœ«ãŒ "Framework" ã§çµ‚ã‚ã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã‚’æŠ½å‡ºã—ã€`framework_targets` å¤‰æ•°ã«ä»£å…¥ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¯å›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã« `framework_targets` ã®å†…å®¹ãŒå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/29 15:52:20*

workspace_name="SmallTalk" ã¨ã—ã¦å®šç¾©ã—ã¦ã»ã—ã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/29 15:52:52*

ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€`workspace_name` å¤‰æ•°ã‚’å®šç¾©ã—ã€æŒ‡å®šã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã‚’ä½¿ç”¨ã—ã¦ `xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

workspace_name="SmallTalk"
mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer ã¯ DependencyInjectionLayer ã«ä¾å­˜ã—ã¦ã„ãªã„ãŸã‚å…¥ã‚Œã‚‰ã‚Œãªã„
# TODO: ã€Peripheryã€‘è‡ªå‹•çš„ã« RootDIContainer ã‹ã‚‰ Packageå ã‚’æŠ½å‡ºã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å°å…¥ã™ã‚‹ #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"

# å‹•çš„ã« framework_targets ã‚’è¨­å®š
framework_targets=$(xcodebuild -list -workspace "${workspace_name}.xcworkspace" | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs)

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ é…ä¸‹ã« build_path ã‚’è¨­å®š ã‹ã¤ Xcode ã§å‚ç…§ãƒ•ã‚©ãƒ«ãƒ€ã«ã™ã‚‹ã¨ãªãœã‹ãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã™ã‚‹ã®ã§ã€ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«é…ç½®ã—ã¦ã„ã‚‹
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€å‰Šé™¤ã™ã‚‹ï¼ˆé€Ÿåº¦çš„ã«ã¯é…ããªã‚‹ãŒ scheme ã‚’å¢—ã‚„ã—ãŸã¨ãã« periphery ãŒå¤±æ•—ã—ã¦ã€åŸå› ç©¶æ˜ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§æ¯å›å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ï¼‰
rm -rf "$periphery_build_path"

# periphery ã‚’å®Ÿè¡Œã™ã‚‹ã¨ MacOS ã§ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†ãŒã€ã‚¢ãƒ—ãƒªå†…éƒ¨ã§ UIKit ãªã©ã€iOS ä¾å­˜ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã§ããªã„ãŸã‚ã€ä¸€æ—¦ xcodebuild ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æŒ‡å®šã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
# å¤±æ•—ã™ã‚‹å ´åˆã¯ periphery/build ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€ã¾ãŸã€make ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery ã®ä»•æ§˜ãªã®ã‹ã€Package.swift ãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•ã—ãªã„ã¨ SwiftPM ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã‹ã¤ Workspace ã§æ§‹æˆã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ periphery scan ãŒã†ã¾ãå‹•ã„ã¦ãã‚Œãªã„
cd "${product_package_path}"

# Swift ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡å®šã—ãŸãƒ‘ã‚¹ã§å®Ÿè¡Œã—ã€periphery ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒ£ãƒ³
# --skip-build: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—
# --index-store-path: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã®ã§ã€xcodebuild ã§ãƒ“ãƒ«ãƒ‰ã—ãŸindex-store-pathã®æŒ‡å®š
# --retain-swift-ui-previews: SwiftUI ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
# --retain-public: ä¸è¦ãª Public å®£è¨€ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠã
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# å‡ºåŠ›ã«ç’°å¢ƒä¾å­˜ãª root_path ãŒoutputãƒ•ã‚¡ã‚¤ãƒ«ã«ä»˜ä¸ã•ã‚Œã‚‹ãŸã‚ã€ãã‚Œã‚’å‰Šé™¤ã™ã‚‹
sed -i '' "s|${root_path}/||g" $output_file

# ç„¡è¦–ã™ã‚‹è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€å‰Šé™¤ã™ã‚‹
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# æ¯å›å®Œå…¨ã«clean buildã—ãŸã„ãŸã‚ã€å‰Šé™¤ã™ã‚‹ã€ã¾ãŸå‰Šé™¤ã—ãªã„ã¨ Xcode ã§æ¤œç´¢ã‹ã‘ãŸã¨ãã«ä¸€è‡´ã™ã‚‹å¯¾è±¡ãŒå¢—ãˆã¦ã—ã¾ã†ãŸã‚
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ã€`workspace_name` å¤‰æ•°ã« `SmallTalk` ã‚’è¨­å®šã—ã€æŒ‡å®šã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã‚’ä½¿ç”¨ã—ã¦ `xcodebuild` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`framework_targets` å¤‰æ•°ãŒå‹•çš„ã«è¨­å®šã•ã‚Œã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä»–ã®éƒ¨åˆ†ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

---
