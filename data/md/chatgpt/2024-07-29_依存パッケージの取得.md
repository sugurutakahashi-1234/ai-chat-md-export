# 依存パッケージの取得

日付: 2024-07-29

---

## 👤 ユーザー
*2024/7/29 14:40:49*

xcodebuild コマンドを使って依存しているパッケージの一覧を取得したい

---

## 🤖 アシスタント
*2024/7/29 14:41:05*

`xcodebuild` コマンドを使用して依存しているパッケージの一覧を取得することは直接はできませんが、`swift package` コマンドを使って依存パッケージの情報を取得することができます。以下の手順で依存パッケージの一覧を取得する方法を説明します。

### 手順

1. **パッケージの依存関係を表示**
   - `Package.swift` があるディレクトリに移動し、以下のコマンドを実行します。

   ```bash
   swift package show-dependencies
   ```

   このコマンドは、依存関係をツリー形式で表示します。

2. **JSON形式で依存関係を表示**
   - JSON形式で表示したい場合は、以下のコマンドを実行します。

   ```bash
   swift package show-dependencies --format json
   ```

   このコマンドは、依存関係をJSON形式で表示します。

3. **`xcodebuild` を使用して依存パッケージを確認**
   - Xcodeプロジェクトやワークスペースでパッケージの依存関係を確認したい場合は、以下の手順を実行します。

   ```bash
   xcodebuild -resolvePackageDependencies
   ```

   これにより、依存パッケージの解決が行われます。依存パッケージの情報は、Xcodeプロジェクトの `xcworkspace/xcshareddata/swiftpm/Package.resolved` ファイルに保存されます。このファイルを確認することで、依存しているパッケージの一覧を取得することができます。

### 例

以下は、`Package.resolved` ファイルの例です。

```json
{
  "object": {
    "pins": [
      {
        "package": "Alamofire",
        "repositoryURL": "https://github.com/Alamofire/Alamofire.git",
        "state": {
          "branch": null,
          "revision": "5c3a473a04ff7f4b5bb620a225cb77a3ff01e85a",
          "version": "5.4.3"
        }
      },
      {
        "package": "SwiftyJSON",
        "repositoryURL": "https://github.com/SwiftyJSON/SwiftyJSON.git",
        "state": {
          "branch": null,
          "revision": "a6d09d39ae21a93dc1aa8439c7973f8c4b6ff936",
          "version": "5.0.0"
        }
      }
    ]
  },
  "version": 1
}
```

このファイルには、依存しているパッケージとそのバージョン情報が含まれています。

以上の手順で、`xcodebuild` コマンドや `swift package` コマンドを使って依存しているパッケージの一覧を取得できます。

---

## 👤 ユーザー
*2024/7/29 14:41:15*

スキーマ一覧を取得したいんだ

---

## 🤖 アシスタント
*2024/7/29 14:41:28*

`xcodebuild` コマンドを使用して Xcode プロジェクトやワークスペース内のスキーマ一覧を取得するには、以下の手順に従います。

### 手順

1. **プロジェクトのスキーマ一覧を取得**
   - Xcode プロジェクト内のスキーマ一覧を取得するために、以下のコマンドを実行します。

   ```bash
   xcodebuild -list -project <YourProjectName>.xcodeproj
   ```

   例えば、`MyApp` という名前のプロジェクトの場合は、次のように実行します。

   ```bash
   xcodebuild -list -project MyApp.xcodeproj
   ```

2. **ワークスペースのスキーマ一覧を取得**
   - Xcode ワークスペース内のスキーマ一覧を取得するために、以下のコマンドを実行します。

   ```bash
   xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace
   ```

   例えば、`MyWorkspace` という名前のワークスペースの場合は、次のように実行します。

   ```bash
   xcodebuild -list -workspace MyWorkspace.xcworkspace
   ```

### 例

以下は、`MyApp` プロジェクトのスキーマ一覧を取得するコマンドの例です。

```bash
xcodebuild -list -project MyApp.xcodeproj
```

このコマンドを実行すると、以下のような出力が得られます。

```plaintext
Information about project "MyApp":
    Targets:
        MyApp
        MyAppTests
        MyAppUITests

    Build Configurations:
        Debug
        Release

    Schemes:
        MyApp
        MyApp-Release
        MyApp-Debug
```

上記の出力例では、`MyApp` プロジェクトに定義されているスキーマが `MyApp`, `MyApp-Release`, `MyApp-Debug` であることがわかります。

これで、`xcodebuild` コマンドを使用してプロジェクトやワークスペースのスキーマ一覧を取得する方法がわかりました。これを利用して、必要なスキーマ情報を確認してください。

---

## 👤 ユーザー
*2024/7/29 14:42:56*

Schemes の項目のみを出力したい

---

## 🤖 アシスタント
*2024/7/29 14:43:10*

`xcodebuild -list` コマンドの出力から `Schemes` の項目のみを抽出するために、`grep` や `awk` コマンドを使用してフィルタリングすることができます。以下の手順でスキーマ一覧を抽出します。

### 手順

1. **プロジェクトのスキーマ一覧を取得**
   - Xcode プロジェクト内のスキーマ一覧を抽出するために、以下のコマンドを実行します。

   ```bash
   xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
   ```

   例えば、`MyApp` という名前のプロジェクトの場合は、次のように実行します。

   ```bash
   xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
   ```

2. **ワークスペースのスキーマ一覧を取得**
   - Xcode ワークスペース内のスキーマ一覧を抽出するために、以下のコマンドを実行します。

   ```bash
   xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d'
   ```

   例えば、`MyWorkspace` という名前のワークスペースの場合は、次のように実行します。

   ```bash
   xcodebuild -list -workspace MyWorkspace.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d'
   ```

### 例

以下は、`MyApp` プロジェクトのスキーマ一覧を抽出するコマンドの例です。

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d'
```

このコマンドを実行すると、以下のような出力が得られます。

```plaintext
    MyApp
    MyApp-Release
    MyApp-Debug
```

これで、`xcodebuild` コマンドの出力から `Schemes` の項目のみを抽出する方法がわかりました。この方法を使用して、必要なスキーマ情報を効率的に取得してください。

---

## 👤 ユーザー
*2024/7/29 14:43:37*

ハイフン区切りのワンライナーにしたい

---

## 🤖 アシスタント
*2024/7/29 14:43:49*

ハイフン区切りのワンライナーでスキーマ一覧を出力するためには、`xcodebuild` の出力をフィルタリングし、結果を適切にフォーマットするために、`awk` や `sed` を使用します。

### プロジェクトのスキーマ一覧をハイフン区切りのワンライナーで取得

以下のコマンドを使用して、プロジェクトのスキーマ一覧をハイフン区切りのワンライナーで取得できます。

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

### ワークスペースのスキーマ一覧をハイフン区切りのワンライナーで取得

ワークスペースのスキーマ一覧をハイフン区切りのワンライナーで取得する場合は、以下のコマンドを使用します。

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

### 例

例えば、`MyApp` という名前のプロジェクトの場合、次のように実行します。

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' '-' | sed 's/-$//'
```

このコマンドを実行すると、以下のような出力が得られます。

```plaintext
MyApp-MyApp-Release-MyApp-Debug
```

これで、スキーマ一覧をハイフン区切りのワンライナーで取得する方法がわかりました。この方法を使用して、必要なスキーマ情報を効率的に取得してください。

---

## 👤 ユーザー
*2024/7/29 14:44:20*

スペース区切りだった

---

## 🤖 アシスタント
*2024/7/29 14:44:28*

スペース区切りでスキーマ一覧をワンライナーで取得するためには、以下のコマンドを使用します。

### プロジェクトのスキーマ一覧をスペース区切りのワンライナーで取得

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

### ワークスペースのスキーマ一覧をスペース区切りのワンライナーで取得

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

### 例

例えば、`MyApp` という名前のプロジェクトの場合、次のように実行します。

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | tr '\n' ' ' | sed 's/ $//'
```

このコマンドを実行すると、以下のような出力が得られます。

```plaintext
MyApp MyApp-Release MyApp-Debug
```

これで、スキーマ一覧をスペース区切りのワンライナーで取得する方法がわかりました。この方法を使用して、必要なスキーマ情報を効率的に取得してください。

---

## 👤 ユーザー
*2024/7/29 14:45:17*

以下のようにすごい余白があるので一つのスペースに収まるようにしたい

        DependencyInjectionLayer         Development         DeviceFramework         DomainLayer         DriverTest         FirebaseFramework         InteractorTest         LicenseFramework         OpenAPIFramework         PhoneNumberFramework         PresentationLayer         PresenterTest         Production         SimpleToast         SpeechToTextFramework         Staging         UICatalog         UICatalogLayer         ViewSnapshotTest

---

## 🤖 アシスタント
*2024/7/29 14:45:25*

スキーマ一覧をスペース区切りのワンライナーで取得し、余分なスペースを取り除くためには、`xargs` コマンドを使用します。以下のコマンドで実現できます。

### プロジェクトのスキーマ一覧を取得して整形

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

### ワークスペースのスキーマ一覧を取得して整形

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

### 例

例えば、`MyApp` という名前のプロジェクトの場合、次のように実行します。

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | xargs
```

このコマンドを実行すると、以下のように余分なスペースが削除されたスキーマ一覧が得られます。

```plaintext
MyApp MyApp-Release MyApp-Debug
```

これで、スキーマ一覧をスペース区切りのワンライナーで取得し、余分なスペースを削除する方法がわかりました。この方法を使用して、必要なスキーマ情報を効率的に取得してください。

---

## 👤 ユーザー
*2024/7/29 15:49:41*

文末が"Framework"となるようなスキームのみに絞りたい

---

## 🤖 アシスタント
*2024/7/29 15:49:55*

文末が "Framework" となるスキーマのみに絞り込むには、`grep` コマンドを使用してフィルタリングします。以下のコマンドで実現できます。

### プロジェクトのスキーマ一覧を取得してフィルタリング

```bash
xcodebuild -list -project <YourProjectName>.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

### ワークスペースのスキーマ一覧を取得してフィルタリング

```bash
xcodebuild -list -workspace <YourWorkspaceName>.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

### 例

例えば、`MyApp` という名前のプロジェクトの場合、次のように実行します。

```bash
xcodebuild -list -project MyApp.xcodeproj | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs
```

このコマンドを実行すると、以下のように文末が "Framework" となるスキーマのみが得られます。

```plaintext
DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework
```

これで、文末が "Framework" となるスキーマのみに絞り込む方法がわかりました。この方法を使用して、必要なスキーマ情報を効率的に取得してください。

---

## 👤 ユーザー
*2024/7/29 15:51:21*

$ xcodebuild -list -workspace SmallTalk.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs を使って、framework_targets="DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework" の内容を毎回書き換えるようにしたい。

どうすればいいか？

```
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer は DependencyInjectionLayer に依存していないため入れられない
# TODO: 【Periphery】自動的に RootDIContainer から Package名 を抽出するスクリプトを導入する #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"
framework_targets="DeviceFramework FirebaseFramework LicenseFramework OpenAPIFramework PhoneNumberFramework SpeechToTextFramework"

# 無視する警告メッセージのパターン
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ 配下に build_path を設定 かつ Xcode で参照フォルダにするとなぜかビルドに失敗するので、ルート直下に配置している
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path が存在する場合、削除する（速度的には遅くなるが scheme を増やしたときに periphery が失敗して、原因究明に時間がかかるので毎回削除するようにしている）
rm -rf "$periphery_build_path"

# periphery を実行すると MacOS でビルドを行うが、アプリ内部で UIKit など、iOS 依存なコードがあるとビルドできないため、一旦 xcodebuild コマンドでプラットフォームを指定して、ビルドする必要がある
# 失敗する場合は periphery/build ディレクトリを削除してから、また、make コマンドを実行してください
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery の仕様なのか、Package.swift が存在するディレクトリを移動しないと SwiftPM マルチモジュール かつ Workspace で構成されるプロジェクトで periphery scan がうまく動いてくれない
cd "${product_package_path}"

# Swift パッケージを指定したパスで実行し、periphery を使用してプロジェクトをスキャン
# --skip-build: ビルドプロセスをスキップ
# --index-store-path: ビルドプロセスをスキップしたので、xcodebuild でビルドしたindex-store-pathの指定
# --retain-swift-ui-previews: SwiftUI のプレビューはそのままにしておく
# --retain-public: 不要な Public 宣言はそのままにしておく
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# 出力に環境依存な root_path がoutputファイルに付与されるため、それを削除する
sed -i '' "s|${root_path}/||g" $output_file

# 無視する警告メッセージを表示し、削除する
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# 毎回完全にclean buildしたいため、削除する、また削除しないと Xcode で検索かけたときに一致する対象が増えてしまうため
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

---

## 🤖 アシスタント
*2024/7/29 15:51:59*

スクリプトの中で `xcodebuild` コマンドを実行し、その結果を `framework_targets` 変数に動的に設定するようにします。

以下に、修正されたスクリプトを示します。新しい部分は `framework_targets` 変数を動的に設定する部分です。

```bash
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer は DependencyInjectionLayer に依存していないため入れられない
# TODO: 【Periphery】自動的に RootDIContainer から Package名 を抽出するスクリプトを導入する #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"

# 動的に framework_targets を設定
framework_targets=$(xcodebuild -list -workspace SmallTalk.xcworkspace | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs)

# 無視する警告メッセージのパターン
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ 配下に build_path を設定 かつ Xcode で参照フォルダにするとなぜかビルドに失敗するので、ルート直下に配置している
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path が存在する場合、削除する（速度的には遅くなるが scheme を増やしたときに periphery が失敗して、原因究明に時間がかかるので毎回削除するようにしている）
rm -rf "$periphery_build_path"

# periphery を実行すると MacOS でビルドを行うが、アプリ内部で UIKit など、iOS 依存なコードがあるとビルドできないため、一旦 xcodebuild コマンドでプラットフォームを指定して、ビルドする必要がある
# 失敗する場合は periphery/build ディレクトリを削除してから、また、make コマンドを実行してください
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery の仕様なのか、Package.swift が存在するディレクトリを移動しないと SwiftPM マルチモジュール かつ Workspace で構成されるプロジェクトで periphery scan がうまく動いてくれない
cd "${product_package_path}"

# Swift パッケージを指定したパスで実行し、periphery を使用してプロジェクトをスキャン
# --skip-build: ビルドプロセスをスキップ
# --index-store-path: ビルドプロセスをスキップしたので、xcodebuild でビルドしたindex-store-pathの指定
# --retain-swift-ui-previews: SwiftUI のプレビューはそのままにしておく
# --retain-public: 不要な Public 宣言はそのままにしておく
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# 出力に環境依存な root_path がoutputファイルに付与されるため、それを削除する
sed -i '' "s|${root_path}/||g" $output_file

# 無視する警告メッセージを表示し、削除する
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# 毎回完全にclean buildしたいため、削除する、また削除しないと Xcode で検索かけたときに一致する対象が増えてしまうため
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

このスクリプトでは、`xcodebuild` コマンドを使ってワークスペース内のスキーマをリストし、`grep` と `xargs` を使って文末が "Framework" で終わるスキーマのみを抽出し、`framework_targets` 変数に代入しています。これにより、毎回スクリプトを実行するたびに `framework_targets` の内容が動的に更新されます。

---

## 👤 ユーザー
*2024/7/29 15:52:20*

workspace_name="SmallTalk" として定義してほしい

---

## 🤖 アシスタント
*2024/7/29 15:52:52*

以下のスクリプトは、`workspace_name` 変数を定義し、指定されたワークスペース名を使用して `xcodebuild` コマンドを実行します。

```bash
#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <Root Path>"
    exit 1
fi

workspace_name="SmallTalk"
mint_package_name="MintCLIPackage"
product_package_name="SmallTalkPackage"
di_scheme="DependencyInjectionLayer"

# UICatalogLayer は DependencyInjectionLayer に依存していないため入れられない
# TODO: 【Periphery】自動的に RootDIContainer から Package名 を抽出するスクリプトを導入する #149
basic_targets="DependencyInjectionLayer DomainLayer PresentationLayer"

# 動的に framework_targets を設定
framework_targets=$(xcodebuild -list -workspace "${workspace_name}.xcworkspace" | awk '/Schemes:/,/^$/' | sed '1d' | grep 'Framework$' | xargs)

# 無視する警告メッセージのパターン
ignore_patterns=("Imported module 'DomainLayer' is unused" "Property 'dependency' is assigned, but never used")

root_path=$1
mint_package_path="$root_path/$mint_package_name"
product_package_path="$root_path/$product_package_name"

echo -e "mint_package_path: ${mint_package_path}"
echo -e "product_package_path: ${product_package_path}"

periphery_path="$root_path/periphery"
periphery_build_path="$root_path/build_for_periphery" # periphery/ 配下に build_path を設定 かつ Xcode で参照フォルダにするとなぜかビルドに失敗するので、ルート直下に配置している
output_file="$periphery_path/result.txt"
index_store_path="$periphery_build_path/Index.noindex/DataStore/"

# periphery_build_path が存在する場合、削除する（速度的には遅くなるが scheme を増やしたときに periphery が失敗して、原因究明に時間がかかるので毎回削除するようにしている）
rm -rf "$periphery_build_path"

# periphery を実行すると MacOS でビルドを行うが、アプリ内部で UIKit など、iOS 依存なコードがあるとビルドできないため、一旦 xcodebuild コマンドでプラットフォームを指定して、ビルドする必要がある
# 失敗する場合は periphery/build ディレクトリを削除してから、また、make コマンドを実行してください
xcodebuild -scheme $di_scheme -destination 'platform=iOS Simulator,name=iPhone 15' -derivedDataPath $periphery_build_path clean build

# periphery の仕様なのか、Package.swift が存在するディレクトリを移動しないと SwiftPM マルチモジュール かつ Workspace で構成されるプロジェクトで periphery scan がうまく動いてくれない
cd "${product_package_path}"

# Swift パッケージを指定したパスで実行し、periphery を使用してプロジェクトをスキャン
# --skip-build: ビルドプロセスをスキップ
# --index-store-path: ビルドプロセスをスキップしたので、xcodebuild でビルドしたindex-store-pathの指定
# --retain-swift-ui-previews: SwiftUI のプレビューはそのままにしておく
# --retain-public: 不要な Public 宣言はそのままにしておく
swift run --package-path $mint_package_path mint run periphery scan \
    --skip-build --index-store-path $index_store_path \
    --retain-swift-ui-previews \
    --retain-public \
    --targets $basic_targets $framework_targets \
    | tee $output_file

# 出力に環境依存な root_path がoutputファイルに付与されるため、それを削除する
sed -i '' "s|${root_path}/||g" $output_file

# 無視する警告メッセージを表示し、削除する
for pattern in "${ignore_patterns[@]}"; do
    echo -e "\nLines to be deleted matching pattern: $pattern\n"
    grep "$pattern" $output_file
    sed -i '' "/$pattern/d" $output_file
done

# 毎回完全にclean buildしたいため、削除する、また削除しないと Xcode で検索かけたときに一致する対象が増えてしまうため
rm -rf "$periphery_build_path"

echo -e "\nPeriphery Scan Completed!!!!"
```

このスクリプトでは、`workspace_name` 変数に `SmallTalk` を設定し、指定されたワークスペース名を使用して `xcodebuild` コマンドを実行するようにしています。これにより、`framework_targets` 変数が動的に設定され、スクリプトの他の部分で使用されます。

---
