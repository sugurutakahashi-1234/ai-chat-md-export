# iOS16 フォアグラウンドイベント

日付: 2023-06-24

---

## 👤 ユーザー
*2023/06/25 00:45:16*

SwiftUI iOS16 でフォアグラウンド復帰のイベントを取得したい

---

## 🤖 アシスタント
*2023/06/25 00:45:55*

iOS 16では、SwiftUIのアプリライフサイクル管理が更に改善され、ScenePhase を利用して、アプリのライフサイクルイベントを捕捉できます。特に、アプリがバックグラウンドからフォアグラウンドに戻るときにイベントを取得したい場合、以下のようにコードを記述できます。

```swift
struct ContentView: View {
    @Environment(\.scenePhase) private var scenePhase

    var body: some View {
        Text("Hello, World!")
            .onChange(of: scenePhase) { newScenePhase in
                switch newScenePhase {
                case .active:
                    print("App is in foreground!")
                case .inactive:
                    print("App is transitioning.")
                case .background:
                    print("App is in background.")
                @unknown default:
                    print("Unknown state.")
                }
            }
    }
}
```

上記のコードでは、`@Environment` プロパティラッパーを使用して `scenePhase` を観察しています。その値が変わるたびに、`.onChange` モディファイアー内のコードが実行されます。ここでは、新しいシーンフェーズに応じて様々なメッセージをコンソールに出力します。

`ScenePhase` は以下の状態を持つ列挙型です：

- `.active` : アプリがフォアグラウンドにあり、アクティブに実行されている。
- `.inactive` : アプリがアクティブではないが、まだフォアグラウンドに存在している。このフェーズは通常、ユーザがアプリを切り替えるときや、システムがアプリを一時的に割り込むときに発生する。
- `.background` : アプリがバックグラウンドに移行した。
  
この `ScenePhase` 環境値を使うことで、アプリがフォアグラウンドに復帰したときのイベントを捕捉し、適切な処理を行うことが可能となります。

---
