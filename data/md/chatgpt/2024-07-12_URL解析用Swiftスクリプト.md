# URLè§£æç”¨Swiftã‚¹ã‚¯ãƒªãƒ—ãƒˆ

æ—¥ä»˜: 2024-07-12

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:37:47*

Swiftã§urlã‚’åˆ†æã—ã¦ã»ã—ã„switch æ–‡ãŒè‰¯ã„
test-app://notification/hoge?id=1
test-app://notification/moge?id=1&fuga=2

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:38:07*

Swift ã§ URL ã‚’è§£æã™ã‚‹ãŸã‚ã«ã€`URLComponents` ã‚’ä½¿ç”¨ã—ã¦ URL ã‚’åˆ†è§£ã—ã€`switch` æ–‡ã§ç‰¹å®šã®ãƒ‘ã‚¹ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹æ–¹æ³•ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚ä»¥ä¸‹ã«ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let components = URLComponents(url: url, resolvingAgainstBaseURL: false) {
        switch components.host {
        case "notification":
            if let path = components.path.split(separator: "/").first {
                switch path {
                case "hoge":
                    if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                        print("Hoge ID: \(id)")
                    }
                case "moge":
                    if let id = components.queryItems?.first(where: { $0.name == "id" })?.value,
                       let fuga = components.queryItems?.first(where: { $0.name == "fuga" })?.value {
                        print("Moge ID: \(id), Fuga: \(fuga)")
                    }
                default:
                    print("Unknown path: \(path)")
                }
            } else {
                print("No path found")
            }
        default:
            print("Unknown host: \(String(describing: components.host))")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®ã“ã¨ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼š

1. `urlStrings` ã«ã‚µãƒ³ãƒ—ãƒ« URL ã‚’æ ¼ç´ã€‚
2. å„ URL ã‚’ `URL` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã€`URLComponents` ã‚’ä½¿ç”¨ã—ã¦è§£æã€‚
3. `components.host` ã§ãƒ›ã‚¹ãƒˆéƒ¨åˆ†ãŒ "notification" ã§ã‚ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã€‚
4. ãƒ‘ã‚¹éƒ¨åˆ†ã‚’è§£æã—ã€"hoge" ã¾ãŸã¯ "moge" ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’åˆ†å²ã€‚
5. ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰å¿…è¦ãªå€¤ã‚’å–å¾—ã—ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã€‚

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€URL ã®ãƒ‘ã‚¹ã¨ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æŸ”è»Ÿã«å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:38:30*

case "notification/hoge": ã¿ãŸãã§ããªã„ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:38:44*

ã‚‚ã¡ã‚ã‚“ã§ã™ã€‚`URLComponents` ã‚’ä½¿ç”¨ã—ã¦ URL ã‚’è§£æã—ã€ãƒ‘ã‚¹å…¨ä½“ã‚’æ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã£ã¦ `switch` æ–‡ã§åˆ†å²ã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã«ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let components = URLComponents(url: url, resolvingAgainstBaseURL: false) {
        let fullPath = (components.host ?? "") + components.path
        switch fullPath {
        case "notification/hoge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                print("Hoge ID: \(id)")
            }
        case "notification/moge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value,
               let fuga = components.queryItems?.first(where: { $0.name == "fuga" })?.value {
                print("Moge ID: \(id), Fuga: \(fuga)")
            }
        default:
            print("Unknown path: \(fullPath)")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ï¼š

1. `components.host` ã¨ `components.path` ã‚’çµ„ã¿åˆã‚ã›ã¦ `fullPath` ã‚’ä½œæˆã€‚
2. `fullPath` ã‚’ `switch` æ–‡ã§ãƒã‚§ãƒƒã‚¯ã—ã€å„ã‚±ãƒ¼ã‚¹ã§é©åˆ‡ãªå‡¦ç†ã‚’å®Ÿè¡Œã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€`switch` æ–‡ã§ç›´æ¥ãƒ‘ã‚¹å…¨ä½“ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:39:14*

test-app://notification/hoge/piyo?id=1 ã¿ãŸã„ãªã‚‚ã®å¯¾å¿œã§ãã‚‹ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:39:35*

ã‚‚ã¡ã‚ã‚“ã€ã‚ˆã‚ŠæŸ”è»Ÿãªãƒ‘ã‚¹è§£æã‚’è¡Œã†ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€ãƒ‘ã‚¹ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•°ãŒç•°ãªã‚‹å ´åˆã‚„ã€ãƒ‘ã‚¹ã®ä¸€éƒ¨ãŒå¤‰åŒ–ã™ã‚‹å ´åˆã«ã‚‚å¯¾å¿œã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒ‘ã‚¹å…¨ä½“ã‚’è§£æã—ã¦ã€ãã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã”ã¨ã«å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2",
    "test-app://notification/hoge/piyo?id=1"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let components = URLComponents(url: url, resolvingAgainstBaseURL: false) {
        let fullPath = components.host.map { "\($0)\(components.path)" } ?? components.path
        let pathSegments = components.path.split(separator: "/")

        switch fullPath {
        case "notification/hoge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                print("Hoge ID: \(id)")
            }
        case "notification/moge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value,
               let fuga = components.queryItems?.first(where: { $0.name == "fuga" })?.value {
                print("Moge ID: \(id), Fuga: \(fuga)")
            }
        case _ where fullPath.hasPrefix("notification/hoge/piyo"):
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                print("Hoge Piyo ID: \(id)")
            }
        default:
            print("Unknown path: \(fullPath)")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‡¦ç†ã—ã¦ã„ã¾ã™ï¼š

1. `components.host` ã¨ `components.path` ã‚’çµåˆã—ã¦ `fullPath` ã‚’ä½œæˆã€‚
2. `components.path` ã‚’ `/` ã§åˆ†å‰²ã—ã¦ `pathSegments` ã‚’ä½œæˆã€‚
3. `switch` æ–‡ã§ `fullPath` ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ç‰¹å®šã®ãƒ‘ã‚¹ã‚„ãƒ‘ã‚¹ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’åˆ†å²ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ç•°ãªã‚‹ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•°ã‚„éƒ¨åˆ†ä¸€è‡´ã«åŸºã¥ããƒ‘ã‚¹è§£æãŒå¯èƒ½ã«ãªã‚Šã€ã‚ˆã‚ŠæŸ”è»Ÿãª URL å‡¦ç†ãŒã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:39:58*

case "notification/hoge/piyo" ã¨ã¯æ›¸ã‘ãªã„ã®ã‹ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:40:19*

ã‚‚ã¡ã‚ã‚“ã€æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ã”ã¨ã« `case` æ–‡ã‚’ä½¿ã£ã¦è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ãŸã‚ã«ã€URL ã®ãƒ›ã‚¹ãƒˆã¨ãƒ‘ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã¦ä¸€ã¤ã®æ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã†ã“ã¨ã§ã€`switch` æ–‡ã‚’ç°¡æ½”ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2",
    "test-app://notification/hoge/piyo?id=1"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let components = URLComponents(url: url, resolvingAgainstBaseURL: false) {
        // host ã¨ path ã‚’çµåˆã—ã¦ fullPath ã‚’ä½œæˆ
        let fullPath = (components.host ?? "") + components.path
        
        switch fullPath {
        case "notification/hoge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                print("Hoge ID: \(id)")
            }
        case "notification/moge":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value,
               let fuga = components.queryItems?.first(where: { $0.name == "fuga" })?.value {
                print("Moge ID: \(id), Fuga: \(fuga)")
            }
        case "notification/hoge/piyo":
            if let id = components.queryItems?.first(where: { $0.name == "id" })?.value {
                print("Hoge Piyo ID: \(id)")
            }
        default:
            print("Unknown path: \(fullPath)")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼š

1. `components.host` ã¨ `components.path` ã‚’çµåˆã—ã¦ `fullPath` ã‚’ä½œæˆã€‚
2. `switch` æ–‡ã§ `fullPath` ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’åˆ†å²ã€‚
3. å„ãƒ‘ã‚¹ã«å¯¾å¿œã™ã‚‹å‡¦ç†ã‚’ `case` æ–‡ã«è¨˜è¿°ã€‚

ã“ã®æ–¹æ³•ã«ã‚ˆã‚Šã€URL ãƒ‘ã‚¹ãŒæ­£ç¢ºã«ä¸€è‡´ã™ã‚‹å ´åˆã«ç‰¹å®šã®å‡¦ç†ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:42:06*

fullPath ã‚ˆã‚Šã‚‚ã„ã„è¡¨ç¾ã¯ãªã„ã‹ï¼Ÿå°‘ã—å‹˜é•ã„ã—ã¦ã—ã¾ã„ãã†ã€ã¾ï½”ã€URLã®extensionã«ã—ãŸã„

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:42:16*

User wants to use more intuitive and descriptive names for variables like `fullPath` and prefers using URL extensions for better organization and readability.

---

## ğŸ”§ ãƒ„ãƒ¼ãƒ«
*2024/7/12 16:42:16*

Model set context updated.

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:42:16*

ã‚ˆã‚Šç›´æ„Ÿçš„ãªåå‰ã«å¤‰æ›´ã—ã€URL ã®æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šèª­ã¿ã‚„ã™ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ãã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

ã¾ãšã€URL ã®æ‹¡å¼µã‚’å®šç¾©ã—ã¾ã™ã€‚

```swift
import Foundation

extension URL {
    var combinedPath: String? {
        guard let host = self.host else { return nil }
        return host + self.path
    }
    
    func queryItemValue(for name: String) -> String? {
        return URLComponents(url: self, resolvingAgainstBaseURL: false)?
            .queryItems?
            .first(where: { $0.name == name })?
            .value
    }
}
```

æ¬¡ã«ã€URL ã®è§£æã¨å‡¦ç†ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2",
    "test-app://notification/hoge/piyo?id=1"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let combinedPath = url.combinedPath {
        switch combinedPath {
        case "notification/hoge":
            if let id = url.queryItemValue(for: "id") {
                print("Hoge ID: \(id)")
            }
        case "notification/moge":
            if let id = url.queryItemValue(for: "id"),
               let fuga = url.queryItemValue(for: "fuga") {
                print("Moge ID: \(id), Fuga: \(fuga)")
            }
        case "notification/hoge/piyo":
            if let id = url.queryItemValue(for: "id") {
                print("Hoge Piyo ID: \(id)")
            }
        default:
            print("Unknown path: \(combinedPath)")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯æ¬¡ã®ã“ã¨ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼š

1. `URL` æ‹¡å¼µã§ `combinedPath` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å®šç¾©ã—ã€ãƒ›ã‚¹ãƒˆã¨ãƒ‘ã‚¹ã‚’çµåˆã—ã¦è¿”ã—ã¾ã™ã€‚
2. `URL` æ‹¡å¼µã§ `queryItemValue` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚
3. `urlStrings` ã‚’ãƒ«ãƒ¼ãƒ—ã—ã€ãã‚Œãã‚Œã® URL ã‚’è§£æã—ã¦ `combinedPath` ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’åˆ†å²ã—ã¾ã™ã€‚

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€å¤‰æ•°åãŒã‚ˆã‚Šç›´æ„Ÿçš„ã«ãªã‚Šã€URL ã®å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/7/12 16:43:13*

combinedPath ã§ã‚‚åˆ†ã‹ã‚Šãšã‚‰ã„ã‹ãªã€‚ä¸€èˆ¬çš„ã«ãªã‚“ã¦ã‚ˆã¶ã‚“ã ã‚ï¼Ÿ

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/7/12 16:43:25*

ä¸€èˆ¬çš„ã«ã¯ã€ã€ŒcombinedPathã€ã‚ˆã‚Šã‚‚ã€ŒfullPathã€ã‚„ã€ŒabsolutePathã€ãªã©ã®åå‰ãŒä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€ã‚ˆã‚Šç›´æ„Ÿçš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ã‚’æ¢ã—ã¦ã„ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªåå‰ã‚’æ¤œè¨ã§ãã¾ã™ï¼š

- `endpoint`
- `resourcePath`
- `routePath`
- `fullRoute`

ã“ã‚Œã‚‰ã®åå‰ã¯ã€URL ã®ãƒ«ãƒ¼ãƒˆã‚„ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ãƒ‘ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚

ä¾‹ãˆã°ã€ã€ŒroutePathã€ã‚’ä½¿ç”¨ã—ãŸä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ï¼š

ã¾ãšã€URL ã®æ‹¡å¼µã‚’å®šç¾©ã—ã¾ã™ã€‚

```swift
import Foundation

extension URL {
    var routePath: String? {
        guard let host = self.host else { return nil }
        return host + self.path
    }
    
    func queryItemValue(for name: String) -> String? {
        return URLComponents(url: self, resolvingAgainstBaseURL: false)?
            .queryItems?
            .first(where: { $0.name == name })?
            .value
    }
}
```

æ¬¡ã«ã€URL ã®è§£æã¨å‡¦ç†ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
import Foundation

// ã‚µãƒ³ãƒ—ãƒ«URL
let urlStrings = [
    "test-app://notification/hoge?id=1",
    "test-app://notification/moge?id=1&fuga=2",
    "test-app://notification/hoge/piyo?id=1"
]

for urlString in urlStrings {
    if let url = URL(string: urlString), let routePath = url.routePath {
        switch routePath {
        case "notification/hoge":
            if let id = url.queryItemValue(for: "id") {
                print("Hoge ID: \(id)")
            }
        case "notification/moge":
            if let id = url.queryItemValue(for: "id"),
               let fuga = url.queryItemValue(for: "fuga") {
                print("Moge ID: \(id), Fuga: \(fuga)")
            }
        case "notification/hoge/piyo":
            if let id = url.queryItemValue(for: "id") {
                print("Hoge Piyo ID: \(id)")
            }
        default:
            print("Unknown path: \(routePath)")
        }
    } else {
        print("Invalid URL: \(urlString)")
    }
}
```

ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€å¤‰æ•°åãŒã‚ˆã‚Šæ„å‘³ã‚’æŒã¡ã€ç›´æ„Ÿçš„ã«ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

---
