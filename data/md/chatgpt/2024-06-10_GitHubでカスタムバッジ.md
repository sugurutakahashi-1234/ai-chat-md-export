# GitHubでカスタムバッジ

日付: 2024-06-10

---

## 👤 ユーザー
*2024/06/10 18:42:49*

img.shields.io をプライベートリポジトリで見る方法

---

## 🤖 アシスタント
*2024/06/10 18:43:14*

`img.shields.io`はオープンソースプロジェクトのバッジを生成するためのサービスですが、プライベートリポジトリでの使用には直接対応していません。しかし、以下の方法でプライベートリポジトリの情報をバッジとして表示することが可能です。

1. **GitHub Actionsを使用してカスタムバッジを生成**:
   GitHub Actionsを使って定期的にバッジの情報を取得し、それを外部の静的ファイルとしてホスティングすることができます。

2. **プライベートリポジトリのAPIを使用する**:
   プライベートリポジトリの情報を取得するためにGitHubのAPIを使用し、その情報を元にバッジを生成します。

具体的な手順は以下の通りです：

### 手順1: GitHub Actionsを設定する
1. **新しいワークフローを作成**:
   プライベートリポジトリ内に`.github/workflows`ディレクトリを作成し、`generate_badge.yml`という名前のファイルを作成します。

2. **ワークフローの内容を追加**:
   `generate_badge.yml`ファイルに以下の内容を追加します。このワークフローは、リポジトリの情報を取得し、静的ファイルとしてバッジを生成します。

   ```yaml
   name: Generate Badge

   on:
     schedule:
       - cron: '0 * * * *' # 毎時実行
     push:
       branches:
         - main

   jobs:
     build:
       runs-on: ubuntu-latest

       steps:
         - name: Checkout repository
           uses: actions/checkout@v2

         - name: Generate badge
           run: |
             curl -o coverage.svg "https://img.shields.io/badge/coverage-80%25-green"
             git config --global user.email "you@example.com"
             git config --global user.name "Your Name"
             git add coverage.svg
             git commit -m "Update coverage badge"
             git push
   ```

### 手順2: GitHubのAPIを使用する
1. **GitHubトークンを取得**:
   プライベートリポジトリにアクセスするためのGitHubトークンを取得します。GitHubの設定で個人アクセストークンを生成し、必要な権限を付与します。

2. **APIを使用して情報を取得**:
   バッジに表示したい情報をGitHub APIを使って取得します。以下は、リポジトリの最新のコミット情報を取得する例です。

   ```bash
   curl -H "Authorization: token YOUR_GITHUB_TOKEN" https://api.github.com/repos/YOUR_USERNAME/YOUR_REPOSITORY/commits/main
   ```

### 手順3: カスタムバッジを生成してホスティング
1. **カスタムバッジを生成**:
   取得した情報を元にカスタムバッジを生成します。例えば、JSON形式の情報を使ってカスタムバッジを作成できます。

2. **静的ホスティングサービスを利用**:
   生成したバッジをGitHub Pagesや別の静的ホスティングサービスでホスティングし、そこからバッジを取得します。

上記の方法を組み合わせることで、プライベートリポジトリの情報をバッジとして表示することが可能です。GitHub Actionsを使うことで自動化され、最新の情報が常にバッジに反映されるようになります。

---
