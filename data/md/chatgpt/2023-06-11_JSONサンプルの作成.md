# JSONサンプルの作成

日付: 2023-06-11

---

## 👤 ユーザー
*2023/06/11 16:56:17*

以下のprotoBuf定義からJSONのサンプルをつくってみて

syntax = "proto3";

import "google/protobuf/timestamp.proto";

message Anchor {
  // 作成日時
  google.protobuf.Timestamp timestamp = 0;
  oneof type {
    EyeMovement eye_movement = 1;
    Blink blink = 2;
  }
}

message EyeMovement {
  // 目線のx座標
  double left = 0;
  // 目線のy座標
  double top = 1;
  // 眼球運動状態
  EyeMovementState eye_movement_state = 2;
}

enum EyeMovementState {
  FIXATION = 0;
  SACCADE = 1;
  UNKNOWN = 2;
}

message Blink {
  // 右目の瞬き
  bool blink_right = 0;
  // 左目の瞬き
  bool blink_left = 1;
  // TODO(rnarkk)
  // double eye_openness = 2;
}

---

## 🤖 アシスタント
*2023/06/11 16:56:42*

あなたのprotobuf定義から、以下のようなJSONのサンプルを作りました。

エンティティ`Anchor`の2つの異なるタイプ、つまり`EyeMovement`と`Blink`についてそれぞれサンプルを作成します。

1. `EyeMovement`の`Anchor`:

```json
{
  "timestamp": "2023-06-11T15:04:05Z",
  "eye_movement": {
    "left": 1.0,
    "top": 2.0,
    "eye_movement_state": "SACCADE"
  }
}
```
この例では、視線が(1.0, 2.0)の位置にあり、視線の動きは"SACCADE"（突然の視線の移動）を示しています。

2. `Blink`の`Anchor`:

```json
{
  "timestamp": "2023-06-11T15:04:06Z",
  "blink": {
    "blink_right": true,
    "blink_left": false
  }
}
```
この例では、右目が瞬き、左目は開いたままであることを示しています。

JSONのキーとしては、protobufのメッセージとフィールド名を用いており、enumの値はそのままの文字列として使用されています。また、protobufのtimestampはISO 8601形式の文字列に変換されています。なお、サンプルでは省略していますが、通常は秒以下の精度も含めることが可能です。

---
