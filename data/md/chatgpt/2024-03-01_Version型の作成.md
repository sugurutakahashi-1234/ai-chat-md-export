# Versionå‹ã®ä½œæˆ

æ—¥ä»˜: 2024-03-01

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/3/1 16:22:09*

Swiftã§ã‚³ãƒ³ãƒšã‚¢ãƒ–ãƒ«Versionã¨ã„ã†å‹ã‚’ä½œã£ã¦ã€

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/3/1 16:23:39*

Swiftã§`Comparable`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æº€ãŸã™`Version`å‹ã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®æ¯”è¼ƒãªã©ã«ä¾¿åˆ©ã§ã™ã€‚ä»¥ä¸‹ã¯ãã®ä¸€ä¾‹ã§ã™ã€‚

```swift
struct Version: Comparable {
    let major: Int
    let minor: Int
    let patch: Int

    init?(_ versionString: String) {
        let components = versionString.split(separator: ".")
        guard components.count <= 3 else { return nil }
        
        let numbers = components.map { Int($0) }
        guard numbers.allSatisfy({ $0 != nil }) else { return nil }
        
        self.major = numbers[0] ?? 0
        self.minor = numbers.count > 1 ? numbers[1] ?? 0 : 0
        self.patch = numbers.count > 2 ? numbers[2] ?? 0 : 0
    }

    static func < (lhs: Version, rhs: Version) -> Bool {
        if lhs.major != rhs.major {
            return lhs.major < rhs.major
        } else if lhs.minor != rhs.minor {
            return lhs.minor < rhs.minor
        } else {
            return lhs.patch < rhs.patch
        }
    }

    static func == (lhs: Version, rhs: Version) -> Bool {
        return lhs.major == rhs.major && lhs.minor == rhs.minor && lhs.patch == rhs.patch
    }
}

// ä½¿ç”¨ä¾‹
let version1 = Version("1.2.3")!
let version2 = Version("1.2.4")!

print(version1 < version2)  // true
print(version1 == version2) // false
```

ã“ã®`Version`å‹ã§ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’`major.minor.patch`ã®å½¢å¼ã§æ‰±ã„ã¾ã™ã€‚`Comparable`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æº€ãŸã™ãŸã‚ã«ã¯ã€`<`ã¨`==`æ¼”ç®—å­ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€ã¾ãšãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ¯”è¼ƒã—ã€ãã‚ŒãŒåŒã˜ã§ã‚ã‚Œã°ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãã‚Œã‚‚åŒã˜ã§ã‚ã‚Œã°ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚

`init?(_ versionString: String)`ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¯ã€æ–‡å­—åˆ—ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¾ã™ã€‚ã“ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¯ã€ä¸æ­£ãªå½¢å¼ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã«`nil`ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã®å®Ÿè£…ã§ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®å„éƒ¨åˆ†ãŒæ•´æ•°ã§ã‚ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ãŒæ­£ã—ã„å½¢å¼ã§ã‚ã‚‹ã“ã¨ï¼ˆä¾‹ãˆã°ã€"1.2.3"ã®ã‚ˆã†ã«ãƒ”ãƒªã‚ªãƒ‰ã§åŒºåˆ‡ã‚‰ã‚ŒãŸ3ã¤ã®æ•°å­—ï¼‰ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚ä¸æ­£ãªå½¢å¼ã‚„ã€æƒ³å®šå¤–ã®å€¤ï¼ˆä¾‹ãˆã°ã€è² ã®æ•°ã‚„éæ•°å€¤ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«ã¯ã€ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã¯`nil`ã‚’è¿”ã—ã¾ã™ã€‚

---
