# ã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã™

æ—¥ä»˜: 2024-03-01

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/3/1 21:29:32*

ã“ã®è¨˜è¿°ã‚’ç¹°ã‚Šè¿”ã™ã®ã§è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã—ãŸã„ã€‚

AppRootRouter(dependency: AppRootRouterDependencyMock.empty)

ä»¥ä¸‹ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã‚ã‚‹

public struct AppRootRouter&lt;Dependency: AppRootRouterDependency&gt;: AppRootWireframe {
    private let dependency: Dependency

    public init(dependency: Dependency) {
        self.dependency = dependency
    }

    @MainActor
    public func createAppRootView() -&gt; AppRootView&lt;Self, Dependency&gt; {
        AppRootView(router: self, dependency: dependency)
    }

    @MainActor
    public func createHomeTabView() -&gt; HomeTabView&lt;Self&gt; {
        HomeTabView(router: self)
    }

    @MainActor
    public func createLicenseListView() -&gt; LicenseListView&lt;Self, Dependency&gt; {
        LicenseListView(router: self, dependency: dependency)
    }

    @MainActor
    public func createLicenseDetailView(license: License) -&gt; LicenseDetailView {
        LicenseDetailView(license: license)
    }

    @MainActor
    public func createSettingView() -&gt; SettingView&lt;Self, Dependency&gt; {
        SettingView(router: self, dependency: dependency)
    }
}

public final class AppRootRouterDependencyMock: AppRootRouterDependency {
    public init() { }
    public init(libraryLicenseDriver: LibraryLicenseDriverProtocolAT, osLogDriver: OSLogDriverProtocolAT, firebaseSetupDriver: FirebaseSetupDriverProtocolAT) {
        self._libraryLicenseDriver = libraryLicenseDriver
        self._osLogDriver = osLogDriver
        self._firebaseSetupDriver = firebaseSetupDriver
    }

    public typealias LibraryLicenseDriverProtocolAT = LibraryLicenseDriverProtocolMock
    public typealias OSLogDriverProtocolAT = OSLogDriverProtocolMock

    public private(set) var libraryLicenseDriverSetCallCount = 0
    private var _libraryLicenseDriver: LibraryLicenseDriverProtocolAT!  { didSet { libraryLicenseDriverSetCallCount += 1 } }
    public var libraryLicenseDriver: LibraryLicenseDriverProtocolAT {
        get { return _libraryLicenseDriver }
        set { _libraryLicenseDriver = newValue }
    }
    public typealias FirebaseSetupDriverProtocolAT = FirebaseSetupDriverProtocolMock

    public private(set) var osLogDriverSetCallCount = 0
    private var _osLogDriver: OSLogDriverProtocolAT!  { didSet { osLogDriverSetCallCount += 1 } }
    public var osLogDriver: OSLogDriverProtocolAT {
        get { return _osLogDriver }
        set { _osLogDriver = newValue }
    }

    public private(set) var firebaseSetupDriverSetCallCount = 0
    private var _firebaseSetupDriver: FirebaseSetupDriverProtocolAT!  { didSet { firebaseSetupDriverSetCallCount += 1 } }
    public var firebaseSetupDriver: FirebaseSetupDriverProtocolAT {
        get { return _firebaseSetupDriver }
        set { _firebaseSetupDriver = newValue }
    }
}


public extension AppRootRouterDependencyMock {
    /// ç”Ÿæˆã•ã‚ŒãŸ init() ã ã¨ nil ãŒä»£å…¥ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’è¨­å®šã—ãŸ create ã‚’ç”¨æ„ã™ã‚‹
    static func create(
        libraryLicenseDriver: some LibraryLicenseDriverProtocolMock = LibraryLicenseDriverProtocolMock(),
        osLogDriver: some OSLogDriverProtocolMock = OSLogDriverProtocolMock(),
        firebaseSetupDriver: some FirebaseSetupDriverProtocolMock = FirebaseSetupDriverProtocolMock()
    ) -&gt; Self {
        .init(
            libraryLicenseDriver: libraryLicenseDriver,
            osLogDriver: osLogDriver,
            firebaseSetupDriver: firebaseSetupDriver
        )
    }

    static var empty: Self {
        .create(
            libraryLicenseDriver: LibraryLicenseDriverProtocolMock()
        )
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/3/1 21:30:45*

ã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã™ãŸã‚ã«ã€ã„ãã¤ã‹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ææ¡ˆã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ææ¡ˆã¯ã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’æ¸›ã‚‰ã—ã€å¯èª­æ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

### 1. ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç”¨

`AppRootRouter`ã®å„`create`ãƒ¡ã‚½ãƒƒãƒ‰ãŒä¼¼ãŸã‚ˆã†ãªæ§‹é€ ã‚’ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§å…±é€šã—ã¦ã„ã‚‹å‡¦ç†ã‚’ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã«æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€Swiftã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«æŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åˆ¶ç´„ã«ã‚ˆã‚Šã€ç›´æ¥çš„ãªãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã®æŠ½å‡ºã¯é›£ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã®éƒ¨åˆ†ã¯æ—¢å­˜ã®æ§‹é€ ã‚’è¸è¥²ã—ã¤ã¤ã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’æ¸›ã‚‰ã™ãŸã‚ã®åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¤œè¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### 2. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®åˆ©ç”¨

`AppRootRouterDependencyMock`ã®`create`ãƒ¡ã‚½ãƒƒãƒ‰ã«ãŠã„ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã‚’ã•ã‚‰ã«æ‹¡å¼µã—ã¦ã€ä¾å­˜é–¢ä¿‚ã®æ³¨å…¥ã«ãŠã„ã¦ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€`AppRootRouter`ã®ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã«ãŠã„ã¦ã€`dependency`ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ä½¿ç”¨ã™ã‚‹éš›ã®è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### 3. ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ã®åˆ©ç”¨

`AppRootRouter`ãŒè¤‡æ•°ã®ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã™ã‚‹è²¬å‹™ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®è²¬å‹™ã‚’åˆ†å‰²ã—ã¦ã€å„ãƒ“ãƒ¥ãƒ¼ã®ä½œæˆã‚’å°‚é–€ã¨ã™ã‚‹å°ã•ãªã‚¯ãƒ©ã‚¹ã‚„æ§‹é€ ä½“ã«å§”è­²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`AppRootRouter`ã®è²¬å‹™ã‚’ã‚ˆã‚Šæ˜ç¢ºã«ã—ã€ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### 4. ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã®åˆ©ç”¨

Swiftã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`AppRootWireframe`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€`AppRootRouter`ã®å®Ÿè£…ã®ä¸€éƒ¨ã‚’ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã«ç§»å‹•ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åŒã˜ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ¡ç”¨ã™ã‚‹ä»–ã®ã‚¯ãƒ©ã‚¹ã‚„æ§‹é€ ä½“ã§ã‚‚ã€ã“ã‚Œã‚‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã‚’å†åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### 5. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®åˆ©ç”¨

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¤§ãããªã‚‹ã¨ã€ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã®é‡ãŒå¢—åŠ ã™ã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã€Sourceryã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã€è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ææ¡ˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…·ä½“çš„ãªè¦ä»¶ã‚„åˆ¶ç´„ã«å¿œã˜ã¦é©ç”¨å¯èƒ½ã§ã™ã€‚æœ€é©ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã€ãƒãƒ¼ãƒ ã®å¥½ã¿ã€ãŠã‚ˆã³æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®æ§‹é€ ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/3/1 21:32:43*

AppRootRouter(dependency: AppRootRouterDependencyMock.empty) = AppRootRouter.empty ã®ã‚ˆã†ã«ã§ããªã„ã®ã‹ï¼Ÿ

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
*2024/3/1 21:34:28*

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ

Cannot convert return expression of type 'AppRootRouter&lt;Dependency&gt;' to return type 'AppRootRouter&lt;AppRootRouterDependencyMock&gt;'
Cannot convert value of type 'AppRootRouterDependencyMock' to expected argument type 'Dependency'

extension AppRootRouter {
    static var empty: AppRootRouter&lt;AppRootRouterDependencyMock&gt; {
        return AppRootRouter(dependency: AppRootRouterDependencyMock.empty)
    }
}

---

## ğŸ¤– ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
*2024/3/1 21:35:11*

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«åŸºã¥ã„ã¦ã€`AppRootRouter`ã®`empty`é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å®Ÿè£…ã—ã‚ˆã†ã¨ã—ãŸéš›ã«å‹é–¢é€£ã®å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚`AppRootRouter`ã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã§ã‚ã‚Šã€ãã®ä¾å­˜æ€§`Dependency`ã«ã¯`AppRootRouterDependency`ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æº€ãŸã™ä»»æ„ã®å‹ãŒæ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€`empty`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ç‰¹å®šã®ä¾å­˜æ€§`AppRootRouterDependencyMock`ã‚’æŒã¤`AppRootRouter`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ãã†ã¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€`AppRootRouter`ã®å®šç¾©ãŒã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã§ã‚ã‚‹ãŸã‚ã€ç‰¹å®šã®å‹ã«å¯¾ã™ã‚‹é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã™ã‚‹éš›ã«å‹ã®ä¸ä¸€è‡´ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã¯ã€`AppRootRouter`ã®æ‹¡å¼µã‚’ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åˆ¶ç´„ã‚’ç”¨ã„ã¦ç‰¹å®šã®`Dependency`å‹ã«é™å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€Swiftã§ã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã—ã¦ã€ãã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€`AppRootRouter<Dependency>`ã®ã‚ˆã†ãªã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã«å¯¾ã—ã¦ã€`Dependency`ãŒ`AppRootRouterDependencyMock`ã§ã‚ã‚‹å ´åˆã®ã¿é©ç”¨ã•ã‚Œã‚‹é™çš„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç›´æ¥å®šç¾©ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€`AppRootRouter`ã®éã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãªã‚µãƒ–ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€ã“ã®å•é¡Œã‚’å›é¿ã§ãã¾ã™ã€‚ã“ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¯`AppRootRouterDependencyMock`ã‚’ä¾å­˜æ€§ã¨ã—ã¦ä½¿ç”¨ã—ã€`empty`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æä¾›ã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ãã®ä¸€ä¾‹ã§ã™ï¼š

```swift
// AppRootRouterã®ãŸã‚ã®ç‰¹å®šã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã‚’å®šç¾©
extension AppRootRouter where Dependency == AppRootRouterDependencyMock {
    static var empty: AppRootRouter<AppRootRouterDependencyMock> {
        return AppRootRouter<AppRootRouterDependencyMock>(dependency: .empty)
    }
}
```

ã“ã®æ–¹æ³•ã§ã¯ã€`AppRootRouter`ã®æ‹¡å¼µå†…ã§`Dependency`ã®å‹ã‚’`AppRootRouterDependencyMock`ã«é™å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`empty`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯`AppRootRouterDependencyMock`ã‚’ä¾å­˜æ€§ã¨ã—ã¦æŒã¤`AppRootRouter`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€`AppRootRouter`ã®ä½¿ç”¨æ³•ã‚’æŸ”è»Ÿã«ä¿ã¡ã¤ã¤ã€ç‰¹å®šã®ä¾å­˜æ€§ã‚’æŒã¤ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç°¡å˜ã«ç”Ÿæˆã§ãã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã®æ–¹æ³•ã¯`AppRootRouter`ãŒ`AppRootRouterDependencyMock`ã«ä¾å­˜ã™ã‚‹ç‰¹å®šã®ã‚·ãƒŠãƒªã‚ªã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

---
