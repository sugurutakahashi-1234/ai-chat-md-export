# AIによるPRレビュー

日付: 2024-11-14

---

## 👤 ユーザー
*2024/11/14 22:18:34*

GitHub の自分が持っているprivateリポジトリの PR を AI でレビューして欲しい

やって欲しいことはPRの要約と改善点の提示である。

現在、個人プランで Copilotを課金しているのと ChatGPTも個人で課金している。

---

## 🤖 アシスタント
*2024/11/14 22:18:47*

GitHubのプライベートリポジトリにおけるPull Request（PR）の要約作成と改善点の提示をAIで自動化するには、以下の方法があります。

**1. GitHub Copilotを活用する方法**

GitHub Copilotは、コード補完だけでなく、PRの要約作成やコードレビューにも対応しています。個人プランでCopilotを利用中であれば、以下の手順でPRの要約を生成できます。

- **PRの要約作成**:
  1. GitHub上で新しいPRを作成する際、説明欄に移動します。
  2. 説明欄の上部に表示されるCopilotのアイコンをクリックし、「概要」を選択します。
  3. Copilotが自動的にPRの変更内容を解析し、要約を生成します。

詳細な手順については、GitHubの公式ドキュメントをご参照ください。 citeturn0search2

**2. ChatGPTを活用する方法**

ChatGPTを利用してPRの要約や改善点の提示を行うには、以下の手順を検討できます。

- **PRの要約作成**:
  1. PRの変更内容（diff）を取得します。
  2. ChatGPTに対して、取得したdiffを入力し、「この変更内容の要約を作成してください」と指示します。
  3. ChatGPTが変更内容を解析し、要約を生成します。

- **改善点の提示**:
  1. 同様に、PRのdiffをChatGPTに入力します。
  2. 「この変更内容に対する改善点を提案してください」と指示します。
  3. ChatGPTがコードを解析し、改善点を提示します。

これらの手順を自動化するために、GitHub ActionsとChatGPT APIを組み合わせて、PRが作成されるたびに自動的に要約と改善点を生成し、PRにコメントとして追加するワークフローを構築することも可能です。 citeturn0search3

**注意点**

- **セキュリティとプライバシー**: プライベートリポジトリのコードを外部サービスに送信する際は、情報漏洩のリスクを考慮し、適切な対策を講じてください。
- **AIの限界**: AIによるレビューは補助的なものであり、最終的な判断は人間のレビューアが行うことが望ましいです。

これらの方法を活用することで、PRの要約作成と改善点の提示を効率化できます。

---

## 👤 ユーザー
*2024/11/14 22:19:15*

できれば Github Actions で自動化したい

---

## 🤖 アシスタント
*2024/11/14 22:19:26*

GitHubのプライベートリポジトリにおけるPull Request（PR）の要約作成と改善点の提示を自動化するには、GitHub ActionsとChatGPTを組み合わせる方法が効果的です。以下に具体的な手順を説明します。

**1. OpenAI APIキーの取得**

まず、ChatGPTを利用するためにOpenAIのAPIキーを取得します。既にChatGPTを個人で課金している場合、OpenAIのダッシュボードからAPIキーを生成できます。

**2. GitHubリポジトリへのシークレット設定**

取得したAPIキーをGitHubリポジトリのシークレットに登録します。

1. リポジトリの「Settings」タブを開きます。
2. 左側のメニューから「Secrets and variables」→「Actions」を選択します。
3. 「New repository secret」をクリックし、名前を`OPENAI_API_KEY`、値に取得したAPIキーを入力して保存します。

**3. GitHub Actionsワークフローの作成**

次に、PRの作成や更新時に自動的にChatGPTを呼び出し、要約と改善点をコメントするワークフローを設定します。以下はその例です。

```yaml
name: PR Review with ChatGPT

on:
  pull_request:
    types: [opened, reopened, synchronize]

jobs:
  chatgpt_review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run ChatGPT PR Review
        uses: agogear/chatgpt-pr-review@0.0.11
        with:
          openai_api_key: ${{ secrets.OPENAI_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          github_pr_id: ${{ github.event.number }}
```

このワークフローは、PRが作成、再オープン、または更新された際にトリガーされ、ChatGPTを利用してPRの要約と改善点を自動的にコメントします。`agogear/chatgpt-pr-review`アクションは、変更されたファイルの内容をChatGPTに送信し、レビューコメントを生成します。 citeturn0search11

**4. ワークフローの配置**

上記のYAMLファイルをリポジトリ内の`.github/workflows/`ディレクトリに配置します。ファイル名は任意ですが、`pr-review.yml`などとすると分かりやすいでしょう。

**5. 注意点**

- **コスト管理**: ChatGPTのAPI利用にはコストが発生します。頻繁にPRが作成・更新される場合、API利用料が増加する可能性があるため、適切なモニタリングと管理が必要です。
- **セキュリティ**: プライベートリポジトリのコードを外部サービスに送信する際は、情報漏洩のリスクを考慮し、適切な対策を講じてください。
- **AIの限界**: AIによるレビューは補助的なものであり、最終的な判断は人間のレビューアが行うことが望ましいです。

これらの手順を実施することで、GitHub Actionsを活用してPRの要約作成と改善点の提示を自動化できます。

---

## 👤 ユーザー
*2024/11/14 22:21:59*

ほかの

---
