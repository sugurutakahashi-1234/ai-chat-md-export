# Swift コメント抽出。

Date: 2024-05-07

---

## 👤 User
*2024-05-07 19:13:46*

Swiftでコードコメントを取得する方法ってあるの？

---

## 🤖 Assistant
*2024-05-07 19:14:27*

Swiftのコードからコメントを抽出する方法はいくつかありますが、多くの場合はソースコードを解析してコメントを特定する必要があります。簡単な方法の一つとして、正規表現を使用するアプローチが考えられます。これは、Swiftのソースファイルを読み込み、コメントを含む行を抽出するスクリプトを書くことで実現できます。

以下に、Swiftのソースファイルから単一行コメント（`//`で始まるコメント）と複数行コメント（`/*`で始まり`*/`で終わるコメント）を抽出する基本的な例を示します：

```swift
import Foundation

let filePath = "/path/to/your/swift/file.swift"
let content = try! String(contentsOfFile: filePath, encoding: .utf8)

// 単一行コメントの抽出
let singleLineComments = content.components(separatedBy: .newlines)
                                .filter { $0.trimmingCharacters(in: .whitespaces).hasPrefix("//") }

// 複数行コメントの抽出
let multiLineCommentPattern = "/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/"
let regex = try! NSRegularExpression(pattern: multiLineCommentPattern, options: [])
let multiLineComments = regex.matches(in: content, options: [], range: NSRange(content.startIndex..., in: content))
                              .map { String(content[Range($0.range, in: content)!]) }

print("Single Line Comments:")
singleLineComments.forEach { print($0) }

print("\nMulti Line Comments:")
multiLineComments.forEach { print($0) }
```

このスクリプトは、指定されたSwiftファイルのパスからファイルを読み込み、単一行コメントと複数行コメントを抽出して出力します。ただし、この方法は完全な解析ではなく、特にコメントが文字列リテラルの中にある場合など、誤った結果を返す可能性があります。より正確な解析を求める場合は、Swiftのパーサーを使用するライブラリやツールを利用することを検討してください。

---

## 👤 User
*2024-05-07 19:14:56*

それに近いんだけど、以下のようなenumの値からコメントだけを取得したいんだ。


extension AVAudioSession.Mode {

    /** The default mode */
    @available(iOS 5.0, *)
    public static let `default`: AVAudioSession.Mode

    /** Only valid with AVAudioSessionCategoryPlayAndRecord.  Appropriate for Voice over IP
     (VoIP) applications.  Reduces the number of allowable audio routes to be only those
     that are appropriate for VoIP applications and may engage appropriate system-supplied
     signal processing.  Has the side effect of setting AVAudioSessionCategoryOptionAllowBluetooth */
    @available(iOS 5.0, *)
    public static let voiceChat: AVAudioSession.Mode

    /** Set by Game Kit on behalf of an application that uses a GKVoiceChat object; valid
     only with the AVAudioSessionCategoryPlayAndRecord category.
     Do not set this mode directly. If you need similar behavior and are not using
     a GKVoiceChat object, use AVAudioSessionModeVoiceChat instead. */
    @available(iOS 5.0, *)
    public static let gameChat: AVAudioSession.Mode

    /** Only valid with AVAudioSessionCategoryPlayAndRecord or AVAudioSessionCategoryRecord.
     Modifies the audio routing options and may engage appropriate system-supplied signal processing. */
    @available(iOS 5.0, *)
    public static let videoRecording: AVAudioSession.Mode

    /** Appropriate for applications that wish to minimize the effect of system-supplied signal
     processing for input and/or output audio signals.
     This mode disables some dynamics processing on input and output resulting in a lower output playback level. */
    @available(iOS 5.0, *)
    public static let measurement: AVAudioSession.Mode

    /** Engages appropriate output signal processing for movie playback scenarios.  Currently
     only applied during playback over built-in speaker. */
    @available(iOS 6.0, *)
    public static let moviePlayback: AVAudioSession.Mode

    /** Only valid with kAudioSessionCategory_PlayAndRecord. Reduces the number of allowable audio
     routes to be only those that are appropriate for video chat applications. May engage appropriate
     system-supplied signal processing.  Has the side effect of setting
     AVAudioSessionCategoryOptionAllowBluetooth and AVAudioSessionCategoryOptionDefaultToSpeaker. */
    @available(iOS 7.0, *)
    public static let videoChat: AVAudioSession.Mode

    /** Appropriate for applications which play spoken audio and wish to be paused (via audio session interruption) rather than ducked
     if another app (such as a navigation app) plays a spoken audio prompt.  Examples of apps that would use this are podcast players and
     audio books.  For more information, see the related category option AVAudioSessionCategoryOptionInterruptSpokenAudioAndMixWithOthers. */
    @available(iOS 9.0, *)
    public static let spokenAudio: AVAudioSession.Mode

    /** Appropriate for applications which play audio using text to speech. Setting this mode allows for different routing behaviors when
     connected to certain audio devices such as CarPlay. An example of an app that would use this mode is a turn by turn navigation app that
     plays short prompts to the user. Typically, these same types of applications would also configure their session to use
     AVAudioSessionCategoryOptionDuckOthers and AVAudioSessionCategoryOptionInterruptSpokenAudioAndMixWithOthers */
    @available(iOS 12.0, *)
    public static let voicePrompt: AVAudioSession.Mode
}

---

## 🤖 Assistant
*2024-05-07 19:15:22*

Swiftのソースコードから特定のenumの値に対するコメントを抽出するには、正規表現を使用して解析する方法が効果的です。以下は、Swiftコード内で定義されたenumの各値とその説明コメントを抽出するスクリプトの例です。この例では、enumの名前や属性などの詳細を無視し、コメントと値だけに焦点を当てています。

```swift
import Foundation

let enumContent = """
extension AVAudioSession.Mode {

    /** The default mode */
    @available(iOS 5.0, *)
    public static let `default`: AVAudioSession.Mode

    /** Only valid with AVAudioSessionCategoryPlayAndRecord.  Appropriate for Voice over IP
     (VoIP) applications.  Reduces the number of allowable audio routes to be only those
     that are appropriate for VoIP applications and may engage appropriate system-supplied
     signal processing.  Has the side effect of setting AVAudioSessionCategoryOptionAllowBluetooth */
    @available(iOS 5.0, *)
    public static let voiceChat: AVAudioSession.Mode

    // Other enum cases omitted for brevity
}
"""

// 正規表現パターンを設定します。これにより、ドキュメント形式のコメントとenumの値を抽出

---
