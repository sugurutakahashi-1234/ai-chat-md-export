# 戻るボタン表示条件

日付: 2024-12-20

---

## 👤 ユーザー
*2024/12/20 16:06:10*

この画面の戻るボタンはShowSpotListNotifierがtrueの時のみに表示して欲しい

leading: IconButton(
          icon: const Icon(Icons.arrow_back),
          onPressed: () {
            Navigator.pop(context);
          },
        ),


import 'package:riverpod_annotation/riverpod_annotation.dart';

part 'show_spot_list.g.dart';

@riverpod
class ShowSpotListNotifier extends _$ShowSpotListNotifier {
  @override
  bool build() =&gt; false;

  void show() =&gt; state = true;
  void hide() =&gt; state = false;
}

import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/screen.dart';

class OurSpotDetailPage extends HookConsumerWidget {
  const OurSpotDetailPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(
        leading: IconButton(
          icon: const Icon(Icons.arrow_back),
          onPressed: () {
            Navigator.pop(context);
          },
        ),
        title: const Text('Our spot'),
        actions: [
          IconButton(
            icon: const Icon(Icons.close),
            onPressed: () {
              // ボトムシート全体を閉じる
              Navigator.of(context, rootNavigator: true).pop();
            },
          ),
        ],
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            context.push(Screen.flagList.path);
          },
          child: const Text('No flag'),
        ),
      ),
    );
  }
}

---

## 🤖 アシスタント
*2024/12/20 16:06:21*

`OurSpotDetailPage` の戻るボタンを `ShowSpotListNotifier` が `true` の場合のみに表示するように修正するには、以下のように `HookConsumerWidget` を使用して `ShowSpotListNotifier` の状態を監視し、条件に応じてボタンを表示するようにします。

修正版のコードは以下の通りです。

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';
import 'package:snpit_guild_app/domain/screen.dart';
import 'package:snpit_guild_app/notifiers/show_spot_list.dart'; // ShowSpotListNotifier のインポート

class OurSpotDetailPage extends HookConsumerWidget {
  const OurSpotDetailPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final showSpotList = ref.watch(showSpotListNotifierProvider);

    return Scaffold(
      appBar: AppBar(
        leading: showSpotList
            ? IconButton(
                icon: const Icon(Icons.arrow_back),
                onPressed: () {
                  Navigator.pop(context);
                },
              )
            : null, // showSpotList が false の場合は leading を null にする
        title: const Text('Our spot'),
        actions: [
          IconButton(
            icon: const Icon(Icons.close),
            onPressed: () {
              // ボトムシート全体を閉じる
              Navigator.of(context, rootNavigator: true).pop();
            },
          ),
        ],
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            context.push(Screen.flagList.path);
          },
          child: const Text('No flag'),
        ),
      ),
    );
  }
}
```

### 修正ポイント

1. **`ref.watch` を使用**  
   `showSpotListNotifierProvider` の現在の状態を監視します。

2. **`leading` の条件分岐**  
   `showSpotList` が `true` の場合のみ `IconButton` を表示し、`false` の場合は `null` を設定します。

3. **`ShowSpotListNotifier` のインポート**  
   必要に応じて `show_spot_list.dart` を適切な場所からインポートしてください。

これで `ShowSpotListNotifier` が `true` の場合のみ戻るボタンが表示されるようになります。

---
