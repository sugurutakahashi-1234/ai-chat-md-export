# Dependency Graphs

This directory contains various dependency graphs for understanding the project structure.

## Quick Start

For newcomers to the codebase:
1. **Start with [`layers.md`](./layers.md)** - See the high-level architecture layers
2. **Then check [`flow.md`](./flow.md)** - Understand the execution flow from CLI
3. **Finally explore [`prod.md`](./prod.md)** - Dive into complete production code structure

For specific purposes, see the table below.

## Available Graphs

| File                               | Purpose                                       | When to Use                                                   |
| ---------------------------------- | --------------------------------------------- | ------------------------------------------------------------- |
| [`prod.md`](./prod.md)             | Production code dependencies (excludes tests) | Default view for understanding the complete project structure |
| [`with-tests.md`](./with-tests.md) | All dependencies including test files         | Checking test coverage and understanding test dependencies    |
| [`layers.md`](./layers.md)         | Abstract layer-to-layer view                  | Verifying clean architecture principles and layer boundaries  |
| [`flow.md`](./flow.md)             | Simplified entry point flow                   | Understanding the execution flow from CLI without noise       |
| [`external.md`](./external.md)     | External library dependencies                 | Auditing third-party dependencies and their usage             |

## How to Generate

All dependency graphs are automatically generated by CI and pre-commit hooks when TypeScript files are modified.

```bash
# Generate all reports (runs in CI and pre-commit):
bun run update:docs:all              # knip report + all dependency graphs

# Generate only dependency graphs:
bun run update:docs:deps-graph:all   # all 5 dependency graphs

# Generate specific graphs:
bun run update:docs:deps-graph:prod      # prod.md
bun run update:docs:deps-graph:test      # with-tests.md
bun run update:docs:deps-graph:layers    # layers.md
bun run update:docs:deps-graph:flow      # flow.md
bun run update:docs:deps-graph:external  # external.md
```

## Understanding the Graphs

All graphs are generated using [typescript-graph](https://github.com/ysk8hori/typescript-graph) and rendered as Mermaid diagrams.

- **Nodes**: TypeScript files or directories (when abstracted)
- **Arrows**: Import dependencies (A â†’ B means A imports from B)
- **Subgraphs**: Directory structure